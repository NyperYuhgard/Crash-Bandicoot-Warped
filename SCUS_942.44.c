/* This file was generated by the Hex-Rays decompiler version 9.1.0.250226.
   Copyright (c) 2007-2021 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

int __fastcall sub_8001101C(int a1);
int __fastcall sub_80011110(int a1, int a2);
int __fastcall sub_800112B8(_DWORD *a1, unsigned int a2);
int sub_800112F8();
int __fastcall sub_8001152C(int a1);
int __fastcall sub_80011540(int a1, int a2);
int __fastcall main(int argc, const char **argv, const char **envp);
void __fastcall __noreturn sub_8001166C(int a1);
void *sub_80011F68();
void nullsub_1();
void nullsub_2();
void nullsub_6();
int *__fastcall sub_80011FD0(unsigned int a1);
int *__fastcall sub_80012054(int a1);
int __fastcall sub_800120AC(unsigned __int8 *a1);
int __fastcall sub_80012144(unsigned int a1);
int __fastcall sub_80012224(int a1);
int *sub_80012288();
int *sub_80012294();
int __fastcall sub_800122A0(unsigned int *a1);
int __fastcall sub_800122E4(int a1, int a2);
int __fastcall sub_800123F4(int a1, int a2);
int __fastcall sub_8001242C(_DWORD *a1, int a2, int a3);
int __fastcall sub_80012588(int a1);
int __fastcall sub_80012634(unsigned int *a1, int a2);
int __fastcall sub_800126D0(int a1);
int __fastcall sub_80012B00(int a1);
int __fastcall sub_80012CBC(int a1, int a2);
int __fastcall sub_80012EAC(int a1, int a2);
int __fastcall sub_80012F7C(int a1);
int __fastcall sub_80013000(int a1);
int __fastcall sub_80013050(int a1, int a2);
BOOL __fastcall sub_80013158(int a1, int a2);
int __fastcall sub_800131B0(int a1);
int __fastcall sub_800131CC(int a1);
int __fastcall sub_800132F8(int a1, int a2);
int __fastcall sub_800137AC(int *a1, int a2);
int sub_8001395C();
int __fastcall sub_80013A30(int a1);
int __fastcall sub_80013B00(int a1, int a2);
int __fastcall sub_80013B8C(int a1, int a2);
_WORD *__fastcall sub_80013C54(int a1, int a2, char a3, char a4);
int __fastcall sub_80013D04(int a1, int a2, int a3, int *a4, int a5);
int __fastcall sub_80013E64(int a1);
int __fastcall sub_80013ECC(int a1);
int __fastcall sub_80013EFC(int a1);
_DWORD *__fastcall sub_80013F74(int a1);
_WORD *__fastcall sub_80013FA8(int a1, int a2, char a3, char a4);
int __fastcall sub_80014024(int a1, char a2, char a3, int a4);
int __fastcall sub_800140C0(int a1, int a2);
int *__fastcall sub_8001418C(int a1);
int __fastcall sub_80014268(int a1);
int __fastcall sub_800142B4(unsigned int *a1, char a2, int a3);
int __fastcall sub_8001439C(int *a1, int a2);
int __fastcall sub_8001440C(unsigned int *a1, int a2);
int sub_80014468();
int sub_800145A0();
int __fastcall sub_80014650(int a1);
int __fastcall sub_80014788(int a1);
int __fastcall sub_800148F8(int a1, int a2);
int __fastcall sub_80014B04(unsigned int a1);
int __fastcall sub_80014B50(unsigned int a1);
int __fastcall sub_80014BC8(_DWORD *a1, int a2);
int __fastcall sub_80015110(_DWORD *a1);
BOOL __fastcall sub_80015230(int a1, int a2, int a3, int a4, int a5);
int *__fastcall sub_80015414(int a1);
int __fastcall sub_80015468(int a1, int a2);
int sub_8001549C();
unsigned __int64 sub_800154AC();
int sub_80015658();
int __fastcall sub_800156E0(int a1);
int sub_80015798();
int sub_80016048();
int sub_800160D8();
int __fastcall sub_80016234(int a1);
int sub_800163F8();
int sub_80016544();
int __fastcall sub_800165F8(_DWORD *a1);
int __fastcall sub_8001660C(_DWORD *a1);
int *__fastcall sub_80016634(int a1);
int __fastcall sub_80016CE4(__int16 a1, __int16 a2, __int16 a3, __int16 a4, char a5, char a6, char a7);
int __fastcall sub_80016D8C(__int16 a1);
int *__fastcall sub_80017204(int a1);
int __fastcall sub_8001742C(int a1, int a2, int a3);
int __fastcall sub_800176A0(unsigned int a1);
int __fastcall sub_80017834(int a1, int a2);
void nullsub_7();
int sub_80017AD0(); // weak
int __fastcall sub_80017AE8(int a1);
int sub_80017C88();
int __fastcall sub_80017CA8(int a1, int a2, int a3);
int sub_80017FF8();
int __fastcall sub_80018008(int a1, int a2, int a3);
int __fastcall sub_80018048(int a1, int a2, int a3);
int __fastcall sub_80018088(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
int __fastcall sub_800181E0(int a1, int a2);
int __fastcall sub_800182B4(int a1);
int __fastcall sub_800182DC(int a1);
int __fastcall sub_80018304(int a1);
int __fastcall sub_8001832C(int a1, unsigned __int8 *a2, int a3, unsigned __int16 *a4);
int __fastcall sub_800186D8(int a1, int a2, _BYTE *a3, char *a4, int a5);
int __fastcall sub_80018820(int a1, unsigned __int8 *a2, int a3, char *a4, char *a5, int a6);
int *sub_800188EC();
int __fastcall sub_80018988(int a1, int a2);
int sub_80018A54();
int __fastcall sub_80018DA8(_DWORD *a1);
int __fastcall sub_80018DD4(_DWORD *a1, __int16 *a2, int *a3);
int __fastcall sub_80018EBC(int *a1);
int __fastcall sub_80019090(int a1, int a2);
int __fastcall sub_800192F8(__int16 *a1, unsigned __int8 *a2, int a3, int a4, unsigned __int16 *a5, unsigned int a6, int a7, int a8);
int sub_80019624();
int __fastcall sub_8001962C(int a1, _DWORD *a2);
int __fastcall sub_8001970C(_DWORD *a1, int (__fastcall *a2)(_DWORD *, int), int a3);
int __fastcall sub_800197B0(_DWORD *a1, int (__fastcall *a2)(_DWORD, _DWORD), int a3);
int __fastcall sub_80019844(_DWORD *a1, int (__fastcall *a2)(_DWORD *, int), int a3);
int __fastcall sub_80019900(_DWORD *a1, int (__fastcall *a2)(_DWORD *, int), int a3);
int __fastcall sub_8001997C(_DWORD *a1, int (__fastcall *a2)(_DWORD, _DWORD), int a3);
BOOL __fastcall sub_80019A38(void (__fastcall *a1)(char *, int, int), int a2, int a3);
int __fastcall sub_80019AAC(int a1, int a2);
int __fastcall sub_80019ACC(_DWORD *a1, _DWORD *a2);
int sub_80019CC0(); // weak
int __fastcall sub_80019CE4(int a1, int a2);
int __fastcall sub_8001A42C(_DWORD *a1, int a2, int a3, int a4, _DWORD *a5, int a6);
int __fastcall sub_8001A5C8(_DWORD *a1, int a2, int a3, int a4, _DWORD *a5, int a6);
int __fastcall sub_8001A844(_DWORD *a1, int a2);
int __fastcall sub_8001A9A8(_DWORD *a1, int a2);
int __fastcall sub_8001AA78(_DWORD *a1);
BOOL __fastcall sub_8001AA98(int a1);
int sub_8001AAC8();
int sub_8001AB64();
int __fastcall sub_8001ABF8(int a1);
BOOL sub_8001AC74();
_DWORD *__fastcall sub_8001ACAC(int a1, int a2, int a3);
unsigned __int8 *__fastcall sub_8001AD68(int a1, int a2, int a3);
int __fastcall sub_8001AE64(int a1, int a2);
int __fastcall sub_8001B0BC(int a1, int *a2);
int __fastcall sub_8001B328(_DWORD *a1, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __fastcall sub_8001B524(int a1, _DWORD *a2, _DWORD *a3);
int __fastcall sub_8001B630(int a1, int *a2);
unsigned int __fastcall sub_8001B7A0(int a1, _DWORD *a2);
int __fastcall sub_8001C3F8(int a1, _BYTE *a2, int a3, int a4, int a5, char a6, unsigned int a7);
int __fastcall sub_8001C824(int a1, int a2, int a3, unsigned int a4, int a5);
void __fastcall sub_8001CA60(int a1);
int __fastcall sub_8001CA68(int *a1);
int __fastcall sub_8001CD28(int a1, int a2, int a3);
int __fastcall sub_8001CD80(int a1, _DWORD *a2, _DWORD *a3, int a4);
_UNKNOWN **sub_8001D16C();
void __fastcall sub_8001D2D4(int a1, int a2, int a3, _DWORD *a4);
int __fastcall sub_8001D588(char *a1, int a2, int a3);
int __fastcall sub_8001D5E8(_DWORD *a1, unsigned int *a2);
void __fastcall sub_8001D674(int a1, int a2);
void __fastcall sub_8001DB38(int a1, int a2, int a3, int a4, _DWORD *a5);
int __fastcall sub_8001DDF4(int a1, int *a2);
int __fastcall sub_8001E34C(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_8001E3BC(int a1, _DWORD *a2, int a3, int a4, int a5, int a6);
void __fastcall sub_8001E42C(int a1, __int16 a2, int a3, _DWORD *a4);
int __fastcall sub_8001E4BC(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __fastcall sub_8001E78C(_DWORD *a1, _DWORD *a2, int *a3);
int __fastcall sub_8001FAC8(int a1, int a2, int a3, int a4);
int __fastcall sub_8001FC40(int a1, int a2, int a3, int a4);
int __fastcall sub_8001FD08(int a1, int a2, int a3);
int __fastcall sub_8001FD58(__int16 a1, int a2, int a3);
int *__fastcall sub_8001FE98(int a1, int a2, int *a3);
int __fastcall sub_8001FFF0(int *a1, _DWORD *a2, int a3, int *a4, int a5, _DWORD *a6);
int __fastcall sub_800200C8(_DWORD *a1, int a2, int *a3, _DWORD *a4);
int __fastcall sub_80020184(_DWORD *a1, int *a2);
int __fastcall sub_800202CC(int *a1, _DWORD *a2);
int __fastcall sub_800203A4(int *a1, _DWORD *a2);
int sub_8002049C();
int sub_800205F4();
int sub_80020638();
int __fastcall sub_80020670(_DWORD *a1, int a2, int *a3);
int __fastcall sub_80020F04(int a1);
int __fastcall sub_80020F68(int a1);
int __fastcall sub_80021008(int a1);
int sub_80021084();
int __fastcall sub_80021330(int a1);
int __fastcall sub_80021474(int a1);
int __fastcall sub_800214B8(int a1, int a2);
int __fastcall sub_80021530(int a1);
unsigned int __fastcall sub_8002157C(int a1);
int __fastcall sub_800215E8(int a1, int a2, int a3, char a4);
int __fastcall sub_80021E60(int a1, char a2);
int *sub_80021E94();
unsigned __int8 *__fastcall sub_80022C9C(int a1, int a2, int a3);
int __fastcall sub_80022DA0(int a1, _DWORD *a2, char a3, int a4);
int sub_80022EB4();
int __fastcall sub_80023170(int a1, int a2, unsigned int *a3);
int *__fastcall sub_800233DC(int *a1, int a2);
int *__fastcall sub_80023A94(int *a1, int a2);
int __fastcall sub_80023B68(int a1, unsigned int *a2, int a3);
int __fastcall sub_80023DBC(unsigned int *a1, int *a2, _DWORD *a3);
int sub_80023EBC();
int sub_80024124();
int __fastcall sub_80024330(int a1);
int __fastcall sub_8002437C(int a1);
int *__fastcall sub_8002444C(int *a1, int a2);
unsigned __int8 *__fastcall sub_80024590(int a1);
int *__fastcall sub_800246A0(int *a1, int a2);
int *__fastcall sub_800247DC(int *a1, int a2);
int *__fastcall sub_80024918(_DWORD *a1);
unsigned __int8 *__fastcall sub_80024AD4(int *a1);
int *__fastcall sub_80024E80(_DWORD *a1);
int __fastcall sub_80024F54(_DWORD *a1);
unsigned __int8 *__fastcall sub_80025070(int a1, int a2);
__int16 *sub_8002513C();
int *__fastcall sub_80025188(_DWORD *a1);
int __fastcall sub_800255BC(int *a1, int *a2, int a3);
BOOL sub_800256D4();
int __fastcall sub_800259A0(int *a1, int *a2, int *a3);
int sub_80025C0C();
int sub_80025C54();
int __fastcall sub_80025CE8(int *a1, int a2, int *a3, int a4);
int sub_80026018();
int sub_80026038();
int __fastcall sub_800260B4(int *a1, int a2, int *a3);
int __fastcall sub_80026140(unsigned int a1);
int __fastcall sub_8002616C(int *a1, _DWORD *a2, _DWORD *a3, _DWORD *a4, int *a5);
int __fastcall sub_80026464(int *a1, int *a2, int a3, int a4, __int16 a5, int a6);
int __fastcall sub_80026880(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7);
int __fastcall sub_8002697C(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7);
int __fastcall sub_8002719C(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7);
int __fastcall sub_80027298(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7);
int __fastcall sub_80027AB8(_DWORD *a1);
int __fastcall sub_80027D6C(int a1, int *a2);
int sub_80027E68();
int __fastcall sub_80027EC0(int *a1);
int __fastcall sub_800280A4(int a1);
int __fastcall sub_800281F8(_BYTE *a1, int a2);
int __fastcall sub_80028484(int *a1, _DWORD *a2);
int __fastcall sub_800284E8(int *a1, int *a2, int a3);
unsigned __int8 *__fastcall sub_80028740(int a1, int a2, _DWORD *a3, _DWORD *a4);
int sub_80028A78();
int __fastcall sub_80028D8C(int a1, int *a2);
int __fastcall sub_80028ED8(__int16 *a1, unsigned __int16 a2, int *a3, _DWORD *a4, int *a5, int a6);
int __fastcall sub_800296F8(int *a1, int *a2);
int __fastcall sub_80029B10(int a1, int a2, int a3);
int __fastcall sub_80029B5C(int a1, int *a2);
int __fastcall sub_80029BBC(int a1, int a2, int a3);
int __fastcall sub_80029C1C(int a1, int *a2);
int __fastcall sub_80029E40(int a1, int *a2);
int __fastcall sub_8002A22C(int a1, int *a2, char a3, int a4);
void __fastcall sub_8002A728(int a1);
int __fastcall sub_8002A7A8(_DWORD *a1, int a2, _DWORD *a3);
int __fastcall sub_8002A950(int a1, _DWORD *a2);
int sub_8002A97C();
int sub_8002A9DC();
unsigned __int16 *__fastcall sub_8002AA14(unsigned __int16 *a1, unsigned __int16 *a2, unsigned __int16 *a3, int a4);
void __fastcall sub_8002AA94(_DWORD *a1, int *a2, unsigned int *a3);
char *__fastcall sub_8002AF70(_DWORD *a1, unsigned int *a2, int *a3, int *a4);
BOOL __fastcall sub_8002B1CC(_DWORD *a1, int a2);
int __fastcall sub_8002B394(int a1, int a2, _DWORD *a3, unsigned int *a4, int a5, int a6);
int __fastcall sub_8002B4E8(_DWORD *a1, int a2, _DWORD *a3, _DWORD *a4);
int __fastcall sub_8002B838(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __fastcall sub_8002B9A4(_DWORD *a1, _DWORD *a2, int a3, int a4, int a5, int a6, _DWORD *a7);
int __fastcall sub_8002C230(_DWORD *a1, int a2, _DWORD *a3, unsigned int *a4, int *a5);
int __fastcall sub_8002C604(_DWORD *a1, int *a2, unsigned int *a3, int *a4, int a5);
void __fastcall sub_8002CAE4(_DWORD *a1, int a2, int *a3, unsigned int *a4);
int __fastcall sub_8002CD8C(_DWORD *a1, int *a2);
BOOL __fastcall sub_8002CEA8(_DWORD *a1, unsigned int *a2, int *a3, int *a4, _DWORD *a5);
int *__fastcall sub_8002D0E8(int a1, int a2, int a3);
int sub_8002D85C();
int *sub_8002D8C8();
int sub_8002D8E0();
int sub_8002D93C();
int __fastcall sub_8002D944(int a1, int a2, int a3);
int __fastcall sub_8002D990(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_8002DA74(_DWORD *a1, _DWORD *a2, int *a3, int a4);
int __fastcall sub_8002E4F0(int *a1, _DWORD *a2, _DWORD *a3, int a4, int a5);
int __fastcall sub_8002EC2C(int *a1, _DWORD *a2, _DWORD *a3, int a4);
int __fastcall sub_8002EDA8(unsigned int a1, unsigned int a2);
int __fastcall sub_8002EDF0(int a1, int a2, _DWORD *a3);
int __fastcall sub_8002F0F8(int *a1, unsigned int a2, unsigned int a3, unsigned int *a4, unsigned int *a5, _DWORD *a6, int a7);
int __fastcall sub_8002F4DC(_DWORD *a1, _DWORD *a2, int a3, int a4, int a5, int a6);
BOOL __fastcall sub_8002F678(int *a1);
_UNKNOWN **sub_8002FA1C();
int sub_8002FBD0();
int *sub_8002FC50();
int __fastcall sub_8002FCA0(int a1);
int __fastcall sub_8002FDC4(int a1);
int __fastcall sub_8002FF3C(int a1, _DWORD *a2, int a3, int a4);
int *__fastcall sub_800302AC(int a1, int a2, int a3, int a4);
int *__fastcall sub_80030388(_DWORD *a1);
int sub_80030780();
void nullsub_8();
int *Demo_Routine();
void nullsub_9();
int *sub_800307F4();
int *__fastcall sub_800308B8(unsigned int *a1);
int __fastcall sub_80030940(int *a1);
int __fastcall sub_80030A34(int *a1, int a2, __int16 a3, __int16 a4);
int __fastcall sub_80030AD8(int a1, int a2, _DWORD *a3);
int __fastcall sub_80030F88(int a1, int a2, _DWORD *a3);
BOOL __fastcall sub_8003116C(int *a1, int *a2);
int __fastcall sub_8003148C(_DWORD *a1, _DWORD *a2, __int16 *a3, _DWORD *a4);
BOOL __fastcall sub_800317C0(_DWORD *a1, int *a2);
BOOL __fastcall sub_80031868(int a1, int *a2);
BOOL __fastcall sub_8003188C(int *a1, int *a2);
BOOL __fastcall sub_8003191C(_DWORD *a1, _DWORD *a2);
BOOL __fastcall sub_800319B8(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031A54(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031B50(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031BD0(int a1, _DWORD *a2, _DWORD *a3, int a4, int a5, int a6);
int __fastcall sub_80031C74(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031CF0(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031D4C(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031DA8(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031DDC(_DWORD *a1, _DWORD *a2);
int __fastcall sub_80031E10(int a1, int a2, int a3);
int __fastcall sub_80031E34(int a1, int a2, int a3, int a4);
int __fastcall sub_80031E84(int *a1, _DWORD *a2, __int16 a3);
int __fastcall sub_80031F9C(int a1, int a2);
BOOL __fastcall sub_80031FB4(_DWORD *a1, _DWORD *a2);
void nullsub_10();
int sub_80032144();
void __fastcall sub_80032154(int a1);
int __fastcall sub_80032160(int a1);
int __fastcall sub_80032250(int a1, int a2);
BOOL __fastcall sub_80032268(int a1, int a2, int a3);
int sub_800322D0();
unsigned __int8 *__fastcall sub_80032710(int a1, int a2, int a3, int a4, _DWORD *a5, int a6, unsigned __int8 *a7, int a8, _DWORD *a9);
int __fastcall sub_80032DF8(int a1, int a2, int a3, int a4, _DWORD *a5, int a6, int a7);
int __fastcall sub_80032EDC(int a1, int a2, int a3, int a4);
void sub_80032F28();
void sub_80032F30();
void sub_80032F38();
void sub_80032F40();
void sub_80032F48();
void sub_80032F50();
void sub_80032F58();
void sub_80032F60();
void sub_80032F68();
void sub_80032F70();
void sub_80032F78();
void sub_80032F80();
void sub_80032F88();
void sub_80032F90();
void sub_80032F98();
void sub_80032FA0();
void sub_80032FA8();
void sub_80032FB0();
void sub_80032FB8();
void sub_80032FC0();
int __fastcall sub_80032FC8(__int16 a1);
int sub_80033000();
int sub_80033050();
void nullsub_11();
void nullsub_12();
int sub_8003315C();
int sub_80033238();
void __fastcall sub_80033280(__int16 a1);
int *__fastcall sub_8003328C(_DWORD *a1, int *a2, int a3);
BOOL __fastcall sub_800334D0(int a1);
int sub_8003359C();
unsigned int __fastcall sub_80033760(unsigned int *a1, unsigned int *a2);
int __fastcall sub_80033864(int a1, unsigned int *a2, int a3);
int __fastcall sub_80033C54(int a1, int a2, _DWORD *a3, int a4);
unsigned int __fastcall sub_800342B8(int a1);
BOOL sub_80034310();
int __fastcall sub_80034B00(int a1);
int sub_80034B8C();
int sub_80034C0C();
int __fastcall sub_80034C1C(int a1);
int __fastcall sub_80034D14(unsigned int *a1);
int sub_8003505C();
void __fastcall sub_80035078(unsigned int *a1);
int sub_800351EC();
int __fastcall sub_80035224(int a1, int a2, int a3);
int __fastcall sub_8003529C(__int16 a1, int a2);
int __fastcall sub_800352FC(__int16 *a1, int a2, int a3);
int __fastcall sub_80035410(_DWORD *a1, unsigned int a2);
int __fastcall sub_80035538(_DWORD *a1, unsigned int a2, int a3);
BOOL __fastcall sub_800356B8(unsigned int a1, int a2);
void nullsub_13();
int __fastcall sub_80035AC4(_DWORD *a1, unsigned int a2);
int __fastcall sub_80035BE0(_DWORD *a1, unsigned int a2);
void __fastcall sub_80035D08(int a1, unsigned int a2);
int __fastcall sub_80036B88(int a1, unsigned int a2);
void __fastcall sub_80037300(_DWORD *a1, unsigned int a2);
int __fastcall sub_800376F8(_DWORD *a1, unsigned int a2);
int __fastcall sub_8003780C(_DWORD *a1, unsigned int a2);
int __fastcall sub_800378F8(_DWORD *a1, unsigned int a2);
int __fastcall sub_80037A00(_DWORD *a1, unsigned int a2);
int __fastcall sub_80037AE4(_DWORD *a1, unsigned int a2);
void __fastcall sub_80037BEC(_DWORD *a1, unsigned int a2, char a3);
int __fastcall sub_80037CD8(_DWORD *a1, unsigned int a2, char a3);
int __fastcall sub_80037DAC(_DWORD *a1, unsigned int a2, char a3);
int __fastcall sub_80037EDC(_DWORD *a1, unsigned int a2, char a3);
int __fastcall sub_8003808C(_DWORD *a1, unsigned int a2, char a3);
int __fastcall sub_80038248(_DWORD *a1, unsigned int a2, char a3);
int __fastcall sub_800383DC(_DWORD *a1, unsigned int a2, int a3, int *a4);
int __fastcall sub_800385C0(_DWORD *a1, __int16 a2);
int __fastcall sub_8003864C(_DWORD *a1, __int16 a2);
int __fastcall sub_800386BC(_DWORD *a1, unsigned int a2);
int __fastcall sub_800387A8(_DWORD *a1, unsigned int a2);
int __fastcall sub_800388C8(_DWORD *a1, unsigned int a2);
int __fastcall sub_800389C8(_DWORD *a1, unsigned int a2);
int __fastcall sub_80038B40(int a1, int a2, int a3);
int __fastcall sub_80038C24(int a1);
int __fastcall sub_80038C94(int a1);
int __fastcall sub_80038D88(int a1);
int __fastcall sub_80038DB0(int a1);
void __fastcall sub_80038E28(int a1);
void __fastcall sub_800391F0(int a1, unsigned int a2);
int __fastcall sub_80039494(int a1, unsigned int a2);
void __fastcall sub_80039518(int a1, unsigned int a2);
int __fastcall sub_8003952C(int a1, unsigned int a2);
void __fastcall sub_800395CC(int a1, unsigned int a2);
int __fastcall sub_800395E0(int a1, unsigned int a2);
void __fastcall sub_80039684(int a1, unsigned int a2);
void sub_800397CC();
void __fastcall sub_80039828(int a1, unsigned int a2);
int __fastcall sub_80039E3C(unsigned __int16 *a1, unsigned __int16 *a2, _WORD *a3);
int __fastcall sub_8003A234(unsigned __int16 *a1, unsigned __int16 *a2, _WORD *a3);
void nullsub_4();
int __fastcall sub_8003A928(int a1, int a2, unsigned int a3);
void nullsub_5();
void __fastcall sub_8003AC44(unsigned int a1, unsigned int a2);
int sub_8003AE70();
int __fastcall sub_8003AE90(int a1, int a2);
int __fastcall sub_8003AEE8(int a1, int a2, int a3);
int __fastcall sub_8003AF78(int *a1, int *a2, _WORD *a3, int a4);
int __fastcall sub_8003B874(unsigned int *a1, int *a2, int a3, int (__fastcall *a4)(_DWORD), int a5, int a6, int a7, int a8);
int __fastcall sub_8003BBF0(int a1, int a2, int a3);
int __fastcall sub_8003BBFC(int a1, int a2, int a3, int a4);
int __fastcall sub_8003BD18(int a1, unsigned int *a2, int a3, int *a4, int a5, int a6, int a7, int (__fastcall *a8)(_DWORD));
int __fastcall sub_8003C04C(int a1, unsigned int *a2, int a3, int *a4, int *a5);
int __fastcall sub_8003C2F0(__int16 a1);
int __fastcall sub_8003C364(__int16 a1);
int __fastcall sub_8003C3D0(int *a1, _DWORD *a2, int a3, char a4, int *a5, int a6, int a7);
int __fastcall sub_8003C990(int a1, _DWORD *a2, char a3);
int __fastcall sub_8003CB24(int a1, int a2, int a3);
int sub_8003CE70(void); // weak
int __fastcall sub_8003CFA8(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8);
int sub_8003CFFC();
int sub_8003D054(void); // weak
int sub_8003D078(void); // weak
void sub_8003D0E4();
int sub_8003D0FC();
void __fastcall sub_8003D3AC(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24);
void sub_8003D470();
int __fastcall sub_8003D9DC(unsigned int a1);
int __fastcall sub_8003E000(int a1, int a2);
void sub_8003E034();
void __fastcall sub_8003E040(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, unsigned int a9);
void __fastcall sub_8003E078(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, unsigned int a9);
void __fastcall sub_8003E0B8(_DWORD *a1, int a2, int *a3, _DWORD *a4);
int __fastcall sub_8003E370(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24);
void sub_8003E39C();
int sub_8003E520(); // weak
int __fastcall sub_8003E67C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
void __fastcall sub_8003E754(_DWORD *a1, int a2, int *a3, _DWORD *a4);
int __fastcall sub_8003E8C8(int a1, int a2, int a3);
int __fastcall sub_8003EBE0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8);
int __fastcall sub_8003EC34(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8);
void __fastcall sub_8003F044(_DWORD *a1, int a2, int *a3, _DWORD *a4);
int sub_8003F2FC(int, int, int, int, int, int, int, int, int, int, int, int); // weak
int __fastcall sub_8003F3AC(_DWORD, _DWORD, _DWORD); // weak
void nullsub_3();
void __fastcall sub_8003F520(int a1, int *a2, int *a3, int *a4, int a5, char a6);
void __fastcall sub_8003F5D8(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int *a15, int *a16);
void __fastcall sub_8003F63C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int *a15, int *a16);
int __fastcall sub_8003F6AC(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, _DWORD *a13);
int __fastcall sub_8003F6D4(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, __int16 *a13, __int16 *a14);
void sub_8003F72C();
void sub_8003F740();
void sub_8003F754();
void sub_8003F770();
void sub_8003F780();
void sub_8003F79C();
int sub_8003F8A4();
int sub_8003F944();
int sub_8003FA00(); // weak
void sub_8003FA80();
int sub_8003FC18(); // weak
int sub_8003FC40(); // weak
int sub_8003FC50(); // weak
int __fastcall sub_800403AC(int a1, int a2, int a3);
void __fastcall sub_800407B8(int a1, int a2, int a3);
int __fastcall sub_8004081C(__int16 *a1);
int __fastcall sub_80040840(__int16 *a1);
int __fastcall sub_800408BC(__int16 *a1);
int sub_80040988();
void sub_800409B4();
int sub_800409E4();
int __fastcall sub_80040A9C(int a1, int a2, int a3);
void sub_80040BBC();
void __fastcall sub_80040BCC(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, _DWORD *a27);
void __fastcall sub_80040C20(_DWORD *a1, int a2, int *a3, _DWORD *a4);
void __fastcall sub_80040CD4(int a1, int a2, int a3, int a4, int a5, __int16 *a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20);
void __fastcall sub_80040ED8(int a1, int a2, _DWORD *a3, int a4);
void sub_80041550();
void sub_80041768();
int __fastcall sub_800418C4(unsigned int a1, int a2, int _$A2);
void sub_80041B7C();
int sub_80041C64(); // weak
int sub_80041E1C(); // weak
int sub_80041E58(); // weak
int sub_80041E88(); // weak
int __fastcall sub_80041EF0(int *a1);
int sub_80041F18();
void sub_80041FBC();
void sub_80041FD8();
void __fastcall sub_80042058(__int16 *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int a24, int a25, int a26, int a27, _DWORD *a28);
int __fastcall sub_800422A0(int a1);
int sub_80042648(); // weak
int sub_800428D0(); // weak
void __fastcall sub_80042C58(int a1);
unsigned int __fastcall sub_80043050(int a1, int a2, _DWORD *a3);
void __fastcall sub_80043310(int a1, int a2, _DWORD *a3);
int __fastcall sub_800435DC(int a1, _DWORD *a2);
void sub_800437A4();
int sub_80043A00();
void __fastcall sub_80043BE4(int a1, int a2);
int __fastcall sub_80043D6C(int a1, int a2);
int __fastcall sub_80043FFC(unsigned int a1, int a2, int *a3);
void sub_8004420C();
int sub_8004447C();
void __fastcall sub_80044674(int a1, int a2);
void __fastcall sub_80044878(int a1, int a2);
int __fastcall sub_80044CA0(int *a1, _DWORD *a2, int _$A2, int *a4);
int __fastcall sub_80044F74(char a1, __int16 a2, unsigned __int8 a3, __int16 a4);
void sub_800450D4();
int __fastcall sub_800452A0(unsigned int a1, int a2, _DWORD *a3);
int sub_800454D4();
int sub_80045750();
int sub_800457E8();
int sub_80045810();
int sub_80045838();
int sub_80045860();
int sub_80045870();
int sub_80045880();
char *sub_80045890();
BOOL __fastcall sub_800458A0(int a1);
int sub_8004590C();
int __fastcall sub_8004592C(int a1);
int __fastcall sub_800459AC(int a1);
int __fastcall sub_800459CC(int a1);
int __fastcall sub_800459EC(int a1);
int __fastcall sub_80045A04(int a1);
int __fastcall sub_80045A1C(unsigned __int8 a1, char *a2, int a3);
int __fastcall sub_80045B54(unsigned __int8 a1, char *a2);
BOOL __fastcall sub_80045C80(unsigned __int8 a1, char *a2, int a3);
// int __fastcall DsGetSector(_DWORD, _DWORD); weak
// int __fastcall DsGetSector2(_DWORD, _DWORD); weak
// int __fastcall DsDataSync(_DWORD); weak
// int __fastcall sub_80045E48(_DWORD); weak
// int __fastcall sub_80045E68(_DWORD, _DWORD); weak
// int __fastcall sub_80045F6C(_DWORD); weak
// int sub_80045FEC(void); weak
int __fastcall sub_80046574(int a1);
int __fastcall sub_800467F4(int a1);
int __fastcall sub_80046AC0(unsigned __int8 a1, char *a2, int a3, int a4);
int __fastcall sub_80046EDC(_BYTE *a1);
int sub_80046F64();
int sub_80047044();
int sub_80047138();
int sub_80047188();
int __fastcall sub_80047374(int a1);
int __fastcall sub_800474E0(int a1, int a2);
int __fastcall sub_800475E0(int a1, int a2);
int sub_800476E0();
int __fastcall sub_800477C4(char a1, int a2);
int sub_80047A94();
int __fastcall sub_80047B90(int a1);
int sub_80047DA4();
BOOL __fastcall sub_80047E40(int a1, int a2);
int sub_80047F44();
int __fastcall sub_80048010(int a1);
int __fastcall sub_80048028(int a1);
// void __fastcall __noreturn exit(_DWORD); weak
void sub_80048058();
// int __fastcall atoi(_DWORD); weak
// int __fastcall strncmp(_DWORD, _DWORD, _DWORD); weak
// int __fastcall strcpy(_DWORD, _DWORD); weak
// int __fastcall strlen(_DWORD); weak
// int __fastcall bcopy(_DWORD, _DWORD, _DWORD); weak
// int __fastcall memcpy(_DWORD, _DWORD, _DWORD); weak
// int __fastcall memset(_DWORD, _DWORD, _DWORD); weak
// int printf(const char *, ...); weak
int sub_80048120(int a1, unsigned __int8 *a2, ...);
// int __fastcall memchr(_DWORD, _DWORD, _DWORD); weak
char *__fastcall sub_8004898C(char *a1, char *a2, int a3);
// int __fastcall _main(_DWORD, _DWORD, _DWORD); weak
// int FlushCache(void); weak
// int bu_init(void); weak
void sub_80048BC0();
// int __fastcall DeliverEvent(_DWORD, _DWORD); weak
// int __fastcall OpenEvent(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall CloseEvent(_DWORD); weak
// int __fastcall EnableEvent(_DWORD); weak
// int __fastcall DisableEvent(_DWORD); weak
// int __fastcall EnterCriticalSection(_DWORD); weak
// int ExitCriticalSection(void); weak
// int __fastcall SetRCnt(_DWORD, _DWORD, _DWORD); weak
// int __fastcall StartRCnt(_DWORD); weak
// int __fastcall StopRCnt(_DWORD); weak
// int __fastcall ResetRCnt(_DWORD); weak
// int PadStartCom(void); weak
// int PadStopCom(void); weak
// int __fastcall sub_80048F00(_DWORD); weak
// int __fastcall sub_80048FC0(_DWORD, _DWORD, _DWORD); weak
int __fastcall sub_800490B8(int a1, int a2, int a3);
int __fastcall sub_8004918C(int a1, int a2, int a3);
// int __fastcall sub_80049234(_DWORD, _DWORD); weak
// int __fastcall sub_8004926C(_DWORD, _DWORD, _DWORD); weak
// int __fastcall sub_800492B4(_DWORD, _DWORD, _DWORD); weak
// int __fastcall sub_80049978(_DWORD); weak
// int __fastcall sub_80049C18(_DWORD, _DWORD); weak
// int __fastcall sub_80049C28(_DWORD, _DWORD); weak
// int __fastcall sub_80049C38(_DWORD, _DWORD); weak
// int __fastcall sub_80049CE8(_DWORD); weak
int __fastcall sub_8004A25C(int a1, int a2);
int __fastcall sub_8004A2C4(int a1);
int __fastcall sub_8004A2E0(int a1);
int __fastcall sub_8004A3A8(int a1, unsigned __int8 a2, char a3);
int __fastcall sub_8004A440(int a1);
int __fastcall sub_8004A494(int a1);
int __fastcall sub_8004A500(int a1, char a2);
int __fastcall sub_8004A520(int a1);
int __fastcall sub_8004A534(int a1, char a2);
int __fastcall sub_8004A554(int a1, char a2);
int __fastcall sub_8004A574(int a1, char a2);
int __fastcall sub_8004A594(int a1);
int sub_8004A5A8();
int __fastcall sub_8004A5C8(int a1);
int sub_8004A604();
int sub_8004A66C();
int __fastcall sub_8004A69C(int a1);
// int __fastcall PadInitDirect(_DWORD, _DWORD); weak
int __fastcall sub_8004AE54(int a1);
int __fastcall sub_8004B0B8(int a1, char a2);
int __fastcall sub_8004B190(int a1);
int __fastcall sub_8004B1C8(int a1);
BOOL sub_8004B1E4();
int __fastcall sub_8004B2A8(int a1);
int __fastcall sub_8004B3F0(int a1, int a2);
// int __fastcall ChangeClearPAD(_DWORD); weak
// int ResetCallback(void); weak
// int __fastcall InterruptCallback(_DWORD, _DWORD); weak
// int __fastcall DMACallback(_DWORD, _DWORD); weak
// int __fastcall VSyncCallback(_DWORD); weak
// int StopCallback(void); weak
// int CheckCallback(void); weak
__int16 *sub_8004BAF8();
int __fastcall sub_8004BB80(_DWORD *a1, int a2);
// int __fastcall HookEntryInt(_DWORD); weak
int (__fastcall *sub_8004BBEC())(int a1, int a2);
BOOL sub_8004BC44();
int __fastcall sub_8004BCBC(int a1, int a2);
int __fastcall sub_8004BCE8(_DWORD *a1, int a2);
int __fastcall sub_8004BFBC(int a1);
// int GsGetWorkBase(void); weak
// int __fastcall SetDefDrawEnv(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall SetDefDispEnv(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall ResetGraph(_DWORD); weak
// int __fastcall SetGraphDebug(_DWORD); weak
// int __fastcall SetDispMask(_DWORD); weak
// int __fastcall DrawSync(_DWORD); weak
// int __fastcall sub_8004C668(_DWORD, _DWORD); weak
// int __fastcall LoadImage(_DWORD, _DWORD, _DWORD); weak
// int __fastcall StoreImage(_DWORD, _DWORD); weak
// int __fastcall DrawPrim(_DWORD); weak
// int __fastcall DrawOTag(_DWORD); weak
// int __fastcall PutDrawEnv(_DWORD); weak
// int __fastcall PutDispEnv(_DWORD); weak
int __fastcall sub_8004D264(int a1);
unsigned int sub_8004D298();
int __fastcall sub_8004D2C8(int a1, int a2);
int __fastcall sub_8004D300(int a1, __int16 *a2);
int __fastcall sub_8004D380(int a1, __int16 *a2);
// int __fastcall sub_8004D410(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall sub_8004D464(_DWORD, _DWORD); weak
// int __fastcall sub_8004D8EC(_DWORD, _DWORD); weak
// int __fastcall sub_8004D984(_DWORD, _DWORD); weak
// int __fastcall sub_8004DA1C(_DWORD, _DWORD); weak
// int __fastcall sub_8004DA38(_DWORD); weak
int sub_8004DAB8();
int __fastcall sub_8004DAD0(int a1, int a2);
int __fastcall sub_8004DBB0(_WORD *a1, unsigned int a2);
// int __fastcall sub_8004DDE0(_DWORD, _DWORD); weak
int __fastcall sub_8004E01C(int a1, _DWORD *a2);
int __fastcall sub_8004E2C0(int a1);
// int __fastcall sub_8004E314(_DWORD); weak
int __fastcall sub_8004E35C(int a1);
int __fastcall sub_8004E38C(int a1, int a2, int a3);
// int __fastcall sub_8004E3B0(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int sub_8004E660(); weak
// int sub_8004EB4C(void); weak
// int sub_8004EB80(void); weak
int __fastcall sub_8004ED64(int a1, int a2);
int __fastcall sub_8004EE50(int a1, _DWORD *a2);
int __fastcall sub_8004EF3C(int a1, unsigned __int16 a2, int a3);
int __fastcall sub_8004F080(int a1);
int sub_8004F17C();
// int __fastcall sub_8004F1E4(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall sub_8004F244(_DWORD, _DWORD); weak
// int __fastcall sub_8004F284(_DWORD); weak
// int __fastcall SetSemiTrans(_DWORD, _DWORD); weak
// int __fastcall SetPolyF4(_DWORD); weak
// int __fastcall SetPolyFT4(_DWORD); weak
// int __fastcall SetDrawMove(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
void sub_8004F37C();
// int __fastcall MulMatrix(_DWORD, _DWORD); weak
// int __fastcall TransMatrix(_DWORD, _DWORD); weak
int *__fastcall sub_8004F544(int *a1, int *a2);
// int __fastcall SetRotMatrix(_DWORD); weak
// int __fastcall SetTransMatrix(_DWORD); weak
// int __fastcall ReadSZfifo3(_DWORD, _DWORD, _DWORD); weak
// int __fastcall ReadGeomOffset(_DWORD, _DWORD); weak
// int __fastcall SetGeomOffset(_DWORD, _DWORD); weak
// int __fastcall SetGeomScreen(_DWORD); weak
// int __fastcall RotTransPers(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall RotTrans(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
int __fastcall sub_8004F794(int a1, int a2);
void sub_8004F914();
// int __fastcall SpuInitMalloc(_DWORD, _DWORD); weak
// int __fastcall SpuSetReverb(_DWORD); weak
// int __fastcall SpuInit(_DWORD); weak
// int __fastcall SpuSetReverbModeParam(_DWORD); weak
// int __fastcall SpuSetReverbVoice(_DWORD, _DWORD); weak
// int __fastcall SpuSetKey(_DWORD, _DWORD); weak
// int __fastcall SpuWrite(_DWORD, _DWORD); weak
// int __fastcall SpuSetTransferStartAddr(_DWORD); weak
// int __fastcall SpuSetTransferMode(_DWORD); weak
// int __fastcall SpuIsTransferCompleted(_DWORD); weak
// int __fastcall SpuSetCommonAttr(_DWORD); weak
int __fastcall sub_80051DF0(int a1, int a2, int a3);
// int __fastcall SpuGetAllKeysStatus(_DWORD); weak
// int __fastcall SpuSetVoiceAttr(_DWORD); weak
int __fastcall sub_800525E0(unsigned __int16 a1, unsigned __int16 a2, unsigned __int16 a3, unsigned __int16 a4);
int __fastcall sub_80052718(unsigned __int16 a1, unsigned __int16 a2, unsigned __int16 a3);
// int __fastcall SpuGetVoiceAttr(_DWORD); weak
int __fastcall sub_80052C34(__int16 a1);
int __fastcall sub_80052DB0(__int16 a1);
int __fastcall sub_80052DD4(__int16 a1);
unsigned int __fastcall sub_80052DF8(int a1, __int16 a2, __int16 a3, int a4);
unsigned int __fastcall sub_80052F2C(__int16 a1, __int16 a2, int a3);
unsigned int __fastcall sub_80052F60(__int16 a1, __int16 a2, __int16 a3, int a4);
int __fastcall sub_80052F94(__int16 a1, __int16 a2, int a3, int a4);
unsigned int __fastcall sub_8005308C(int a1, __int16 a2, signed __int16 a3, int a4);
unsigned int __fastcall sub_800531B4(__int16 a1, signed __int16 a2, int a3);
unsigned int __fastcall sub_800531E8(__int16 a1, __int16 a2, signed __int16 a3, int a4);
int sub_8005321C();
// int SsInit(void); weak
int sub_800533C8();
int sub_800533F8();
int __fastcall sub_80053418(int a1, int a2, __int16 a3);
int __fastcall sub_80053794(__int16 a1, __int16 a2);
int __fastcall sub_8005380C(int a1, __int16 a2, unsigned __int8 a3);
// int SsContMainVol(); weak
int __fastcall sub_80053D04(__int16 a1, __int16 a2, unsigned __int8 a3);
// int SsContExpression(); weak
// int sub_80053EB4(); weak
// int SsContExternal(); weak
// int sub_80053FE4(); weak
int __fastcall sub_80054114(__int16 a1, __int16 a2, char a3);
// int SsContRpn1(); weak
// int SsContRpn2(); weak
// int SsContResetAll(); weak
// int sub_800543E4(); weak
// int SsSetControlChange(); weak
// int SsGetMetaEvent(); weak
// int SsNoteOn(); weak
// int sub_80054970(); weak
int __fastcall sub_800549E0(__int16 a1, __int16 a2);
// int __fastcall SsInitSoundSep(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall SsSndSetPauseMode(_DWORD, _DWORD); weak
int __fastcall sub_80054F48(__int16 a1);
// int __fastcall sub_80054F70(_DWORD, _DWORD, _DWORD, _DWORD); weak
int __fastcall sub_80054F9C(__int16 a1, char a2, char a3);
int __fastcall sub_80054FD4(__int16 a1, __int16 a2, char a3, char a4);
// int __fastcall SsSepReplay(_DWORD, _DWORD, _DWORD, _DWORD); weak
int __fastcall sub_800550FC(__int16 a1, __int16 a2, char a3, char a4);
int sub_80055218();
int sub_80055480();
int sub_800554A0();
int sub_800554C0();
int sub_80055500();
int sub_80055550();
int __fastcall sub_800557C4(int a1, __int16 a2);
int __fastcall sub_80055AE4(int a1, __int16 a2);
// int __fastcall SsSndPause(_DWORD, _DWORD); weak
// int __fastcall sub_80055F2C(_DWORD, _DWORD); weak
int __fastcall sub_80055F58(int a1, int a2);
int __fastcall sub_80056060(__int16 a1, __int16 a2);
int __fastcall sub_800562A4(int a1, int a2);
int __fastcall sub_80056648(__int16 a1, __int16 a2);
// int __fastcall SsSndReplay(_DWORD, _DWORD); weak
// int __fastcall SsSndStop(_DWORD, _DWORD); weak
int __fastcall sub_80056928(__int16 a1);
// int __fastcall sub_80056950(_DWORD, _DWORD, _DWORD, _DWORD); weak
int __fastcall sub_8005697C(int a1, __int16 a2, __int16 a3);
int __fastcall sub_80056B54(int a1);
int __fastcall sub_80056CC0(__int16 a1, __int16 a2, __int16 a3, __int16 a4);
int __fastcall sub_80056D4C(__int16 a1, __int16 a2, __int16 a3);
int __fastcall sub_80056DAC(__int16 a1, __int16 a2, __int16 a3, __int16 a4);
int __fastcall sub_80056E38(__int16 a1, __int16 a2, _WORD *a3, _WORD *a4);
unsigned int __fastcall sub_80056E6C(__int16 a1, __int16 a2);
int __fastcall sub_8005708C(signed __int16 a1, __int16 a2, int a3);
int __fastcall sub_80057194(signed __int16 a1, __int16 a2, int a3, int a4);
int __fastcall sub_80057488(signed __int16 a1, __int16 a2, int a3, int a4);
void sub_80057650();
int sub_80057660();
int sub_80057674();
// int __fastcall SpuSetNoiseVoice(_DWORD, _DWORD); weak
// int __fastcall SpuGetVoiceEnvelope(_DWORD, _DWORD); weak
int __fastcall sub_80057B00(unsigned __int8 a1);
// int __fastcall spu_setInTransfer(_DWORD); weak
// int spu_getInTransfer(void); weak
int __fastcall sub_80057E60(int a1, unsigned __int16 a2, __int16 a3, unsigned __int16 a4, unsigned __int16 a5, __int16 a6);
int __fastcall sub_800583E4(__int16 a1, __int16 a2, __int16 a3, unsigned __int16 a4);
int __fastcall sub_80058530(unsigned __int16 a1, __int16 a2, unsigned __int16 a3, int a4, unsigned __int16 a5, unsigned __int16 a6);
int __fastcall sub_8005861C(__int16 a1, __int16 a2, unsigned __int16 a3);
void nullsub_14();
int sub_80058658();
int sub_800588E4();
int sub_80058AF4();
int __fastcall sub_80058BB8(int a1, unsigned __int16 a2);
int __fastcall sub_80058CB4(unsigned __int8 a1);
// int __fastcall SpuSetNoiseClock(_DWORD); weak
int __fastcall sub_800591E0(unsigned __int8 a1);
// int __fastcall SsVmKeyOffNow(_DWORD); weak
int __fastcall sub_80059308(int a1, __int16 a2);
int __fastcall sub_80059B38(unsigned __int16 a1, __int16 a2);
int __fastcall sub_80059B8C(unsigned __int16 a1, __int16 a2, char a3);
int __fastcall sub_80059C00(unsigned __int16 a1, __int16 a2);
int __fastcall sub_80059C54(__int16 a1, __int16 a2, __int16 a3);
int __fastcall sub_8005A190(__int16 a1, _WORD *a2, _WORD *a3);
int __fastcall sub_8005A284(__int16 a1);
int __fastcall sub_8005A320(int a1, int a2);
int __fastcall sub_8005A3D4(__int16 a1, signed __int16 a2, __int16 a3, unsigned __int16 a4, __int16 a5);
int __fastcall sub_8005A950(unsigned __int16 a1, __int16 a2);
int sub_8005AA14();
void sub_8005AA28();
int __fastcall sub_8005AA38(unsigned __int8 a1);
// int SsVabClose(void); weak
// int __fastcall SsVabFakeBody(_DWORD); weak
int __fastcall sub_8005AEDC(int a1, __int16 a2);
int __fastcall sub_8005AF0C(int a1, __int16 a2, int a3);
int __fastcall sub_8005AF3C(int a1, __int16 a2, int a3);
int __fastcall sub_8005AF6C(int a1, int a2, int a3, int a4);
// int __fastcall SpuMalloc(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall card_write(_DWORD, _DWORD, _DWORD); weak
// int new_card(void); weak
int __fastcall sub_8005B668(int a1);
// int __fastcall InitCARD(_DWORD); weak
// int sub_8005B6F8(void); weak
// int sub_8005B730(void); weak
int __fastcall sub_8005B774(int a1, int a2, int a3, int a4);
int __fastcall sub_8005B804(int a1, int a2, int a3, int a4);
int sub_8005B894();
int sub_8005B8C4();
int __fastcall sub_8005B8FC(int a1);
int sub_8005B974();
int sub_8005B9AC();
BOOL sub_8005BA14();
// int __fastcall InitPAD2(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int StartPAD2(void); weak
// int StopPAD2(void); weak
// int __fastcall PAD_init2(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int EnablePAD(void); weak
// int DisablePAD(void); weak
// int patch_pad(void); weak
// int remove_ChgclrPAD(void); weak
void sub_8005BBD8();
void __fastcall sub_8005D370(int a1, int a2, _DWORD *_$A2);
int sub_8005D898();
void __fastcall sub_8005D968(int a1);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN unk_80000002; // weak
_UNKNOWN unk_80008000; // weak
_UNKNOWN unk_8000FFFF; // weak
_UNKNOWN loc_80020008; // weak
_UNKNOWN loc_8003A6F4; // weak
_UNKNOWN loc_8003A78C; // weak
_UNKNOWN loc_8003A828; // weak
_UNKNOWN loc_8003A9C4; // weak
_UNKNOWN loc_8003AA84; // weak
_UNKNOWN loc_8003AB48; // weak
int dword_8003AE8C = 0; // weak
_UNKNOWN loc_8003B0FC; // weak
_UNKNOWN loc_8003B150; // weak
_UNKNOWN loc_8003DEF4; // weak
_UNKNOWN loc_8003E3AC; // weak
_UNKNOWN loc_800408C0; // weak
_UNKNOWN loc_800408C8; // weak
_UNKNOWN loc_800409C8; // weak
_UNKNOWN loc_800415A4; // weak
_UNKNOWN loc_80041618; // weak
_UNKNOWN loc_80041648; // weak
_UNKNOWN loc_800418CC; // weak
_UNKNOWN loc_80041A3C; // weak
_UNKNOWN loc_80041CF0; // weak
_UNKNOWN loc_80041D28; // weak
_UNKNOWN loc_80041DD8; // weak
_UNKNOWN loc_80042060; // weak
_UNKNOWN loc_80042764; // weak
_UNKNOWN loc_80042994; // weak
_UNKNOWN loc_800429E4; // weak
_UNKNOWN loc_80042ADC; // weak
_UNKNOWN loc_80042EF8; // weak
_UNKNOWN loc_80042F70; // weak
_UNKNOWN loc_80043004; // weak
_UNKNOWN loc_80043C24; // weak
_UNKNOWN loc_800446B0; // weak
int dword_8004F97C[2] = { 0, 0 }; // weak
int dword_8005BC40[3] = { 0, 0, 0 }; // weak
int dword_8005BC4C[3] = { 0, 0, 0 }; // weak
char a0123456789abcd[69] = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_!NONE"; // weak
_UNKNOWN *off_8005BEEC = &unk_8006F64C; // weak
_UNKNOWN *off_8005BEFC = &unk_8006F780; // weak
int dword_8005BF00[2] = { 8, 0 }; // weak
int dword_8005C000[10] =
{
  858134796,
  1767591232,
  -1483241608,
  -1979463,
  16777215,
  1396789827,
  776085576,
  0,
  0,
  0
}; // weak
int dword_8005C074[76] =
{
  16842753,
  16908290,
  197122,
  33751299,
  17039364,
  33817347,
  50593797,
  33882373,
  50660356,
  17170438,
  67437062,
  459526,
  84214023,
  34014214,
  84280071,
  67567624,
  34078984,
  50857478,
  67634439,
  17367049,
  34145799,
  50922760,
  117900297,
  656904,
  34210058,
  50988297,
  67766024,
  722441,
  34275595,
  134743306,
  51054345,
  67831306,
  134807564,
  84607244,
  118096396,
  101384972,
  151585804,
  84674570,
  17629197,
  34408203,
  101450509,
  134940938,
  118227981,
  918797,
  168427790,
  151716366,
  101516046,
  68028428,
  84805389,
  151783947,
  17760271,
  101581327,
  51316749,
  185271311,
  118360588,
  84871437,
  17825808,
  34605070,
  51381775,
  168626956,
  118424592,
  84936974,
  135203852,
  101714701,
  118491662,
  202180879,
  135269134,
  152046095,
  202247437,
  168823567,
  202312974,
  235801360,
  202378511,
  219155983,
  235933455,
  269487888
}; // weak
int dword_8005C1A4[3] = { 0, 0, 0 }; // weak
int dword_8005C1B0[2] = { 0, 0 }; // weak
int dword_8005C1F0[2] = { 0, 0 }; // weak
int (*off_8005C230[8])(int, int, int, int, int, int, int, int, int, int) =
{
  &sub_8003E078,
  &sub_8003D0E4,
  &sub_8003E078,
  &sub_8003E040,
  &sub_8003E040,
  &sub_8003FC40,
  &sub_8003E078,
  &sub_8003E078
}; // weak
_UNKNOWN *off_8005C250 = &loc_80040AB8; // weak
int dword_8005C270[2] = { 0, 0 }; // weak
int (*off_8005C2F8[3])() = { &nullsub_3, &nullsub_3, &nullsub_3 }; // weak
int dword_8005C380 = 0; // weak
int dword_8005C398[3] = { 2560000, 700000, 0 }; // weak
int dword_8005C3B0[3] = { 1280000, 700000, 0 }; // weak
int dword_8005C3C8[3] = { 1638400, 700000, 0 }; // weak
int dword_8005C3E0[3] = { 2560000, 819200, 0 }; // weak
int dword_8005C3F8[3] = { 1706666, 409600, 0 }; // weak
int dword_8005C410[3] = { 853333, 409600, 0 }; // weak
int dword_8005C428[6] = { 400000, 1200000, 30, 1280000, 1280000, 2048 }; // weak
int dword_8005C440[6] = { 400000, 700000, 30, 1280000, 1280000, 1024 }; // weak
int dword_8005C458[3] = { 640000, 150000, 0 }; // weak
int dword_8005C470[3] = { 3700000, 440000, 0 }; // weak
int dword_8005C488[5] = { 400000, 1000000, 248, 0, 0 }; // weak
int dword_8005C4D0[6] = { 400000, 1400000, 30, 1280000, 1280000, 2048 }; // weak
int dword_8005C4E8[3] = { 640000, 300000, 0 }; // weak
int dword_8005C518[3] = { 2560000, 921600, 0 }; // weak
int dword_8005C530[3] = { 1280000, 921600, 0 }; // weak
int dword_8005C548[6] = { 2560000, 921600, 30, 2560000, 6400000, 2048 }; // weak
int dword_8005C560[6] = { 1280000, 921600, 30, 640000, 920000, 3840 }; // weak
int dword_8005C578[3] = { 2560000, 450000, 0 }; // weak
int dword_8005C590[3] = { 1280000, 450000, 0 }; // weak
int dword_8005C5A8[3] = { 2560000, 947200, 0 }; // weak
int dword_8005C5C0[3] = { 1280000, 819200, 0 }; // weak
int dword_8005C5E8[19] =
{
  51052544,
  50987790,
  51970828,
  68092678,
  68486166,
  68224018,
  84935683,
  85591324,
  85787924,
  86377732,
  102630695,
  101516819,
  102237723,
  119735813,
  119670560,
  119801623,
  136382215,
  136251429,
  255
}; // weak
int dword_8005C634 = 16; // weak
char byte_8005C63E = '\0'; // weak
char byte_8005C63F = '\0'; // weak
int dword_8005C640 = 0; // weak
int dword_8005C644 = 0; // weak
int dword_8005C650 = 0; // weak
int dword_8005C654 = 4097; // weak
int dword_8005C664 = 0; // weak
int dword_8005C668 = 0; // weak
int dword_8005C66C = 0; // weak
int dword_8005C670 = 0; // weak
int dword_8005C674 = 0; // weak
int dword_8005C678 = 0; // weak
int dword_8005C67C = 0; // weak
int dword_8005C680 = 0; // weak
int dword_8005C688 = 0; // weak
int dword_8005C68C = 0; // weak
int dword_8005C690[] = { 0 }; // weak
int dword_8005C69C[] = { 0 }; // weak
int dword_8005C6A0 = 0; // weak
int dword_8005C6A4 = 0; // weak
int dword_8005C6A8 = 0; // weak
int dword_8005C6AC = 0; // weak
int dword_8005C6B0 = 0; // weak
int dword_8005C6B4 = 0; // weak
int dword_8005C6B8 = 0; // weak
int dword_8005C6BC[3] = { 0, 0, 0 }; // weak
int dword_8005C6C8[3] = { 0, 0, 0 }; // weak
int dword_8005C6D4[3] = { 0, 0, 0 }; // weak
int dword_8005C6EC[32] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // weak
int dword_8005C76C = 0; // weak
int dword_8005C770 = 0; // weak
int dword_8005C774 = 0; // weak
int dword_8005C778 = 0; // weak
int dword_8005C794[4] = { 64, 64, 32, 3 }; // weak
int dword_8005C7A4[4] = { 24, 24, 8, 1 }; // weak
char byte_8005C7B4[4] = { '\"', '\0', '\0', '\0' }; // weak
int dword_8005C7D4[] = { 0 }; // weak
int dword_8005C814[4] = { 740167680, 1683376186, -1802994576, -994530144 }; // weak
int dword_8005C824[11] = { 5, 6, 7, 4, 6, 2, 3, 7, 2, 1, 0 }; // weak
int dword_8005C884[32] =
{
  1044480,
  4193280,
  16776960,
  33554304,
  67108800,
  134217696,
  268435440,
  536870904,
  1073741820,
  1073741820,
  2147483646,
  2147483646,
  -1,
  -1,
  -1,
  -1,
  -1,
  -1,
  -1,
  -1,
  2147483646,
  2147483646,
  1073741820,
  1073741820,
  536870904,
  268435440,
  134217696,
  67108800,
  33554304,
  16776960,
  4193280,
  1044480
}; // weak
int dword_8005C904[6] = { 167903488, 17105923, 67634950, 118163977, 150995718, 185074946 }; // weak
int dword_8005C91C[512] =
{
  393216,
  1245197,
  2031641,
  2883622,
  3735602,
  4522047,
  5374027,
  6160472,
  7012453,
  7798897,
  8650878,
  9437322,
  10289303,
  11141283,
  11927728,
  12779708,
  13566153,
  14418134,
  15204578,
  16056559,
  16843003,
  17694984,
  18546964,
  19333409,
  20185389,
  20971834,
  21823814,
  22610259,
  23462239,
  24248684,
  25100664,
  25887109,
  26739089,
  27525534,
  28377514,
  29163959,
  30015939,
  30802384,
  31654364,
  32440809,
  33292789,
  34079234,
  34931214,
  35717659,
  36504103,
  37356084,
  38142528,
  38994509,
  39780953,
  40632933,
  41419378,
  42205822,
  43057803,
  43844247,
  44696227,
  45482672,
  46269116,
  47121097,
  47907541,
  48759521,
  49545966,
  50332410,
  51184390,
  51970835,
  52757279,
  53609259,
  54395704,
  55182148,
  55968592,
  56820573,
  57607017,
  58393461,
  59245441,
  60031886,
  60818330,
  61604774,
  62456754,
  63243199,
  64029643,
  64816087,
  65602531,
  66454511,
  67240956,
  68027400,
  68813844,
  69600288,
  70386732,
  71173176,
  72025156,
  72811601,
  73598045,
  74384489,
  75170933,
  75957377,
  76743821,
  77530265,
  78316709,
  79103153,
  79889597,
  80676041,
  81462485,
  82248929,
  83035373,
  83821817,
  84608261,
  85394705,
  86181149,
  86967593,
  87688500,
  88474944,
  89261388,
  90047832,
  90834276,
  91620720,
  92341628,
  93128071,
  93914515,
  94700959,
  95487403,
  96208310,
  96994754,
  97781198,
  98502106,
  99288549,
  100074993,
  100795901,
  101582344,
  102368788,
  103089695,
  103876139,
  104597047,
  105383490,
  106169934,
  106890841,
  107677285,
  108398192,
  109184636,
  109905543,
  110691987,
  111412894,
  112133802,
  112920245,
  113641153,
  114427596,
  115148503,
  115869411,
  116655854,
  117376761,
  118097669,
  118818576,
  119605019,
  120325926,
  121046834,
  121767741,
  122554184,
  123275091,
  123995998,
  124716906,
  125437813,
  126158720,
  126879627,
  127600534,
  128321441,
  129107884,
  129828791,
  130549698,
  131205069,
  131925976,
  132646883,
  133367790,
  134088697,
  134809604,
  135530510,
  136251417,
  136972324,
  137627695,
  138348602,
  139069509,
  139790415,
  140445786,
  141166693,
  141887599,
  142542970,
  143263877,
  143984783,
  144640154,
  145361061,
  146016431,
  146737338,
  147392708,
  148113615,
  148768985,
  149489892,
  150145262,
  150866168,
  151521539,
  152176909,
  152897816,
  153553186,
  154208556,
  154929463,
  155584833,
  156240203,
  156895573,
  157616479,
  158271850,
  158927220,
  159582590,
  160237960,
  160893330,
  161548700,
  162204070,
  162859440,
  163514810,
  164170180,
  164825550,
  165480920,
  166136290,
  166791660,
  167447030,
  168036863,
  168692233,
  169347603,
  170002973,
  170592806,
  171248176,
  171903546,
  172493380,
  173148749,
  173804119,
  174393952,
  175049322,
  175639155,
  176294525,
  176884358,
  177539728,
  178129561,
  178719395,
  179374764,
  179964597,
  180554431,
  181209800,
  181799633,
  182389467,
  182979300,
  183634669,
  184224502,
  184814335,
  185404168,
  185994001,
  186583835,
  187173668,
  187763501,
  188353334,
  188943166,
  189532999,
  190122832,
  190712665,
  191236962,
  191826795,
  192416628,
  193006460,
  193530757,
  194120590,
  194710423,
  195234719,
  195824552,
  196414384,
  196938681,
  197528513,
  198052810,
  198642642,
  199166939,
  199756771,
  200281068,
  200805364,
  201395196,
  201919493,
  202443789,
  202968085,
  203557918,
  204082214,
  204606510,
  205130806,
  205655102,
  206179398,
  206703694,
  207227990,
  207752286,
  208276582,
  208800878,
  209325174,
  209849470,
  210373766,
  210832526,
  211356821,
  211881117,
  212405413,
  212864172,
  213388468,
  213912764,
  214371523,
  214895819,
  215354578,
  215878874,
  216337633,
  216861929,
  217320688,
  217779448,
  218303743,
  218762502,
  219221262,
  219680021,
  220204316,
  220663075,
  221121834,
  221580594,
  222039353,
  222498112,
  222956871,
  223415630,
  223874389,
  224333148,
  224791906,
  225250665,
  225709424,
  226102647,
  226561406,
  227020165,
  227478923,
  227872146,
  228330905,
  228724127,
  229182886,
  229641644,
  230034867,
  230428089,
  230886848,
  231280070,
  231738828,
  232132051,
  232525273,
  232984031,
  233377254,
  233770476,
  234163698,
  234556920,
  234950142,
  235343364,
  235736586,
  236129808,
  236523030,
  236916252,
  237309474,
  237702696,
  238095918,
  238489140,
  238816826,
  239210047,
  239603269,
  239930955,
  240324176,
  240717398,
  241045083,
  241438305,
  241765990,
  242159212,
  242486897,
  242814583,
  243207804,
  243535489,
  243863175,
  244256396,
  244584081,
  244911766,
  245239451,
  245567137,
  245894822,
  246222507,
  246550192,
  246877877,
  247205562,
  247533247,
  247860931,
  248188616,
  248450765,
  248778450,
  249106134,
  249368283,
  249695968,
  250023652,
  250285801,
  250613486,
  250875634,
  251203319,
  251465467,
  251793151,
  252055300,
  252317448,
  252579596,
  252907281,
  253169429,
  253431577,
  253693725,
  253955873,
  254218021,
  254480169,
  254742317,
  255004465,
  255266613,
  255528761,
  255790909,
  256053057,
  256249669,
  256511816,
  256773964,
  256970576,
  257232723,
  257494871,
  257691482,
  257953630,
  258150241,
  258412389,
  258609000,
  258805612,
  259067759,
  259264370,
  259460982,
  259657593,
  259854204,
  260116351,
  260312962,
  260509573,
  260706184,
  260902795,
  261099406,
  261296017,
  261427092,
  261623703,
  261820314,
  262016924,
  262213535,
  262344610,
  262541221,
  262672295,
  262868906,
  263065516,
  263196591,
  263393201,
  263524276,
  263655350,
  263851960,
  263983035,
  264114109,
  264245183,
  264441794,
  264572868,
  264703942,
  264835016,
  264966090,
  265097164,
  265228238,
  265359312,
  265490386,
  265621460,
  265686997,
  265818071,
  265949145,
  266080219,
  266145756,
  266276830,
  266342368,
  266473441,
  266538979,
  266670052,
  266735590,
  266866663,
  266932200,
  266997738,
  267128811,
  267194348,
  267259885,
  267325423,
  267390960,
  267456497,
  267522034,
  267587571,
  267653108,
  267718645,
  267784182,
  267849719,
  267915256,
  267980792,
  267980793,
  268046330,
  268111866,
  268111867,
  268177404,
  268177404,
  268242941,
  268242941,
  268308478,
  268308478,
  268374014,
  268374015,
  268374015,
  268374015,
  268439552,
  268439552,
  268439552,
  268439552,
  268439552
}; // weak
_UNKNOWN *off_8005D120 = &loc_80038EE8; // weak
int dword_8005D268[8] = { 0, 0, 0, 0, 0, 0, 0, 0 }; // weak
char byte_8005D2E7 = '\xFF'; // weak
int dword_8005DDC4[3] = { 0, 0, 0 }; // weak
int dword_8005DE4C = 0; // weak
int dword_8005DE50 = 0; // weak
int dword_8005DE58 = 0; // weak
int dword_8005DE5C = 0; // weak
int dword_8005DE60 = 0; // weak
char byte_8005DE68[] = { '\x02' }; // weak
char byte_8005DE6C = '\0'; // weak
char byte_8005DE6D = '\0'; // weak
int dword_8005DF94[] = { 0 }; // weak
int dword_8005E094[] = { 0 }; // weak
char byte_8005E12C = '\0'; // weak
char byte_8005E12D = '\0'; // weak
char byte_8005E12E = '\0'; // weak
char *off_8005E130 = &byte_8005E12C; // weak
int dword_8005E15C = 0; // weak
int dword_8005E160 = 0; // weak
int dword_8005E164 = 0; // weak
int dword_8005E168 = 0; // weak
int dword_8005E16C = 0; // weak
int dword_8005E170 = 0; // weak
int dword_8005E174 = 0; // weak
int dword_8005E178 = 0; // weak
int dword_8005E17C = 0; // weak
int dword_8005E180 = 0; // weak
int dword_8005E184 = 0; // weak
int dword_8005E188 = 0; // weak
int dword_8005E190 = 0; // weak
int dword_8005E194 = 0; // weak
int dword_8005E228 = 0; // weak
int dword_8005E268 = 0; // weak
int dword_8005E26C = 0; // weak
__int16 word_8005E2C8 = 0; // weak
int dword_8005E300 = 0; // weak
int dword_8005F364[8] = { 0, 0, 0, 0, 0, 0, 0, 0 }; // weak
int dword_8005F384 = 0; // weak
int dword_8005F3B4 = 0; // weak
__int16 word_8005F474 = 0; // weak
int dword_8005F4A0[2] = { 83886079, 2147483648 }; // weak
int dword_8005F4A8 = 0; // weak
int dword_8005F4AC = 0; // weak
int dword_8005F4B0 = 0; // weak
int dword_8005F514 = 0; // weak
int dword_8005F518 = 0; // weak
int dword_8005F6A8 = 0; // weak
__int16 word_8005F6B8[] = { 0 }; // weak
int dword_800606C4 = 60; // weak
int dword_800606C8 = 1; // weak
int dword_800606D0 = 0; // weak
char byte_800606D4 = '\0'; // weak
char byte_800606D5 = '\0'; // weak
char byte_800606D6 = '\x7F'; // weak
int dword_800606D8 = 0; // weak
__int16 word_800606DC[] = { 4096 }; // weak
int dword_80060868 = 0; // weak
int dword_800608A0 = 0; // weak
int dword_800608A4 = 1; // weak
int dword_800608B8 = 0; // weak
int dword_800608EC[3] = { -65280, 65535, 0 }; // weak
int dword_80060920 = 0; // weak
int dword_80060928 = 0; // weak
int dword_80060A2C = 12345; // weak
int dword_80060A30 = 765634; // weak
int dword_80060A38 = 0; // weak
int dword_80060A40 = 0; // weak
int dword_80060A48 = 0; // weak
int dword_80060A50 = 0; // weak
int dword_80060A60 = 0; // weak
int dword_80060A64 = 0; // weak
int dword_80060A88 = 0; // weak
int dword_80060A90 = 0; // weak
int dword_80060A94 = 0; // weak
int dword_80060A98 = 0; // weak
int dword_80060A9C = 0; // weak
int dword_80060AA4 = 0; // weak
int dword_80060AA8 = 0; // weak
int dword_80060AB4 = 0; // weak
int dword_80060AB8 = 0; // weak
int dword_80060ABC = 0; // weak
int dword_80060AC0 = 0; // weak
int dword_80060AEC[9] = { 0, 0, 0, 0, 0, 0, 0, 0, 0 }; // weak
int dword_80060B10[3] = { 0, 0, 0 }; // weak
int dword_80060B40 = 0; // weak
int dword_80060B50 = 0; // weak
int dword_80060B70 = 0; // weak
char byte_80060B75 = '\0'; // weak
int dword_80060B80[4] = { 0, 0, 0, 0 }; // weak
int dword_80060B90[3] = { 0, 0, 0 }; // weak
int dword_80060B9C[7] = { 0, 0, 0, 0, 0, 0, 0 }; // weak
int dword_80060BB8[6] = { 0, 0, 0, 0, 0, 0 }; // weak
int dword_80060BD0[93] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // weak
int dword_80060D44[11] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }; // weak
int dword_80060D70[164] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // weak
_UNKNOWN unk_80061004; // weak
_DWORD dword_80061030; // weak
int dword_80061034; // weak
int dword_80061038; // weak
int dword_8006103C; // weak
int dword_80061040; // weak
int dword_80061044; // weak
int dword_80061048; // weak
int dword_80061050; // weak
int dword_80061054; // weak
int dword_80061058; // weak
int dword_8006105C[]; // weak
_UNKNOWN unk_8006106B; // weak
_UNKNOWN unk_80061070; // weak
int dword_800613F8; // weak
_UNKNOWN unk_800613FC; // weak
_UNKNOWN unk_8006140B; // weak
_UNKNOWN unk_80061410; // weak
int dword_80061A58; // weak
int dword_80061A5C; // weak
int dword_80061A60; // weak
int dword_80061A64; // weak
int dword_80061A68; // weak
int dword_80061A6C; // weak
int dword_80061A70; // weak
int dword_80061A78; // weak
int dword_80061A7C; // weak
int dword_80061A80; // weak
int dword_80061A84; // weak
_UNKNOWN unk_80061A88; // weak
int dword_80063B1C; // weak
int dword_80065BC8[]; // weak
char byte_80065BCC[]; // weak
char byte_80065BCD; // weak
char byte_80065BD2; // weak
char byte_80065BD3; // weak
int dword_80065BF0; // weak
int dword_80065BF4; // weak
int dword_80065C04; // weak
int dword_80065C08; // weak
int dword_80065C0C; // weak
_UNKNOWN unk_80065C1C; // weak
_UNKNOWN unk_80065C70; // weak
int dword_80065C84; // weak
int dword_80065C88; // weak
int dword_80065C8C; // weak
__int16 word_80065C90; // weak
__int16 word_80065C92; // weak
__int16 word_80065C94; // weak
__int16 word_80065C96; // weak
__int16 word_80065C98; // weak
__int16 word_80065C9A; // weak
__int16 word_80065C9C; // weak
__int16 word_80065C9E; // weak
__int16 word_80065CA0; // weak
int dword_80065CB0; // weak
int dword_80065CB4; // weak
int dword_80065CB8; // weak
int dword_80065CBC; // weak
int dword_80065CC0; // weak
int dword_80065CC4; // weak
int dword_80065CC8; // weak
int dword_80065CCC; // weak
int dword_80065CD0; // weak
int dword_80065CD4; // weak
int dword_80065CD8; // weak
int dword_80065CDC; // weak
int dword_80065CE0; // weak
int dword_80065CE4; // weak
int dword_80065CE8; // weak
int dword_80065CEC; // weak
int dword_80065CF0; // weak
int dword_80065CF4; // weak
int dword_80065CF8; // weak
int dword_80065CFC; // weak
int dword_80065D00; // weak
int dword_80065D04; // weak
int dword_80065D14; // weak
int dword_80065D1C; // weak
int dword_80065D20; // weak
int dword_80065D24; // weak
int dword_80065D28; // weak
_UNKNOWN unk_80065D34; // weak
int dword_80065D38; // weak
int dword_80065D54; // weak
int dword_80065D58; // weak
int dword_80065D5C; // weak
int dword_80065D60; // weak
int dword_80065D64; // weak
int dword_80065D68; // weak
int dword_80065D6C; // weak
int dword_80065D70; // weak
int dword_80065D74; // weak
int dword_80065D78; // weak
int dword_80065D7C; // weak
int dword_80065D80; // weak
int dword_80065D88; // weak
int dword_80065D8C; // weak
int dword_80065D90; // weak
int dword_80065D94; // weak
int dword_80065DA4; // weak
int dword_80065DA8; // weak
int dword_80065DAC; // weak
int dword_80065DB0; // weak
_DWORD dword_80065DB4[3]; // weak
int dword_80065DC0; // weak
int dword_80065DC4; // weak
int dword_80065DC8; // weak
int dword_80065DD4; // weak
_DWORD dword_80065DD8[9]; // weak
int dword_80065DFC; // weak
int dword_80065E00; // weak
int dword_80065E04; // weak
_DWORD dword_80066A44[795]; // weak
int dword_800676B0[]; // weak
int dword_800676B4; // weak
int dword_800676B8; // weak
int dword_800676BC; // weak
int dword_800676C0; // weak
int dword_800676C4; // weak
int dword_800676C8; // weak
int dword_800676CC; // weak
int dword_800676D0; // weak
int dword_800676D4; // weak
int dword_800676D8; // weak
int dword_800676DC; // weak
int dword_800676E0; // weak
int dword_800676E4; // weak
int dword_800676E8; // weak
int dword_800676EC; // weak
int dword_800676F0; // weak
int dword_800676F4; // weak
int dword_80067700; // weak
int dword_80067704; // weak
int dword_80067708; // weak
int dword_8006770C; // weak
__int16 word_80067714; // weak
__int16 word_80067716; // weak
int dword_80067718; // weak
__int16 word_8006771C; // weak
__int16 word_8006771E; // weak
int dword_80067720; // weak
int dword_80067724; // weak
int dword_80067728; // weak
int dword_8006772C; // weak
int dword_80067730; // weak
int dword_80067734; // weak
int dword_80067738; // weak
int dword_8006773C; // weak
int dword_80067740; // weak
int dword_80067744; // weak
int dword_80067748; // weak
int dword_8006774C; // weak
int dword_8006775C; // weak
int dword_80067760; // weak
int dword_80067764; // weak
int dword_80067768; // weak
_UNKNOWN unk_800677AC; // weak
int dword_800677D8; // weak
int dword_800677DC; // weak
int dword_800677E0; // weak
int dword_800677E4; // weak
int dword_800677E8; // weak
int dword_800677EC; // weak
__int16 word_800679F0; // weak
__int16 word_800679F2; // weak
int dword_800679F4; // weak
int dword_800679F8; // weak
int dword_80067A10; // weak
int dword_80067A1C; // weak
int dword_80067A20; // weak
int dword_80067A24; // weak
int dword_80067A28; // weak
int dword_80067A2C; // weak
int dword_80067A30; // weak
int dword_80067A34; // weak
_UNKNOWN unk_80067A38; // weak
unsigned int dword_80067E40[1024]; // weak
int dword_80068E40; // weak
int dword_80068E44; // weak
int dword_80068E48; // weak
int dword_80068E4C; // weak
int dword_80068E50; // weak
int dword_80068E98[]; // weak
int dword_80068E9C; // weak
_UNKNOWN unk_80068EA0; // weak
_UNKNOWN unk_80068EA4; // weak
_DWORD dword_80068EA8[4]; // weak
_DWORD dword_80068EB8[2]; // weak
_DWORD dword_80068EC0[4]; // weak
_DWORD dword_80068ED0[2]; // weak
_DWORD dword_80068ED8[2]; // weak
int dword_80068EE0; // weak
int dword_80068EE4; // weak
int dword_80068EE8; // weak
int dword_80068EEC; // weak
int dword_80068EF0; // weak
int dword_80068EF4; // weak
int dword_80068EF8; // weak
int dword_80068F00; // weak
int dword_80068F08; // weak
int dword_80068F0C; // weak
int dword_80068F10; // weak
int dword_80068F14; // weak
int dword_80068F1C; // weak
int dword_80068F20; // weak
int dword_80068F28; // weak
int dword_80068F2C; // weak
int dword_80068F30; // weak
int dword_80068F34; // weak
int dword_80068F38; // weak
int dword_80068F3C; // weak
int dword_80068F40; // weak
int dword_80068F44; // weak
int dword_80068F48; // weak
int dword_80068F4C; // weak
int dword_80068F54; // weak
int dword_80068F58; // weak
int dword_80068F5C; // weak
int dword_80068F60; // weak
int dword_80068F64; // weak
int dword_80068F68; // weak
int dword_80068F6C; // weak
int dword_80068F70; // weak
int dword_80068F74; // weak
int dword_80068F78; // weak
int dword_80068F7C; // weak
int dword_80068F80; // weak
int dword_80068F84; // weak
int dword_80068F88; // weak
int dword_80068F8C; // weak
int dword_80068F90; // weak
int dword_80068F94; // weak
int dword_80068F98; // weak
int dword_80068F9C; // weak
int dword_80068FA0; // weak
int dword_80068FA4; // weak
int dword_80068FA8; // weak
int dword_80068FAC; // weak
int dword_80068FB0; // weak
int dword_80068FB4; // weak
int dword_80068FB8; // weak
int dword_80068FBC; // weak
int dword_80068FD0; // weak
int dword_80068FD8; // weak
int dword_80068FDC; // weak
int dword_80068FF0; // weak
int dword_80068FF4; // weak
int dword_80068FF8; // weak
int dword_80068FFC; // weak
int dword_80069008; // weak
int dword_8006900C; // weak
int dword_80069010; // weak
int dword_80069014; // weak
int dword_8006901C; // weak
int dword_80069020; // weak
int dword_80069024; // weak
int dword_80069028; // weak
int dword_80069034; // weak
__int16 word_8006904C; // weak
__int16 word_80069050; // weak
int dword_80069054; // weak
int dword_80069058; // weak
int dword_8006905C; // weak
int dword_80069060; // weak
int dword_80069064; // weak
int dword_8006906C; // weak
int dword_80069074; // weak
int dword_80069078; // weak
int dword_8006907C; // weak
int dword_80069088; // weak
int dword_8006908C; // weak
int dword_80069090; // weak
int dword_80069094; // weak
int dword_80069098; // weak
int dword_8006909C; // weak
int dword_800690A0; // weak
int dword_800690A4; // weak
int dword_800690A8; // weak
int dword_800690AC; // weak
int dword_800690B0; // weak
int dword_800690B4; // weak
int dword_800690B8; // weak
int dword_800690BC; // weak
int dword_800690C4; // weak
int dword_800690C8; // weak
int dword_800690D0; // weak
int dword_800690D4; // weak
int dword_800690D8; // weak
int dword_800690DC; // weak
int dword_800690E0; // weak
int dword_800690E4; // weak
int dword_800690E8; // weak
int dword_800690EC; // weak
int dword_800690F0; // weak
int dword_800690F4; // weak
int dword_80069104; // weak
int dword_80069118; // weak
int dword_80069120; // weak
int dword_80069124; // weak
int dword_80069128; // weak
int Crystal_ID_Mask; // weak
int Crystal_ID_Mask_2; // weak
int dword_8006913C; // weak
int dword_80069140; // weak
int dword_80069150; // weak
int dword_80069154; // weak
int dword_80069158; // weak
int dword_8006915C; // weak
int dword_80069160; // weak
int dword_80069164; // weak
int dword_80069168; // weak
int dword_8006916C; // weak
int dword_80069170; // weak
int PowerUps_ID_Mask; // weak
int dword_8006917C; // weak
int dword_80069180; // weak
int dword_80069188; // weak
int dword_8006918C; // weak
int dword_80069190; // weak
int dword_80069194; // weak
int dword_80069198; // weak
int dword_8006919C; // weak
int dword_800691A0; // weak
int dword_800691AC; // weak
int dword_800691B4; // weak
int dword_800691B8; // weak
int dword_800691BC; // weak
int dword_800691C0; // weak
int dword_800691C4; // weak
int dword_800691C8; // weak
int dword_800691CC; // weak
int dword_800691D0; // weak
int dword_800691E0; // weak
int dword_800691EC; // weak
int dword_800691F4; // weak
int dword_800691F8; // weak
int dword_800691FC; // weak
int dword_80069204; // weak
int dword_80069208; // weak
int dword_8006920C; // weak
int dword_80069210; // weak
int dword_80069214; // weak
int dword_80069218; // weak
int dword_8006921C; // weak
int dword_80069220; // weak
int dword_80069224; // weak
_UNKNOWN unk_80069348; // weak
_UNKNOWN unk_80069C48; // weak
_UNKNOWN unk_80069CB4; // weak
_UNKNOWN unk_8006AEB8; // weak
unsigned __int16 word_8006AEC8[8]; // weak
int dword_8006AED8; // weak
int dword_8006AEDC; // weak
int dword_8006AEE0; // weak
__int16 word_8006AEE8; // weak
_UNKNOWN unk_8006B0E8; // weak
_DWORD dword_8006B688[784]; // weak
int dword_8006C2C8; // weak
int dword_8006C2CC; // weak
int dword_8006C2D0; // weak
_DWORD dword_8006C2D8[128]; // weak
_DWORD dword_8006C4D8[183]; // weak
int dword_8006C7B4; // weak
int dword_8006C7B8; // weak
_UNKNOWN unk_8006C7D8; // weak
_UNKNOWN unk_8006CF58; // weak
int dword_8006CF78; // weak
int dword_8006CF80; // weak
int dword_8006CF88; // weak
int dword_8006CF8C; // weak
char byte_8006CF90; // weak
char byte_8006CF91; // weak
__int16 word_8006CF92; // weak
__int16 word_8006CF94; // weak
__int16 word_8006CF96; // weak
int dword_8006CF98; // weak
int dword_8006CF9C; // weak
int dword_8006CFA0; // weak
_UNKNOWN unk_8006CFB8; // weak
__int16 word_8006CFC8; // weak
__int16 word_8006CFDC; // weak
_UNKNOWN unk_8006CFF8; // weak
int dword_8006D170; // weak
int dword_8006D174; // weak
int dword_8006D178; // weak
int (__fastcall *dword_8006D1A8)(_DWORD); // weak
int (*dword_8006D1AC)(void); // weak
int (*dword_8006D1BC)(void); // weak
int (*dword_8006D1C0)(void); // weak
int (__fastcall *dword_8006D1C8)(_DWORD); // weak
int dword_8006D450; // weak
int dword_8006D454; // weak
int dword_8006D460; // weak
int dword_8006D464; // weak
int dword_8006D468; // weak
int dword_8006D46C; // weak
int dword_8006D470; // weak
int dword_8006D474; // weak
int dword_8006D478; // weak
int dword_8006D47C; // weak
int dword_8006D480; // weak
int dword_8006D488; // weak
int dword_8006D48C; // weak
int dword_8006D490; // weak
int dword_8006D494; // weak
char byte_8006D4A8[256]; // weak
int dword_8006D750; // weak
int dword_8006D754; // weak
int (__fastcall *dword_8006D758)(_DWORD, _DWORD); // weak
int dword_8006D75C; // weak
int dword_8006D760; // weak
int dword_8006D764; // weak
int dword_8006D768; // weak
int dword_8006D76C; // weak
int dword_8006D770; // weak
int dword_8006D774; // weak
int dword_8006D778; // weak
int dword_8006D77C; // weak
int dword_8006D780; // weak
int dword_8006D784; // weak
int dword_8006D788; // weak
int dword_8006D78C; // weak
int dword_8006D790; // weak
int dword_8006D794[]; // weak
int dword_8006D798; // weak
int dword_8006D79C; // weak
int dword_8006D7A0; // weak
int dword_8006D7A4; // weak
int dword_8006D7A8; // weak
int dword_8006D7AC; // weak
int dword_8006D7B0; // weak
int dword_8006D7B4; // weak
int dword_8006D7B8; // weak
int dword_8006D7BC; // weak
int dword_8006D7C0; // weak
int dword_8006D7C4; // weak
int dword_8006D7C8; // weak
int dword_8006D7CC; // weak
int dword_8006D7D0; // weak
int dword_8006D7D4; // weak
int dword_8006D7D8; // weak
int dword_8006D7DC; // weak
int dword_8006D7E0; // weak
int dword_8006D7E4; // weak
int dword_8006D7E8; // weak
int dword_8006D7EC; // weak
int dword_8006D7F0[32]; // weak
__int16 word_8006E070; // weak
__int16 word_8006E072; // weak
__int16 word_8006E078; // weak
__int16 word_8006E07A; // weak
__int16 word_8006E07C; // weak
__int16 word_8006E07E; // weak
__int16 word_8006E080[]; // weak
__int16 word_8006E082[]; // weak
__int16 word_8006E084[]; // weak
__int16 word_8006E086[]; // weak
__int16 word_8006E088[]; // weak
char byte_8006E08A[]; // weak
__int16 word_8006E08C[]; // weak
__int16 word_8006E08E[]; // weak
__int16 word_8006E090[]; // weak
__int16 word_8006E092[]; // weak
__int16 word_8006E094[]; // weak
__int16 word_8006E096[]; // weak
__int16 word_8006E098[]; // weak
__int16 word_8006E09A[]; // weak
char byte_8006E09D[]; // weak
__int16 word_8006E09E[]; // weak
__int16 word_8006E0A0[]; // weak
__int16 word_8006E0A2[]; // weak
__int16 word_8006E0A4[]; // weak
__int16 word_8006E0A6[]; // weak
__int16 word_8006E0AA[]; // weak
__int16 word_8006E0AC[]; // weak
__int16 word_8006E0AE[]; // weak
__int16 word_8006E0B0[]; // weak
__int16 word_8006E0B2[]; // weak
char byte_8006E590[24]; // weak
int (__fastcall *dword_8006E5A8)(_DWORD); // weak
__int16 word_8006E5B0[]; // weak
__int16 word_8006E5B2[]; // weak
__int16 word_8006E5B4[]; // weak
__int16 word_8006E5B6[]; // weak
__int16 word_8006E5B8[]; // weak
__int16 word_8006E5BA[187]; // weak
int (__fastcall *dword_8006E730)(_DWORD); // weak
int dword_8006E734; // weak
int dword_8006E738[16]; // weak
__int16 word_8006E778; // weak
__int16 word_8006E77A; // weak
int dword_8006E780; // weak
int dword_8006E784; // weak
__int16 word_8006E788; // weak
__int16 word_8006E78A; // weak
int dword_8006E798[16]; // weak
int dword_8006E7D8[16]; // weak
__int16 word_8006E818; // weak
int dword_8006E820[16]; // weak
__int16 word_8006E860; // weak
__int16 word_8006E862; // weak
int dword_8006E864; // weak
int dword_8006E86C; // weak
int dword_8006E870; // weak
char byte_8006E874; // weak
char byte_8006E878; // weak
char byte_8006E879; // weak
char byte_8006E87A; // weak
char byte_8006E87B; // weak
char byte_8006E87C; // weak
char byte_8006E87D; // weak
char byte_8006E87E; // weak
char byte_8006E87F; // weak
char byte_8006E882; // weak
char byte_8006E883; // weak
char byte_8006E884; // weak
char byte_8006E885; // weak
char byte_8006E886; // weak
char byte_8006E887; // weak
char byte_8006E888; // weak
char byte_8006E889; // weak
char byte_8006E88A; // weak
char byte_8006E88B; // weak
char byte_8006E88C; // weak
__int16 word_8006E88E; // weak
__int16 word_8006E890; // weak
__int16 word_8006E892; // weak
__int16 word_8006E894; // weak
__int16 word_8006E896; // weak
char byte_8006E898[16]; // weak
char byte_8006E8A8; // weak
int dword_8006E8B0[16]; // weak
__int16 word_8006E8F0; // weak
int dword_8006E8F8[18]; // weak
_UNKNOWN unk_8006E940; // weak
int dword_8006EA48; // weak
int dword_8006EA4C; // weak
int dword_8006EA50; // weak
int dword_8006EA54; // weak
_UNKNOWN unk_8006EA74; // weak
_UNKNOWN unk_8006EA78; // weak
_UNKNOWN unk_8006EA80; // weak
_UNKNOWN unk_8006EC9C; // weak
_UNKNOWN unk_8006ECF4; // weak
_UNKNOWN unk_8006F21C; // weak
_UNKNOWN unk_8006F280; // weak
_UNKNOWN unk_8006F514; // weak
_UNKNOWN unk_8006F64C; // weak
_UNKNOWN unk_8006F780; // weak
_UNKNOWN unk_8006F9B8; // weak
_UNKNOWN unk_80071590; // weak
_UNKNOWN unk_800716A0; // weak
_UNKNOWN unk_800717D8; // weak
_UNKNOWN unk_80071880; // weak
_UNKNOWN unk_800718D0; // weak
_UNKNOWN unk_80071930; // weak
_UNKNOWN unk_80071974; // weak
_UNKNOWN unk_800719D8; // weak
_UNKNOWN unk_80071ABC; // weak
_UNKNOWN unk_80071C8C; // weak
_UNKNOWN unk_80071D38; // weak
_UNKNOWN unk_80071DA8; // weak
_UNKNOWN unk_80072094; // weak
_UNKNOWN unk_80072194; // weak
_UNKNOWN unk_80072230; // weak


//----- (8001101C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8001101C(int a1)
{
  int v2; // $a1

  if ( a1 > -8 )
    return -1;
  v2 = a1 + 4;
  *(_DWORD *)(4 * (a1 / 4)) = -2;
  MEMORY[0xFFFFFFFC] = a1 | 1;
  if ( a1 + 4 < 0 )
    v2 = a1 + 7;
  dword_80060A38 = 4 * (v2 >> 2);
  return 0;
}
// 800110FC: write access to const memory at 80060A38 has been detected
// 80011084: conditional instruction was optimized away because $a0.4==0
// 80060A38: using guessed type int dword_80060A38;

//----- (80011110) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80011110(int a1, int a2)
{
  unsigned int v2; // $a1
  int v3; // $v0
  unsigned int *v4; // $t1
  int result; // $v0
  int v6; // $a3
  unsigned int v7; // $t0
  int v8; // $a2
  int v9; // $v0

  v2 = (a2 + 3) & 0xFFFFFFFC;
  v3 = *(_DWORD *)(a1 - 4);
  v4 = (unsigned int *)(a1 - 4);
  if ( v3 == -2 )
    return 0;
  if ( (v3 & 0xFFFFFFFE) < v2 )
  {
    v6 = a1 - 4;
    v7 = v3 & 0xFFFFFFFE;
    do
    {
      v8 = v6 + 4 * (*(_DWORD *)v6 >> 2);
      v9 = *(_DWORD *)(v8 + 4);
      v6 = v8 + 4;
      if ( v9 == -2 )
      {
        if ( (-v6 >> 2) - 4 < v2 - v7 )
          break;
        *(_DWORD *)(v8 + 4) = (v2 - v7) | 1;
        *(_DWORD *)(v6 + 4 * ((v2 - v7) >> 2)) = -2;
        dword_80060A38 = 4;
      }
      else if ( (v9 & 1) == 0 )
      {
        break;
      }
      *v4 += *(_DWORD *)v6 & 0xFFFFFFFE;
      v7 += *(_DWORD *)v6 & 0xFFFFFFFE;
    }
    while ( v7 < v2 );
  }
  if ( v2 >= (*v4 & 0xFFFFFFFC) )
  {
    result = a1;
    if ( (*v4 & 0xFFFFFFFE) >= v2 )
      return result;
    return 0;
  }
  else
  {
    *(_DWORD *)(4 * ((int)v2 / 4) + a1) = (*(_DWORD *)(a1 - 4) & 0xFFFFFFFE) - v2 - 4;
    *(_DWORD *)(4 * ((int)v2 / 4) + a1) |= 1u;
    *v4 = v2 | *v4 & 1;
  }
  return a1;
}
// 800111BC: write access to const memory at 80060A38 has been detected
// 800111D8: write access to const memory at 80060A38 has been detected
// 80060A38: using guessed type int dword_80060A38;

//----- (800112B8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_800112B8(_DWORD *a1, unsigned int a2)
{
  int result; // $v0

  dword_80060A38 = (int)a1;
  *a1 = 0;
  result = a2 >> 2;
  dword_80060A48 = (int)&a1[result + 1];
  dword_80060A40 = a2 - 4;
  dword_80060A50 = 0;
  return result * 4;
}
// 800112B8: write access to const memory at 80060A38 has been detected
// 800112D4: write access to const memory at 80060A48 has been detected
// 800112E0: write access to const memory at 80060A40 has been detected
// 800112E8: write access to const memory at 80060A50 has been detected
// 80060A38: using guessed type int dword_80060A38;
// 80060A40: using guessed type int dword_80060A40;
// 80060A48: using guessed type int dword_80060A48;
// 80060A50: using guessed type int dword_80060A50;

//----- (800112F8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_800112F8()
{
  return 0;
}
// 80011354: write access to const memory at 80060B60 has been detected
// 80011360: write access to const memory at 80060A38 has been detected
// 80011384: write access to const memory at 80060A50 has been detected
// 8001138C: write access to const memory at 80060B68 has been detected
// 800113A0: write access to const memory at 80060B60 has been detected
// 80011434: write access to const memory at 80060A38 has been detected
// 80011460: write access to const memory at 80060B60 has been detected
// 800114CC: write access to const memory at 80060B60 has been detected
// 80060A38: using guessed type int dword_80060A38;
// 80060A48: using guessed type int dword_80060A48;
// 80060A50: using guessed type int dword_80060A50;
// 80060B60: using guessed type int dword_80060B60;
// 80060B68: using guessed type int dword_80060B68;

//----- (8001152C) --------------------------------------------------------
int __fastcall sub_8001152C(int a1)
{
  int result; // $v0

  result = *(_DWORD *)(a1 - 4) | 1;
  *(_DWORD *)(a1 - 4) = result;
  return result;
}

//----- (80011540) --------------------------------------------------------
int __fastcall sub_80011540(int a1, int a2)
{
  int v2; // $s1
  int result; // $v0

  if ( !a1 )
    return sub_800112F8();
  if ( !a2 )
  {
LABEL_7:
    sub_8001152C(a1);
    return v2;
  }
  result = sub_80011110(a1, a2);
  if ( result )
    return result;
  v2 = sub_800112F8();
  if ( v2 )
  {
    bcopy(a1, v2, a2);
    goto LABEL_7;
  }
  return v2;
}
// 800115B4: variable 'v2' is possibly undefined
// 800480D0: using guessed type int __fastcall bcopy(_DWORD, _DWORD, _DWORD);

//----- (80011628) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall main(int argc, const char **argv, const char **envp)
{
  _main(argc, argv, envp);
  dword_800608A4 = 1;
  sub_800154AC();
  sub_8001166C(60);
}
// 8001163C: write access to const memory at 800608A4 has been detected
// 80048AA0: using guessed type int __fastcall _main(_DWORD, _DWORD, _DWORD);
// 800608A4: using guessed type int dword_800608A4;

//----- (8001166C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
void __fastcall __noreturn sub_8001166C(int a1)
{
  _DWORD *v2; // $gp
  int v3; // $v1
  BOOL v4; // $v0
  _DWORD *v5; // $gp
  int v6; // $v0
  int v7; // $gp
  int v8; // $a0
  int v9; // $a1
  int v10; // $v1
  int v11; // $gp
  int v12; // $a1
  int v13; // $gp
  BOOL v14; // $v1
  int v15; // $v1
  int *v16; // $s0
  int *v17; // $v0
  int v18; // $a2
  int v19; // $a0
  int *v20; // $a1
  _DWORD *v21; // $a0
  int v22; // $v0
  int v23; // $v1
  int v24; // $a1
  _DWORD *v25; // $a0
  int i; // $v1
  int v27; // $v0
  int v28; // $gp
  int v29; // $v0
  int *v30; // $a1
  int v31; // $a0
  int j; // $v1
  int v33; // $v0
  _DWORD *k; // $s0
  _DWORD *v35; // $a0
  int v36; // $v1
  int v37; // $a1
  _BYTE v38[32]; // [sp+C0h] [-28h] BYREF
  int v39; // [sp+E0h] [-8h] BYREF

  sub_8002FBD0();
  sub_80014BC8(&dword_80061030, a1);
  sub_8002FA1C();
  while ( 1 )
  {
    if ( ((dword_80065BF0 & 0x800) != 0 || (v3 = v2[1], v3 == 1) && !dword_80068F28 || !v3 && byte_80065BCC[0])
      && (!dword_8006909C && (!dword_800690A0 || (dword_80068F1C & 0x800000) != 0) && dword_80069020 || v2[1]) )
    {
      v4 = v2[1] == 0;
      v2[1] = v4;
      if ( v4 )
      {
        if ( !dword_80068F28 )
        {
          dword_80068F28 = sub_8001A42C(dword_80068ED8, 4, 4, 0, 0, 1);
          if ( dword_80068F28 < -254 )
          {
            v6 = *(_DWORD *)(dword_80061A80 + 16);
            v5[4] = 1;
            v5[120] = 0;
            v5[121] = v6;
          }
          else
          {
            v5[1] = 0;
            dword_80068F28 = 0;
            v5[4] = 0;
          }
        }
        sub_80018A54();
      }
      else if ( dword_80068F28 )
      {
        v39 = 1;
        sub_8001DB38(0, dword_80068F28, 3072, 1, &v39);
        *(_DWORD *)(v7 + 4) = 1;
      }
      else
      {
        v8 = v2[120];
        v9 = dword_80061A80;
        v10 = v2[121];
        v2[4] = -1;
        dword_8003AE8C = v8;
        *(_DWORD *)(v9 + 16) = v10;
      }
    }
    else
    {
      v2[4] = 0;
    }
    nullsub_1();
    sub_8001E34C(0, 10496, 0, 0, 0);
    dword_80060928 = 0;
    dword_80061054 = 2;
    sub_80015110(&dword_80061030);
    *(_DWORD *)(v11 + 4) = 0;
    dword_80060A94 = 0;
    dword_800691F4 = -1;
    sub_80014BC8(&dword_80061030, 0);
    sub_8002FA1C();
    dword_80060928 = 0;
    sub_80012CBC(-1, v12);
    if ( (dword_80068F1C & 0x40000000) != 0 )
    {
      if ( (dword_80068F1C & 1) == 0 )
      {
        sub_8003AC44(dword_80061A84 + 32, 0x800u);
        *(_DWORD *)(dword_80061A84 + 12) = 1;
      }
      sub_8001D16C();
    }
    else
    {
      if ( !*(_DWORD *)(v13 + 4) )
        sub_80028A78();
      sub_80018A54();
    }
    v14 = 0;
    if ( (dword_80068F1C & 1) != 0 && **(_DWORD **)(dword_80065D5C + 16) )
      v14 = dword_80065DD4 != 0;
    if ( v14 )
    {
      SetRotMatrix(&dword_80065CB0);
      v15 = 0;
      v16 = &dword_80065CB0;
      do
      {
        ++v15;
        *(_WORD *)v16 &= 0xFFFCu;
        v16 = (int *)((char *)v16 + 2);
      }
      while ( v15 < 9 );
      v17 = *(int **)(dword_80065D5C + 16);
      v18 = *v17;
      v19 = 528482944;
      if ( *v17 )
      {
        v20 = v17 + 11;
        do
        {
          --v18;
          *(_DWORD *)v19 = (*(v20 - 8) << 16) & 0xFFFE0000 | *((unsigned __int16 *)v20 - 18);
          v21 = (_DWORD *)(v19 + 4);
          *v21++ = *(v20 - 7);
          *v21++ = *(v20 - 5) + 4 * *(_DWORD *)(*(v20 - 6) + 20);
          *v21++ = *(v20 - 4);
          *v21++ = *(v20 - 3) + 4 * *(_DWORD *)(*(v20 - 6) + 16);
          *v21++ = *(v20 - 2);
          *v21++ = *(v20 - 1);
          v22 = *v20;
          v20 += 12;
          *v21 = v22;
          v19 = (int)(v21 + 1);
        }
        while ( v18 );
      }
      if ( (void (*)())dword_800676D8 != sub_80041550 )
        sub_8003AC44(dword_80061A84 + 32, 0x800u);
      sub_80040ED8(0, dword_80061A84, dword_800676B0, dword_80069034);
    }
    else
    {
      SetRotMatrix(&dword_80065CB0);
      if ( (dword_80068F1C & 0x40000000) != 0 )
        goto LABEL_44;
      sub_8003AC44(dword_80061A84 + 32, 0x800u);
    }
    *(_DWORD *)(dword_80061A84 + 12) = 1;
LABEL_44:
    if ( (dword_80068F1C & 0x20000001) != 0 )
    {
      if ( dword_80067738 && (dword_80067A28 & 0x10) != 0 )
        sub_80043050(dword_80067738, dword_80061A84, dword_800676B0);
      if ( dword_80067748 && (dword_80067A28 & 0x400000) != 0 )
        sub_80043310(dword_80067748, dword_80061A84, dword_800676B0);
      if ( (dword_80067A28 & 0x1000000) != 0 )
      {
        sub_80043FFC(dword_80069034, dword_80061A84, dword_800676B0);
        v23 = *(_DWORD *)(dword_80061044 + 8);
        if ( v23 != 14 && v23 != 28 )
        {
          sub_800452A0(dword_80069034, dword_80061A84, dword_800676B0);
          if ( MEMORY[0x100] >> 28 == 10 )
            sub_8005D370(dword_80069034, dword_80061A84, dword_800676B0);
        }
      }
      if ( (dword_80067A28 & 0x10000000) != 0 )
        sub_800435DC(dword_80061A84, dword_800676B0);
    }
    if ( (dword_80068F1C & 0x40000000) == 0 )
      sub_8001D16C();
    nullsub_2();
    v24 = 528482368;
    v25 = v38;
    for ( i = 0; i < 8; ++i )
    {
      v27 = *(_DWORD *)v24;
      v24 += 4;
      *v25++ = v27;
    }
    sub_8003F3AC(*(_DWORD *)(dword_80061A84 + 8336), dword_80061A84, dword_800676B0);
    if ( dword_800691FC == -1 )
    {
      if ( dword_800690C4 )
        sub_8001CD80(dword_800690C4, *(_DWORD **)(dword_800690C4 + 68), 0, 0);
      if ( dword_800691E0 )
        sub_8001CD80(dword_800691E0, *(_DWORD **)(dword_800691E0 + 68), 0, 1);
    }
    v29 = *(_DWORD *)(v28 + 4);
    dword_80060A9C = 0;
    dword_80060A98 = 0;
    v30 = (int *)v38;
    if ( v29 )
    {
      sub_80018A54();
      v30 = (int *)v38;
    }
    v31 = 528482368;
    for ( j = 0; j < 8; ++j )
    {
      v33 = *v30++;
      *(_DWORD *)v31 = v33;
      v31 += 4;
    }
    for ( k = *(_DWORD **)(dword_80061A84 + 8348); k; k = (_DWORD *)*k )
    {
      v35 = (_DWORD *)k[1];
      v36 = v35[43];
      v37 = 1;
      if ( (v36 & 0x200000) != 0 )
        v37 = -1;
      if ( (v36 & 0x400) != 0 )
        v37 = 0;
      sub_8001C824((int)v35, v35[58], v35[59] >> 8, dword_80061A84 + 32, v37);
    }
    sub_80016634(0);
  }
}
// 80011854: write access to const memory at 8003AE8C has been detected
// 80011908: write access to const memory at 80060AC0 has been detected
// 80011968: write access to const memory at 80060928 has been detected
// 80011978: write access to const memory at 80060928 has been detected
// 80011994: write access to const memory at 80060A94 has been detected
// 800119FC: write access to const memory at 80060AC0 has been detected
// 80011A10: write access to const memory at 80060928 has been detected
// 80011E38: write access to const memory at 80060A9C has been detected
// 80011E40: write access to const memory at 80060A98 has been detected
// 8001199C: conditional instruction was optimized away because $s1.4==0
// 800119A4: conditional instruction was optimized away because $s1.4==0
// 800119AC: conditional instruction was optimized away because $s1.4==0
// 800119B4: conditional instruction was optimized away because $s1.4==0
// 800119F4: conditional instruction was optimized away because $s2.4==0
// 800116EC: variable 'v2' is possibly undefined
// 800117C8: variable 'v5' is possibly undefined
// 80011834: variable 'v7' is possibly undefined
// 80011990: variable 'v11' is possibly undefined
// 80011A18: variable 'v12' is possibly undefined
// 80011A34: variable 'v13' is possibly undefined
// 80011E34: variable 'v28' is possibly undefined
// 8003AE8C: using guessed type int dword_8003AE8C;
// 8003F3AC: using guessed type int __fastcall sub_8003F3AC(_DWORD, _DWORD, _DWORD);
// 80048110: using guessed type int printf(const char *, ...);
// 8004F674: using guessed type int __fastcall SetRotMatrix(_DWORD);
// 80060928: using guessed type int dword_80060928;
// 80060A90: using guessed type int dword_80060A90;
// 80060A94: using guessed type int dword_80060A94;
// 80060A98: using guessed type int dword_80060A98;
// 80060A9C: using guessed type int dword_80060A9C;
// 80060AC0: using guessed type int dword_80060AC0;
// 80061030: using guessed type _DWORD dword_80061030;
// 80061044: using guessed type int dword_80061044;
// 80061054: using guessed type int dword_80061054;
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;
// 80065BF0: using guessed type int dword_80065BF0;
// 80065CB0: using guessed type int dword_80065CB0;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065DD4: using guessed type int dword_80065DD4;
// 800676B0: using guessed type int dword_800676B0[];
// 800676D8: using guessed type int dword_800676D8;
// 80067738: using guessed type int dword_80067738;
// 80067748: using guessed type int dword_80067748;
// 80067A28: using guessed type int dword_80067A28;
// 80068ED8: using guessed type _DWORD dword_80068ED8[2];
// 80068F0C: using guessed type int dword_80068F0C;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F20: using guessed type int dword_80068F20;
// 80068F28: using guessed type int dword_80068F28;
// 80068F3C: using guessed type int dword_80068F3C;
// 80069020: using guessed type int dword_80069020;
// 80069034: using guessed type int dword_80069034;
// 8006909C: using guessed type int dword_8006909C;
// 800690A0: using guessed type int dword_800690A0;
// 800690C4: using guessed type int dword_800690C4;
// 800691DC: using guessed type int dword_800691DC;
// 800691E0: using guessed type int dword_800691E0;
// 800691F4: using guessed type int dword_800691F4;
// 800691FC: using guessed type int dword_800691FC;

//----- (80011F68) --------------------------------------------------------
void *sub_80011F68()
{
  void *result; // $v0

  dword_800676C8 = (int)&loc_80041648;
  dword_800676CC = (int)&loc_800418CC;
  dword_800676D0 = (int)sub_80041768;
  result = &loc_80041A3C;
  dword_800676D4 = (int)&loc_80041A3C;
  return result;
}
// 800676C8: using guessed type int dword_800676C8;
// 800676CC: using guessed type int dword_800676CC;
// 800676D0: using guessed type int dword_800676D0;
// 800676D4: using guessed type int dword_800676D4;

//----- (80011FB8) --------------------------------------------------------
void nullsub_1()
{
  ;
}

//----- (80011FC0) --------------------------------------------------------
void nullsub_2()
{
  ;
}

//----- (80011FC8) --------------------------------------------------------
void nullsub_6()
{
  ;
}

//----- (80011FD0) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_80011FD0(unsigned int a1)
{
  unsigned int v1; // $a2
  int i; // $a0
  int v3; // $v0
  _BYTE *v4; // $v1

  if ( (a1 & 1) != 0 )
  {
    byte_80060B75 = 0;
    v1 = a1 >> 1;
    for ( i = 4; i >= 0; --i )
    {
      v3 = v1 & 0x3F;
      v1 >>= 6;
      v4 = (char *)&dword_80060B70 + i;
      *v4 = a0123456789abcd[v3];
    }
  }
  else
  {
    sub_80048120((int)&dword_80060B70, "[%X]", a1);
  }
  return &dword_80060B70;
}
// 80011FEC: write access to const memory at 80060B75 has been detected
// 80060B70: using guessed type int dword_80060B70;
// 80060B75: using guessed type char byte_80060B75;

//----- (80012054) --------------------------------------------------------
int *__fastcall sub_80012054(int a1)
{
  if ( (a1 & 1) != 0 )
    sub_80048120((int)dword_80060B80, "p%d", a1 >> 1);
  else
    sub_80048120((int)dword_80060B80, "[%X]", a1);
  return dword_80060B80;
}
// 80060B80: using guessed type int dword_80060B80[4];

//----- (800120AC) --------------------------------------------------------
int __fastcall sub_800120AC(unsigned __int8 *a1)
{
  int v1; // $a2
  int v2; // $a3
  int v3; // $v0
  bool v4; // dc
  int v5; // $a3
  int v6; // $a2
  int v7; // $a1
  const char *v8; // $v1
  int v9; // $t0
  int v10; // $v0

  v1 = 0;
  v2 = 5;
  while ( 1 )
  {
    v3 = *a1++;
    if ( !v3 )
      break;
    v7 = 0;
    v8 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_!NONE";
    v9 = v3;
    while ( v7 != 64 )
    {
      v10 = *(unsigned __int8 *)v8++;
      if ( v10 == v9 )
        goto LABEL_11;
      ++v7;
    }
    v7 = 62;
LABEL_11:
    --v2;
    v1 = (v1 << 6) | v7;
    if ( !v2 )
      goto LABEL_12;
  }
  v4 = v2 == 0;
  v5 = v2 - 1;
  if ( v4 )
  {
LABEL_12:
    v6 = 2 * v1;
    return v6 | 1;
  }
  do
  {
    v1 = (v1 << 6) | 0x3E;
    v4 = v5-- != 0;
  }
  while ( v4 );
  v6 = 2 * v1;
  return v6 | 1;
}

//----- (80012144) --------------------------------------------------------
int __fastcall sub_80012144(unsigned int a1)
{
  int result; // $v0

  switch ( a0123456789abcd[(a1 >> 1) & 0x3F] )
  {
    case 'A':
      result = 12;
      break;
    case 'B':
      result = 19;
      break;
    case 'C':
      result = 11;
      break;
    case 'D':
      result = 21;
      break;
    case 'G':
      result = 2;
      break;
    case 'I':
      result = 16;
      break;
    case 'L':
      result = 6;
      break;
    case 'M':
      result = 13;
      break;
    case 'N':
      result = 14;
      break;
    case 'O':
      result = 20;
      break;
    case 'R':
      result = 17;
      break;
    case 'S':
      result = 4;
      break;
    case 'T':
      result = 5;
      break;
    case 'U':
      result = 18;
      break;
    case 'V':
      result = 1;
      break;
    case 'W':
      result = 3;
      break;
    case 'X':
      result = 15;
      break;
    case 'Z':
      result = 7;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (80012224) --------------------------------------------------------
int __fastcall sub_80012224(int a1)
{
  return (unsigned __int8)a0123456789abcd[a1];
}

//----- (80012288) --------------------------------------------------------
int *sub_80012288()
{
  return &dword_800608A0;
}
// 800608A0: using guessed type int dword_800608A0;

//----- (80012294) --------------------------------------------------------
int *sub_80012294()
{
  return &dword_800608A0;
}
// 800608A0: using guessed type int dword_800608A0;

//----- (800122A0) --------------------------------------------------------
int __fastcall sub_800122A0(unsigned int *a1)
{
  if ( (*a1 & 3) != 0 )
    return sub_80012144(a1[1]);
  else
    return *(_DWORD *)(*a1 + 8);
}

//----- (800122E4) --------------------------------------------------------
int __fastcall sub_800122E4(int a1, int a2)
{
  int v3; // $v0
  int v4; // $s2
  int v5; // $s0
  unsigned int *i; // $s1

  v3 = *(_DWORD *)(a1 + 24);
  v4 = 0;
  v5 = *(_DWORD *)(v3 + 1028) - 1;
  for ( i = (unsigned int *)(v3 + 1312); v5 >= 0; i += 2 )
  {
    if ( sub_800122A0(i) == a2 )
      ++v4;
    --v5;
  }
  return v4;
}

//----- (800123F4) --------------------------------------------------------
int __fastcall sub_800123F4(int a1, int a2)
{
  if ( *(_DWORD *)(a1 + 12) )
    return *(_DWORD *)(a1 + 4 * (a2 + 1) + 16) - *(_DWORD *)(a1 + 4 * a2 + 16);
  else
    return 0;
}

//----- (8001242C) --------------------------------------------------------
int __fastcall sub_8001242C(_DWORD *a1, int a2, int a3)
{
  int v3; // $gp
  int result; // $v0
  int v5; // $s1
  int v6; // $s2
  int v8; // $v1
  int v9; // $v0
  int v10; // $v0
  unsigned int v11; // $a0
  int v12; // $a1
  _BYTE v13[8]; // [sp+10h] [-10h] BYREF
  char v14[8]; // [sp+18h] [-8h] BYREF

  result = *(_DWORD *)(v3 + 44);
  v5 = a2;
  if ( result )
  {
    result = 1;
    v6 = 0;
    if ( a3 == 1 )
    {
      if ( a2 )
        goto LABEL_12;
      v8 = a1[1] & 0x1FFFF;
      v9 = v8 + 2047;
      if ( v8 + 2047 < 0 )
        v9 = v8 + 4094;
      v6 = v9 >> 11 << 11;
      v5 = sub_800112F8();
      result = -15;
      if ( v5 )
      {
LABEL_12:
        while ( 1 )
        {
          while ( 1 )
          {
            sub_80045E68(*a1 & 0x7FFFFF, v14);
            if ( sub_80045A1C(2u, v14, (int)v13) )
              break;
            printf("hrce\n");
          }
          v10 = a1[1] & 0x1FFFF;
          v11 = (unsigned int)(v10 + 2047) >> 11;
          if ( v10 + 2047 < 0 )
            v11 = (unsigned int)(v10 + 4094) >> 11;
          if ( sub_80047E40(v11, v5) && sub_80013000(1) != -16 )
            break;
          printf("hde\n");
        }
        result = v5;
        if ( v6 )
        {
          v12 = a1[1] & 0x1FFFF;
          result = v5;
          if ( v6 != v12 )
            return sub_80011540(v5, v12);
        }
      }
    }
  }
  return result;
}
// 8001242C: variable 'v3' is possibly undefined
// 80045E68: using guessed type int __fastcall sub_80045E68(_DWORD, _DWORD);
// 80048110: using guessed type int printf(const char *, ...);

//----- (80012588) --------------------------------------------------------
int __fastcall sub_80012588(int a1)
{
  int v2; // $v0
  int v3; // $a0
  int v4; // $t2
  int result; // $v0
  int v6; // $t0
  _DWORD *v7; // $a3
  int v8; // $a2
  int v9; // $a1
  _DWORD *v10; // $v1

  v2 = *(unsigned __int16 *)(a1 + 2);
  v3 = *(_DWORD *)(a1 + 8);
  v4 = a1 + 16;
  if ( v2 == 1 )
    return -255;
  v6 = v3 - 1;
  if ( *(_WORD *)a1 != 4660 )
    return -18;
  if ( v6 >= 0 )
  {
    v7 = (_DWORD *)(4 * v6 + v4);
    do
    {
      v8 = a1 + *v7;
      *v7 = v8;
      v9 = *(_DWORD *)(v8 + 12);
      if ( v9 >= 0 )
      {
        v10 = (_DWORD *)(4 * v9 + v8 + 16);
        do
        {
          --v9;
          *v10-- += v8;
        }
        while ( v9 >= 0 );
      }
      --v6;
      --v7;
    }
    while ( v6 >= 0 );
  }
  result = -255;
  *(_DWORD *)(4 * v3 + v4) += a1;
  return result;
}

//----- (80012634) --------------------------------------------------------
int __fastcall sub_80012634(unsigned int *a1, int a2)
{
  int v3; // $a2
  int v4; // $a3
  unsigned int v6; // $a0
  unsigned int v7; // $a2
  unsigned int v8; // $a2
  unsigned int v9; // $a2

  v3 = 305419896;
  v4 = 0;
  while ( v4++ < a2 / 4 )
  {
    v6 = *a1++;
    v7 = ((8 * (v3 + (unsigned __int8)v6)) | ((v3 + (unsigned int)(unsigned __int8)v6) >> 29)) + BYTE1(v6);
    v8 = ((8 * v7) | (v7 >> 29)) + BYTE2(v6);
    v9 = ((8 * v8) | (v8 >> 29)) + HIBYTE(v6);
    v3 = (8 * v9) | (v9 >> 29);
  }
  return v3;
}

//----- (800126D0) --------------------------------------------------------
int __fastcall sub_800126D0(int a1)
{
  int *v1; // $s1
  int v2; // $v0
  int v3; // $a0
  _DWORD *v4; // $s3
  unsigned int v5; // $s2
  _DWORD *v6; // $s0
  int v7; // $v0
  int v8; // $a1
  int i; // $v1
  void (__fastcall *v10)(int); // $v0
  int v11; // $a2
  int v12; // $s2
  int v13; // $gp
  int v14; // $a0
  int result; // $v0
  int *v16; // $s0
  unsigned int v17; // $v0
  int *v18; // $a0
  int v19; // $v0
  int v20; // $v0
  int v21; // $a0
  unsigned int *v22; // $s3
  int v23; // $s4
  unsigned int v24; // $s2
  int *v25; // $s0
  int v26; // $v0
  _DWORD *v27; // $a1
  int v28; // $v1
  int j; // $a2
  int v30; // $v1
  void (__fastcall *v31)(_DWORD *); // $v0
  int v32; // $v0

  v1 = &dword_8006105C[11 * a1];
  if ( (int *)dword_80061A5C == v1 )
    dword_80061A5C = 0;
  v2 = *v1;
  *((_WORD *)v1 + 2) = 30;
  switch ( *(_WORD *)(v2 + 2) )
  {
    case 0:
    case 5:
      v3 = *v1;
      v4 = *(_DWORD **)(((*(_DWORD *)(*(_DWORD *)(*v1 + 16) + 4) >> 13) & 0x3FC) + dword_80061038);
      v5 = 0;
      if ( *(_DWORD *)(*v1 + 8) )
      {
        v6 = v4 + 1;
        v7 = 0;
        do
        {
          v8 = *(_DWORD *)(v3 + v7 + 16);
          for ( i = *(_DWORD *)(v8 + 4); *v6 != i; v4 += 2 )
            v6 += 2;
          *v4 = v8;
          ++*((_BYTE *)v1 + 15);
          v10 = *(void (__fastcall **)(int))&a0123456789abcd[28 * *(_DWORD *)(v8 + 8) + 80];
          if ( v10 )
            v10(v8);
          v3 = *v1;
          --*((_BYTE *)v1 + 15);
          ++v5;
          v7 = 4 * v5;
        }
        while ( v5 < *(_DWORD *)(v3 + 8) );
      }
      goto LABEL_30;
    case 1:
      v12 = sub_8001395C();
      v14 = v12;
      if ( v12 == -12 )
      {
        sub_80012B00((int)v1);
        result = 30;
      }
      else
      {
        v16 = &dword_80060D70[11 * v12];
        if ( v12 < 0 )
          v14 = v12 + 3;
        *(_WORD *)(v13 + 64) = ((_WORD)v12 - 4 * (unsigned __int16)(v14 >> 2)) << 8;
        *(_WORD *)(v13 + 66) = (unsigned __int16)(v14 >> 2) << 7;
        LoadImage(&dword_800608B8, *v1, v11);
        *((_WORD *)v16 + 2) = 20;
        v17 = *(_DWORD *)(*v1 + 4);
        v16[6] = v17;
        v16[5] = v1[5];
        v16[8] = sub_80014B04(v17);
        v18 = (int *)v16[8];
        *((_BYTE *)v16 + 15) = *((_BYTE *)v1 + 15);
        v19 = v16[7];
        *((_BYTE *)v16 + 14) = *((_BYTE *)v1 + 14);
        *v18 = v19;
        *((_WORD *)v1 + 2) = 1;
        v20 = v1[5];
        *((_BYTE *)v1 + 15) = 0;
        *(_DWORD *)(4 * (v20 >> 1) + dword_80061A6C) = v16;
        sub_800181E0(*(_DWORD *)(*v1 + 4), 1);
        result = 2 * v12;
      }
      break;
    case 3:
    case 4:
      v21 = *v1;
      v22 = *(unsigned int **)(((*(_DWORD *)(*(_DWORD *)(*v1 + 16) + 4) >> 13) & 0x3FC) + dword_80061038);
      v23 = v1[9];
      v24 = 0;
      if ( *(_DWORD *)(*v1 + 8) )
      {
        v25 = (int *)(v22 + 1);
        v26 = 0;
        do
        {
          v27 = *(_DWORD **)(v21 + v26 + 16);
          v28 = v27[1];
          for ( j = v27[4]; *v25 != v28; v22 += 2 )
            v25 += 2;
          if ( !v24 )
          {
            if ( *(_WORD *)(*v1 + 2) == 4 )
              v30 = *v25;
            else
              v30 = 1670788223;
            dword_80060B90[*(__int16 *)(v23 + 12)] = v30;
          }
          *v22 = (4 * (j - *v1 + *(_DWORD *)(v23 + 28))) | 0xC0000002;
          v31 = *(void (__fastcall **)(_DWORD *))&a0123456789abcd[28 * v27[2] + 80];
          if ( v31 )
            v31(v27);
          v21 = *v1;
          ++v24;
          v26 = 4 * v24;
        }
        while ( v24 < *(_DWORD *)(*v1 + 8) );
      }
      *(_WORD *)(v23 + 4) = 20;
      *((_WORD *)v1 + 2) = 1;
      v32 = v1[5];
      *((_BYTE *)v1 + 15) = 0;
      *(_DWORD *)(4 * (v32 >> 1) + dword_80061A6C) = v23;
      result = *(_DWORD *)(v23 + 28);
      break;
    default:
LABEL_30:
      result = *v1;
      *((_WORD *)v1 + 2) = 20;
      break;
  }
  return result;
}
// 800128B0: variable 'v13' is possibly undefined
// 800128C4: variable 'v11' is possibly undefined
// 8004C8AC: using guessed type int __fastcall LoadImage(_DWORD, _DWORD, _DWORD);
// 800608B8: using guessed type int dword_800608B8;
// 80060B90: using guessed type int dword_80060B90[3];
// 80060D70: using guessed type int dword_80060D70[164];
// 80061038: using guessed type int dword_80061038;
// 8006105C: using guessed type int dword_8006105C[];
// 80061A5C: using guessed type int dword_80061A5C;
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80012B00) --------------------------------------------------------
int __fastcall sub_80012B00(int a1)
{
  int v2; // $a0
  int v3; // $v1
  int result; // $v0
  _DWORD *v5; // $s1
  int v6; // $s4
  unsigned int v7; // $s2
  _DWORD *v8; // $s0
  int v9; // $a0
  int i; // $v1
  void (*v11)(void); // $v0

  if ( dword_80061A5C == a1 )
    dword_80061A5C = 0;
  if ( (unsigned int)*(unsigned __int16 *)(a1 + 4) - 20 >= 2 )
    goto LABEL_9;
  v2 = *(_DWORD *)a1;
  v3 = *(unsigned __int16 *)(*(_DWORD *)a1 + 2);
  if ( v3 == 1 || v3 == 3 || v3 == 4 )
  {
    if ( (unsigned int)*(unsigned __int16 *)(a1 + 4) - 20 < 2 )
      *(_DWORD *)(4 * (*(int *)(a1 + 20) >> 1) + dword_80061A6C) = -18;
LABEL_9:
    result = -255;
    *(_WORD *)(a1 + 4) = 1;
    *(_BYTE *)(a1 + 15) = 0;
    *(_BYTE *)(a1 + 14) = 0;
    return result;
  }
  v5 = *(_DWORD **)(((*(_DWORD *)(*(_DWORD *)(v2 + 16) + 4) >> 13) & 0x3FC) + dword_80061038);
  v6 = *(_DWORD *)(a1 + 20);
  v7 = 0;
  if ( *(_DWORD *)(v2 + 8) )
  {
    v8 = v5 + 1;
    do
    {
      v9 = *(_DWORD *)(*(_DWORD *)a1 + 4 * v7 + 16);
      for ( i = *(_DWORD *)(v9 + 4); *v8 != i; v5 += 2 )
        v8 += 2;
      v11 = *(void (**)(void))&a0123456789abcd[28 * *(_DWORD *)(v9 + 8) + 84];
      if ( v11 )
        v11();
      *v5 = v6;
      ++v7;
    }
    while ( v7 < *(_DWORD *)(*(_DWORD *)a1 + 8) );
  }
  sub_80013F74(a1);
  return -255;
}
// 80061038: using guessed type int dword_80061038;
// 80061A5C: using guessed type int dword_80061A5C;
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80012CBC) --------------------------------------------------------
int __fastcall sub_80012CBC(int a1, int a2)
{
  int v2; // $gp
  int result; // $v0
  int v5; // $a2
  int v6; // $s0
  _DWORD *v7; // $a0
  int v8; // $v1
  int v9; // $v1
  int v10; // $v1
  bool v11; // dc
  int v12; // $a1
  int v13; // $v0
  int v14; // $a0
  int v15; // $v1
  int v16; // $v0
  char *v17; // $a0
  int v18; // $s0
  int *v19; // $s1
  int v20; // [sp+18h] [-8h] BYREF

  result = dword_80061A58;
  if ( dword_80061A58 )
  {
    if ( !dword_80061A5C )
    {
      v5 = -1;
      v6 = 0;
      if ( dword_800613F8 > 0 )
      {
        v7 = &unk_800613FC;
        do
        {
          if ( *((_WORD *)v7 + 2) == 2 )
          {
            if ( (v8 = v7[5], a1 == -1) && (v5 == -1 || v8 < a2) || v8 == a1 )
            {
              a2 = v7[5];
              v5 = v6;
              if ( v8 == a1 )
                break;
            }
          }
          ++v6;
          v7 += 11;
        }
        while ( v6 < dword_800613F8 );
      }
      if ( v5 != -1 )
      {
        v9 = *(_DWORD *)(v2 + 44);
        v20 = 1;
        if ( !v9
          || (v10 = a2 >> 1,
              v11 = a2 >> 1 >= *(_DWORD *)(dword_80061048 + 1024) - 1,
              v12 = *(_DWORD *)(dword_80061048 + 1024) - 1,
              v11) )
        {
LABEL_19:
          v16 = 2 * v5;
        }
        else
        {
          v13 = v10 + 1;
          while ( 1 )
          {
            v14 = (2 * v13) >> 1;
            v15 = *(_DWORD *)(4 * v14 + dword_80061A6C);
            v16 = 2 * v5;
            if ( v15 >= -254 )
              break;
            if ( !*(_WORD *)(v15 + 6) )
            {
              ++v20;
              v13 = v14 + 1;
              if ( v14 < v12 )
                continue;
            }
            goto LABEL_19;
          }
        }
        v17 = (char *)&unk_800613FC + 4 * (4 * (v16 + v5) - v5);
        sub_80013D04((int)v17, *((_DWORD *)v17 + 5), 1670788223, &v20, a1 != -1);
      }
    }
    result = dword_80061058;
    v18 = 0;
    if ( dword_80061058 > 0 )
    {
      v19 = dword_8006105C;
      do
      {
        sub_800132F8((int)v19, a1);
        result = ++v18 < dword_80061058;
        v19 += 11;
      }
      while ( v18 < dword_80061058 );
    }
  }
  return result;
}
// 80012D7C: variable 'v2' is possibly undefined
// 80061048: using guessed type int dword_80061048;
// 80061058: using guessed type int dword_80061058;
// 8006105C: using guessed type int dword_8006105C[];
// 800613F8: using guessed type int dword_800613F8;
// 80061A58: using guessed type int dword_80061A58;
// 80061A5C: using guessed type int dword_80061A5C;
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80012EAC) --------------------------------------------------------
int __fastcall sub_80012EAC(int a1, int a2)
{
  int result; // $v0

  dword_80061A70 = 1;
  if ( !dword_80061A58 )
    goto LABEL_8;
  do
  {
    do
    {
      if ( dword_80065D5C )
        sub_80035078((unsigned int *)(*(_DWORD *)(dword_80065D5C + 16) + 740));
      sub_80012CBC(-1, a2);
      if ( dword_800691FC >= 0 )
      {
        if ( *(_DWORD *)(dword_80061A7C + 28) )
          sub_80016634(1);
      }
    }
    while ( dword_80061A58 );
LABEL_8:
    result = dword_800691FC;
  }
  while ( dword_800691FC >= 0 );
  return result;
}
// 80012F00: variable 'a2' is possibly undefined
// 80061A58: using guessed type int dword_80061A58;
// 80061A70: using guessed type int dword_80061A70;
// 80061A7C: using guessed type int dword_80061A7C;
// 80065D5C: using guessed type int dword_80065D5C;
// 800691FC: using guessed type int dword_800691FC;

//----- (80012F7C) --------------------------------------------------------
int __fastcall sub_80012F7C(int a1)
{
  int v1; // $gp
  int result; // $v0
  char v4[8]; // [sp+10h] [-8h] BYREF

  result = *(_DWORD *)(v1 + 44);
  if ( result )
  {
    result = dword_80061A5C;
    if ( !dword_80061A5C )
    {
      result = sub_800459AC(1);
      if ( !result )
      {
        sub_80045E68(dword_8006C4D8[3 * a1] & 0x7FFFFF, v4);
        return sub_80045B54(0x15u, v4);
      }
    }
  }
  return result;
}
// 80012F7C: variable 'v1' is possibly undefined
// 80045E68: using guessed type int __fastcall sub_80045E68(_DWORD, _DWORD);
// 80061A5C: using guessed type int dword_80061A5C;
// 8006C4D8: using guessed type _DWORD dword_8006C4D8[183];

//----- (80013000) --------------------------------------------------------
int __fastcall sub_80013000(int a1)
{
  BOOL v1; // $s0
  int v2; // $v0
  bool v3; // dc
  int result; // $v0
  int v5; // $v0

  v1 = a1 == 0;
  v2 = sub_80047F44();
  if ( v2 < 0 )
    return -16;
  v3 = v2 != 0;
  result = 0;
  if ( !v3 )
  {
    v5 = sub_80045E48(v1);
    v3 = v5 >= 0;
    result = v5 == 0;
    if ( !v3 )
      return -16;
  }
  return result;
}
// 80045E48: using guessed type int __fastcall sub_80045E48(_DWORD);

//----- (80013050) --------------------------------------------------------
int __fastcall sub_80013050(int a1, int a2)
{
  int v2; // $a3
  int v3; // $v0
  int v4; // $s2
  int v5; // $s1
  int v6; // $v1
  int v7; // $v0
  int v8; // $s0
  int v9; // $v1
  int v10; // $v0
  bool v11; // dc
  int result; // $v0
  char v13[16]; // [sp+10h] [-10h] BYREF

  v2 = *(_DWORD *)(a1 + 20);
  if ( *(_WORD *)(a1 + 10) )
  {
    v3 = *(__int16 *)(a1 + 8);
    v4 = 32 * a2 - v3;
    v5 = *(_DWORD *)a1 + (v3 << 11);
    v6 = dword_80061050;
    v7 = *(_DWORD *)(dword_80061048 + 4 * (v2 >> 1) + 1056) >> 6;
  }
  else
  {
    v4 = 32 * a2;
    v5 = *(_DWORD *)a1;
    v6 = dword_80061050 + *(_DWORD *)(dword_80061048 + 1048);
    v7 = 32 * (v2 >> 1);
  }
  v8 = v6 + v7;
  while ( 1 )
  {
    do
      sub_80045E68(v8, v13);
    while ( !sub_80045B54(2u, v13) );
    v9 = sub_800459AC(1);
    v10 = 5;
    if ( !v9 )
    {
      v10 = sub_800459AC(0);
      v9 = 5;
    }
    if ( v10 != v9 )
    {
      v11 = !sub_80047E40(v4, v5);
      result = -255;
      if ( !v11 )
        break;
    }
  }
  return result;
}
// 80045E68: using guessed type int __fastcall sub_80045E68(_DWORD, _DWORD);
// 80061048: using guessed type int dword_80061048;
// 80061050: using guessed type int dword_80061050;

//----- (80013158) --------------------------------------------------------
BOOL __fastcall sub_80013158(int a1, int a2)
{
  bool v2; // dc
  int v3; // $a1
  BOOL result; // $v0
  int v5; // $a2

  v2 = a2 != -1;
  v3 = a2 >> 1;
  if ( !v2 )
    return 1;
  v5 = *(int *)(*(_DWORD *)(a1 + 36) + 20) >> 1;
  result = 0;
  if ( v5 >= v3 )
    return v5 - *(_DWORD *)(a1 + 28) < v3;
  return result;
}

//----- (800131B0) --------------------------------------------------------
int __fastcall sub_800131B0(int a1)
{
  int result; // $v0

  *(_WORD *)(a1 + 4) = 2;
  *(_DWORD *)(a1 + 28) = 1;
  result = -16;
  *(_DWORD *)(a1 + 36) = a1;
  return result;
}

//----- (800131CC) --------------------------------------------------------
int __fastcall sub_800131CC(int a1)
{
  int v1; // $v1
  int v2; // $a1
  int v3; // $a2
  int v4; // $t0
  int v5; // $a0
  int v6; // $a0

  v2 = a1;
  v3 = *(__int16 *)(a1 + 4);
  v4 = *(_DWORD *)(a1 + 28);
  if ( v3 == 3 || (v5 = 0, v3 == 13) )
  {
    v6 = *(_DWORD *)v2;
    *(_WORD *)(v2 + 4) = 4;
    sub_80012588(v6);
    return 0;
  }
  else
  {
    if ( v4 > 0 )
    {
      do
      {
        if ( v3 == 2 )
        {
          *(_WORD *)(v2 + 10) = 0;
          if ( *(_WORD *)(v2 + 4) == 2 )
          {
            *(_WORD *)(v2 + 4) = 3;
          }
          else
          {
            *(_WORD *)(v2 + 4) = 13;
            *(_DWORD *)(v2 + 16) = *(_DWORD *)(v2 + 44);
            **(_WORD **)(v2 + 16) = -30875;
          }
        }
        v1 = v2;
        ++v5;
        v2 -= 44;
      }
      while ( v5 < v4 );
    }
    return v1;
  }
}
// 8001322C: conditional instruction was optimized away because $t1.4==0
// 80013278: conditional instruction was optimized away because $t1.4==0
// 800132E4: variable 'v1' is possibly undefined
// 80061048: using guessed type int dword_80061048;

//----- (800132F8) --------------------------------------------------------
int __fastcall sub_800132F8(int a1, int a2)
{
  int v2; // $gp
  int result; // $v0
  int *v6; // $v0
  int v7; // $v1
  int v8; // $s1
  int v9; // $v1
  int *v10; // $v0
  int v11; // $v0
  int v12; // $a0
  int v13; // $a1
  int v14; // $v1
  int *v15; // $v0
  int v16; // $a0
  int v17; // $v1
  int v18; // $a0
  int v19; // $v1
  int v20; // $v0
  int v21; // $a1
  unsigned int v22; // $v1
  unsigned int v23; // $a2
  int v24; // $a1
  int v25; // $a0
  int v26; // $s1
  int v27; // $v0
  int v28; // $v1

  while ( 2 )
  {
    result = -2147418112;
    switch ( *(_WORD *)(a1 + 4) )
    {
      case 2:
        result = dword_80061A5C;
        if ( !dword_80061A5C && (a2 == -1 || (result = sub_80013158(a1, a2)) != 0) )
        {
          v7 = *(_DWORD *)(v2 + 44);
          dword_80061A68 = *(_DWORD *)(a1 + 20);
          if ( !v7 )
            goto LABEL_22;
          result = sub_800459AC(1);
          if ( result == 2 || a2 != -1 )
          {
            v8 = sub_800131CC(a1);
            dword_80061A5C = a1;
            while ( sub_80013050(v8, *(_DWORD *)(a1 + 28)) >= -254 )
              ;
            a1 = v8;
            continue;
          }
        }
        return result;
      case 3:
        if ( !*(_DWORD *)(v2 + 44) || dword_80061A5C != a1 )
        {
LABEL_22:
          sub_80013F74(a1);
          v11 = dword_80061A58;
          dword_80061A5C = 0;
          goto LABEL_55;
        }
        v9 = sub_80013000(0);
        result = -16;
        if ( v9 == 1 )
        {
          if ( sub_800131CC(a1) == -16 )
          {
            v10 = sub_80012054(*(_DWORD *)(a1 + 20));
            printf("ERROR: frame retry loading %s\n", (const char *)v10);
            dword_80061A5C = 0;
            continue;
          }
          dword_80061A5C = 0;
          goto LABEL_23;
        }
        if ( v9 == -16 )
        {
          printf("de l\n");
          dword_80061A5C = 0;
          sub_800131B0(a1);
          continue;
        }
        return result;
      case 4:
        goto LABEL_23;
      case 0xA:
        goto LABEL_27;
      case 0xB:
        goto LABEL_49;
      case 0xD:
        result = 34661;
        if ( **(unsigned __int16 **)(a1 + 16) == 34661 )
          return result;
        if ( sub_800131CC(a1) == -16 )
        {
          v6 = sub_80012054(*(_DWORD *)(a1 + 20));
          printf("ERROR: frame retry slave %s\n", (const char *)v6);
          continue;
        }
LABEL_23:
        if ( *(unsigned __int16 *)(*(_DWORD *)a1 + 2) >= 5u || *(unsigned __int16 *)(*(_DWORD *)a1 + 2) < 3u )
        {
          sub_800126D0(*(__int16 *)(a1 + 12));
          result = dword_80061A58 - 1;
          goto LABEL_56;
        }
        *(_WORD *)(a1 + 4) = 10;
LABEL_27:
        result = dword_80061A64;
        if ( !dword_80061A64 )
        {
          result = SpuIsTransferCompleted(0);
          if ( result )
          {
            v12 = *(unsigned __int16 *)(*(_DWORD *)a1 + 2);
            v13 = -1;
            if ( v12 == 4 )
              v13 = **(_DWORD **)(*(_DWORD *)(*(_DWORD *)a1 + 16) + 16);
            v14 = sub_80013B8C(v12, v13);
            if ( v14 == -12 )
            {
              result = 5;
              if ( *(_WORD *)(*(_DWORD *)a1 + 2) != 5 )
              {
                sub_80013F74(a1);
                return --dword_80061A58;
              }
              return result;
            }
            v15 = &dword_80060BB8[11 * v14];
            *(_WORD *)(a1 + 4) = 11;
            *(_DWORD *)(a1 + 36) = v15;
            dword_80061A64 = a1;
            *((_WORD *)v15 + 2) = 11;
            v16 = v15[7];
            v15[5] = *(_DWORD *)(a1 + 20);
            v17 = *(_DWORD *)(a1 + 24);
            *((_BYTE *)v15 + 15) = 0;
            *((_BYTE *)v15 + 14) = 0;
            v15[6] = v17;
            SpuSetTransferStartAddr(v16);
            v18 = *(_DWORD *)a1;
            v19 = *(unsigned __int16 *)(*(_DWORD *)a1 + 2);
            if ( v19 == 4 )
            {
              v20 = *(_DWORD *)(v18 + 16);
              v18 = *(_DWORD *)(v20 + 20);
              v21 = *(_DWORD *)(*(_DWORD *)(v20 + 16) + 4);
              goto LABEL_48;
            }
            if ( *(unsigned __int16 *)(*(_DWORD *)a1 + 2) >= 5u )
            {
              if ( v19 == 5 )
              {
                v22 = 0;
                if ( *(_DWORD *)(v18 + 8) )
                {
                  v23 = *(_DWORD *)(v18 + 8);
                  v24 = *(_DWORD *)a1;
                  while ( 1 )
                  {
                    v25 = *(_DWORD *)(v24 + 16);
                    v26 = 4 * v22;
                    if ( *(_DWORD *)(v25 + 4) == *(_DWORD *)(a1 + 24) )
                      break;
                    ++v22;
                    v24 += 4;
                    if ( v22 >= v23 )
                      goto LABEL_49;
                  }
                  v27 = sub_800123F4(v25, 0);
                  v18 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)a1 + v26 + 16) + 16);
                  v21 = v27;
                  goto LABEL_48;
                }
              }
            }
            else
            {
              if ( v19 != 3 )
                goto LABEL_49;
              v21 = 0x10000;
LABEL_48:
              SpuWrite(v18, v21);
            }
LABEL_49:
            result = dword_80061A64;
            if ( dword_80061A64 != a1 )
              return result;
            result = SpuIsTransferCompleted(0);
            if ( !result )
              return result;
            if ( *(_WORD *)(*(_DWORD *)a1 + 2) == 5 )
            {
              v28 = *(_DWORD *)(a1 + 36);
              *(_WORD *)(a1 + 4) = 20;
              *(_WORD *)(v28 + 4) = 20;
            }
            else
            {
              sub_800126D0(*(__int16 *)(a1 + 12));
            }
            v11 = dword_80061A58;
            dword_80061A64 = 0;
LABEL_55:
            result = v11 - 1;
LABEL_56:
            dword_80061A58 = result;
          }
        }
        return result;
      case 0x1F:
        result = 1;
        *(_WORD *)(a1 + 4) = 1;
        *(_BYTE *)(a1 + 15) = 0;
        return result;
      default:
        return result;
    }
  }
}
// 800133D8: variable 'v2' is possibly undefined
// 80048110: using guessed type int printf(const char *, ...);
// 800518D4: using guessed type int __fastcall SpuWrite(_DWORD, _DWORD);
// 80051934: using guessed type int __fastcall SpuSetTransferStartAddr(_DWORD);
// 800519C4: using guessed type int __fastcall SpuIsTransferCompleted(_DWORD);
// 80060BB8: using guessed type int dword_80060BB8[6];
// 80061A58: using guessed type int dword_80061A58;
// 80061A5C: using guessed type int dword_80061A5C;
// 80061A64: using guessed type int dword_80061A64;
// 80061A68: using guessed type int dword_80061A68;

//----- (800137AC) --------------------------------------------------------
int __fastcall sub_800137AC(int *a1, int a2)
{
  unsigned int v2; // $t3
  int v3; // $s3
  int v5; // $s2
  int v6; // $a3
  int v7; // $t1
  unsigned int v8; // $t0
  int i; // $s1
  BOOL v10; // $v0
  int *v11; // $a2
  int v12; // $v1
  int v13; // $s1
  int *v14; // $s0

  v5 = -1;
  v6 = 0;
  if ( dword_80061058 > 0 )
  {
    v7 = *a1;
    v8 = 0;
    do
    {
      for ( i = 0; ; ++i )
      {
        v10 = i < dword_80061058 - v6;
        if ( v7 < dword_80061058 - v6 )
          v10 = i < v7;
        if ( !v10 )
          break;
        v11 = &dword_8006105C[11 * v6 + 11 * i];
        if ( *((_WORD *)v11 + 2) != 1 )
        {
          if ( (unsigned int)*((unsigned __int16 *)v11 + 2) - 20 >= 2 || *((char *)v11 + 15) > 0 )
            break;
          v8 += 1 + v11[10];
        }
        v12 = i + 1;
        if ( v5 == -1 || v3 < v12 || v3 == v12 && v8 < v2 )
        {
          v5 = v6;
          v3 = i + 1;
          v2 = v8;
        }
      }
      ++v6;
      v8 = 0;
    }
    while ( v6 < dword_80061058 );
  }
  if ( v5 == -1 )
  {
    *a1 = 0;
    if ( a2 )
      printf("!mem\n");
    return -1;
  }
  else
  {
    v13 = v5;
    if ( v5 < v5 + v3 )
    {
      v14 = &dword_8006105C[11 * v5];
      do
      {
        sub_80012B00((int)v14);
        ++v13;
        v14 += 11;
      }
      while ( v13 < v5 + v3 );
    }
    *a1 = v3;
    return v5;
  }
}
// 80013884: variable 'v3' is possibly undefined
// 80013894: variable 'v2' is possibly undefined
// 80048110: using guessed type int printf(const char *, ...);
// 80061058: using guessed type int dword_80061058;
// 8006105C: using guessed type int dword_8006105C[];

//----- (8001395C) --------------------------------------------------------
int sub_8001395C()
{
  int v0; // $s0
  char *v1; // $v1
  int result; // $v0
  int v3; // $s0
  char *i; // $v1
  int v5; // $s0
  _BYTE *v6; // $v1

  v0 = 15;
  v1 = (char *)&unk_80061004;
  while ( 1 )
  {
    result = v0;
    if ( *((_WORD *)v1 + 2) == 1 )
      break;
    --v0;
    v1 -= 44;
    if ( v0 < 0 )
    {
      v3 = 15;
      for ( i = (char *)&unk_80061004; ; i -= 44 )
      {
        result = v3;
        if ( *((_WORD *)i + 2) == 21 )
          break;
        if ( --v3 < 0 )
        {
          v5 = 15;
          v6 = &unk_80061004;
          do
          {
            if ( (unsigned int)*((unsigned __int16 *)v6 + 2) - 20 < 2 && !v6[15] )
            {
              sub_80013A30(v5);
              return v5;
            }
            --v5;
            v6 -= 44;
          }
          while ( v5 >= 0 );
          return -12;
        }
      }
      return result;
    }
  }
  return result;
}

//----- (80013A30) --------------------------------------------------------
int __fastcall sub_80013A30(int a1)
{
  int *v2; // $s0
  int v3; // $v1

  v2 = &dword_80060D70[11 * a1];
  v3 = *((__int16 *)v2 + 2);
  if ( v3 == 20 )
  {
    sub_800181E0(v2[6], 0);
    *(_DWORD *)v2[8] = v2[5];
    *(_DWORD *)(4 * (v2[5] >> 1) + dword_80061A6C) = -18;
  }
  else if ( v3 != 21 )
  {
    return -14;
  }
  LOWORD(dword_80060D70[11 * a1 + 1]) = 1;
  return -14;
}
// 80060D70: using guessed type int dword_80060D70[164];
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80013B00) --------------------------------------------------------
int __fastcall sub_80013B00(int a1, int a2)
{
  int result; // $v0
  int *v4; // $a0

  if ( a2 )
  {
    sub_80013A30(a1);
    result = 30;
    LOWORD(dword_80060D70[11 * a1 + 1]) = 30;
  }
  else
  {
    v4 = &dword_80060D70[11 * a1];
    result = 1;
    if ( *((_WORD *)v4 + 2) == 30 )
      *((_WORD *)v4 + 2) = 1;
  }
  return result;
}
// 80060D70: using guessed type int dword_80060D70[164];

//----- (80013B8C) --------------------------------------------------------
int __fastcall sub_80013B8C(int a1, int a2)
{
  int v2; // $a2
  int *v3; // $v1
  int *i; // $v1

  v2 = 9;
  v3 = dword_80060D44;
  do
  {
    if ( *((_WORD *)v3 + 2) == 1 && *((__int16 *)v3 + 3) == a1 && (a2 == -1 || a2 == *((__int16 *)v3 + 6)) )
      return v2;
    --v2;
    v3 -= 11;
  }
  while ( v2 >= 0 );
  v2 = 9;
  if ( a1 == 5 )
  {
    for ( i = dword_80060D44;
          (unsigned int)*((unsigned __int16 *)i + 2) - 20 >= 2 || *((_WORD *)i + 3) != 5 || *((_BYTE *)i + 15);
          i -= 11 )
    {
      if ( --v2 < 0 )
        return -12;
    }
    return v2;
  }
  return -12;
}
// 80060D44: using guessed type int dword_80060D44[11];

//----- (80013C54) --------------------------------------------------------
_WORD *__fastcall sub_80013C54(int a1, int a2, char a3, char a4)
{
  int v4; // $v1
  int v5; // $a2
  _WORD *i; // $t0
  _WORD *result; // $v0

  v4 = 0;
  if ( dword_800613F8 <= 0 )
    return 0;
  v5 = a3 & 4;
  for ( i = &unk_800613FC; ; i += 22 )
  {
    ++v4;
    if ( i[2] == 1 )
      break;
    if ( v4 >= dword_800613F8 )
      return 0;
  }
  i[2] = 2;
  *((_DWORD *)i + 5) = a1;
  *((_BYTE *)i + 15) = a4;
  if ( v5 )
    *((_BYTE *)i + 14) = a4;
  else
    *((_BYTE *)i + 14) = 0;
  *((_DWORD *)i + 6) = a2;
  *((_DWORD *)i + 10) = 0;
  *(_DWORD *)(4 * (a1 >> 1) + dword_80061A6C) = i;
  result = i;
  ++dword_80061A58;
  return result;
}
// 800613F8: using guessed type int dword_800613F8;
// 80061A58: using guessed type int dword_80061A58;
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80013D04) --------------------------------------------------------
int __fastcall sub_80013D04(int a1, int a2, int a3, int *a4, int a5)
{
  int v8; // $v1
  int result; // $v0
  int v10; // $a0
  int v11; // $v1
  char *v12; // $a3
  int v13; // $a2
  char *v14; // $t0
  int v15; // $a0
  _DWORD *v16; // $a1
  int v17; // $s0
  char v18; // $v1
  char v19; // $v0
  int v20; // $v0
  __int16 v21; // $v0
  int v22; // $v0

  v8 = sub_800137AC(a4, a5);
  result = -12;
  if ( v8 != -1 )
  {
    v10 = *a4;
    v11 = 44 * (v8 + *a4);
    v12 = (char *)&unk_80061030 + v11;
    if ( a1 )
    {
      v13 = v10 - 1;
      v14 = (char *)&unk_80061030 + v11;
      if ( v10 - 1 >= 0 )
      {
        v15 = *(int *)(a1 + 20) >> 1;
        v16 = v12 + 20;
        do
        {
          v17 = *(_DWORD *)(4 * (v15 + v13) + dword_80061A6C);
          *v16 = *(_DWORD *)(v17 + 20);
          if ( a3 == 1670788223 )
            v16[1] = *(_DWORD *)(v17 + 24);
          else
            v16[1] = a3;
          v18 = *(_BYTE *)(v17 + 15);
          *(_WORD *)(v17 + 4) = 1;
          *((_BYTE *)v16 - 5) = v18;
          v19 = *(_BYTE *)(v17 + 14);
          *(_BYTE *)(v17 + 15) = 0;
          *((_BYTE *)v16 - 6) = v19;
          v16[5] = *(_DWORD *)(v17 + 40);
          v20 = *a4;
          v16[4] = v14;
          v16[2] = v20;
          v21 = 12;
          if ( v13 == *a4 - 1 )
            v21 = 2;
          *((_WORD *)v16 - 8) = v21;
          v22 = *v16;
          v16 -= 11;
          --v13;
          *(_DWORD *)(4 * (v22 >> 1) + dword_80061A6C) = v12;
          v12 -= 44;
        }
        while ( v13 >= 0 );
      }
      return (int)v14;
    }
    else
    {
      return (int)&unk_80061030 + v11;
    }
  }
  return result;
}
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80013E64) --------------------------------------------------------
int __fastcall sub_80013E64(int a1)
{
  int result; // $v0

  result = *(unsigned __int8 *)(a1 + 15) - 1;
  if ( *(char *)(a1 + 15) > 0 )
  {
    *(_BYTE *)(a1 + 15) = result;
    result <<= 24;
    if ( result <= 0 )
    {
      result = *(__int16 *)(a1 + 6);
      if ( !*(_WORD *)(a1 + 6) )
      {
        sub_80013F74(a1);
        return --dword_80061A58;
      }
    }
  }
  return result;
}
// 80061A58: using guessed type int dword_80061A58;

//----- (80013ECC) --------------------------------------------------------
int __fastcall sub_80013ECC(int a1)
{
  int result; // $v0

  result = *(unsigned __int8 *)(a1 + 14) - 1;
  if ( *(_BYTE *)(a1 + 14) )
  {
    *(_BYTE *)(a1 + 14) = result;
    return sub_80013E64(a1);
  }
  return result;
}

//----- (80013EFC) --------------------------------------------------------
int __fastcall sub_80013EFC(int a1)
{
  int result; // $v0

  result = *(char *)(a1 + 14);
  if ( *(_BYTE *)(a1 + 14) )
  {
    *(_BYTE *)(a1 + 15) -= *(_BYTE *)(a1 + 14);
    result = *(char *)(a1 + 15);
    *(_BYTE *)(a1 + 14) = 0;
    if ( result <= 0 )
    {
      result = *(__int16 *)(a1 + 6);
      if ( !*(_WORD *)(a1 + 6) )
      {
        sub_80013F74(a1);
        return --dword_80061A58;
      }
    }
  }
  return result;
}
// 80061A58: using guessed type int dword_80061A58;

//----- (80013F74) --------------------------------------------------------
_DWORD *__fastcall sub_80013F74(int a1)
{
  int v1; // $v0
  _DWORD *result; // $v0

  *(_WORD *)(a1 + 4) = 1;
  v1 = *(_DWORD *)(a1 + 20);
  *(_BYTE *)(a1 + 15) = 0;
  *(_BYTE *)(a1 + 14) = 0;
  result = (_DWORD *)(4 * (v1 >> 1) + dword_80061A6C);
  *result = -18;
  return result;
}
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80013FA8) --------------------------------------------------------
_WORD *__fastcall sub_80013FA8(int a1, int a2, char a3, char a4)
{
  int v4; // $v1
  char v5; // $v0

  v4 = *(_DWORD *)(4 * (a1 >> 1) + dword_80061A6C);
  if ( v4 == -18 )
    return sub_80013C54(a1, a2, a3, a4);
  if ( v4 != -255 )
  {
    if ( (a3 & 4) != 0 )
      *(_BYTE *)(v4 + 14) += a4;
    v5 = *(_BYTE *)(v4 + 15);
    *(_DWORD *)(v4 + 24) = a2;
    *(_BYTE *)(v4 + 15) = v5 + a4;
  }
  return (_WORD *)v4;
}
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80014024) --------------------------------------------------------
int __fastcall sub_80014024(int a1, char a2, char a3, int a4)
{
  _WORD *v8; // $v1

  while ( 1 )
  {
    v8 = sub_80013FA8(a1, a4, a2, a3);
    if ( v8 == (_WORD *)-255 )
      return 1;
    if ( (a2 & 1) == 0 || (unsigned int)(unsigned __int16)v8[2] - 20 < 2 )
      break;
    sub_80012CBC(a1);
    a3 = 0;
  }
  return *((char *)v8 + 15);
}
// 80012CBC: using guessed type int __fastcall sub_80012CBC(_DWORD);

//----- (800140C0) --------------------------------------------------------
int __fastcall sub_800140C0(int a1, int a2)
{
  int *v2; // $a0
  int v3; // $s1
  int v6; // $v1
  int i; // $s0

  v2 = (int *)(4 * (a1 >> 1) + dword_80061A6C);
  v3 = *v2;
  if ( *v2 >= -254 )
    return 0;
  if ( v3 == -255 )
    return 1;
  v6 = *(__int16 *)(v3 + 6);
  if ( v6 == 3 || v6 == 5 )
    return 1;
  if ( a2 >= 0 )
  {
    for ( i = 0; i < a2; ++i )
      sub_80013E64(v3);
  }
  else
  {
    sub_80013ECC(*v2);
  }
  return *(char *)(v3 + 15) + 1;
}
// 80061A6C: using guessed type int dword_80061A6C;

//----- (8001418C) --------------------------------------------------------
int *__fastcall sub_8001418C(int a1)
{
  int v1; // $a1
  char *i; // $a2
  int v4; // $a0

  if ( (a1 & 2) != 0 )
  {
    v1 = 15;
    if ( (_UNKNOWN *)(a1 & 0xC0000002) == &unk_80000002 )
    {
      for ( i = (char *)&unk_80061004;
            (unsigned int)*((unsigned __int16 *)i + 2) - 20 >= 2 || a1 != *((_DWORD *)i + 7);
            i -= 44 )
      {
        if ( --v1 < 0 )
          return 0;
      }
      return (int *)i;
    }
    else
    {
      return 0;
    }
  }
  else
  {
    v4 = (a1 - dword_8006105C[0]) / 0x10000;
    if ( v4 < 0 || v4 >= dword_80061058 )
      return 0;
    else
      return &dword_8006105C[11 * v4];
  }
}
// 80061058: using guessed type int dword_80061058;
// 8006105C: using guessed type int dword_8006105C[];

//----- (80014268) --------------------------------------------------------
int __fastcall sub_80014268(int a1)
{
  int *v1; // $a0
  int result; // $v0

  v1 = sub_8001418C(a1);
  if ( !v1 )
    return 0;
  result = 0;
  if ( *((_WORD *)v1 + 3) == 1 )
    return *v1;
  return result;
}

//----- (800142B4) --------------------------------------------------------
int __fastcall sub_800142B4(unsigned int *a1, char a2, int a3)
{
  int *v3; // $s0
  unsigned int v6; // $a0
  int result; // $v0
  int v8; // $v0
  int v9; // $a0
  int *v10; // $v0

  v3 = (int *)a1;
  if ( (a2 & 2) == 0 )
  {
    v6 = *a1;
    if ( *v3 == 1670788223 )
      return -10;
    if ( (*v3 & 1) != 0 )
    {
      v8 = sub_80014B04(v6);
      *v3 = v8;
      v3 = (int *)v8;
    }
    else
    {
      v3 = (int *)*v3;
    }
  }
  v9 = *v3;
  if ( (*v3 & 1) != 0 )
  {
    sub_80014024(v9, a2, a3, v3[1]);
    result = *v3;
    if ( (*v3 & 1) != 0 )
      return 0;
  }
  else
  {
    if ( a3 )
    {
      v10 = sub_8001418C(v9);
      if ( v10 )
        sub_80014024(v10[5], a2, a3, v3[1]);
    }
    return *v3;
  }
  return result;
}

//----- (8001439C) --------------------------------------------------------
int __fastcall sub_8001439C(int *a1, int a2)
{
  int v3; // $a0
  int result; // $v0
  int *v6; // $v0

  v3 = *a1;
  if ( (v3 & 1) != 0 )
  {
    result = 0;
    if ( !a2 )
      return result;
  }
  else
  {
    result = (int)a1;
    if ( !a2 )
      return result;
    v6 = sub_8001418C(v3);
    if ( !v6 )
      return 1;
    v3 = v6[5];
  }
  return sub_800140C0(v3, a2);
}

//----- (8001440C) --------------------------------------------------------
int __fastcall sub_8001440C(unsigned int *a1, int a2)
{
  unsigned int v3; // $a0
  int *v5; // $v0

  v3 = *a1;
  if ( (v3 & 1) != 0 )
  {
    v5 = (int *)sub_80014B04(v3);
    *a1 = (unsigned int)v5;
  }
  else
  {
    v5 = (int *)v3;
  }
  return sub_8001439C(v5, a2);
}

//----- (80014468) --------------------------------------------------------
int sub_80014468()
{
  _WORD *v0; // $s0
  int i; // $s1
  int *v2; // $s0
  int j; // $s1
  int *v4; // $s0
  int k; // $s1
  int *v6; // $s0
  int m; // $s1
  int result; // $v0

  v0 = &unk_800613FC;
  for ( i = 0; i < dword_800613F8; v0 += 22 )
  {
    if ( v0[2] != 1 )
      sub_80013EFC((int)v0);
    ++i;
  }
  v2 = dword_8006105C;
  for ( j = dword_80061058 - 1; j >= 0; v2 += 11 )
  {
    if ( *((_WORD *)v2 + 2) != 1 )
      sub_80013EFC((int)v2);
    --j;
  }
  v4 = dword_80060D70;
  for ( k = 15; k >= 0; --k )
  {
    if ( (unsigned int)*((unsigned __int16 *)v4 + 2) - 20 < 2 )
      sub_80013EFC((int)v4);
    v4 += 11;
  }
  v6 = dword_80060BB8;
  for ( m = 9; m >= 0; --m )
  {
    result = (unsigned int)*((unsigned __int16 *)v6 + 2) - 20 < 2;
    if ( (unsigned int)*((unsigned __int16 *)v6 + 2) - 20 < 2 )
      result = sub_80013EFC((int)v6);
    v6 += 11;
  }
  return result;
}
// 80060BB8: using guessed type int dword_80060BB8[6];
// 80060D70: using guessed type int dword_80060D70[164];
// 80061058: using guessed type int dword_80061058;
// 8006105C: using guessed type int dword_8006105C[];
// 800613F8: using guessed type int dword_800613F8;

//----- (800145A0) --------------------------------------------------------
int sub_800145A0()
{
  int v0; // $a1
  int v1; // $a0
  _BYTE *i; // $v1
  int v3; // $a0
  _BYTE *v4; // $v1

  v0 = dword_80061058;
  v1 = dword_800613F8 - 1;
  for ( i = &unk_8006140B; v1 >= 0; i += 44 )
  {
    if ( *(_WORD *)(i - 11) != 1 && *i )
      --v0;
    --v1;
  }
  v3 = 0;
  if ( dword_80061058 > 0 )
  {
    v4 = &unk_8006106B;
    do
    {
      if ( *(_WORD *)(v4 - 11) != 1 && *v4 )
        --v0;
      ++v3;
      v4 += 44;
    }
    while ( v3 < dword_80061058 );
  }
  return v0;
}
// 80061058: using guessed type int dword_80061058;
// 800613F8: using guessed type int dword_800613F8;

//----- (80014650) --------------------------------------------------------
int __fastcall sub_80014650(int a1)
{
  int v1; // $a1
  _DWORD *v2; // $v0
  int v3; // $a1
  int *v4; // $a2
  int result; // $v0
  int v6; // $a1
  int *v7; // $a2
  int v8; // $v1

  v1 = 7;
  v2 = (_DWORD *)(a1 + 28);
  do
  {
    *v2 = 0;
    --v1;
    --v2;
  }
  while ( v1 >= 0 );
  v3 = dword_800613F8 - 1;
  if ( dword_800613F8 - 1 >= 0 )
  {
    v4 = (int *)&unk_80061410;
    do
    {
      if ( *((_WORD *)v4 - 8) != 1 && *((_BYTE *)v4 - 5) )
        *(_DWORD *)(4 * ((*v4 >> 1) / 32) + a1) |= 1 << ((*v4 >> 1) % 32);
      --v3;
      v4 += 11;
    }
    while ( v3 >= 0 );
  }
  result = dword_80061058;
  v6 = dword_80061058 - 1;
  if ( dword_80061058 - 1 >= 0 )
  {
    v7 = (int *)&unk_80061070;
    do
    {
      result = *((__int16 *)v7 - 8);
      if ( result != 1 )
      {
        result = *((char *)v7 - 5);
        if ( *((_BYTE *)v7 - 5) )
        {
          v8 = *v7 >> 1;
          result = 1 << (v8 % 32);
          *(_DWORD *)(4 * (v8 / 32) + a1) |= result;
        }
      }
      --v6;
      v7 += 11;
    }
    while ( v6 >= 0 );
  }
  return result;
}
// 80061058: using guessed type int dword_80061058;
// 800613F8: using guessed type int dword_800613F8;

//----- (80014788) --------------------------------------------------------
int __fastcall sub_80014788(int a1)
{
  char *v1; // $s1
  int v2; // $s2
  int *v4; // $s0
  int *v5; // $s1
  int result; // $v0
  int v7; // $s2
  int *v8; // $s0
  int v9; // $a0

  v1 = (char *)&unk_800613FC;
  v2 = dword_800613F8 - 1;
  if ( dword_800613F8 - 1 >= 0 )
  {
    v4 = (int *)&unk_80061410;
    do
    {
      if ( *((_WORD *)v4 - 8) != 1
        && *((_BYTE *)v4 - 5)
        && (*(_DWORD *)(4 * ((*v4 >> 1) / 32) + a1) & (1 << ((*v4 >> 1) % 32))) == 0 )
      {
        sub_80013EFC((int)v1);
      }
      v4 += 11;
      --v2;
      v1 += 44;
    }
    while ( v2 >= 0 );
  }
  v5 = dword_8006105C;
  result = dword_80061058;
  v7 = dword_80061058 - 1;
  if ( dword_80061058 - 1 >= 0 )
  {
    v8 = (int *)&unk_80061070;
    do
    {
      result = *((__int16 *)v8 - 8);
      if ( result != 1 )
      {
        result = *((char *)v8 - 5);
        if ( *((_BYTE *)v8 - 5) )
        {
          v9 = *v8 >> 1;
          result = 1 << (v9 % 32);
          if ( (*(_DWORD *)(4 * (v9 / 32) + a1) & result) == 0 )
            result = sub_80013EFC((int)v5);
        }
      }
      v8 += 11;
      --v7;
      v5 += 11;
    }
    while ( v7 >= 0 );
  }
  return result;
}
// 80061058: using guessed type int dword_80061058;
// 8006105C: using guessed type int dword_8006105C[];
// 800613F8: using guessed type int dword_800613F8;

//----- (800148F8) --------------------------------------------------------
int __fastcall sub_800148F8(int a1, int a2)
{
  int v2; // $s0
  int v3; // $s2
  int v4; // $s4
  unsigned int **v5; // $s3
  int *v6; // $s1
  unsigned int v7; // $a0
  int *v8; // $a2
  int v9; // $a0
  int *v10; // $a1
  int v11; // $v1
  _DWORD *v12; // $a0
  int v13; // $v1
  _DWORD *v14; // $a1
  int v15; // $v0
  _DWORD *v16; // $a0
  _BYTE v18[160]; // [sp+10h] [-A0h] BYREF

  v2 = 0;
  v3 = 0;
  v4 = a2 - 1;
  if ( a2 - 1 >= 0 )
  {
    v5 = (unsigned int **)(4 * v4 + a1);
    v6 = (int *)v18;
    do
    {
      v7 = **v5;
      v8 = (int *)v7;
      if ( (v7 & 1) != 0 )
      {
        v8 = (int *)sub_80014B04(v7);
        **v5 = (unsigned int)v8;
      }
      v9 = *v8;
      if ( (*v8 & 1) != 0 )
      {
        v10 = *(int **)(4 * (v9 >> 1) + dword_80061A6C);
        if ( v10 == (int *)-18 )
        {
          v13 = 0;
          if ( v2 > 0 )
          {
            v14 = v18;
            do
            {
              if ( v9 == *v14 )
                break;
              ++v13;
              ++v14;
            }
            while ( v13 < v2 );
          }
          if ( v13 != v2 )
            goto LABEL_32;
          v15 = *v8;
          ++v3;
          goto LABEL_31;
        }
        if ( v10 == (int *)-255 || *((__int16 *)v10 + 3) >= 2 || *((_BYTE *)v10 + 15) )
          goto LABEL_32;
        v11 = 0;
        if ( v2 > 0 )
        {
          v16 = v18;
          do
          {
            if ( v10[5] == *v16 )
              break;
            ++v11;
            ++v16;
          }
          while ( v11 < v2 );
        }
      }
      else
      {
        v10 = sub_8001418C(v9);
        if ( !v10 || *((_WORD *)v10 + 3) == 2 || *((_WORD *)v10 + 2) != 1 && *((_BYTE *)v10 + 15) )
          goto LABEL_32;
        v11 = 0;
        if ( v2 > 0 )
        {
          v12 = v18;
          do
          {
            if ( v10[5] == *v12 )
              break;
            ++v11;
            ++v12;
          }
          while ( v11 < v2 );
        }
      }
      if ( v11 == v2 )
      {
        ++v3;
        v15 = v10[5];
LABEL_31:
        ++v2;
        *v6++ = v15;
      }
LABEL_32:
      --v4;
      --v5;
    }
    while ( v4 >= 0 );
  }
  return v3;
}
// 80061A6C: using guessed type int dword_80061A6C;

//----- (80014B04) --------------------------------------------------------
int __fastcall sub_80014B04(unsigned int a1)
{
  int v1; // $v1
  int v2; // $v1
  int v3; // $v0

  v1 = *(_DWORD *)(((a1 >> 13) & 0x3FC) + dword_80061038);
  if ( *(_DWORD *)(v1 + 4) != a1 )
  {
    v2 = v1 + 8;
    do
    {
      v3 = *(_DWORD *)(v2 + 4);
      v2 += 8;
    }
    while ( v3 != a1 );
    return v2 - 8;
  }
  return v1;
}
// 80061038: using guessed type int dword_80061038;

//----- (80014B50) --------------------------------------------------------
int __fastcall sub_80014B50(unsigned int a1)
{
  int v1; // $v1
  int v2; // $v1
  int result; // $v0
  int v4; // $v0

  v1 = *(_DWORD *)(((a1 >> 13) & 0x3FC) + dword_80061038);
  if ( *(_DWORD *)(v1 + 4) == a1 )
    return v1;
  v2 = v1 + 8;
  while ( 1 )
  {
    result = -10;
    if ( (v2 - dword_8006103C) >> 3 >= *(_DWORD *)(dword_80061048 + 1028) )
      break;
    v4 = *(_DWORD *)(v2 + 4);
    v2 += 8;
    if ( v4 == a1 )
      return v2 - 8;
  }
  return result;
}
// 80061038: using guessed type int dword_80061038;
// 8006103C: using guessed type int dword_8006103C;
// 80061048: using guessed type int dword_80061048;

//----- (80014BC8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80014BC8(_DWORD *a1, int a2)
{
  int *v5; // $v0
  int v6; // $gp
  char *v7; // $a0
  int v8; // $a2
  int v9; // $a0
  int v10; // $s1
  _DWORD *v11; // $v1
  int v12; // $a0
  int *v13; // $v0
  int v14; // $gp
  int v15; // $v0
  int v16; // $v1
  int v17; // $s1
  int v18; // $s1
  char *v19; // $s0
  void (*v20)(void); // $v0
  int i; // $s1
  int v22; // $v0
  int v23; // $s0
  bool v24; // dc
  int v25; // $s1
  _DWORD *v26; // $a0
  int v27; // $v0
  int v28; // $v1
  int v29; // $s1
  _DWORD *v30; // $v1
  unsigned __int8 v31; // $v0
  int v32; // $s1
  int *v33; // $s0
  int v34; // $a0
  int v35; // $a1
  int v36; // $a2
  int v37; // $v0
  __int16 v38; // $v0
  int v39; // $s2
  int v40; // $v0
  int v41; // $s1
  int v42; // $s0
  int v43; // $a2
  int v44; // $s1
  char *v45; // $s0
  void (*v46)(void); // $v0
  _BYTE v48[256]; // [sp+18h] [-100h] BYREF

  if ( !*a1 )
  {
    dword_80060AC0 = -1;
    dword_80060A90 = 0;
    dword_80060ABC = a2;
    *a1 = 1;
    a1[651] = 0;
    a1[650] = 0;
    a1[653] = 0;
    a1[1] = a2;
    a1[654] = 0;
    a1[656] = 1;
    sub_80016234(a2);
    v5 = sub_80012288();
    strcpy(v48, v5);
    if ( *(_DWORD *)(v6 + 44) )
    {
      v7 = (char *)&dword_8006C4D8[3 * a2];
      v8 = 1;
    }
    else
    {
      v7 = v48;
      v8 = 0;
    }
    a1[6] = sub_8001242C(v7, 0, v8);
    v9 = a1[6];
    a1[3] = v9 + 1312;
    a1[4] = v9 + 1032;
    a1[2] = v9;
    v10 = 255;
    v11 = (_DWORD *)(v9 + 8 * *(_DWORD *)(v9 + 1028) + 1312);
    a1[5] = v11;
    a1[6] = sub_80011540(v9, 8 * *(_DWORD *)(v9 + 1028) + 24 * (*v11 - 1) + 2068);
    do
    {
      v12 = 4 * v10--;
      *(_DWORD *)(v12 + a1[2]) = a1[3] + 8 * *(_DWORD *)(v12 + a1[2]);
    }
    while ( v10 >= 0 );
    v13 = sub_80012288();
    strcpy(v48, v13);
    if ( *(_DWORD *)(v14 + 44) )
      dword_80061050 = dword_8006C4D8[3 * a2 + 2] & 0xFFFFFF;
    v15 = sub_800112F8();
    v16 = a1[6];
    a1[655] = v15;
    v17 = 0;
    if ( *(int *)(v16 + 1024) > 0 )
    {
      do
        *(_DWORD *)(4 * v17++ + a1[655]) = -18;
      while ( v17 < *(_DWORD *)(a1[6] + 1024) );
    }
    v18 = 0;
    v19 = "NONE";
    do
    {
      v20 = (void (*)(void))*((_DWORD *)v19 + 2);
      if ( v20 )
        v20();
      ++v18;
      v19 += 28;
    }
    while ( v18 < 22 );
    a1[10] = 21;
    for ( i = 21; i >= 0; --i )
    {
      v22 = sub_800112F8();
      a1[11] = v22;
      if ( v22 )
        break;
    }
    a1[10] = i;
    v23 = 0;
    v24 = i <= 0;
    v25 = 0;
    if ( !v24 )
    {
      v26 = a1;
      do
      {
        ++v23;
        *((_WORD *)v26 + 25) = 1;
        v27 = a1[11];
        v28 = v25 << 16;
        *((_WORD *)v26 + 28) = v25++;
        *((_BYTE *)v26 + 59) = 0;
        *((_WORD *)v26 + 24) = 1;
        v26[11] = v27 + v28;
        v26 += 11;
      }
      while ( v25 < a1[10] );
    }
    a1[242] = 37;
    v29 = 0;
    v30 = a1;
    do
    {
      v30[244] = 1;
      v30[243] = 0;
      *((_BYTE *)v30 + 987) = 0;
      ++v29;
      v30 += 11;
    }
    while ( v29 < a1[242] );
    v31 = sub_80012224(a2);
    printf("%d p l%c\n", v23, v31);
    v32 = 0;
    v33 = dword_80060D70;
    do
    {
      *((_WORD *)v33 + 3) = 2;
      v34 = v32 / 4;
      v35 = 4 * (v32 % 4);
      if ( v32 >= 8 )
        v35 |= 0x10u;
      v36 = ((v32 % 4) << 8) | (v34 << 17);
      if ( (v34 & 1) != 0 )
        v37 = v35 | v36 | 0x80;
      else
        v37 = v35 | v36;
      v33[7] = v37 | (unsigned int)&unk_80000002;
      v38 = 30;
      if ( (unsigned int)v32 < 8 || (v38 = 1, (unsigned int)*((unsigned __int16 *)v33 + 2) - 20 >= 2) )
      {
        *((_WORD *)v33 + 2) = v38;
      }
      else
      {
        v39 = sub_80014B50(v33[6]);
        if ( v39 >= -254 || v33[6] == sub_800120AC("Cr30T") )
        {
          *((_WORD *)v33 + 2) = 21;
          *((_BYTE *)v33 + 15) = 0;
          *((_BYTE *)v33 + 14) = 0;
        }
        else
        {
          *((_WORD *)v33 + 2) = 20;
          v40 = *(_DWORD *)v39;
          v33[8] = v39;
          *((_BYTE *)v33 + 15) = 0;
          *((_BYTE *)v33 + 14) = 0;
          v33[5] = v40;
          *(_DWORD *)(4 * (v40 >> 1) + dword_80061A6C) = v33;
          *(_DWORD *)v39 = v33[7];
        }
      }
      ++v32;
      v33 += 11;
    }
    while ( v32 < 16 );
    v41 = 0x10000;
    v42 = -1;
    v43 = 65424 * sub_800122E4((int)a1, 14) - 4368;
    switch ( a2 )
    {
      case 3:
      case 4:
      case 5:
      case 7:
        v41 = 0x8000;
        goto LABEL_42;
      case 40:
        v41 = 0x10000;
        v42 = 3;
        break;
      case 41:
      case 42:
      case 58:
      case 59:
        v41 = 0x10000;
LABEL_42:
        v42 = 2;
        break;
      case 60:
        v42 = 1;
        break;
      default:
        break;
    }
    sub_80015230((int)a1, 0, v43, v41, v42);
    v44 = 0;
    v45 = "NONE";
    do
    {
      v46 = (void (*)(void))*((_DWORD *)v45 + 3);
      if ( v46 )
        v46();
      ++v44;
      v45 += 28;
    }
    while ( v44 < 22 );
  }
  return -255;
}
// 80014C08: write access to const memory at 80060AC0 has been detected
// 80014C14: write access to const memory at 80060A90 has been detected
// 80014C1C: write access to const memory at 80060ABC has been detected
// 80014C5C: variable 'v6' is possibly undefined
// 80014D50: variable 'v14' is possibly undefined
// 800480B0: using guessed type int __fastcall strcpy(_DWORD, _DWORD);
// 80048110: using guessed type int printf(const char *, ...);
// 80060A90: using guessed type int dword_80060A90;
// 80060ABC: using guessed type int dword_80060ABC;
// 80060AC0: using guessed type int dword_80060AC0;
// 80060D70: using guessed type int dword_80060D70[164];
// 80061050: using guessed type int dword_80061050;
// 80061A6C: using guessed type int dword_80061A6C;
// 8006C4D8: using guessed type _DWORD dword_8006C4D8[183];

//----- (80015110) --------------------------------------------------------
int __fastcall sub_80015110(_DWORD *a1)
{
  int v1; // $gp
  int result; // $v0
  int v4; // $s0
  char *v5; // $s1
  void (*v6)(void); // $v0
  int v7; // $s0
  int v8; // $a0

  result = -255;
  if ( *a1 == 1 )
  {
    if ( *(_DWORD *)(v1 + 44) && dword_80061A5C )
      sub_80013000(1);
    if ( dword_80061A64 )
      SpuIsTransferCompleted(1);
    v4 = 0;
    sub_800351EC();
    sub_80033238();
    v5 = "NONE";
    do
    {
      v6 = (void (*)(void))*((_DWORD *)v5 + 6);
      if ( v6 )
        v6();
      ++v4;
      v5 += 28;
    }
    while ( v4 < 22 );
    v7 = 0;
    if ( (int)a1[10] > 0 )
    {
      v8 = (int)a1;
      do
      {
        sub_80015468(v8, v7++);
        v8 = (int)a1;
      }
      while ( v7 < a1[10] );
    }
    sub_8001152C(a1[11]);
    sub_8001152C(a1[655]);
    sub_8001152C(a1[6]);
    result = -255;
    *a1 = 0;
  }
  return result;
}
// 80015138: variable 'v1' is possibly undefined
// 800519C4: using guessed type int __fastcall SpuIsTransferCompleted(_DWORD);
// 80061A5C: using guessed type int dword_80061A5C;
// 80061A64: using guessed type int dword_80061A64;

//----- (80015230) --------------------------------------------------------
BOOL __fastcall sub_80015230(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // $t0
  int v6; // $t1
  int v7; // $a1
  int *v8; // $a0
  int v9; // $a2
  int v10; // $v0
  int v11; // $a1
  int v12; // $a2
  int v13; // $v0
  int *v14; // $v0
  BOOL result; // $v0
  int *v16; // $a0
  int v17; // $v1

  v5 = 0x80000 - a2;
  v6 = (a3 + 65423) / 65424;
  v7 = v6 - 1;
  if ( v6 - 1 >= 0 )
  {
    v8 = &dword_80060BB8[11 * v7];
    v9 = a3 % 65424;
    do
    {
      *((_WORD *)v8 + 6) = v7;
      *((_WORD *)v8 + 2) = 1;
      *((_WORD *)v8 + 3) = 4;
      if ( v7 == v6 - 1 )
      {
        v10 = (v9 + 15) >> 4;
        if ( v9 + 15 < 0 )
          v10 = (v9 + 30) >> 4;
        v5 -= 16 * v10;
      }
      else
      {
        v5 -= 65424;
      }
      v8[7] = v5;
      --v7;
      v8 -= 11;
    }
    while ( v7 >= 0 );
  }
  dword_80061A60 = v5;
  v11 = v6;
  v12 = v5;
  if ( a5 < 0 )
    goto LABEL_11;
  v13 = v6 + a5;
  while ( v11 < v13 )
  {
    v5 -= a4;
    v14 = &dword_80060BB8[11 * v11];
    *((_WORD *)v14 + 6) = v11++;
    *((_WORD *)v14 + 2) = 1;
    *((_WORD *)v14 + 3) = 5;
    v14[6] = 1670788223;
    v14[7] = v5;
    if ( a5 < 0 )
LABEL_11:
      v13 = v6 - a5;
    else
      v13 = v6 + a5;
  }
  result = v11 < 10;
  if ( a5 < 0 )
    v5 = v12;
  if ( v11 < 10 )
  {
    v16 = &dword_80060BB8[11 * v11];
    do
    {
      v17 = v5 - 0x10000;
      *((_WORD *)v16 + 6) = v11;
      *((_WORD *)v16 + 3) = 3;
      if ( v5 - 0x10000 >= 4112 )
      {
        v5 -= 0x10000;
        *((_WORD *)v16 + 2) = 1;
        v16[7] = v17;
      }
      else
      {
        *((_WORD *)v16 + 2) = 30;
      }
      result = ++v11 < 10;
      v16 += 11;
    }
    while ( v11 < 10 );
  }
  return result;
}
// 80060BB8: using guessed type int dword_80060BB8[6];
// 80061A60: using guessed type int dword_80061A60;

//----- (80015414) --------------------------------------------------------
int *__fastcall sub_80015414(int a1)
{
  int *v1; // $a1
  int v2; // $a2
  int *v3; // $v1
  bool v4; // dc

  v1 = dword_80060BB8;
  v2 = 9;
  v3 = dword_80060BD0;
  do
  {
    if ( *((_WORD *)v3 - 9) == 5 )
    {
      v4 = *v3 != a1;
      v3 += 11;
      if ( !v4 )
        return v1;
    }
    else
    {
      v3 += 11;
    }
    --v2;
    v1 += 11;
  }
  while ( v2 >= 0 );
  return 0;
}
// 80060BB8: using guessed type int dword_80060BB8[6];
// 80060BD0: using guessed type int dword_80060BD0[93];

//----- (80015468) --------------------------------------------------------
int __fastcall sub_80015468(int a1, int a2)
{
  int v2; // $a0
  int result; // $v0

  v2 = a1 + 44 * a2;
  result = *(__int16 *)(v2 + 48);
  if ( *(_WORD *)(v2 + 48) )
    *(_WORD *)(v2 + 48) = 0;
  return result;
}

//----- (8001549C) --------------------------------------------------------
int sub_8001549C()
{
  return 0;
}

//----- (800154AC) --------------------------------------------------------
unsigned __int64 sub_800154AC()
{
  int v0; // $v1
  int v1; // $v0
  int v2; // $v1
  int *v3; // $v0
  int v4; // $v1
  char *v5; // $v0
  int v6; // $a0
  int v7; // $v0
  int v8; // $gp
  int v9; // $v0

  v0 = 1023;
  v1 = 528483327;
  do
  {
    *(_BYTE *)v1 = 0;
    --v0;
    --v1;
  }
  while ( v0 >= 0 );
  sub_8004BFBC(0);
  sub_8004F37C();
  ResetCallback();
  sub_80045750();
  sub_8004592C(1);
  sub_800160D8();
  sub_80032144();
  dword_80061054 = 0;
  v2 = 3;
  v3 = dword_80060B9C;
  do
  {
    *v3 = 1670788223;
    --v2;
    --v3;
  }
  while ( v2 >= 0 );
  v4 = 15;
  v5 = (char *)&unk_80061004;
  do
  {
    *((_DWORD *)v5 + 6) = 1670788223;
    --v4;
    v5 -= 44;
  }
  while ( v4 >= 0 );
  sub_80017AE8(1670788223);
  sub_800156E0(2);
  VSyncCallback(sub_80017AD0);
  EnterCriticalSection(v6);
  StopRCnt(-234881022);
  v7 = OpenEvent(-234881022, 2, 4096, sub_8003AE70);
  *(_DWORD *)(v8 + 532) = v7;
  EnableEvent(v7);
  SetRCnt(-234881022, 4112, 4096);
  StartRCnt(-234881022);
  ExitCriticalSection();
  sub_800322D0();
  dword_80069204 = sub_8001549C();
  v9 = 4096;
  if ( dword_80069204 >= 3 )
    v9 = 4118;
  dword_800690B4 = v9;
  dword_800691FC = -1;
  return 0x80070000FFFFFF01LL;
}
// 80015590: variable 'v6' is possibly undefined
// 800155C4: variable 'v8' is possibly undefined
// 80017AD0: using guessed type int sub_80017AD0();
// 80048BE8: using guessed type int __fastcall OpenEvent(_DWORD, _DWORD, _DWORD, _DWORD);
// 80048C18: using guessed type int __fastcall EnableEvent(_DWORD);
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 80048CD8: using guessed type int __fastcall SetRCnt(_DWORD, _DWORD, _DWORD);
// 80048DAC: using guessed type int __fastcall StartRCnt(_DWORD);
// 80048DDC: using guessed type int __fastcall StopRCnt(_DWORD);
// 8004B49C: using guessed type int ResetCallback(void);
// 8004B52C: using guessed type int __fastcall VSyncCallback(_DWORD);
// 80060B9C: using guessed type int dword_80060B9C[7];
// 80061054: using guessed type int dword_80061054;
// 800690B4: using guessed type int dword_800690B4;
// 800691FC: using guessed type int dword_800691FC;
// 80069204: using guessed type int dword_80069204;

//----- (80015658) --------------------------------------------------------
int sub_80015658()
{
  int v0; // $a0
  int v1; // $gp
  int v2; // $gp

  sub_80045A1C(8u, 0, 0);
  StopCallback();
  sub_80017C88();
  PadStopCom();
  VSyncCallback(0);
  EnterCriticalSection(v0);
  StopRCnt(-234881022);
  DisableEvent(*(_DWORD *)(v1 + 532));
  CloseEvent(*(_DWORD *)(v2 + 532));
  ExitCriticalSection();
  return -255;
}
// 8001569C: variable 'v0' is possibly undefined
// 800156B0: variable 'v1' is possibly undefined
// 800156BC: variable 'v2' is possibly undefined
// 80048BF8: using guessed type int __fastcall CloseEvent(_DWORD);
// 80048C28: using guessed type int __fastcall DisableEvent(_DWORD);
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 80048DDC: using guessed type int __fastcall StopRCnt(_DWORD);
// 80048E88: using guessed type int PadStopCom(void);
// 8004B52C: using guessed type int __fastcall VSyncCallback(_DWORD);
// 8004B590: using guessed type int StopCallback(void);

//----- (800156E0) --------------------------------------------------------
int __fastcall sub_800156E0(int a1)
{
  int v2; // $s1
  int result; // $v0
  int *v4; // $s0

  v2 = 0;
  dword_80068FFC = 0;
  dword_80069024 = 0;
  dword_80069088 = 0;
  dword_8006908C = 0;
  dword_800690BC = 0;
  dword_800690B8 = 0;
  result = -2147090432;
  dword_80065BC8 = a1;
  if ( a1 > 0 )
  {
    v4 = &dword_80065BC8;
    do
    {
      v4[14] = 0;
      v4[12] = 0;
      v4[11] = 0;
      v4[10] = 0;
      if ( !v2 )
      {
        PadInitDirect(&byte_80065BCC, &unk_80065C1C);
        PadStartCom();
      }
      *((_BYTE *)v4 + 80) = 0;
      *((_BYTE *)v4 + 81) = 0;
      v4[19] = 1;
      result = ++v2 < a1;
      v4 += 20;
    }
    while ( v2 < a1 );
  }
  return result;
}
// 80048E68: using guessed type int PadStartCom(void);
// 8004A748: using guessed type int __fastcall PadInitDirect(_DWORD, _DWORD);
// 80065BC8: using guessed type int dword_80065BC8;
// 80065BCC: using guessed type char byte_80065BCC;
// 80068FFC: using guessed type int dword_80068FFC;
// 80069024: using guessed type int dword_80069024;
// 80069088: using guessed type int dword_80069088;
// 8006908C: using guessed type int dword_8006908C;
// 800690B8: using guessed type int dword_800690B8;
// 800690BC: using guessed type int dword_800690BC;

//----- (80015798) --------------------------------------------------------
int sub_80015798()
{
  int v0; // $s2
  int v1; // $s3
  int result; // $v0
  int v3; // $s4
  unsigned int v4; // $s6
  int v5; // $s5
  char *v6; // $s0
  int v7; // $v1
  int v8; // $a1
  int v9; // $gp
  int v10; // $v1
  int v11; // $s3
  int v12; // $v1
  int v13; // $v0
  int v14; // $lo
  int v15; // $v1
  int v16; // $s2
  int v17; // $v1
  int v18; // $v0
  int v19; // $lo
  int v20; // $v1
  __int16 v21; // $v0
  int v22; // $v0
  int v23; // $a0
  int v24; // $v1
  int v25; // $v1
  unsigned int v26; // $v0
  char v27; // $a0
  int v28; // $a0
  int v29; // $v0
  int v30; // $a1
  int v31; // $v0
  int v32; // $v1
  int v33; // $v1
  int v34; // $v1
  unsigned int v35; // $v1
  int *v36; // $v1
  int v37; // $v0
  int v38; // $v1
  BOOL v39[2]; // [sp+18h] [-8h] BYREF

  result = dword_80065BC8[0];
  v3 = 0;
  if ( dword_80065BC8[0] > 0 )
  {
    v4 = 0;
    v5 = 0;
    do
    {
      v6 = &byte_80065BCC[v4];
      v7 = *(_DWORD *)&byte_80065BCC[v4 + 40];
      v8 = *(_DWORD *)&byte_80065BCC[v4 + 36];
      *((_DWORD *)v6 + 13) = *(_DWORD *)&byte_80065BCC[v4 + 44];
      *((_DWORD *)v6 + 11) = v7;
      *((_DWORD *)v6 + 12) = v8;
      if ( sub_80048F00(v5) == 6 )
      {
        if ( sub_80048FC0(v5, 1, 0) != 7 && *((_DWORD *)v6 + 18) == 1 )
        {
          sub_8004926C(v5, 1, 0);
          *((_DWORD *)v6 + 18) = 0;
        }
        sub_80049234(v5, dword_800608EC);
        *((_DWORD *)v6 + 17) = 2;
      }
      else
      {
        *((_DWORD *)v6 + 17) = 0;
      }
      if ( *v6 )
      {
        *((_DWORD *)v6 + 18) = 1;
        goto LABEL_80;
      }
      v10 = v6[1];
      if ( v10 != 83 )
      {
        if ( v10 < 84 )
        {
          if ( v10 == 18 )
          {
            *((_DWORD *)v6 + 18) = 1;
            *v6 = 1;
            goto LABEL_56;
          }
          v0 = 0;
          v1 = 0;
          goto LABEL_55;
        }
        v0 = 0;
        if ( v10 != 115 )
        {
          v1 = 0;
LABEL_55:
          v26 = *((unsigned __int16 *)v6 + 1);
          *((_DWORD *)v6 + 15) = 0;
          *((_DWORD *)v6 + 16) = 8;
          *((_DWORD *)v6 + 10) = (unsigned __int16)~((v26 >> 8) | ((unsigned __int8)v26 << 8));
          goto LABEL_56;
        }
      }
      v11 = (unsigned __int8)v6[6] - dword_80069158;
      v12 = v11 << 7;
      if ( v11 >= 0 )
        v13 = dword_80069168 - dword_80069158;
      else
        v13 = dword_80069158 - dword_80069160;
      v14 = v12 / v13;
      if ( v13 == -1 && v12 == 0x80000000 )
        _break(6u, 0);
      v15 = -128;
      if ( v14 >= 127 )
      {
        v15 = 127;
      }
      else if ( v14 >= -128 )
      {
        v15 = v14;
      }
      v16 = (unsigned __int8)v6[7] - dword_8006915C;
      v1 = v15;
      v17 = 127 * v16;
      if ( v16 >= 0 )
        v18 = dword_8006916C - dword_8006915C;
      else
        v18 = dword_8006915C - dword_80069164;
      v19 = v17 / v18;
      if ( v18 == -1 && v17 == 0x80000000 )
        _break(6u, 0);
      v20 = -128;
      if ( v19 >= 127 )
      {
        v20 = 127;
      }
      else if ( v19 >= -128 )
      {
        v20 = v19;
      }
      v0 = v20;
      if ( dword_80065D5C && (*(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) & 0x200000) != 0 )
      {
        v21 = sub_8004F794(v1, v20);
        *((_DWORD *)v6 + 14) = sub_8001FD58(v21 & 0xFFF, 512, 20480);
      }
      else
      {
        *((_DWORD *)v6 + 14) = sub_8004F794(v1, v20) & 0xFFF;
      }
      *((_DWORD *)v6 + 16) = ((2298 - (unsigned __int16)*((_DWORD *)v6 + 14)) & 0xFFF) >> 9;
      v22 = sub_8003D9DC(v1 * v1 + v0 * v0) << 8 >> 7;
      *((_DWORD *)v6 + 15) = v22;
      if ( v22 < 102 )
      {
        *((_DWORD *)v6 + 15) = 0;
        *((_DWORD *)v6 + 16) = 8;
      }
      v23 = ~(HIBYTE(*((unsigned __int16 *)v6 + 1)) | ((unsigned __int8)*((_WORD *)v6 + 1) << 8));
      v24 = v6[1];
      *((_DWORD *)v6 + 10) = (unsigned __int16)~(HIBYTE(*((_WORD *)v6 + 1)) | ((unsigned __int8)*((_WORD *)v6 + 1) << 8));
      if ( v24 == 83 )
      {
        v25 = v23 & 0xF961;
        if ( (v23 & 2) != 0 )
          v25 |= 4u;
        if ( (v23 & 4) != 0 )
          v25 |= 0x80u;
        if ( (v23 & 8) != 0 )
          v25 |= 0x10u;
        if ( (v23 & 0x10) != 0 )
          v25 |= 8u;
        if ( (v23 & 0x80) != 0 )
          v25 |= 2u;
        *((_DWORD *)v6 + 10) = v25;
      }
LABEL_56:
      if ( !*((_DWORD *)v6 + 17) )
        goto LABEL_80;
      if ( v3 )
        goto LABEL_99;
      if ( (dword_80068F78 & 2) != 0 || dword_8006909C || dword_80068F3C != 256 )
      {
        v6[76] = 0;
LABEL_71:
        v6[77] = 0;
        goto LABEL_72;
      }
      if ( dword_80069024 )
      {
        v27 = 0;
        if ( ((1 << ((dword_80069024 - 1) & 0x1F)) & dword_80068FFC) != 0 )
          v27 = -1;
        v6[76] = v27;
      }
      else
      {
        v6[76] = 0;
      }
      if ( dword_8006908C )
      {
        v6[77] = dword_80069088;
      }
      else
      {
        if ( !dword_800690B8 )
          goto LABEL_71;
        v6[77] = dword_800690BC;
      }
LABEL_72:
      if ( dword_80069024 )
        --dword_80069024;
      if ( dword_8006908C )
        --dword_8006908C;
      if ( dword_800690B8 )
        --dword_800690B8;
      sub_800492B4(v5, v6 + 76, 2);
LABEL_80:
      if ( !v3 )
      {
        if ( dword_8006909C == 3 )
        {
          *((_DWORD *)v6 + 10) = 0;
        }
        else if ( (unsigned int)dword_8006909C >= 4 )
        {
          if ( dword_8006909C == 4 && (unsigned int)(dword_800690A0 + 1) < 2 )
          {
            v39[0] = *(_DWORD *)(v9 + 488) >= (unsigned int)(*(_DWORD *)(v9 + 528) + 8 * **(_DWORD **)(v9 + 528) + 3228);
            if ( !dword_80069028 )
              goto LABEL_98;
            sub_8001DB38(0, dword_80069028, 3584, 1, v39);
            dword_80068F08 = 264;
            dword_8006909C = 3;
          }
        }
        else if ( dword_8006909C == 2 )
        {
          v28 = *(_DWORD *)(v9 + 528);
          *((_DWORD *)v6 + 16) = 8;
          v29 = *(_DWORD *)(v9 + 488);
          v30 = *((_DWORD *)v6 + 10);
          *((_DWORD *)v6 + 15) = 0;
          if ( v29 == v28 + 3228 )
            *(_DWORD *)(dword_80061A7C + 24) = *(_DWORD *)(v28 + 3224);
          if ( (v31 = *(_DWORD *)(v9 + 488),
                v32 = *(_DWORD *)(v31 + 4),
                *(_DWORD *)(v9 + 488) = v31 + 8,
                *((_DWORD *)v6 + 10) = v32,
                (v30 & 0x9F0) != 0)
            && !*v6
            || v31 + 8 >= (unsigned int)(*(_DWORD *)(v9 + 528) + 8 * **(_DWORD **)(v9 + 528) + 3228) )
          {
            if ( !dword_80069028 )
            {
LABEL_98:
              dword_8006909C = 0;
              goto LABEL_99;
            }
            dword_8006909C = 4;
            dword_80068F08 &= 0xFFFF6FF5;
          }
        }
      }
LABEL_99:
      if ( (dword_80068F1C & 0x10000) == 0 || *v6 && !dword_8006909C )
      {
        v33 = *((_DWORD *)v6 + 10);
        *((_DWORD *)v6 + 15) = 0;
        *((_DWORD *)v6 + 16) = 8;
        *((_DWORD *)v6 + 10) = v33 & 0xFFFF0F13;
      }
      v34 = *((_DWORD *)v6 + 10);
      if ( (v34 & 0x1000) != 0 )
      {
        *((_DWORD *)v6 + 10) = v34 & 0xFFFFBFFF;
        v34 = *((_DWORD *)v6 + 10);
      }
      if ( (v34 & 0x8000) != 0 )
        *((_DWORD *)v6 + 10) = v34 & 0xFFFFDFFF;
      v35 = (dword_80065BC8[v4 / 4 + 11] & 0xF000u) >> 12;
      if ( v35 )
      {
        v36 = &dword_8005BF00[4 * v35];
        *((_DWORD *)v6 + 16) = *v36;
        *((_DWORD *)v6 + 14) = v36[1];
        *((_DWORD *)v6 + 15) = v36[2];
        v1 = *((char *)v36 + 12);
        v0 = -*((char *)v36 + 13);
      }
      else
      {
        switch ( *((_DWORD *)v6 + 16) )
        {
          case 0:
            v37 = *((_DWORD *)v6 + 10) | 0x1000;
            goto LABEL_118;
          case 1:
            v37 = *((_DWORD *)v6 + 10) | 0x3000;
            goto LABEL_118;
          case 2:
            v37 = *((_DWORD *)v6 + 10) | 0x2000;
            goto LABEL_118;
          case 3:
            v37 = *((_DWORD *)v6 + 10) | 0x6000;
            goto LABEL_118;
          case 4:
            v37 = *((_DWORD *)v6 + 10) | 0x4000;
            goto LABEL_118;
          case 5:
            v37 = *((_DWORD *)v6 + 10) | 0xC000;
            goto LABEL_118;
          case 6:
            v37 = *((_DWORD *)v6 + 10) | 0x8000;
            goto LABEL_118;
          case 7:
            v37 = *((_DWORD *)v6 + 10) | 0x9000;
LABEL_118:
            *((_DWORD *)v6 + 10) = v37;
            break;
          default:
            break;
        }
      }
      if ( !v3 )
      {
        dword_800690E8 = *((_DWORD *)v6 + 15);
        v38 = *((_DWORD *)v6 + 14);
        dword_8006917C = v1;
        dword_80069180 = -v0;
        dword_800690EC = v38;
LABEL_124:
        v4 += 80;
        goto LABEL_125;
      }
      if ( v3 == 1 )
      {
        dword_80069198 = v1;
        dword_8006919C = -v0;
        dword_800690F4 = *((_DWORD *)v6 + 10);
        goto LABEL_124;
      }
      v4 += 80;
LABEL_125:
      *((_DWORD *)v6 + 9) = (unsigned __int16)(*((_DWORD *)v6 + 10) & ~*((_WORD *)v6 + 22));
      result = ++v3 < dword_80065BC8[0];
      v5 += 16;
    }
    while ( v3 < dword_80065BC8[0] );
  }
  return result;
}
// 80015908: conditional instruction was optimized away because $v0.4!=0
// 80015994: conditional instruction was optimized away because $v0.4!=0
// 80015CF8: variable 'v9' is possibly undefined
// 80015FC0: variable 'v1' is possibly undefined
// 80015FC4: variable 'v0' is possibly undefined
// 80048F00: using guessed type int __fastcall sub_80048F00(_DWORD);
// 80048FC0: using guessed type int __fastcall sub_80048FC0(_DWORD, _DWORD, _DWORD);
// 80049234: using guessed type int __fastcall sub_80049234(_DWORD, _DWORD);
// 8004926C: using guessed type int __fastcall sub_8004926C(_DWORD, _DWORD, _DWORD);
// 800492B4: using guessed type int __fastcall sub_800492B4(_DWORD, _DWORD, _DWORD);
// 8005BF00: using guessed type int dword_8005BF00[2];
// 800608EC: using guessed type int dword_800608EC[3];
// 80061A7C: using guessed type int dword_80061A7C;
// 80065BC8: using guessed type int dword_80065BC8[];
// 80065D5C: using guessed type int dword_80065D5C;
// 80068F08: using guessed type int dword_80068F08;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F3C: using guessed type int dword_80068F3C;
// 80068F78: using guessed type int dword_80068F78;
// 80068FFC: using guessed type int dword_80068FFC;
// 80069024: using guessed type int dword_80069024;
// 80069028: using guessed type int dword_80069028;
// 80069088: using guessed type int dword_80069088;
// 8006908C: using guessed type int dword_8006908C;
// 8006909C: using guessed type int dword_8006909C;
// 800690A0: using guessed type int dword_800690A0;
// 800690B8: using guessed type int dword_800690B8;
// 800690BC: using guessed type int dword_800690BC;
// 800690E8: using guessed type int dword_800690E8;
// 800690EC: using guessed type int dword_800690EC;
// 800690F4: using guessed type int dword_800690F4;
// 80069158: using guessed type int dword_80069158;
// 8006915C: using guessed type int dword_8006915C;
// 80069160: using guessed type int dword_80069160;
// 80069164: using guessed type int dword_80069164;
// 80069168: using guessed type int dword_80069168;
// 8006916C: using guessed type int dword_8006916C;
// 8006917C: using guessed type int dword_8006917C;
// 80069180: using guessed type int dword_80069180;
// 80069198: using guessed type int dword_80069198;
// 8006919C: using guessed type int dword_8006919C;

//----- (80016048) --------------------------------------------------------
int sub_80016048()
{
  _BYTE v1[96]; // [sp+18h] [-70h] BYREF
  _BYTE v2[8]; // [sp+78h] [-10h] BYREF
  __int16 v3; // [sp+80h] [-8h]
  __int16 v4; // [sp+82h] [-6h]
  __int16 v5; // [sp+84h] [-4h]
  __int16 v6; // [sp+86h] [-2h]

  SetDefDrawEnv(v1, 0, 0, 1024, 512);
  v1[23] = 1;
  PutDrawEnv(v1);
  sub_8004F284(v2);
  v2[3] = 3;
  v2[7] = 2;
  v5 = 1023;
  v6 = 511;
  v2[4] = 0;
  v2[5] = 0;
  v2[6] = 0;
  v3 = 0;
  v4 = 0;
  return DrawPrim(v2);
}
// 8004C194: using guessed type int __fastcall SetDefDrawEnv(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 8004CB98: using guessed type int __fastcall DrawPrim(_DWORD);
// 8004CC64: using guessed type int __fastcall PutDrawEnv(_DWORD);
// 8004F284: using guessed type int __fastcall sub_8004F284(_DWORD);

//----- (800160D8) --------------------------------------------------------
int sub_800160D8()
{
  int v0; // $s2
  int *v1; // $s1

  dword_80069034 = 0;
  ResetGraph(0);
  SetGraphDebug(0);
  v0 = 0;
  sub_80016048();
  v1 = (int *)&unk_80061A88;
  dword_80061A78 = 2;
  do
  {
    *v1 = v0;
    v1[4] = 0;
    SetDefDispEnv(v1 + 2056, v0 << 9, 0, 512, 240);
    dword_80069064 = 0;
    *((_WORD *)v1 + 4116) = 0;
    SetDefDrawEnv(v1 + 2061, v0 << 9, 12, 512, 216);
    *((_WORD *)v1 + 4127) = 12;
    *((_WORD *)v1 + 4126) = (_WORD)v0 << 9;
    *((_BYTE *)v1 + 8266) = 1;
    *((_BYTE *)v1 + 8267) = 0;
    if ( !v0 )
    {
      dword_80061A84 = (int)v1;
      dword_80061A7C = (int)v1;
    }
    if ( v0 == 1 )
      dword_80061A80 = (int)v1;
    ++v0;
    v1[6] = 34;
    v1[4] = 0;
    v1 += 2088;
  }
  while ( v0 < dword_80061A78 );
  PutDispEnv(dword_80061A7C + 8224);
  PutDrawEnv(dword_80061A80 + 8244);
  return SetDispMask(1);
}
// 8003AE8C: using guessed type int dword_8003AE8C;
// 8004C194: using guessed type int __fastcall SetDefDrawEnv(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 8004C248: using guessed type int __fastcall SetDefDispEnv(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 8004C284: using guessed type int __fastcall ResetGraph(_DWORD);
// 8004C3F8: using guessed type int __fastcall SetGraphDebug(_DWORD);
// 8004C568: using guessed type int __fastcall SetDispMask(_DWORD);
// 8004CC64: using guessed type int __fastcall PutDrawEnv(_DWORD);
// 8004CE30: using guessed type int __fastcall PutDispEnv(_DWORD);
// 80061A78: using guessed type int dword_80061A78;
// 80061A7C: using guessed type int dword_80061A7C;
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;
// 80069034: using guessed type int dword_80069034;
// 80069064: using guessed type int dword_80069064;

//----- (80016234) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80016234(int a1)
{
  int v1; // $gp
  int v2; // $s1
  int *v3; // $v0
  int v4; // $s0
  int v5; // $gp
  int v6; // $a1
  _DWORD *v7; // $s0
  _DWORD *v8; // $s0
  _DWORD *v9; // $v1

  if ( a1 == 2 || a1 == 60 )
  {
    while ( 1 )
    {
      sub_8001242C(&dword_8006C7B4, (int)&unk_8006EA78, 1);
      v2 = ((dword_8006C7B8 & 0x1FFFF) + 2047) >> 11;
      if ( (dword_8006C7B8 & 0x1FFFF) + 2047 < 0 )
        v2 = ((dword_8006C7B8 & 0x1FFFF) + 4094) >> 11;
      v3 = (int *)((char *)&unk_8006EA74 + 2048 * v2);
      v4 = *v3;
      *v3 = 0;
      if ( sub_80012634((unsigned int *)&unk_8006EA78, v2 << 11) == v4 )
        break;
      v6 = *(_DWORD *)(v5 + 124);
      *(_DWORD *)(v5 + 124) = v6 + 1;
      printf("fwc %d\n", v6);
    }
    v7 = &unk_80072230;
    if ( (unsigned int)&unk_80072230 < *(_DWORD *)(v5 + 104) )
      v7 = *(_DWORD **)(v5 + 104);
    EnterCriticalSection(-2147090432);
    FlushCache();
    sub_800112B8(v7, -2145390592 - (_DWORD)v7);
    ExitCriticalSection();
    off_8005BEEC = &unk_8006F64C;
    off_8005BEFC = &unk_8006F780;
    ((void (*)(void))unk_800716A0)();
  }
  else
  {
    v8 = &unk_8006EA80;
    v9 = *(_DWORD **)(v1 + 104);
    off_8005BEEC = 0;
    off_8005BEFC = 0;
    if ( &unk_8006EA80 < (_UNKNOWN *)v9 )
      v8 = v9;
    ((void (*)(void))EnterCriticalSection)();
    sub_800112B8(v8, -2145390592 - (_DWORD)v8);
    ExitCriticalSection();
  }
  return -255;
}
// 80016364: write access to const memory at 8005BEEC has been detected
// 80016374: write access to const memory at 8005BEFC has been detected
// 80016390: write access to const memory at 8005BEEC has been detected
// 80016394: write access to const memory at 8005BEFC has been detected
// 800162D4: variable 'v5' is possibly undefined
// 80016388: variable 'v1' is possibly undefined
// 80048110: using guessed type int printf(const char *, ...);
// 80048B78: using guessed type int FlushCache(void);
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8005BEEC: using guessed type _UNKNOWN *off_8005BEEC;
// 8005BEFC: using guessed type _UNKNOWN *off_8005BEFC;
// 8006C7B4: using guessed type int dword_8006C7B4;
// 8006C7B8: using guessed type int dword_8006C7B8;

//----- (800163F8) --------------------------------------------------------
int sub_800163F8()
{
  int v0; // $s1
  int v1; // $s4
  _DWORD *v2; // $s0
  int v3; // $v0

  v0 = 0;
  sub_8003AC44(dword_80061A84 + 32, 0x800u);
  sub_8003AC44(dword_80061A80 + 32, 0x800u);
  v1 = sub_800112F8();
  if ( dword_80061A78 > 0 )
  {
    v2 = &unk_80061A88;
    do
    {
      v2[2085] = v1;
      v3 = sub_800112F8();
      v2[1] = v3;
      if ( !v3 )
        exit(-15);
      sub_8001660C(v2);
      ++v0;
      v2 += 2088;
    }
    while ( v0 < dword_80061A78 );
  }
  return -255;
}
// 80048040: using guessed type void __fastcall __noreturn exit(_DWORD);
// 80060ABC: using guessed type int dword_80060ABC;
// 80061A78: using guessed type int dword_80061A78;
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;

//----- (80016544) --------------------------------------------------------
int sub_80016544()
{
  int v0; // $s0
  _DWORD *v1; // $s1
  int v2; // $a0

  sub_800165F8((_DWORD *)dword_80061A84);
  DrawSync(0);
  sub_8001152C(dword_80063B1C);
  v0 = 0;
  if ( dword_80061A78 > 0 )
  {
    v1 = &unk_80061A88;
    do
    {
      v2 = v1[1];
      v1 += 2088;
      sub_8001152C(v2);
      ++v0;
    }
    while ( v0 < dword_80061A78 );
  }
  return -255;
}
// 8004C600: using guessed type int __fastcall DrawSync(_DWORD);
// 80060ABC: using guessed type int dword_80060ABC;
// 80061A78: using guessed type int dword_80061A78;
// 80061A84: using guessed type int dword_80061A84;
// 80063B1C: using guessed type int dword_80063B1C;

//----- (800165F8) --------------------------------------------------------
int __fastcall sub_800165F8(_DWORD *a1)
{
  int result; // $v0

  result = a1[2085];
  a1[2084] = 0;
  a1[2087] = 0;
  a1[2086] = result;
  return result;
}

//----- (8001660C) --------------------------------------------------------
int __fastcall sub_8001660C(_DWORD *a1)
{
  int v1; // $v0

  v1 = a1[1];
  a1[3] = 0;
  a1[2] = v1;
  return sub_800165F8(a1);
}

//----- (80016634) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_80016634(int a1)
{
  int v1; // $s3
  int v2; // $s4
  int v3; // $gp
  int v5; // $v0
  int v6; // $a1
  int v7; // $a2
  int v8; // $gp
  int v9; // $s1
  int v10; // $s2
  unsigned __int8 *v11; // $v1
  unsigned __int8 *v12; // $v0
  int v13; // $v0
  int v14; // $a0
  int v15; // $gp
  int *v16; // $a0
  int v17; // $gp
  int v18; // $v1
  int *result; // $v0
  unsigned __int8 v20[8]; // [sp+28h] [-8h] BYREF

  if ( !*(_DWORD *)(dword_80061A84 + 12) )
  {
    sub_8003AC44(dword_80061A84 + 32, 0x800u);
    *(_DWORD *)(dword_80061A84 + 12) = 1;
  }
  if ( (dword_80068F1C & 0x1000) != 0 )
    ++dword_80069034;
  if ( dword_800690A0 )
  {
    if ( dword_800690A0 <= 0 )
    {
      if ( dword_800690A0 < -2 )
      {
        dword_800690A0 += dword_800690A4;
        sub_800176A0(dword_800690A0 + 256);
        if ( dword_800690A0 || (dword_80068F1C & 0x400000) != 0 )
          goto LABEL_16;
        v5 = -2;
      }
      else
      {
        sub_800176A0(0x100u);
        v5 = -1;
      }
      dword_800690A0 = v5;
      goto LABEL_16;
    }
    dword_800690A0 -= dword_800690A4;
    if ( dword_800690A0 < 0 )
      dword_800690A0 = 0;
    sub_800176A0(dword_800690A0);
  }
LABEL_16:
  sub_80017834(dword_8006901C, *(_DWORD *)(v3 + 136));
  *(_DWORD *)(v8 + 136) = dword_8006901C;
  if ( a1 )
    goto LABEL_36;
  v9 = 1;
  if ( (dword_80068F1C & 0x2000) == 0 )
    goto LABEL_36;
  v10 = 0;
  if ( dword_80065D5C )
  {
    v11 = sub_80032710(dword_80065D68, 506, dword_80065D70, 0, 0, 0, 0, 0, 0);
    if ( v11 )
    {
      v9 = *(_DWORD *)v11;
      v10 = *((_DWORD *)v11 + 1);
      if ( *(_DWORD *)v11 != 2 )
        goto LABEL_30;
      v2 = *((_DWORD *)v11 + 2);
      v12 = sub_80032710(dword_80065D68, 505, dword_80065D70, 0, 0, 3, v20, 0, 0);
      v1 = 0;
      if ( v12 )
        v1 = *(__int16 *)v12;
    }
  }
  if ( v9 == 2 )
  {
    v13 = sub_8003C2F0(dword_80065CFC);
    v6 = dword_8006901C;
    v1 = ((dword_80065D54 * 170 * v13) >> 20) - (v1 - 108);
    if ( dword_8006901C )
      v1 -= (120 * dword_8006901C) >> 3;
    if ( v1 >= 0 )
    {
      if ( v1 < 215 )
        goto LABEL_30;
    }
    else
    {
      v10 = v2;
    }
    v9 = 1;
  }
LABEL_30:
  if ( v9 == 1 )
  {
    sub_80016CE4(0, 0, 512, 216, v10, SBYTE1(v10), SBYTE2(v10));
  }
  else if ( v9 >= 2 )
  {
    v6 = 0;
    if ( v9 == 2 )
    {
      sub_80016CE4(0, 0, 512, v1 + 1, v10, SBYTE1(v10), SBYTE2(v10));
      sub_80016CE4(0, v1 + 1, 512, 215 - v1, v2, SBYTE1(v2), SBYTE2(v2));
    }
  }
LABEL_36:
  v14 = dword_800691FC;
  if ( dword_800691FC >= 0 )
  {
    ++dword_800691FC;
    sub_8001742C(v14, v6, v7);
  }
  if ( !a1 )
    sub_80034310();
  *(_DWORD *)(dword_80061A80 + 20) = 0;
  DrawSync(0);
  v16 = dword_80068E98;
  if ( dword_8006909C )
    dword_80068FA4 = 17;
  else
    dword_80068FA4 = -*(_DWORD *)(dword_80061A80 + 16);
  if ( !dword_80061054 )
  {
    v16 = (int *)dword_80061A80;
    dword_80061A7C = dword_80061A80;
    dword_80061A80 = dword_80061A84;
    dword_80061A84 = (int)v16;
  }
  if ( (unsigned int)(*(_DWORD *)(v15 + 112) - *(_DWORD *)(dword_80061A7C + 28)) < 2 )
  {
    sub_8004B2A8(0);
    if ( (unsigned int)-*(_DWORD *)(dword_80061A7C + 16) < 0x19 )
      sub_8004B2A8(0);
  }
  if ( (dword_80068F1C & 0x200000) != 0 )
  {
    if ( !*(_DWORD *)(v15 + 140) )
    {
      EnterCriticalSection(v16);
      StopRCnt(-234881022);
      ExitCriticalSection();
    }
    *(_DWORD *)(v15 + 140) = 1;
    ((void (*)(void))unk_8006F9B8)();
    dword_8003AE8C = 34;
  }
  else
  {
    if ( *(_DWORD *)(v15 + 140) )
    {
      EnterCriticalSection(v16);
      StartRCnt(-234881022);
      ExitCriticalSection();
    }
    *(_DWORD *)(v15 + 140) = 0;
  }
  EnterCriticalSection(v16);
  if ( dword_8006909C == 2 )
    dword_8003AE8C = **(_DWORD **)(v17 + 488);
  *(_DWORD *)(dword_80061A80 + 16) = 0;
  *(_DWORD *)(dword_80061A80 + 28) = *(_DWORD *)(v17 + 112);
  ExitCriticalSection();
  *(_DWORD *)(dword_80061A7C + 24) = *(_DWORD *)(dword_80061A80 + 16) - *(_DWORD *)(dword_80061A7C + 16);
  v18 = dword_80061A7C;
  if ( (unsigned int)(*(_DWORD *)(dword_80061A7C + 24) - 33) < 3 )
  {
    *(_DWORD *)(dword_80061A7C + 24) = 34;
    v18 = dword_80061A7C;
  }
  *(_WORD *)(v18 + 8232) = dword_80069064;
  PutDispEnv(dword_80061A7C + 8224);
  PutDrawEnv(dword_80061A80 + 8244);
  if ( dword_80061054 > 0 )
    --dword_80061054;
  if ( !dword_80061054 )
  {
    if ( (dword_80068F1C & 0x40000) != 0 )
      ((void (*)(void))unk_8006EC9C)();
    DrawOTag(dword_80061A80 + 32);
  }
  sub_8001660C((_DWORD *)dword_80061A84);
  result = dword_80068E98;
  dword_80068F1C = dword_80068F08;
  return result;
}
// 80016B40: write access to const memory at 8003AE8C has been detected
// 80016BAC: write access to const memory at 8003AE8C has been detected
// 800167B8: variable 'v3' is possibly undefined
// 800167CC: variable 'v8' is possibly undefined
// 800168C4: variable 'v1' is possibly undefined
// 80016900: variable 'v2' is possibly undefined
// 800169E4: variable 'v6' is possibly undefined
// 800169E4: variable 'v7' is possibly undefined
// 80016A8C: variable 'v15' is possibly undefined
// 80016B04: variable 'v16' is possibly undefined
// 80016BA0: variable 'v17' is possibly undefined
// 8003AE8C: using guessed type int dword_8003AE8C;
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 80048DAC: using guessed type int __fastcall StartRCnt(_DWORD);
// 80048DDC: using guessed type int __fastcall StopRCnt(_DWORD);
// 8004C600: using guessed type int __fastcall DrawSync(_DWORD);
// 8004CBF4: using guessed type int __fastcall DrawOTag(_DWORD);
// 8004CC64: using guessed type int __fastcall PutDrawEnv(_DWORD);
// 8004CE30: using guessed type int __fastcall PutDispEnv(_DWORD);
// 80061054: using guessed type int dword_80061054;
// 80061A7C: using guessed type int dword_80061A7C;
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D54: using guessed type int dword_80065D54;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D68: using guessed type int dword_80065D68;
// 80065D70: using guessed type int dword_80065D70;
// 80068E98: using guessed type int dword_80068E98[];
// 80068F08: using guessed type int dword_80068F08;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068FA4: using guessed type int dword_80068FA4;
// 8006901C: using guessed type int dword_8006901C;
// 80069034: using guessed type int dword_80069034;
// 80069064: using guessed type int dword_80069064;
// 8006909C: using guessed type int dword_8006909C;
// 800690A0: using guessed type int dword_800690A0;
// 800690A4: using guessed type int dword_800690A4;
// 800691FC: using guessed type int dword_800691FC;

//----- (80016CE4) --------------------------------------------------------
int __fastcall sub_80016CE4(__int16 a1, __int16 a2, __int16 a3, __int16 a4, char a5, char a6, char a7)
{
  int v7; // $v1

  v7 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v7 + 16;
  *(_BYTE *)(v7 + 3) = 3;
  *(_BYTE *)(v7 + 7) = 2;
  *(_WORD *)(v7 + 12) = a3;
  *(_WORD *)(v7 + 14) = a4;
  *(_BYTE *)(v7 + 4) = a5;
  *(_BYTE *)(v7 + 5) = a6;
  *(_BYTE *)(v7 + 6) = a7;
  *(_WORD *)(v7 + 8) = *(_WORD *)(dword_80061A84 + 8244) + a1;
  *(_WORD *)(v7 + 10) = *(_WORD *)(dword_80061A84 + 8246) + a2;
  return sub_8004F244(dword_80061A84 + 32, v7);
}
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 80061A84: using guessed type int dword_80061A84;

//----- (80016D8C) --------------------------------------------------------
int __fastcall sub_80016D8C(__int16 a1)
{
  int v2; // $v0
  int v3; // $s1
  int v4; // $s3
  int v5; // $s5
  int v6; // $s0
  int v7; // $s2
  int v8; // $s1
  __int16 v9; // $s6
  int v10; // $s0
  __int16 v11; // $v0
  int v12; // $s0
  __int16 v13; // $v0
  int v14; // $s0
  __int16 v15; // $v0

  v3 = sub_8003C2F0(a1);
  v2 = sub_8003C364(a1);
  v4 = (34304 * v3) >> 20;
  v5 = (34304 * v2) >> 20;
  v6 = *(_DWORD *)(dword_80061A84 + 8);
  v7 = (68608 * v3) >> 20;
  *(_DWORD *)(dword_80061A84 + 8) = v6 + 40;
  *(_BYTE *)(v6 + 4) = 0x80;
  *(_BYTE *)(v6 + 5) = 0x80;
  *(_BYTE *)(v6 + 6) = 0x80;
  v8 = (68608 * v2) >> 20;
  *(_WORD *)(v6 + 22) = sub_8004F1E4(2, 0, *(__int16 *)(dword_80061A80 + 8244), 0);
  *(_WORD *)(v6 + 8) = 256;
  *(_WORD *)(v6 + 10) = 108;
  *(_WORD *)(v6 + 18) = v7 + 108;
  *(_BYTE *)(v6 + 20) = 0;
  *(_BYTE *)(v6 + 29) = 0;
  *(_BYTE *)(v6 + 36) = 0;
  *(_BYTE *)(v6 + 37) = 0;
  *(_WORD *)(v6 + 16) = 256 - v8;
  v9 = 108 - v5;
  *(_WORD *)(v6 + 32) = 256 - v4 - v8;
  *(_BYTE *)(v6 + 12) = -1;
  *(_BYTE *)(v6 + 13) = 119;
  *(_BYTE *)(v6 + 21) = 119;
  *(_WORD *)(v6 + 24) = 256 - v4;
  *(_WORD *)(v6 + 26) = 108 - v5;
  *(_WORD *)(v6 + 34) = v7 - (v5 - 108);
  *(_BYTE *)(v6 + 28) = -1;
  SetPolyFT4(v6);
  SetSemiTrans(v6, 1);
  sub_8004F244(dword_80061A84 + 8220, v6);
  v10 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v10 + 40;
  *(_BYTE *)(v10 + 4) = 0x80;
  *(_BYTE *)(v10 + 5) = 0x80;
  *(_BYTE *)(v10 + 6) = 0x80;
  v11 = sub_8004F1E4(2, 0, *(__int16 *)(dword_80061A80 + 8244), 0);
  *(_WORD *)(v10 + 8) = 256;
  *(_WORD *)(v10 + 22) = v11;
  *(_WORD *)(v10 + 10) = 108;
  *(_WORD *)(v10 + 18) = v7 + 108;
  LOWORD(v5) = v5 + 108;
  *(_WORD *)(v10 + 32) = v4 + 256 - v8;
  *(_WORD *)(v10 + 24) = v4 + 256;
  *(_WORD *)(v10 + 26) = v5;
  *(_WORD *)(v10 + 34) = v7 + v5;
  *(_BYTE *)(v10 + 20) = 0;
  *(_BYTE *)(v10 + 36) = 0;
  *(_WORD *)(v10 + 16) = 256 - v8;
  *(_BYTE *)(v10 + 12) = -1;
  *(_BYTE *)(v10 + 13) = 120;
  *(_BYTE *)(v10 + 21) = 120;
  *(_BYTE *)(v10 + 28) = -1;
  *(_BYTE *)(v10 + 29) = -17;
  *(_BYTE *)(v10 + 37) = -17;
  SetPolyFT4(v10);
  SetSemiTrans(v10, 1);
  sub_8004F244(dword_80061A84 + 8220, v10);
  v12 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v12 + 40;
  *(_BYTE *)(v12 + 4) = 0x80;
  *(_BYTE *)(v12 + 5) = 0x80;
  *(_BYTE *)(v12 + 6) = 0x80;
  v13 = sub_8004F1E4(2, 0, *(__int16 *)(dword_80061A80 + 8244) + 256, 0);
  *(_WORD *)(v12 + 8) = 256;
  *(_WORD *)(v12 + 10) = 108;
  *(_WORD *)(v12 + 22) = v13;
  *(_WORD *)(v12 + 24) = 256 - v4;
  *(_WORD *)(v12 + 26) = v9;
  *(_WORD *)(v12 + 32) = v8 - (v4 - 256);
  *(_WORD *)(v12 + 34) = v9 - v7;
  *(_BYTE *)(v12 + 12) = 0;
  *(_BYTE *)(v12 + 28) = 0;
  *(_BYTE *)(v12 + 29) = 0;
  *(_BYTE *)(v12 + 37) = 0;
  *(_WORD *)(v12 + 16) = v8 + 256;
  *(_BYTE *)(v12 + 13) = 119;
  *(_BYTE *)(v12 + 20) = -1;
  *(_BYTE *)(v12 + 21) = 119;
  *(_WORD *)(v12 + 18) = 108 - v7;
  *(_BYTE *)(v12 + 36) = -1;
  SetPolyFT4(v12);
  SetSemiTrans(v12, 1);
  sub_8004F244(dword_80061A84 + 8220, v12);
  v14 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v14 + 40;
  *(_BYTE *)(v14 + 4) = 0x80;
  *(_BYTE *)(v14 + 5) = 0x80;
  *(_BYTE *)(v14 + 6) = 0x80;
  v15 = sub_8004F1E4(2, 0, *(__int16 *)(dword_80061A80 + 8244) + 256, 0);
  *(_WORD *)(v14 + 8) = 256;
  *(_WORD *)(v14 + 22) = v15;
  *(_WORD *)(v14 + 10) = 108;
  *(_WORD *)(v14 + 26) = v5;
  *(_WORD *)(v14 + 18) = 108 - v7;
  *(_WORD *)(v14 + 24) = v4 + 256;
  *(_WORD *)(v14 + 32) = v8 + v4 + 256;
  *(_WORD *)(v14 + 34) = v5 - v7;
  *(_BYTE *)(v14 + 12) = 0;
  *(_BYTE *)(v14 + 28) = 0;
  *(_WORD *)(v14 + 16) = v8 + 256;
  *(_BYTE *)(v14 + 13) = 120;
  *(_BYTE *)(v14 + 20) = -1;
  *(_BYTE *)(v14 + 21) = 120;
  *(_BYTE *)(v14 + 29) = -17;
  *(_BYTE *)(v14 + 36) = -1;
  *(_BYTE *)(v14 + 37) = -17;
  SetPolyFT4(v14);
  SetSemiTrans(v14, 1);
  return sub_8004F244(dword_80061A84 + 8220, v14);
}
// 8004F1E4: using guessed type int __fastcall sub_8004F1E4(_DWORD, _DWORD, _DWORD, _DWORD);
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 8004F2A4: using guessed type int __fastcall SetSemiTrans(_DWORD, _DWORD);
// 8004F2F4: using guessed type int __fastcall SetPolyFT4(_DWORD);
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;

//----- (80017204) --------------------------------------------------------
int *__fastcall sub_80017204(int a1)
{
  int v2; // $s1
  int *result; // $v0
  int v4; // $s1

  if ( (unsigned int)(a1 - 7) < 0x17 )
  {
    v2 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v2 + 40;
    *(_BYTE *)(v2 + 4) = 8;
    *(_BYTE *)(v2 + 5) = 8;
    *(_BYTE *)(v2 + 6) = 8;
    *(_WORD *)(v2 + 22) = sub_8004F1E4(2, 2, 0, 256);
    *(_WORD *)(v2 + 10) = 60;
    *(_WORD *)(v2 + 16) = 384;
    *(_WORD *)(v2 + 24) = 128;
    *(_WORD *)(v2 + 8) = 256;
    *(_WORD *)(v2 + 18) = 120;
    *(_WORD *)(v2 + 26) = 120;
    *(_WORD *)(v2 + 32) = 256;
    *(_WORD *)(v2 + 34) = 180;
    *(_BYTE *)(v2 + 12) = 0;
    *(_BYTE *)(v2 + 13) = 0;
    *(_BYTE *)(v2 + 20) = 0;
    *(_BYTE *)(v2 + 21) = 0;
    *(_BYTE *)(v2 + 28) = 0;
    *(_BYTE *)(v2 + 29) = 0;
    *(_BYTE *)(v2 + 36) = 0;
    *(_BYTE *)(v2 + 37) = 0;
    SetPolyFT4(v2);
    SetSemiTrans(v2, 1);
    sub_8004F244(dword_80061A84 + 8220, v2);
    result = (int *)(a1 < 31);
    if ( a1 < 63 )
      goto LABEL_5;
    dword_800691FC = -1;
    dword_800690A0 = 288;
    dword_80068F08 &= ~0x800000u;
  }
  result = (int *)(a1 < 31);
LABEL_5:
  if ( !result )
  {
    v4 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v4 + 40;
    *(_BYTE *)(v4 + 4) = 8;
    *(_BYTE *)(v4 + 5) = 8;
    *(_BYTE *)(v4 + 6) = 8;
    *(_WORD *)(v4 + 22) = sub_8004F1E4(2, 2, 0, 256);
    *(_WORD *)(v4 + 8) = 0;
    *(_WORD *)(v4 + 10) = 0;
    *(_DWORD *)(v4 + 16) = 512;
    *(_WORD *)(v4 + 24) = 0;
    *(_WORD *)(v4 + 26) = 240;
    *(_WORD *)(v4 + 32) = 512;
    *(_WORD *)(v4 + 34) = 240;
    *(_BYTE *)(v4 + 12) = 0;
    *(_BYTE *)(v4 + 13) = 0;
    *(_BYTE *)(v4 + 20) = 0;
    *(_BYTE *)(v4 + 21) = 0;
    *(_BYTE *)(v4 + 28) = 0;
    *(_BYTE *)(v4 + 29) = 0;
    *(_BYTE *)(v4 + 36) = 0;
    *(_BYTE *)(v4 + 37) = 0;
    SetPolyFT4(v4);
    SetSemiTrans(v4, 1);
    sub_8004F244(dword_80061A84 + 8220, v4);
    result = (int *)(a1 < 63);
    if ( a1 >= 63 )
    {
      dword_800691FC = -1;
      result = &dword_80068E98;
      dword_800690A0 = 288;
      dword_80068F08 &= ~0x800000u;
    }
  }
  return result;
}
// 8004F1E4: using guessed type int __fastcall sub_8004F1E4(_DWORD, _DWORD, _DWORD, _DWORD);
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 8004F2A4: using guessed type int __fastcall SetSemiTrans(_DWORD, _DWORD);
// 8004F2F4: using guessed type int __fastcall SetPolyFT4(_DWORD);
// 80061A84: using guessed type int dword_80061A84;
// 80068E98: using guessed type int dword_80068E98;
// 80068F08: using guessed type int dword_80068F08;
// 800690A0: using guessed type int dword_800690A0;
// 800691FC: using guessed type int dword_800691FC;

//----- (8001742C) --------------------------------------------------------
int __fastcall sub_8001742C(int a1, int a2, int a3)
{
  int v4; // $a1
  int v5; // $s0
  int v6; // $a1
  int v7; // $s1
  __int16 v8; // $a0
  _WORD v10[4]; // [sp+10h] [-30h] BYREF
  _WORD v11[4]; // [sp+18h] [-28h] BYREF
  _DWORD v12[8]; // [sp+20h] [-20h] BYREF

  v12[0] = &unk_8000FFFF;
  v12[1] = &unk_80008000;
  v12[2] = &unk_80008000;
  v12[3] = &unk_80008000;
  v12[4] = &unk_80008000;
  v12[5] = &unk_80008000;
  v12[6] = &unk_80008000;
  v12[7] = &unk_80008000;
  if ( a1 <= 0 )
  {
    v11[1] = 256;
    v11[2] = 16;
    v11[0] = 0;
    v11[3] = 1;
    LoadImage(v11, v12, a3);
    DrawSync(0);
    v4 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v4 + 12;
    *(_BYTE *)(v4 + 3) = 2;
    *(_DWORD *)(v4 + 4) = -436207616;
    *(_DWORD *)(v4 + 8) = 0;
    sub_8004F244(dword_80061A84 + 8220, v4);
    v5 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v5 + 40;
    *(_BYTE *)(v5 + 4) = 0;
    *(_BYTE *)(v5 + 5) = 0;
    *(_BYTE *)(v5 + 6) = 0;
    *(_WORD *)(v5 + 22) = sub_8004F1E4(2, 1, 0, 256);
    *(_WORD *)(v5 + 8) = 0;
    *(_WORD *)(v5 + 10) = 0;
    *(_DWORD *)(v5 + 16) = 512;
    *(_WORD *)(v5 + 24) = 0;
    *(_WORD *)(v5 + 26) = 240;
    *(_WORD *)(v5 + 32) = 512;
    *(_WORD *)(v5 + 34) = 240;
    *(_BYTE *)(v5 + 12) = 0;
    *(_BYTE *)(v5 + 13) = 0;
    *(_BYTE *)(v5 + 20) = 0;
    *(_BYTE *)(v5 + 21) = 0;
    *(_BYTE *)(v5 + 28) = 0;
    *(_BYTE *)(v5 + 29) = 0;
    *(_BYTE *)(v5 + 36) = 0;
    *(_BYTE *)(v5 + 37) = 0;
    SetPolyFT4(v5);
    SetSemiTrans(v5, 1);
    sub_8004F244(dword_80061A84 + 8220, v5);
    v6 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v6 + 12;
    *(_BYTE *)(v6 + 3) = 2;
    *(_DWORD *)(v6 + 4) = -436207615;
    *(_DWORD *)(v6 + 8) = 0;
    sub_8004F244(dword_80061A84 + 8220, v6);
  }
  else
  {
    sub_80016D8C(16);
    sub_80017204(a1);
  }
  v7 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v7 + 24;
  v8 = *(_WORD *)(dword_80061A80 + 8244);
  v10[1] = 0;
  v10[2] = 512;
  v10[3] = 240;
  v10[0] = v8;
  ((void (__fastcall *)(int, _WORD *, _DWORD, _DWORD))SetDrawMove)(v7, v10, *(__int16 *)(dword_80061A84 + 8244), 0);
  return sub_8004F244(dword_80061A84 + 8220, v7);
}
// 8004C600: using guessed type int __fastcall DrawSync(_DWORD);
// 8004C8AC: using guessed type int __fastcall LoadImage(_DWORD, _DWORD, _DWORD);
// 8004F1E4: using guessed type int __fastcall sub_8004F1E4(_DWORD, _DWORD, _DWORD, _DWORD);
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 8004F2A4: using guessed type int __fastcall SetSemiTrans(_DWORD, _DWORD);
// 8004F2F4: using guessed type int __fastcall SetPolyFT4(_DWORD);
// 8004F314: using guessed type int __fastcall SetDrawMove(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;

//----- (800176A0) --------------------------------------------------------
int __fastcall sub_800176A0(unsigned int a1)
{
  int v1; // $a2
  int v2; // $a1
  int v3; // $s2
  int result; // $v0
  int v5; // $s0
  unsigned int v6; // $s1
  unsigned __int8 *v7; // $v1
  int v8; // $a1
  unsigned int v9; // $lo
  int v10; // $a3
  int v11; // $a1
  unsigned __int16 v12; // $v0

  v1 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v1 + 12;
  v2 = *(_DWORD *)(dword_80061A84 + 8);
  v3 = v1;
  *(_DWORD *)(dword_80061A84 + 8) = v2 + 24;
  result = dword_80061A84;
  v5 = v2;
  v6 = dword_80061A84 + 8220;
  if ( a1 )
  {
    if ( (*(_DWORD *)(dword_80061A84 + 8220) & 0xFFFFFF) != 0xFFFFFF )
    {
      do
        v6 = v6 & 0xFF000000 | *(_DWORD *)v6 & 0xFFFFFF;
      while ( (*(_DWORD *)v6 & 0xFFFFFF) != 0xFFFFFF );
    }
    v7 = (unsigned __int8 *)dword_8005C000 + (a1 >> 4);
    v8 = *v7;
    v9 = (v7[1] - v8) * (a1 & 0xF);
    *(_WORD *)(v5 + 8) = 0;
    *(_WORD *)(v5 + 16) = 0;
    *(_WORD *)(v5 + 10) = -12;
    *(_WORD *)(v5 + 14) = -12;
    *(_WORD *)(v5 + 12) = 512;
    *(_WORD *)(v5 + 18) = 228;
    *(_WORD *)(v5 + 20) = 512;
    *(_WORD *)(v5 + 22) = 228;
    v10 = (v9 >> 4) + v8;
    *(_BYTE *)(v5 + 4) = v10;
    *(_BYTE *)(v5 + 5) = v10;
    *(_BYTE *)(v5 + 6) = v10;
    SetPolyF4(v5);
    SetSemiTrans(v5, 1);
    sub_8004F244(v6, v5);
    v11 = 2;
    if ( (dword_80068F1C & 0x800000) != 0 )
      v11 = 1;
    v12 = sub_8004F1E4(0, v11, 0, 0);
    sub_8004D410(v3, 1, 0, v12, 0);
    return sub_8004F244(v6, v3);
  }
  return result;
}
// 8004D410: using guessed type int __fastcall sub_8004D410(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 8004F1E4: using guessed type int __fastcall sub_8004F1E4(_DWORD, _DWORD, _DWORD, _DWORD);
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 8004F2A4: using guessed type int __fastcall SetSemiTrans(_DWORD, _DWORD);
// 8004F2D4: using guessed type int __fastcall SetPolyF4(_DWORD);
// 8005C000: using guessed type int dword_8005C000[10];
// 80061A84: using guessed type int dword_80061A84;
// 80068F1C: using guessed type int dword_80068F1C;

//----- (80017834) --------------------------------------------------------
int __fastcall sub_80017834(int a1, int a2)
{
  unsigned int v4; // $s5
  int v5; // $a1
  int v6; // $s4
  int v7; // $v0
  unsigned int v8; // $s1
  unsigned int v9; // $s5
  __int16 v10; // $s2
  __int16 v11; // $s3
  __int16 v12; // $s1
  int v13; // $s4
  __int16 v14; // $v0
  unsigned int v15; // $a2
  int v16; // $s4
  int v17; // kr00_4
  int result; // $v0
  int v19; // $a2

  v4 = (unsigned int)(100 * a1) >> 3;
  v5 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v5 + 24;
  v6 = v5;
  if ( *(_DWORD *)dword_80061A80 == 1 )
    LOWORD(v7) = 512 - v4;
  else
    v7 = -v4;
  *(_WORD *)(dword_80061A80 + 8252) = v7;
  *(_WORD *)(dword_80061A80 + 8254) = 12 - ((unsigned int)(60 * a1) >> 3);
  if ( a1 )
  {
    if ( a2 )
    {
      v9 = (unsigned int)(100 * a2) >> 3;
      v8 = (unsigned int)(60 * a2) >> 3;
    }
    else
    {
      LOWORD(v8) = 0;
      LOWORD(v9) = 0;
    }
    v10 = v9 + 512 - 25 * a1;
    v11 = v8 - 12;
    v12 = v8 + 228;
    *(_WORD *)(v5 + 8) = v10;
    *(_WORD *)(v5 + 10) = v11;
    *(_WORD *)(v5 + 12) = v9 + 512;
    *(_WORD *)(v5 + 14) = v11;
    *(_WORD *)(v5 + 16) = v10;
    *(_WORD *)(v5 + 18) = v12;
    *(_WORD *)(v5 + 20) = v9 + 512;
    *(_WORD *)(v5 + 22) = v12;
    *(_BYTE *)(v5 + 4) = 0;
    *(_BYTE *)(v5 + 5) = 0;
    *(_BYTE *)(v5 + 6) = 0;
    SetPolyF4(v5);
    sub_8004F244(dword_80061A84 + 8220, v6);
    v13 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v13 + 24;
    v14 = v12 - 15 * a1;
    *(_WORD *)(v13 + 8) = v9;
    *(_WORD *)(v13 + 10) = v14;
    *(_WORD *)(v13 + 12) = v10;
    *(_WORD *)(v13 + 14) = v14;
    *(_WORD *)(v13 + 16) = v9;
    *(_WORD *)(v13 + 18) = v12;
    *(_WORD *)(v13 + 20) = v10;
    *(_WORD *)(v13 + 22) = v12;
    *(_BYTE *)(v13 + 4) = 0;
    *(_BYTE *)(v13 + 5) = 0;
    *(_BYTE *)(v13 + 6) = 0;
    SetPolyF4(v13);
    sub_8004F244(dword_80061A84 + 8220, v13);
    v15 = (unsigned int)(9 * a1) >> 3;
    v16 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v16 + 24;
    *(_WORD *)(v16 + 8) = v9;
    *(_WORD *)(v16 + 10) = v11;
    *(_WORD *)(v16 + 12) = v9 + v15;
    *(_WORD *)(v16 + 14) = v11;
    *(_WORD *)(v16 + 16) = v9;
    *(_WORD *)(v16 + 18) = v12;
    *(_WORD *)(v16 + 20) = v9 + v15;
    *(_WORD *)(v16 + 22) = v12;
    *(_BYTE *)(v16 + 4) = 0;
    *(_BYTE *)(v16 + 5) = 0;
    *(_BYTE *)(v16 + 6) = 0;
    SetPolyF4(v16);
    sub_8004F244(dword_80061A84 + 8220, v16);
  }
  v17 = sub_80025C0C();
  result = dword_80065D54;
  v19 = v17 - v17 / 24 * a1;
  if ( dword_80065D54 != v19 )
  {
    dword_80065D54 = v17 - v17 / 24 * a1;
    return SetGeomScreen(v19);
  }
  return result;
}
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 8004F2D4: using guessed type int __fastcall SetPolyF4(_DWORD);
// 8004F724: using guessed type int __fastcall SetGeomScreen(_DWORD);
// 80061A80: using guessed type int dword_80061A80;
// 80061A84: using guessed type int dword_80061A84;
// 80065D54: using guessed type int dword_80065D54;

//----- (80017AC8) --------------------------------------------------------
void nullsub_7()
{
  ;
}

//----- (80017AE8) --------------------------------------------------------
int __fastcall sub_80017AE8(int a1)
{
  int v1; // $v0
  int v2; // $gp
  int v3; // $v0
  int v4; // $gp
  int v5; // $v0
  int v6; // $gp
  int v7; // $v0
  int v8; // $gp
  int v9; // $v0
  int v10; // $gp
  int v11; // $v0
  int v12; // $gp
  int v13; // $v0
  int v14; // $gp
  int v15; // $v0
  int v16; // $gp
  int v17; // $gp
  int v18; // $gp
  int v19; // $gp
  int v20; // $gp
  int v21; // $gp
  int v22; // $gp
  int v23; // $gp
  int v24; // $gp

  EnterCriticalSection(a1);
  v1 = OpenEvent(-201326591, 4, 0x2000, 0);
  *(_DWORD *)(v2 + 496) = v1;
  v3 = OpenEvent(-201326591, 0x8000, 0x2000, 0);
  *(_DWORD *)(v4 + 500) = v3;
  v5 = OpenEvent(-201326591, 256, 0x2000, 0);
  *(_DWORD *)(v6 + 504) = v5;
  v7 = OpenEvent(-201326591, 0x2000, 0x2000, 0);
  *(_DWORD *)(v8 + 508) = v7;
  v9 = OpenEvent(-268435439, 4, 0x2000, 0);
  *(_DWORD *)(v10 + 512) = v9;
  v11 = OpenEvent(-268435439, 0x8000, 0x2000, 0);
  *(_DWORD *)(v12 + 516) = v11;
  v13 = OpenEvent(-268435439, 256, 0x2000, 0);
  *(_DWORD *)(v14 + 520) = v13;
  v15 = OpenEvent(-268435439, 0x2000, 0x2000, 0);
  *(_DWORD *)(v16 + 524) = v15;
  ExitCriticalSection();
  sub_8004B2A8(5);
  InitCARD(1);
  sub_8004B2A8(5);
  sub_8005B6F8();
  sub_8004B2A8(5);
  bu_init();
  sub_8004B2A8(5);
  EnableEvent(*(_DWORD *)(v17 + 496));
  EnableEvent(*(_DWORD *)(v18 + 500));
  EnableEvent(*(_DWORD *)(v19 + 504));
  EnableEvent(*(_DWORD *)(v20 + 508));
  EnableEvent(*(_DWORD *)(v21 + 512));
  EnableEvent(*(_DWORD *)(v22 + 516));
  EnableEvent(*(_DWORD *)(v23 + 520));
  return EnableEvent(*(_DWORD *)(v24 + 524));
}
// 80017B20: variable 'v2' is possibly undefined
// 80017B3C: variable 'v4' is possibly undefined
// 80017B58: variable 'v6' is possibly undefined
// 80017B74: variable 'v8' is possibly undefined
// 80017B90: variable 'v10' is possibly undefined
// 80017BAC: variable 'v12' is possibly undefined
// 80017BC8: variable 'v14' is possibly undefined
// 80017BD4: variable 'v16' is possibly undefined
// 80017C18: variable 'v17' is possibly undefined
// 80017C24: variable 'v18' is possibly undefined
// 80017C30: variable 'v19' is possibly undefined
// 80017C3C: variable 'v20' is possibly undefined
// 80017C48: variable 'v21' is possibly undefined
// 80017C54: variable 'v22' is possibly undefined
// 80017C60: variable 'v23' is possibly undefined
// 80017C6C: variable 'v24' is possibly undefined
// 80048B98: using guessed type int bu_init(void);
// 80048BE8: using guessed type int __fastcall OpenEvent(_DWORD, _DWORD, _DWORD, _DWORD);
// 80048C18: using guessed type int __fastcall EnableEvent(_DWORD);
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8005B6A0: using guessed type int __fastcall InitCARD(_DWORD);
// 8005B6F8: using guessed type int sub_8005B6F8(void);

//----- (80017C88) --------------------------------------------------------
int sub_80017C88()
{
  sub_8005B730();
  return 0;
}
// 8005B730: using guessed type int sub_8005B730(void);

//----- (80017CA8) --------------------------------------------------------
int __fastcall sub_80017CA8(int a1, int a2, int a3)
{
  int v3; // $gp
  int result; // $v0
  int v6; // $v1
  unsigned __int8 *v7; // $a1
  int *v8; // $a2
  _DWORD *v9; // $v0
  int v10; // $v1
  int v11; // $a1
  char *v12; // $a0
  int *v13; // $v0
  int v14; // $a1
  int v15; // $v1

  switch ( a2 )
  {
    case 2:
      ((void (__fastcall *)(int, int, int, int))unk_80071590)(128, a2, a3, a3);
      result = 1;
      break;
    case 3:
      result = ((int (__fastcall *)(int))unk_800717D8)(a3);
      break;
    case 5:
      result = ((int (__fastcall *)(int, int, int, int))unk_800718D0)(a1, a2, a3, a3);
      break;
    case 10:
      result = ((int (__fastcall *)(int, int, int, int))unk_80071930)(a1, a2, a3, a3);
      break;
    case 12:
      result = ((int (__fastcall *)(int, int, int, int))unk_80071974)(a1, a2, a3, a3);
      break;
    case 13:
      result = ((int (__fastcall *)(int))unk_80071C8C)(a3);
      break;
    case 14:
      result = ((int (__fastcall *)(int))unk_80072094)(a3);
      break;
    case 15:
      v6 = *(_DWORD *)(v3 + 144);
      if ( !v6 )
        goto LABEL_22;
      ((void (__fastcall *)(int, _DWORD))unk_80071ABC)(v6 + 1420 * a3 + 1780, 0);
      ((void (*)(void))unk_800719D8)();
      goto LABEL_11;
    case 16:
      result = ((int (__fastcall *)(int))unk_80071D38)(a3);
      break;
    case 17:
      result = ((int (__fastcall *)(int))unk_80071DA8)(a3);
      break;
    case 18:
      result = ((int (__fastcall *)(int))unk_80071880)(a3);
      break;
    case 19:
      if ( (unsigned int)(a3 >> 8) >= 0x28 )
      {
        v9 = *(_DWORD **)(a1 + 188);
        *v9++ = 0;
        *(_DWORD *)(a1 + 188) = v9;
        *v9 = 0;
        *(_DWORD *)(a1 + 188) = v9 + 1;
        v9[1] = 0;
        *(_DWORD *)(a1 + 188) = v9 + 2;
      }
      else
      {
        v7 = (unsigned __int8 *)&unk_8006B0E8 + 36 * (a3 >> 8) + 9 * (unsigned __int8)a3;
        v8 = *(int **)(a1 + 188);
        *v8++ = v7[7] | (v7[8] << 8);
        *(_DWORD *)(a1 + 188) = v8;
        *v8 = v7[3] | (v7[4] << 8) | (v7[5] << 16) | (v7[6] << 24);
        *(_DWORD *)(a1 + 188) = v8 + 1;
        v8[1] = *v7 | (v7[1] << 8) | (v7[2] << 16);
        *(_DWORD *)(a1 + 188) = v8 + 2;
      }
      result = *(_DWORD *)(*(_DWORD *)(a1 + 188) - 4);
      break;
    case 20:
      if ( (unsigned int)(a3 >> 8) >= 0x28 )
      {
        *(_DWORD *)(a1 + 188) -= 12;
      }
      else
      {
        v10 = *(_DWORD *)(a1 + 188);
        *(_DWORD *)(a1 + 188) = v10 - 4;
        v11 = *(_DWORD *)(v10 - 4);
        v12 = (char *)&unk_8006B0E8 + 36 * (a3 >> 8) + 9 * (unsigned __int8)a3;
        *(_WORD *)v12 = v11;
        v12[2] = BYTE2(v11);
        v13 = (int *)(*(_DWORD *)(a1 + 188) - 4);
        *(_DWORD *)(a1 + 188) = v13;
        v14 = *v13;
        v12[4] = BYTE1(*v13);
        v12[5] = BYTE2(v14);
        v12[3] = v14;
        v12[6] = HIBYTE(v14);
        v15 = *(_DWORD *)(a1 + 188);
        *(_DWORD *)(a1 + 188) = v15 - 4;
        *(_WORD *)(v12 + 7) = *(_DWORD *)(v15 - 4);
      }
LABEL_11:
      result = 0;
      break;
    default:
LABEL_22:
      result = 1;
      break;
  }
  return result;
}
// 80017D50: variable 'v3' is possibly undefined

//----- (80017FF8) --------------------------------------------------------
int sub_80017FF8()
{
  return dword_80061A84 + 8;
}
// 80061A84: using guessed type int dword_80061A84;

//----- (80018008) --------------------------------------------------------
int __fastcall sub_80018008(int a1, int a2, int a3)
{
  return sub_80018088(
           a1,
           a2,
           a3,
           *(_DWORD *)(*(_DWORD *)(a1 + 16) + 28),
           *(_DWORD *)(a1 + 32),
           *(_DWORD *)(*(_DWORD *)(a1 + 16) + 40),
           *(_DWORD *)(a1 + 16) + 44);
}

//----- (80018048) --------------------------------------------------------
int __fastcall sub_80018048(int a1, int a2, int a3)
{
  return sub_80018088(
           a1,
           a2,
           a3,
           *(_DWORD *)(*(_DWORD *)(a1 + 16) + 52),
           *(_DWORD *)(a1 + 28),
           *(_DWORD *)(*(_DWORD *)(a1 + 16) + 64),
           *(_DWORD *)(a1 + 16) + 12);
}

//----- (80018088) --------------------------------------------------------
int __fastcall sub_80018088(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // $s1
  int v8; // $s2
  int v9; // $s0
  int *v10; // $a0
  int v11; // $v1
  int result; // $v0
  int v13; // $s0
  _WORD *v14; // $a0

  v7 = -1;
  v8 = a5;
  if ( a3 != 1670788223 )
  {
    v9 = a6 - 1;
    if ( a6 - 1 >= 0 )
    {
      v10 = (int *)(4 * (a6 - 1) + a7);
      while ( 1 )
      {
        v11 = *v10;
        if ( (*v10 & 1) != 0 )
        {
          --v10;
          if ( a3 == v11 )
            goto LABEL_8;
          --v9;
        }
        else
        {
          --v10;
          if ( a3 == *(_DWORD *)(v11 + 4) )
          {
LABEL_8:
            v7 = v9;
            goto LABEL_12;
          }
          --v9;
        }
        result = -255;
        if ( v9 < 0 )
          return result;
      }
    }
    return -255;
  }
LABEL_12:
  v13 = a4 - 1;
  if ( !a2 )
  {
    result = -255;
    if ( v13 < 0 )
      return result;
    v14 = (_WORD *)(a5 + 6);
    do
    {
      if ( v7 == -1 || v7 == (((unsigned __int16)*v14 >> 10) & 7) )
        *v14 &= ~0x200u;
      --v13;
      v14 += 6;
    }
    while ( v13 >= 0 );
    return -255;
  }
  if ( v13 < 0 )
    return -255;
  do
  {
    if ( v7 == -1 || v7 == ((*(unsigned __int16 *)(v8 + 6) >> 10) & 7) )
      sub_80019090(v8, a7);
    --v13;
    v8 += 12;
  }
  while ( v13 >= 0 );
  return -255;
}

//----- (800181E0) --------------------------------------------------------
int __fastcall sub_800181E0(int a1, int a2)
{
  int v3; // $s0
  int v5; // $a0
  int v6; // $v0

  v3 = *(_DWORD *)(dword_80061048 + 1028) - 1;
  if ( v3 >= 0 )
  {
    while ( 1 )
    {
      v5 = *(_DWORD *)(8 * v3 + dword_80061048 + 1312);
      if ( (v5 & 3) != 0 )
        goto LABEL_7;
      v6 = *(_DWORD *)(v5 + 8);
      if ( v6 == 2 )
        break;
      if ( v6 != 3 )
        goto LABEL_7;
      sub_80018008(v5, a2, a1);
      --v3;
LABEL_8:
      if ( v3 < 0 )
        return -255;
    }
    sub_80018048(v5, a2, a1);
LABEL_7:
    --v3;
    goto LABEL_8;
  }
  return -255;
}
// 80061048: using guessed type int dword_80061048;

//----- (800182B4) --------------------------------------------------------
int __fastcall sub_800182B4(int a1)
{
  return sub_80018008(a1, 1, 1670788223);
}

//----- (800182DC) --------------------------------------------------------
int __fastcall sub_800182DC(int a1)
{
  return sub_80018008(a1, 0, 1670788223);
}

//----- (80018304) --------------------------------------------------------
int __fastcall sub_80018304(int a1)
{
  return sub_80018048(a1, 1, 1670788223);
}

//----- (8001832C) --------------------------------------------------------
int __fastcall sub_8001832C(int a1, unsigned __int8 *a2, int a3, unsigned __int16 *a4)
{
  unsigned __int8 *v4; // $s1
  int v6; // $a0
  int v8; // $s0
  int v9; // $a0
  int v10; // $v0
  unsigned int v11; // $t2
  int v12; // $t1
  int result; // $v0
  __int16 v14; // $v0
  int v15; // $a1
  int v16; // $v1
  int v17; // $t0
  int v18; // $a0
  int v19; // $a2
  int v20; // $v1
  int v21; // $a3
  int v22; // $a0
  int v23; // $a1
  int v24; // $v1
  int v25; // $t0
  int v26; // $a0
  int v27; // $a2
  int v28; // $v1
  __int16 v29; // $a3
  int v30; // $a0
  int v31; // $a1
  unsigned __int16 v32; // $t0
  int v33; // $v0

  v6 = *a2;
  if ( v6 == 2 )
  {
    v10 = 16 * (a3 >> 8) + 8;
  }
  else
  {
    v8 = (int)(v4 + 4);
    if ( v6 != 5 )
    {
      v9 = (int)(v4 + 4);
      goto LABEL_7;
    }
    v10 = 24 * (a3 >> 8) + 12;
  }
  v4 = &a2[v10];
  v8 = (int)&a2[v10 + 4];
  v9 = v8;
LABEL_7:
  sub_80019090(v9, (int)(a2 + 4));
  v11 = *(unsigned __int16 *)(v8 + 6);
  v12 = (v11 >> 7) & 3;
  result = 2;
  if ( a1 == 1 )
  {
    v15 = v4[4];
    v16 = *(unsigned __int8 *)(v8 + 4);
    v17 = *(unsigned __int8 *)(v8 + 1);
    if ( v15 < v16 )
      v16 = v4[4];
    v18 = *(unsigned __int8 *)(v8 + 5);
    v19 = v16;
    if ( v17 < v18 )
      v18 = *(unsigned __int8 *)(v8 + 1);
    v20 = *(unsigned __int8 *)(v8 + 4);
    v21 = v18;
    if ( v20 < v15 )
      v20 = v4[4];
    v22 = *(unsigned __int8 *)(v8 + 5);
    v23 = v20;
    if ( v22 < v17 )
      v22 = *(unsigned __int8 *)(v8 + 1);
    v24 = *(unsigned __int8 *)(v8 + 8);
    v25 = v22;
    if ( v19 < v24 )
      v24 = v19;
    v26 = *(unsigned __int8 *)(v8 + 9);
    v27 = v24;
    if ( v21 < v26 )
      LOWORD(v26) = v21;
    v28 = *(unsigned __int8 *)(v8 + 8);
    v29 = v26;
    if ( v28 < v23 )
      v28 = v23;
    v30 = *(unsigned __int8 *)(v8 + 9);
    if ( v30 < v25 )
      LOWORD(v30) = v25;
    v31 = v28 - v27 + 1;
    *a4 = (*(_WORD *)(v8 + 6) & 0xF) << 6;
    v32 = v30 - v29 + 1;
    a4[1] = ((16 * *(_WORD *)(v8 + 6)) & 0x100) + v29;
    if ( v12 == 1 )
    {
      a4[2] = v31 / 2;
      result = v27 / 2;
      *a4 += v27 / 2;
    }
    else
    {
      result = ((v11 >> 7) & 3) < 2;
      if ( ((v11 >> 7) & 3) >= 2 )
      {
        result = 2;
        if ( v12 != 2 )
        {
          a4[3] = v32;
          return result;
        }
        v33 = *a4;
        a4[2] = v31;
        result = v33 + v27;
        *a4 = result;
      }
      else
      {
        if ( v12 )
        {
          a4[3] = v32;
          return result;
        }
        *a4 += v27 / 4;
        result = v31 / 4;
        a4[2] = v31 / 4;
      }
    }
    a4[3] = v32;
  }
  else if ( a1 == 2 )
  {
    *a4 = 16 * (*(_WORD *)(v8 + 2) & 0x3F);
    a4[1] = (*(_WORD *)(v8 + 2) >> 6) & 0x1FF;
    if ( v12 )
      v14 = 256;
    else
      v14 = 16;
    a4[2] = v14;
    result = 1;
    a4[3] = 1;
  }
  return result;
}
// 80018360: variable 'v4' is possibly undefined

//----- (800186D8) --------------------------------------------------------
int __fastcall sub_800186D8(int a1, int a2, _BYTE *a3, char *a4, int a5)
{
  char *v8; // $a2
  _BYTE *v9; // $a1
  int v10; // $v0
  int v11; // $a0
  char v12; // $v0
  int v13; // $v1
  int result; // $v0
  unsigned __int8 *v15; // $a2
  char *v16; // $a1
  int v17; // $a0
  int v18; // $v1

  if ( a1 == 1 )
  {
    v8 = a4;
    if ( ((unsigned __int8)a4 & 0xF) != 0 )
    {
      v9 = a3;
      v10 = 2 * *(__int16 *)(a2 + 4) * *(__int16 *)(a2 + 6);
      v11 = v10 - 1;
      if ( v10 )
      {
        do
        {
          v12 = *v8++;
          v13 = v11--;
          *v9++ = v12;
        }
        while ( v13 );
      }
      LoadImage(a2, a3, v8);
      return DrawSync(0);
    }
    result = LoadImage(a2, a4, a4);
LABEL_12:
    if ( a5 )
      return result;
    return DrawSync(0);
  }
  if ( ((unsigned __int8)a4 & 0xF) == 0 )
  {
    result = StoreImage(a2, a4);
    goto LABEL_12;
  }
  StoreImage(a2, a3);
  DrawSync(0);
  v15 = a3;
  v16 = a4;
  result = 2 * *(__int16 *)(a2 + 4) * *(__int16 *)(a2 + 6);
  v17 = result - 1;
  if ( result )
  {
    do
    {
      result = *v15++;
      v18 = v17--;
      *v16++ = result;
    }
    while ( v18 );
  }
  return result;
}
// 8004C600: using guessed type int __fastcall DrawSync(_DWORD);
// 8004C8AC: using guessed type int __fastcall LoadImage(_DWORD, _DWORD, _DWORD);
// 8004C90C: using guessed type int __fastcall StoreImage(_DWORD, _DWORD);

//----- (80018820) --------------------------------------------------------
int __fastcall sub_80018820(int a1, unsigned __int8 *a2, int a3, char *a4, char *a5, int a6)
{
  unsigned __int16 v11[4]; // [sp+18h] [-118h] BYREF
  _BYTE v12[15]; // [sp+20h] [-110h] BYREF

  if ( a4 )
  {
    sub_8001832C(2, a2, a3, v11);
    sub_800186D8(a1, (int)v11, v12, a4, a6);
  }
  if ( a5 )
  {
    sub_8001832C(1, a2, a3, v11);
    sub_800186D8(a1, (int)v11, v12, a5, a6);
  }
  return a6;
}

//----- (800188EC) --------------------------------------------------------
int *sub_800188EC()
{
  int *result; // $v0

  dword_80065C8C = 0;
  dword_80065C88 = 0;
  dword_80065C84 = 0;
  dword_80065D54 = 288;
  SetGeomScreen(288);
  SetGeomOffset(0, 0);
  sub_80018DA8(&dword_80065CF0);
  dword_80065CF0 = 0;
  dword_80065CF8 = 128000;
  result = dword_80068E98;
  dword_80065CF4 = 0;
  dword_80065CFC = 0;
  dword_80065D00 = 0;
  dword_80065D04 = 0;
  dword_80065D38 = 0;
  dword_80068FA8 = 0;
  dword_80068FAC = 0;
  return result;
}
// 8004F704: using guessed type int __fastcall SetGeomOffset(_DWORD, _DWORD);
// 8004F724: using guessed type int __fastcall SetGeomScreen(_DWORD);
// 80065C84: using guessed type int dword_80065C84;
// 80065C88: using guessed type int dword_80065C88;
// 80065C8C: using guessed type int dword_80065C8C;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D38: using guessed type int dword_80065D38;
// 80065D54: using guessed type int dword_80065D54;
// 80068E98: using guessed type int dword_80068E98[];
// 80068FA8: using guessed type int dword_80068FA8;
// 80068FAC: using guessed type int dword_80068FAC;

//----- (80018988) --------------------------------------------------------
int __fastcall sub_80018988(int a1, int a2)
{
  int result; // $v0

  *(_WORD *)a1 = *(_WORD *)a2;
  *(_WORD *)(a1 + 2) = *(_WORD *)(a2 + 2);
  *(_WORD *)(a1 + 4) = *(_WORD *)(a2 + 4);
  *(_WORD *)(a1 + 6) = (-5 * *(__int16 *)(a2 + 6)) >> 3;
  *(_WORD *)(a1 + 8) = (-5 * *(__int16 *)(a2 + 8)) >> 3;
  *(_WORD *)(a1 + 10) = (-5 * *(__int16 *)(a2 + 10)) >> 3;
  *(_WORD *)(a1 + 12) = -*(_WORD *)(a2 + 12);
  *(_WORD *)(a1 + 14) = -*(_WORD *)(a2 + 14);
  *(_WORD *)(a1 + 16) = -*(_WORD *)(a2 + 16);
  *(_DWORD *)(a1 + 20) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(a1 + 24) = *(_DWORD *)(a2 + 24);
  result = *(_DWORD *)(a2 + 28);
  *(_DWORD *)(a1 + 28) = result;
  return result;
}

//----- (80018A54) --------------------------------------------------------
int sub_80018A54()
{
  __int16 v0; // $s0
  __int16 v1; // $s0
  __int16 v2; // $s0
  __int16 v3; // $v0
  int v4; // $v1
  int v5; // $v0
  int v6; // $v0
  int v7; // $v1
  bool v8; // dc
  BOOL v9; // $v0
  int v10; // $v0
  int v11; // $v1
  __int16 v13; // [sp+20h] [-30h] BYREF
  __int16 v14; // [sp+22h] [-2Eh]
  __int16 v15; // [sp+24h] [-2Ch]
  __int16 v16; // [sp+26h] [-2Ah]
  __int16 v17; // [sp+28h] [-28h]
  __int16 v18; // [sp+2Ah] [-26h]
  __int16 v19; // [sp+2Ch] [-24h]
  __int16 v20; // [sp+2Eh] [-22h]
  __int16 v21; // [sp+30h] [-20h]
  _DWORD v22[4]; // [sp+40h] [-10h] BYREF

  sub_80021E94();
  v0 = sub_8003C2F0(-(__int16)dword_80065D04);
  word_80065C90 = sub_8003C364(-(__int16)dword_80065D04);
  word_80065C92 = -v0;
  word_80065C94 = 0;
  word_80065C96 = v0;
  word_80065C98 = word_80065C90;
  word_80065C9A = 0;
  word_80065C9C = 0;
  word_80065C9E = 0;
  word_80065CA0 = 4096;
  v1 = sub_8003C2F0(-(__int16)dword_80065CFC);
  v13 = 4096;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = sub_8003C364(-(__int16)dword_80065CFC);
  v18 = -v1;
  v19 = 0;
  v20 = v1;
  v21 = v17;
  MulMatrix(&word_80065C90, &v13);
  v2 = sub_8003C2F0(-(__int16)dword_80065D00);
  v3 = sub_8003C364(-(__int16)dword_80065D00);
  v15 = v2;
  v13 = v3;
  v14 = 0;
  v16 = 0;
  v17 = 4096;
  v18 = 0;
  v19 = -v2;
  v20 = 0;
  v21 = v3;
  MulMatrix(&word_80065C90, &v13);
  v22[0] = dword_80065CF0 >> 8;
  v22[1] = dword_80065CF4 >> 8;
  v22[2] = dword_80065CF8 >> 8;
  TransMatrix(&word_80065C90, v22);
  sub_80018988((int)&dword_80065CB0, (int)&word_80065C90);
  dword_80065CD0 = dword_80065CB0;
  dword_80065CD4 = dword_80065CB4;
  dword_80065CD8 = dword_80065CB8;
  dword_80065CDC = dword_80065CBC;
  dword_80065CE0 = dword_80065CC0;
  dword_80065CE4 = dword_80065CC4;
  dword_80065CE8 = dword_80065CC8;
  dword_80065CEC = dword_80065CCC;
  SetGeomOffset(dword_80068FA8 + 256, dword_80068FAC + (dword_80068F00 >> 8) + 108);
  v4 = dword_80068F00 >> 8;
  if ( dword_80068F00 >> 8 )
  {
    if ( v4 <= 0 )
      v5 = ~v4;
    else
      v5 = 1 - v4;
    dword_80068F00 = v5 << 8;
    if ( dword_800690B8 )
      goto LABEL_14;
    dword_800690B8 = 1;
    v6 = v4;
    if ( v4 < 0 )
      v6 = -v4;
    v7 = 32 * v6;
    v8 = 32 * v6 >= 255;
    v9 = 32 * v6 < 200;
    if ( v8 )
    {
      v10 = 255;
    }
    else
    {
      v8 = v9;
      v10 = 200;
      if ( !v8 )
      {
        dword_800690BC = v7;
        goto LABEL_14;
      }
    }
    dword_800690BC = v10;
    goto LABEL_14;
  }
  dword_80068F00 = 0;
LABEL_14:
  dword_80068F90 = dword_80065CF4;
  dword_80068F94 = dword_80065CF8;
  dword_80068F8C = dword_80065CF0;
  dword_80068F98 = dword_80065CFC;
  dword_80068F9C = dword_80065D00;
  dword_80068FA0 = dword_80065D04;
  v11 = sub_80032DF8(dword_80065D64, 41, 0, 0, 0, 2, 0);
  if ( v11 != 8 && v11 != 2048 && v11 != 4096 )
    dword_80065DA4 = dword_80065D24 & 0xFFF;
  dword_80068F34 = dword_80065DA4;
  dword_80065DC0 = sub_8003C2F0(dword_80065DA4) >> 4;
  dword_80065DC4 = 0;
  dword_80065DC8 = sub_8003C364(dword_80065DA4) >> 4;
  return sub_80018EBC(*(int **)(dword_80065D5C + 16));
}
// 8004F404: using guessed type int __fastcall MulMatrix(_DWORD, _DWORD);
// 8004F514: using guessed type int __fastcall TransMatrix(_DWORD, _DWORD);
// 8004F704: using guessed type int __fastcall SetGeomOffset(_DWORD, _DWORD);
// 80065C90: using guessed type __int16 word_80065C90;
// 80065C92: using guessed type __int16 word_80065C92;
// 80065C94: using guessed type __int16 word_80065C94;
// 80065C96: using guessed type __int16 word_80065C96;
// 80065C98: using guessed type __int16 word_80065C98;
// 80065C9A: using guessed type __int16 word_80065C9A;
// 80065C9C: using guessed type __int16 word_80065C9C;
// 80065C9E: using guessed type __int16 word_80065C9E;
// 80065CA0: using guessed type __int16 word_80065CA0;
// 80065CB0: using guessed type int dword_80065CB0;
// 80065CB4: using guessed type int dword_80065CB4;
// 80065CB8: using guessed type int dword_80065CB8;
// 80065CBC: using guessed type int dword_80065CBC;
// 80065CC0: using guessed type int dword_80065CC0;
// 80065CC4: using guessed type int dword_80065CC4;
// 80065CC8: using guessed type int dword_80065CC8;
// 80065CCC: using guessed type int dword_80065CCC;
// 80065CD0: using guessed type int dword_80065CD0;
// 80065CD4: using guessed type int dword_80065CD4;
// 80065CD8: using guessed type int dword_80065CD8;
// 80065CDC: using guessed type int dword_80065CDC;
// 80065CE0: using guessed type int dword_80065CE0;
// 80065CE4: using guessed type int dword_80065CE4;
// 80065CE8: using guessed type int dword_80065CE8;
// 80065CEC: using guessed type int dword_80065CEC;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D24: using guessed type int dword_80065D24;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065DA4: using guessed type int dword_80065DA4;
// 80065DC0: using guessed type int dword_80065DC0;
// 80065DC4: using guessed type int dword_80065DC4;
// 80065DC8: using guessed type int dword_80065DC8;
// 80068F00: using guessed type int dword_80068F00;
// 80068F34: using guessed type int dword_80068F34;
// 80068F8C: using guessed type int dword_80068F8C;
// 80068F90: using guessed type int dword_80068F90;
// 80068F94: using guessed type int dword_80068F94;
// 80068F98: using guessed type int dword_80068F98;
// 80068F9C: using guessed type int dword_80068F9C;
// 80068FA0: using guessed type int dword_80068FA0;
// 80068FA8: using guessed type int dword_80068FA8;
// 80068FAC: using guessed type int dword_80068FAC;
// 800690B8: using guessed type int dword_800690B8;
// 800690BC: using guessed type int dword_800690BC;

//----- (80018DA8) --------------------------------------------------------
int __fastcall sub_80018DA8(_DWORD *a1)
{
  int result; // $v0

  result = 4096;
  a1[3] = 0;
  a1[4] = 0;
  a1[5] = 0;
  *a1 = 0;
  a1[1] = 0;
  a1[2] = 0;
  a1[6] = 4096;
  a1[7] = 4096;
  a1[8] = 4096;
  return result;
}

//----- (80018DD4) --------------------------------------------------------
int __fastcall sub_80018DD4(_DWORD *a1, __int16 *a2, int *a3)
{
  int result; // $v0

  *a3 = (*a2 * *a1 + a2[1] * a1[1] + a2[2] * a1[2]) >> 12;
  a3[1] = (a2[3] * *a1 + a2[4] * a1[1] + a2[5] * a1[2]) >> 12;
  result = (a2[6] * *a1 + a2[7] * a1[1] + a2[8] * a1[2]) >> 12;
  a3[2] = result;
  return result;
}

//----- (80018EBC) --------------------------------------------------------
int __fastcall sub_80018EBC(int *a1)
{
  unsigned __int8 v2; // $s3
  int result; // $v0
  int v4; // $s1
  int *v5; // $s0
  int v6; // $s2
  _DWORD *v7; // $a2
  int *v8; // $a1
  _DWORD *v9; // $v1
  int v10; // $v0
  int v11; // $v1
  int v12; // [sp+24h] [-Ch]
  int v13; // [sp+28h] [-8h]

  v2 = sub_80032DF8(dword_80065D64, 639, -1, dword_80065D78, 0, 2, 0);
  dword_80065DD4 = v2;
  result = *a1;
  v4 = 0;
  if ( *a1 > 0 )
  {
    v5 = a1;
    v6 = 1;
    do
    {
      if ( (((int)v2 >> v4) & 1) != 0 )
      {
        v7 = (_DWORD *)sub_800142B4((unsigned int *)&a1[v6], 1, 0);
        v8 = (int *)v7[4];
        v9 = v5 + 2;
        if ( v8[3] == 1 )
        {
          v5[2] = *v8 >> 2;
          v5[3] = v8[1] >> 2;
          v10 = v8[2] >> 2;
        }
        else
        {
          v12 = (v8[1] >> 2) - (dword_80065CF4 >> 10);
          v13 = (v8[2] >> 2) - (dword_80065CF8 >> 10);
          v5[2] = (*v8 >> 2) - (dword_80065CF0 >> 10);
          v9 = v5 + 2;
          v5[3] = v12;
          v10 = v13;
        }
        v9[2] = v10;
        v5[5] = (int)v8;
        v5[8] = v7[5];
        v5[6] = v7[6];
        v5[7] = v7[7];
        v5[11] = v7[8];
        v5[9] = v7[9];
        v11 = v7[10];
        v5[12] = (int)(v8 + 11);
        v5[10] = v11;
      }
      v5 += 12;
      result = ++v4 < *a1;
      v6 += 12;
    }
    while ( v4 < *a1 );
  }
  return result;
}
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D64: using guessed type int dword_80065D64;
// 80065D78: using guessed type int dword_80065D78;
// 80065DD4: using guessed type int dword_80065DD4;

//----- (80019090) --------------------------------------------------------
int __fastcall sub_80019090(int a1, int a2)
{
  unsigned int v3; // $v0
  unsigned int v4; // $s1
  unsigned int *v6; // $a0
  unsigned int v7; // $v0
  __int16 v8; // $a0
  unsigned int v9; // $a1
  __int16 v10; // $v1
  __int16 v11; // $a0

  v3 = *(unsigned __int16 *)(a1 + 6);
  v4 = v3 >> 10;
  if ( (v3 & 0x200) == 0 )
  {
    v6 = (unsigned int *)sub_8001440C((unsigned int *)(a2 + 4 * v4), 0);
    if ( v6 )
    {
      v7 = sub_800142B4(v6, 3, 0);
      v8 = v7 & 0x1C;
      v9 = v7 >> 4;
      LOBYTE(v7) = v7 & 0x80;
      v10 = *(_WORD *)(a1 + 6) & 0xFFE3 | v8;
      v11 = *(_WORD *)(a1 + 2);
      *(_WORD *)(a1 + 6) = v10 | 0x200;
      LOBYTE(v10) = *(_BYTE *)(a1 + 1) & 0x7F;
      *(_WORD *)(a1 + 2) = v11 & 0x9FCF | v9 & 0x6030;
      LOBYTE(v11) = *(_BYTE *)(a1 + 5);
      LOBYTE(v9) = *(_BYTE *)(a1 + 9);
      *(_BYTE *)(a1 + 1) = v10 | v7;
      LOBYTE(v10) = *(_BYTE *)(a1 + 11) & 0x7F | v7;
      *(_BYTE *)(a1 + 5) = v11 & 0x7F | v7;
      *(_BYTE *)(a1 + 9) = v9 & 0x7F | v7;
      *(_BYTE *)(a1 + 11) = v10;
    }
  }
  return **(_DWORD **)(4 * v4 + a2);
}

//----- (800192F8) --------------------------------------------------------
int __fastcall sub_800192F8(
        __int16 *a1,
        unsigned __int8 *a2,
        int a3,
        int a4,
        unsigned __int16 *a5,
        unsigned int a6,
        int a7,
        int a8)
{
  int v9; // $a0
  int v10; // $v1
  int result; // $v0
  int v17; // $t1
  int v18; // $v0
  int v21; // $t0
  signed int v23; // $t0
  unsigned int v24; // $a0
  int v25; // $a2
  unsigned int v28; // $v0

  v9 = *a5;
  v10 = *((_DWORD *)a5 + 4) << 16;
  _$A3 = v9 | v10;
  __asm { mtc2    $a3, $0 }
  _$T6 = 0;
  __asm { mtc2    $t6, $1 }
  _$A3 = a5[6] | v10;
  __asm
  {
    mtc2    $a3, $2
    mtc2    $t6, $3
  }
  _$A3 = v9 | (*((_DWORD *)a5 + 1) << 16);
  __asm
  {
    mtc2    $a3, $4
    mtc2    $t6, $5
  }
  __asm
  {
    cop2    0x280030
    cfc2    $a3, $31
  }
  result = -2147090432;
  if ( _$A3 >= 0 )
  {
    v17 = *(_DWORD *)(dword_80061A84 + 8);
    *(_DWORD *)(dword_80061A84 + 8) = v17 + 52;
    if ( a7 )
    {
      *(_BYTE *)(v17 + 4) = (*a2 * a1[20]) >> 7;
      *(_BYTE *)(v17 + 5) = (a2[1] * a1[21]) >> 7;
      *(_BYTE *)(v17 + 6) = (a2[2] * a1[22]) >> 7;
      *(_BYTE *)(v17 + 16) = (*a2 * a1[23]) >> 7;
      *(_BYTE *)(v17 + 17) = (a2[1] * a1[24]) >> 7;
      *(_BYTE *)(v17 + 18) = (a2[2] * a1[25]) >> 7;
      *(_BYTE *)(v17 + 28) = (*a2 * a1[26]) >> 7;
      *(_BYTE *)(v17 + 29) = (a2[1] * a1[27]) >> 7;
      *(_BYTE *)(v17 + 30) = (a2[2] * a1[28]) >> 7;
      *(_BYTE *)(v17 + 40) = (*a2 * a1[29]) >> 7;
      *(_BYTE *)(v17 + 41) = (a2[1] * a1[30]) >> 7;
      *(_BYTE *)(v17 + 42) = (a2[2] * a1[31]) >> 7;
    }
    else
    {
      v18 = *(_DWORD *)a2;
      *(_DWORD *)(v17 + 4) = *(_DWORD *)a2;
      *(_DWORD *)(v17 + 16) = v18;
      *(_DWORD *)(v17 + 28) = v18;
      *(_DWORD *)(v17 + 40) = v18;
    }
    __asm { mfc2    $t0, $17 }
    *(_BYTE *)(v17 + 7) = a2[3] | 0x3C;
    __asm
    {
      mfc2    $a3, $18
      swc2    $14, 0x20($t1)
    }
    v21 = _$T0 + _$A3;
    __asm
    {
      mfc2    $a3, $19
      swc2    $13, 0x14($t1)
    }
    v23 = a3 + 2048 - dword_80065D54 / 2 - ((unsigned int)(v21 + _$A3) >> 5);
    if ( v23 >= 2047 )
    {
      v24 = a6 + 8188;
    }
    else
    {
      v24 = a6;
      if ( v23 >= 0 )
        v24 = a6 + 4 * v23;
    }
    v25 = *(_DWORD *)v24;
    if ( a8 )
    {
      if ( (v25 & 0xFFFFFF) != 0xFFFFFF )
      {
        v24 = v24 & 0xFF000000 | v25 & 0xFFFFFF;
        v25 = *(_DWORD *)v24;
      }
    }
    *(_DWORD *)v17 = v25 | 0xC000000;
    *(_DWORD *)v24 = v17 & 0xFFFFFF | v25 & 0xFF000000;
    _$A3 = a5[6] | (*((_DWORD *)a5 + 1) << 16);
    __asm
    {
      swc2    $12, 8($t1)
      mtc2    $a3, $0
    }
    _$T6 = 0;
    __asm { mtc2    $t6, $1 }
    __asm { cop2    0x180001 }
    *(_DWORD *)(v17 + 12) = *((_DWORD *)a2 + 1);
    *(_DWORD *)(v17 + 24) = *((_DWORD *)a2 + 2);
    v28 = *((_DWORD *)a2 + 3);
    *(_WORD *)(v17 + 36) = v28;
    result = HIWORD(v28);
    *(_WORD *)(v17 + 48) = result;
    __asm { swc2    $14, 0x2C($t1) }
  }
  return result;
}
// 80061A84: using guessed type int dword_80061A84;
// 80065D54: using guessed type int dword_80065D54;

//----- (80019624) --------------------------------------------------------
int sub_80019624()
{
  return -255;
}

//----- (8001962C) --------------------------------------------------------
int __fastcall sub_8001962C(int a1, _DWORD *a2)
{
  _DWORD *v2; // $a2
  int v3; // $v1
  _DWORD *v4; // $v1
  int result; // $v0
  int v6; // $v0
  _DWORD *v7; // $v1

  v2 = *(_DWORD **)(a1 + 68);
  if ( v2 )
  {
    if ( *v2 == 2 )
      v3 = v2[1];
    else
      v3 = v2[19];
    if ( v3 == a1 )
    {
      v4 = v2 + 19;
      if ( *v2 == 2 )
        v4 = v2 + 1;
      *v4 = *(_DWORD *)(a1 + 72);
    }
    else
    {
      while ( 1 )
      {
        if ( !v3 )
          return -24;
        if ( *(_DWORD *)(v3 + 72) == a1 )
          break;
        v3 = *(_DWORD *)(v3 + 72);
      }
      *(_DWORD *)(v3 + 72) = *(_DWORD *)(a1 + 72);
    }
  }
  *(_DWORD *)(a1 + 68) = a2;
  if ( *a2 == 2 )
    v6 = a2[1];
  else
    v6 = a2[19];
  *(_DWORD *)(a1 + 72) = v6;
  result = 2;
  v7 = a2 + 19;
  if ( *a2 == 2 )
    v7 = a2 + 1;
  *v7 = a1;
  return result;
}
// 80019688: conditional instruction was optimized away because $v1.4!=0

//----- (8001970C) --------------------------------------------------------
int __fastcall sub_8001970C(_DWORD *a1, int (__fastcall *a2)(_DWORD *, int), int a3)
{
  int v6; // $s3
  int result; // $v0
  _DWORD *v8; // $a0
  _DWORD *v9; // $s0

  v6 = a2(a1, a3);
  if ( v6 == -25 )
  {
    sub_8001A844(a1, 0);
    return -25;
  }
  else
  {
    v8 = (_DWORD *)a1[19];
    result = v6;
    if ( v8 )
    {
      do
      {
        if ( !*v8 )
          break;
        v9 = (_DWORD *)v8[18];
        sub_8001970C(v8, a2, a3);
        v8 = v9;
      }
      while ( v9 );
      return v6;
    }
  }
  return result;
}

//----- (800197B0) --------------------------------------------------------
int __fastcall sub_800197B0(_DWORD *a1, int (__fastcall *a2)(_DWORD, _DWORD), int a3)
{
  int (__fastcall *v4)(_DWORD, _DWORD); // $s3
  int i; // $a0
  int v7; // $s0
  int v8; // $v0

  v4 = a2;
  for ( i = a1[19]; i; a2 = v4 )
  {
    v7 = *(_DWORD *)(i + 72);
    v8 = sub_800197B0(i, a2, a3);
    i = v7;
    if ( v8 == -25 )
    {
      sub_8001A844(a1, 0);
      i = v7;
    }
  }
  return v4(a1, a3);
}

//----- (80019844) --------------------------------------------------------
int __fastcall sub_80019844(_DWORD *a1, int (__fastcall *a2)(_DWORD *, int), int a3)
{
  int v6; // $v1
  int result; // $v0
  int v8; // $a0
  int v9; // $s0

  v6 = 0;
  if ( !a1 )
    return v6;
  if ( *a1 == 2 )
  {
LABEL_5:
    v8 = a1[1];
    goto LABEL_8;
  }
  result = a2(a1, a3);
  v6 = result;
  if ( !result )
  {
    if ( *a1 == 2 )
      goto LABEL_5;
    v8 = a1[19];
LABEL_8:
    while ( 1 )
    {
      result = v6;
      if ( !v8 )
        break;
      if ( v6 )
        return v6;
      v9 = *(_DWORD *)(v8 + 72);
      v6 = sub_80019844(v8, a2, a3);
      v8 = v9;
    }
  }
  return result;
}

//----- (80019900) --------------------------------------------------------
int __fastcall sub_80019900(_DWORD *a1, int (__fastcall *a2)(_DWORD *, int), int a3)
{
  _DWORD *v5; // $a0
  _DWORD *v6; // $s0

  if ( *a1 == 2 )
    v5 = (_DWORD *)a1[1];
  else
    v5 = (_DWORD *)a1[19];
  if ( v5 )
  {
    do
    {
      v6 = (_DWORD *)v5[18];
      sub_8001970C(v5, a2, a3);
      v5 = v6;
    }
    while ( v6 );
  }
  return -255;
}

//----- (8001997C) --------------------------------------------------------
int __fastcall sub_8001997C(_DWORD *a1, int (__fastcall *a2)(_DWORD, _DWORD), int a3)
{
  _DWORD *v6; // $a0
  _DWORD *v7; // $s0
  int v8; // $v0

  if ( *a1 == 2 )
    v6 = (_DWORD *)a1[1];
  else
    v6 = (_DWORD *)a1[19];
  while ( v6 )
  {
    v7 = (_DWORD *)v6[18];
    v8 = sub_800197B0(v6, a2, a3);
    v6 = v7;
    if ( v8 == -25 )
    {
      if ( *a1 != 2 )
        sub_8001A844(a1, 0);
      v6 = v7;
    }
  }
  return -255;
}

//----- (80019A38) --------------------------------------------------------
BOOL __fastcall sub_80019A38(void (__fastcall *a1)(char *, int, int), int a2, int a3)
{
  int v6; // $s1
  char *v7; // $s0
  BOOL result; // $v0

  v6 = 0;
  v7 = (char *)&unk_80068EA0;
  do
  {
    a1(v7, a2, a3);
    result = ++v6 < 8;
    v7 += 8;
  }
  while ( v6 < 8 );
  return result;
}

//----- (80019AAC) --------------------------------------------------------
int __fastcall sub_80019AAC(int a1, int a2)
{
  int result; // $v0

  result = a1;
  if ( *(_DWORD *)(a1 + 184) != a2 )
    return 0;
  return result;
}

//----- (80019ACC) --------------------------------------------------------
int __fastcall sub_80019ACC(_DWORD *a1, _DWORD *a2)
{
  _DWORD *v3; // $a1
  int result; // $v0
  int v6; // $v1
  _DWORD *v7; // $a0
  int v8; // $s3
  int v9; // $a0
  int v10; // $a1
  int v11; // $s0
  int v12; // $v1
  int v13; // $a0
  int v14; // $a1
  int v15; // $v0
  bool v16; // dc
  int v17; // $v1
  int v18; // [sp+10h] [-8h] BYREF

  v3 = (_DWORD *)a2[1];
  result = 0;
  if ( a1 == v3 )
    return result;
  v6 = *(int *)(*(_DWORD *)(a1[3] + 16) + 4) >> 8;
  v7 = a1 + 24;
  if ( ((1 << v6) & *a2) == 0 )
    return 0;
  v8 = sub_80031A54(v7, v3 + 24);
  if ( v8 >= a2[3] )
    return 0;
  v9 = a2[4];
  if ( v9 == 255 )
    goto LABEL_23;
  v10 = a1[3];
  v11 = *(unsigned __int16 *)(2 * (v9 >> 8) + *(_DWORD *)(v10 + 28));
  if ( v11 == 255 )
  {
    if ( v9 != 768 || (unsigned int)(a1[66] - 2) < 3 || (a1[44] & 2) != 0 )
    {
      v12 = a2[4];
      if ( v12 != 2560 || (a1[64] & 0x200) != 0 )
      {
        result = 0;
        if ( v12 != 7424 )
          return result;
        result = 0;
        if ( (a1[64] & 0x800000) != 0 )
          return result;
      }
    }
    goto LABEL_23;
  }
  if ( (v11 & 0x8000) != 0 )
    goto LABEL_20;
  v13 = a1[44];
  v14 = *(_DWORD *)(16 * v11 + *(_DWORD *)(v10 + 32));
  if ( (unsigned int)(a1[66] - 2) >= 3 )
    v15 = v13 & v14;
  else
    v15 = (v13 | 0x402) & v14;
  v16 = v15 != 0;
  result = 0;
  if ( !v16 )
  {
    if ( (v11 & 0x8000) != 0 )
    {
LABEL_20:
      if ( a2[4] == 3840 )
      {
        v17 = a2[1];
        v18 = 256;
        a1[23] = v17;
        sub_8001E42C((int)a1, v11, 1, &v18);
        if ( !*(_DWORD *)(a2[1] + 216) )
          return 0;
      }
    }
LABEL_23:
    a2[2] = a1;
    a2[3] = v8;
    return 0;
  }
  return result;
}
// 80019C90: conditional instruction was optimized away because $s0.4 is in (<FFu|100..FFFF)

//----- (80019CE4) --------------------------------------------------------
int __fastcall sub_80019CE4(int a1, int a2)
{
  int v3; // $s5
  int v4; // $s4
  int v5; // $s2
  int v6; // $gp
  int v7; // $a0
  int result; // $v0
  int v9; // $v0
  int v10; // $a0
  unsigned __int8 *v11; // $s1
  unsigned __int8 *v12; // $v0
  unsigned __int8 *v13; // $s0
  int v14; // $v0
  int v15; // $a0
  int v16; // $v0
  bool v17; // dc
  int v18; // $gp
  _DWORD *v19; // $s0
  int v20; // $s1
  int v21; // $s0
  int v22; // $s1
  _DWORD *i; // $s0
  _DWORD *v24; // $v0
  unsigned __int8 *v25; // $s3
  int v26; // $s0
  int v27; // $v0
  int v28; // $s0
  _DWORD *v29; // $s0
  int v30; // $gp
  _DWORD *v31; // $v1
  int v32; // $t1
  int v33; // $t2
  int v34; // [sp+28h] [-8h] BYREF

  if ( !a1 )
    return -14;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(a1 + 4 * (a2 + *(_DWORD *)(*(_DWORD *)(a1 + 16) + 388) + *(_DWORD *)(*(_DWORD *)(a1 + 16) + 392)) + 16);
  if ( !sub_80032DF8(v5, 169, 0, 0, 0, 2, 0)
    || sub_80032DF8(v5, 159, 0, 0, 0, 2, 0) > 0 && sub_80032DF8(v5, 159, 0, 0, 0, 2, 0) < 5 )
  {
    v4 = 1;
  }
  v7 = v5;
  if ( v4 )
  {
    result = -14;
    if ( *(_DWORD *)(v6 + 536) )
      return result;
    v7 = v5;
  }
  v9 = sub_80032DF8(v7, 169, 0, 0, 0, 2, 0);
  v10 = v5;
  if ( v9 == 34 )
  {
    if ( dword_80069218
      && (v11 = sub_80032710(v5, 75, 0, 0, 0, 2, 0, 0, 0),
          v12 = sub_80032710(dword_80069218, 75, 0, 0, 0, 2, 0, 0, 0),
          v13 = v12,
          dword_80069218)
      && sub_80032250(*(__int16 *)v11, *(__int16 *)v12) < 40
      && sub_80032250(*((__int16 *)v11 + 2), *((__int16 *)v13 + 2)) < 40
      && sub_80032250(*((__int16 *)v11 + 1), *((__int16 *)v13 + 1) + 400) < 40 )
    {
      v3 = dword_80069210;
      dword_80069218 = v5;
    }
    else
    {
      v3 = 0;
      dword_80069214 = 102400;
      dword_80069210 = 0;
      dword_80069218 = v5;
    }
    v10 = v5;
  }
  sub_80032DF8(v10, 159, 0, 0, 0, 2, 0);
  v14 = sub_80032DF8(v5, 159, 0, 0, 0, 2, 0);
  v15 = v5;
  if ( (dword_8006B688[v14] & 1) != 0
    || (sub_80032DF8(v5, 159, 0, 0, 0, 2, 0),
        v16 = sub_80032DF8(v5, 159, 0, 0, 0, 2, 0),
        v15 = v5,
        (dword_8006B688[v16] & 2) != 0) )
  {
    v17 = sub_80032DF8(v15, 169, 0, 0, 0, 2, 0) != 34;
    result = -14;
    if ( v17 )
      return result;
    dword_80069214 += 102400;
    return -14;
  }
  if ( (sub_80032DF8(v5, 834, 0, 0, 0, 2, 0) & 1) != 0 )
  {
    v19 = &dword_8006B688[sub_80032DF8(v5, 159, 0, 0, 0, 2, 0)];
    sub_80032DF8(v5, 159, 0, 0, 0, 2, 0);
    result = -14;
    *v19 |= 2u;
  }
  else
  {
    if ( v4 )
    {
      v20 = dword_80068E98[0];
      *(_DWORD *)(v18 + 536) = dword_80068E98[0];
      v21 = 6;
    }
    else
    {
      while ( 1 )
      {
        v20 = dword_80068EE0 == 2 ? dword_80068EE4 : dword_80068F2C;
        v21 = 3;
        if ( v20 )
          break;
        v22 = 7;
        for ( i = &unk_80068ED8; ; i -= 2 )
        {
          v24 = (_DWORD *)sub_80019844(i, (int (__fastcall *)(_DWORD *, int))sub_80019CC0, 0x20000);
          --v22;
          if ( v24 )
            break;
          if ( v22 < 0 )
            return -22;
        }
        sub_8001AA78(v24);
      }
    }
    sub_8001962C(v20, (_DWORD *)&unk_80068EA0 + 2 * v21);
    *(_DWORD *)(v20 + 4) = 3;
    *(_DWORD *)(v20 + 184) = sub_80032DF8(v5, 159, 0, 0, 0, 2, 0) << 8;
    memset(v20 + 32, 0, 32);
    *(_DWORD *)(v20 + 240) = v5;
    *(_DWORD *)(v20 + 248) = sub_80032EDC(v5, 75, 0, 2) << 8;
    v25 = sub_80032710(v5, 164, 0, 0, &v34, 2, 0, 0, 0);
    if ( !v25 )
      v34 = 0;
    v26 = sub_80032DF8(v5, 169, 0, 0, 0, 2, 0);
    v27 = sub_80032DF8(v5, 170, 0, 0, 0, 2, 0);
    v28 = sub_8001A5C8((_DWORD *)v20, v26, v27, v34, v25, 1);
    if ( v28 < -254 )
    {
      v29 = &dword_8006B688[sub_80032DF8(v5, 159, 0, 0, 0, 2, 0)];
      sub_80032DF8(v5, 159, 0, 0, 0, 2, 0);
      *v29 |= 1u;
      *(_DWORD *)(v20 + 24) = a1;
      sub_80020670((_DWORD *)v20, 0, (int *)(v20 + 96));
      if ( v20 == *(_DWORD *)(v30 + 536) )
      {
        v31 = (_DWORD *)(dword_80061044 + 24 * dword_80069104);
        v32 = v31[187];
        v33 = v31[188];
        *(_DWORD *)(v20 + 96) = v31[186];
        *(_DWORD *)(v20 + 100) = v32;
        *(_DWORD *)(v20 + 104) = v33;
      }
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v20 + 12) + 16) + 4) == 768 )
        sub_8001962C(v20, dword_80068EC0);
      result = v20;
      if ( *(_WORD *)(v20 + 182) == 34 )
      {
        if ( !v25 || (*((_DWORD *)v25 + 1) & 0x80000) == 0 )
        {
          if ( v3 )
          {
            *(_DWORD *)(v20 + 132) = v3;
            *(_DWORD *)(v20 + 136) = 0;
            *(_DWORD *)(v3 + 136) = v20;
          }
          else
          {
            *(_DWORD *)(v20 + 132) = 0;
            *(_DWORD *)(v20 + 136) = 0;
          }
          *(_DWORD *)(v20 + 100) = *(_DWORD *)(v20 + 100) + 102400 - dword_80069214;
        }
        dword_80069210 = v20;
        return v20;
      }
    }
    else
    {
      sub_8001962C(v20, &dword_80068EE0);
      return v28;
    }
  }
  return result;
}
// 80019DC4: variable 'v6' is possibly undefined
// 8001A094: variable 'v18' is possibly undefined
// 8001A2E4: variable 'v30' is possibly undefined
// 80019CC0: using guessed type int sub_80019CC0();
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 80060AC0: using guessed type int dword_80060AC0;
// 80061044: using guessed type int dword_80061044;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EC0: using guessed type _DWORD dword_80068EC0[4];
// 80068EE0: using guessed type int dword_80068EE0;
// 80068EE4: using guessed type int dword_80068EE4;
// 80068F2C: using guessed type int dword_80068F2C;
// 80069104: using guessed type int dword_80069104;
// 80069210: using guessed type int dword_80069210;
// 80069214: using guessed type int dword_80069214;
// 80069218: using guessed type int dword_80069218;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (8001A42C) --------------------------------------------------------
int __fastcall sub_8001A42C(_DWORD *a1, int a2, int a3, int a4, _DWORD *a5, int a6)
{
  int v6; // $gp
  _DWORD *v11; // $s2
  int v12; // $a0
  int v13; // $s1
  _DWORD *v14; // $s0
  _DWORD *v15; // $v0
  int v16; // $s0
  int result; // $v0

  if ( a2 || a3 )
  {
    while ( 1 )
    {
      v11 = (_DWORD *)(dword_80068EE0 == 2 ? dword_80068EE4 : dword_80068F2C);
      v12 = (int)v11;
      if ( v11 )
        break;
      v13 = 7;
      if ( !a6 )
        goto LABEL_14;
      v14 = &unk_80068ED8;
      while ( 1 )
      {
        v15 = (_DWORD *)sub_80019844(v14, (int (__fastcall *)(_DWORD *, int))sub_80019CC0, 0x20000);
        --v13;
        if ( v15 )
          break;
        v14 -= 2;
        if ( v13 < 0 )
          goto LABEL_14;
      }
      sub_8001AA78(v15);
    }
  }
  else
  {
    v11 = (_DWORD *)dword_80068E98[0];
    *(_DWORD *)(v6 + 536) = dword_80068E98[0];
LABEL_14:
    v12 = (int)v11;
    if ( !v11 )
      return -22;
  }
  sub_8001962C(v12, a1);
  v11[1] = 3;
  v16 = sub_8001A5C8(v11, a2, a3, a4, a5, 0);
  memset(v11 + 8, 0, 32);
  result = v16;
  if ( v16 < -254 )
    return (int)v11;
  return result;
}
// 8001A484: variable 'v6' is possibly undefined
// 80019CC0: using guessed type int sub_80019CC0();
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 80068E98: using guessed type int dword_80068E98[];
// 80068EE0: using guessed type int dword_80068EE0;
// 80068EE4: using guessed type int dword_80068EE4;
// 80068F2C: using guessed type int dword_80068F2C;

//----- (8001A5C8) --------------------------------------------------------
int __fastcall sub_8001A5C8(_DWORD *a1, int a2, int a3, int a4, _DWORD *a5, int a6)
{
  _DWORD *v10; // $a2
  _DWORD *v11; // $a1
  _DWORD *v12; // $a0
  int v13; // $t1
  int v14; // $t2
  int v15; // $t3
  int result; // $v0
  int v17; // $v0
  int v18; // $v1
  int v19; // $a0
  int v20; // $a1
  int v21; // $v0
  bool v22; // dc

  if ( a6 )
  {
    a1[72] = sub_80032DF8(a1[60], 71, 0, 0, 0, 2, 0);
  }
  else
  {
    a1[46] = 0;
    a1[60] = 0;
    a1[62] = 0;
    a1[72] = 0;
  }
  v10 = (_DWORD *)a1[17];
  a1[75] = -2;
  a1[61] = 0;
  *a1 = 1;
  a1[33] = 0;
  a1[34] = 0;
  a1[35] = 0;
  a1[36] = 0;
  a1[37] = 0;
  a1[38] = 0;
  a1[39] = 0;
  a1[40] = 0;
  a1[41] = 0;
  a1[65] = 0;
  a1[59] = 0;
  a1[54] = 0;
  a1[37] = 0;
  a1[42] = 0;
  a1[44] = 0;
  a1[43] = 0;
  a1[66] = 0;
  a1[70] = 0;
  a1[68] = 0;
  a1[74] = 0;
  a1[78] = 0xFFFF;
  if ( *v10 == 1 )
  {
    v11 = a1 + 24;
    v12 = v10 + 24;
    a1[6] = v10[6];
    do
    {
      v13 = v12[1];
      v14 = v12[2];
      v15 = v12[3];
      *v11 = *v12;
      v11[1] = v13;
      v11[2] = v14;
      v11[3] = v15;
      v12 += 4;
      v11 += 4;
    }
    while ( v12 != v10 + 32 );
    *v11 = *v12;
  }
  else
  {
    a1[6] = 0;
    a1[27] = 0;
    a1[28] = 0;
    a1[29] = 0;
    a1[30] = 4096;
    a1[31] = 4096;
    a1[32] = 4096;
  }
  if ( a2 >= 4 && (a2 < 6 || a2 == 29) )
    a1[6] = 0;
  result = -14;
  if ( a1[1] == 3 )
  {
    if ( *(_DWORD *)(dword_80061044 + 4 * a2 + 16) == 1670788223 )
      return -14;
    if ( a2 >= 128 )
      return -14;
    v17 = sub_800142B4((unsigned int *)(dword_80061044 + 4 * a2 + 16), 1, 0);
    a1[3] = v17;
    a1[4] = v17;
    if ( v17 >= -254 )
      return -14;
    a1[16] = a1;
    a1[22] = 0;
    a1[20] = 0;
    a1[23] = 0;
    v18 = dword_80068E98[0];
    v19 = a1[3];
    a1[45] = (a2 << 16) | a3;
    a1[58] = 0;
    a1[52] = 0;
    a1[21] = v18;
    v20 = *(unsigned __int16 *)(2 * (*(_DWORD *)(*(_DWORD *)(v19 + 16) + 16) + *((unsigned __int16 *)a1 + 90))
                              + *(_DWORD *)(v19 + 28));
    if ( v20 == 255 )
      return -27;
    sub_8001D2D4((int)a1, v20, a4, a5);
    v22 = v21 < -254;
    result = -255;
    if ( !v22 )
      return -14;
  }
  return result;
}
// 8001A81C: variable 'v21' is possibly undefined
// 80061044: using guessed type int dword_80061044;
// 80068E98: using guessed type int dword_80068E98[];

//----- (8001A844) --------------------------------------------------------
int __fastcall sub_8001A844(_DWORD *a1, int a2)
{
  int v2; // $gp
  int v5; // $a0
  int v6; // $s0
  _DWORD *v7; // $v0
  int v8; // $gp
  _DWORD *v9; // $a1
  int v10; // $s2
  int v11; // $gp
  int *v12; // $a1

  if ( a1 && a1 != *(_DWORD **)(v2 + 536) )
  {
    if ( a2 )
      sub_8001DB38(0, (int)a1, 6656, 0, 0);
    v5 = a1[19];
    if ( v5 )
    {
      do
      {
        v6 = *(_DWORD *)(v5 + 72);
        sub_8001A844(v5, a2);
        v5 = v6;
      }
      while ( v6 );
    }
    sub_800334D0((int)a1);
    v7 = &dword_8006B688[(int)a1[46] >> 8];
    v9 = *(_DWORD **)(v8 + 536);
    *v7 &= ~1u;
    *a1 = 0;
    if ( a1 == v9 )
    {
      if ( dword_80068EE0 == 2 )
        v10 = dword_80068EE4;
      else
        v10 = dword_80068F2C;
      sub_8001962C((int)a1, &dword_80068EE0);
      v12 = &dword_80068F2C;
      if ( dword_80068EE0 == 2 )
        v12 = &dword_80068EE4;
      *v12 = v10;
      *(_DWORD *)(dword_80068E98[0] + 68) = 0;
      *(_DWORD *)(dword_80068E98[0] + 76) = 0;
      *(_DWORD *)(dword_80068E98[0] + 72) = 0;
      *(_DWORD *)(v11 + 536) = 0;
    }
    else
    {
      sub_8001962C((int)a1, &dword_80068EE0);
    }
  }
  return -255;
}
// 8001A864: variable 'v2' is possibly undefined
// 8001A8E0: variable 'v8' is possibly undefined
// 8001A970: variable 'v11' is possibly undefined
// 80068E98: using guessed type int dword_80068E98[];
// 80068EE0: using guessed type int dword_80068EE0;
// 80068EE4: using guessed type int dword_80068EE4;
// 80068F2C: using guessed type int dword_80068F2C;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (8001A9A8) --------------------------------------------------------
int __fastcall sub_8001A9A8(_DWORD *a1, int a2)
{
  int result; // $v0

  if ( a1[46] )
    return -255;
  result = -255;
  if ( *a1 )
  {
    result = -255;
    if ( a1[6] == a2 )
    {
      result = -255;
      if ( (a1[43] & 0x1000000) == 0 )
      {
        result = -255;
        if ( (a1[64] & 0x10000) == 0 )
        {
          sub_8001DB38(0, (int)a1, 6656, 0, 0);
          if ( a1[6] == a2 )
            return sub_8001A844(a1, 0);
          result = -255;
          if ( dword_80065D60 == -1 )
            return sub_8001A844(a1, 0);
        }
      }
    }
  }
  return result;
}
// 80065D60: using guessed type int dword_80065D60;

//----- (8001AA78) --------------------------------------------------------
int __fastcall sub_8001AA78(_DWORD *a1)
{
  return sub_8001A844(a1, 1);
}

//----- (8001AA98) --------------------------------------------------------
BOOL __fastcall sub_8001AA98(int a1)
{
  return sub_80019A38((void (__fastcall *)(char *, int, int))sub_8001997C, (int)sub_8001A9A8, a1);
}

//----- (8001AAC8) --------------------------------------------------------
int sub_8001AAC8()
{
  int result; // $v0
  int v1; // $s3
  int v2; // $s1
  int v3; // $s2
  int v4; // $v0

  result = dword_80065D5C;
  if ( dword_80065D5C )
  {
    v1 = *(_DWORD *)(dword_80065D5C + 16);
    result = *(_DWORD *)(v1 + 400);
    v2 = 0;
    if ( result > 0 )
    {
      v3 = 404;
      do
      {
        if ( sub_8001440C((unsigned int *)(v1 + v3), 0) )
        {
          v4 = sub_800142B4((unsigned int *)(v1 + v3), 1, 0);
          sub_8001AA98(v4);
        }
        result = ++v2 < *(_DWORD *)(v1 + 400);
        v3 += 4;
      }
      while ( v2 < *(_DWORD *)(v1 + 400) );
    }
  }
  return result;
}
// 80065D5C: using guessed type int dword_80065D5C;

//----- (8001AB64) --------------------------------------------------------
int sub_8001AB64()
{
  unsigned int v0; // $a0
  int result; // $v0

  v0 = *(_DWORD *)(dword_80061A7C + 24);
  MEMORY[0x1F800050] = dword_80069034;
  if ( v0 >= 0x67 )
    v0 = 102;
  MEMORY[0x1F800054] = v0;
  MEMORY[0x1F800058] = &dword_80068EF8;
  sub_8003A928((int)&off_8005D120, 528482400, ((char *)dword_8005D268 - (char *)&off_8005D120) / 2);
  result = 528482400;
  MEMORY[0x1F80005C] = 528482400;
  return result;
}
// 8005D120: using guessed type _UNKNOWN *off_8005D120;
// 8005D268: using guessed type int dword_8005D268[8];
// 80061A7C: using guessed type int dword_80061A7C;
// 80068EF8: using guessed type int dword_80068EF8;
// 80069034: using guessed type int dword_80069034;

//----- (8001ABF8) --------------------------------------------------------
int __fastcall sub_8001ABF8(int a1)
{
  int v2; // $s1
  _DWORD *v3; // $s0
  _DWORD *v4; // $a0
  int result; // $v0

  v2 = 3;
  v3 = &unk_80068EB8;
  v4 = &unk_80068EB8;
  do
  {
    v3 += 2;
    ++v2;
    result = sub_80019844(v4, (int (__fastcall *)(_DWORD *, int))sub_80019AAC, a1);
    if ( result )
      break;
    v4 = v3;
  }
  while ( v2 < 5 );
  return result;
}

//----- (8001AC74) --------------------------------------------------------
BOOL sub_8001AC74()
{
  int v0; // $gp
  int v1; // $a1
  int v2; // $v1
  _DWORD *v3; // $a0
  BOOL result; // $v0

  v1 = *(_DWORD *)(v0 + 540);
  v2 = 0;
  if ( v1 > 0 )
  {
    v3 = &unk_80067A38;
    do
    {
      v3[2] = 315;
      result = ++v2 < v1;
      v3 += 3;
    }
    while ( v2 < v1 );
  }
  return result;
}
// 8001AC74: variable 'v0' is possibly undefined

//----- (8001ACAC) --------------------------------------------------------
_DWORD *__fastcall sub_8001ACAC(int a1, int a2, int a3)
{
  int v3; // $gp
  _DWORD *result; // $v0
  int v6; // $a2
  _DWORD *i; // $a1
  int v8; // $v0
  int v9; // $t0
  _DWORD *v10; // $a0
  bool v11; // dc
  int v12; // $a0

  result = (_DWORD *)(4 * a3 - 4);
  v6 = a3 - 1;
  for ( i = (_DWORD *)((char *)result + a2); v6 >= 0; --i )
  {
    v8 = *(_DWORD *)(v3 + 540);
    v9 = 0;
    if ( v8 > 0 )
    {
      v10 = &unk_80067A38;
      while ( (*v10 & 0xFFFF00) != (*i & 0xFFFF00) )
      {
        ++v9;
        v10 += 3;
        if ( v9 >= *(_DWORD *)(v3 + 540) )
          goto LABEL_7;
      }
      *v10 = *i;
      v10[2] = a1;
LABEL_7:
      v8 = *(_DWORD *)(v3 + 540);
    }
    v11 = v9 != v8;
    result = (_DWORD *)(2 * v9);
    if ( !v11 )
    {
      result = (_DWORD *)((char *)&unk_80067A38 + 12 * v9);
      v12 = *i;
      result[2] = a1;
      result[1] = 0;
      *(_DWORD *)(v3 + 540) = v9 + 1;
      *result = v12;
    }
    --v6;
  }
  return result;
}
// 8001ACD4: variable 'v3' is possibly undefined

//----- (8001AD68) --------------------------------------------------------
unsigned __int8 *__fastcall sub_8001AD68(int a1, int a2, int a3)
{
  int v6; // $a1
  int v7; // $a2
  unsigned __int8 *v8; // $v0
  int v9; // $a1
  unsigned __int8 *result; // $v0
  int v11[2]; // [sp+28h] [-8h] BYREF

  v6 = 316;
  if ( a3 == 2 )
  {
    v6 = 315;
    v7 = a2 - 256;
  }
  else
  {
    v7 = a2 + 256;
  }
  v8 = sub_80032710(a1, v6, v7, 0, v11, 1, 0, 0, 0);
  if ( v8 && v11[0] )
    sub_8001ACAC(315, (int)v8, v11[0]);
  v9 = 315;
  if ( a3 == 2 )
    v9 = 316;
  result = sub_80032710(a1, v9, a2, 0, v11, 1, 0, 0, 0);
  if ( result )
  {
    if ( v11[0] )
      return (unsigned __int8 *)sub_8001ACAC(316, (int)result, v11[0]);
  }
  return result;
}

//----- (8001AE64) --------------------------------------------------------
int __fastcall sub_8001AE64(int a1, int a2)
{
  int v2; // $gp
  int result; // $v0
  int v6; // $a0
  int v7; // $s2
  char *v8; // $s0
  int v9; // $v1
  unsigned int v10; // $s1
  unsigned int v11; // $a0
  int v12; // $v0
  int v13; // $v0
  int v14; // $v0
  _DWORD *v15; // $a0
  int v16; // $v1
  int v17; // $v0
  _DWORD *v18; // $a1
  int v19; // $a0
  _DWORD *v20; // $v0
  int v21; // $t0
  int v22; // $t1

  result = 102400;
  v6 = *(_DWORD *)(v2 + 540);
  dword_80069210 = 0;
  dword_80069218 = 0;
  v7 = v6 - 1;
  dword_80069214 = 102400;
  if ( v6 - 1 >= 0 )
  {
    v8 = (char *)&unk_80067A38 + 12 * v7;
    do
    {
      if ( a2 == -1 || (result = *((_DWORD *)v8 + 2), a2 == result) )
      {
        v9 = *((_DWORD *)v8 + 2);
        if ( v9 == 315 )
        {
          if ( (*(_DWORD *)((char *)dword_8006B688 + ((*(_DWORD *)v8 & 0xFFFF00u) >> 6)) & 1) != 0 )
          {
            if ( *((_DWORD *)v8 + 1) || (v14 = sub_8001ABF8(*(_DWORD *)v8 & 0xFFFF00), (*((_DWORD *)v8 + 1) = v14) != 0) )
            {
              v15 = (_DWORD *)*((_DWORD *)v8 + 1);
              if ( (v15[43] & 0x1000000) == 0 && (v15[64] & 0x10000) == 0 )
                sub_8001A844(v15, 1);
            }
          }
LABEL_19:
          v16 = v7 + 1;
          if ( v7 + 1 < *(_DWORD *)(v2 + 540) )
          {
            v17 = 12 * (v7 + 1);
            v18 = (_DWORD *)((char *)&unk_80067A38 + v17);
            v19 = v17 - 12;
            do
            {
              v20 = (_DWORD *)((char *)&unk_80067A38 + v19);
              v21 = v18[1];
              v22 = v18[2];
              *v20 = *v18;
              v20[1] = v21;
              v20[2] = v22;
              v18 += 3;
              ++v16;
              v19 += 12;
            }
            while ( v16 < *(_DWORD *)(v2 + 540) );
          }
          result = *(_DWORD *)(v2 + 540) - 1;
          *(_DWORD *)(v2 + 540) = result;
          goto LABEL_23;
        }
        result = 16711680;
        if ( v9 == 316 )
        {
          v10 = *(_DWORD *)v8 & 0xFFFF00;
          if ( (*(_DWORD *)((char *)dword_8006B688 + (v10 >> 6)) & 1) == 0 )
          {
            v11 = (unsigned __int8)*(_DWORD *)v8;
            if ( v11 < 0x10 )
            {
              v12 = sub_800142B4((unsigned int *)(*(_DWORD *)(a1 + 16) + 4 * v11 + 404), 1, 0);
              v13 = sub_80019CE4(v12, (unsigned __int8)v8[3]);
              *((_DWORD *)v8 + 1) = v13;
              if ( v13 >= -254 )
                goto LABEL_19;
            }
          }
          result = *((_DWORD *)v8 + 1);
          if ( !result )
          {
            result = sub_8001ABF8(v10);
            *((_DWORD *)v8 + 1) = result;
          }
          *((_DWORD *)v8 + 2) = 0;
        }
      }
LABEL_23:
      --v7;
      v8 -= 12;
    }
    while ( v7 >= 0 );
  }
  return result;
}
// 8001AE84: variable 'v2' is possibly undefined
// 80069210: using guessed type int dword_80069210;
// 80069214: using guessed type int dword_80069214;
// 80069218: using guessed type int dword_80069218;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (8001B0BC) --------------------------------------------------------
int __fastcall sub_8001B0BC(int a1, int *a2)
{
  int result; // $v0
  unsigned int *v4; // $s0
  int v6; // $v1
  unsigned int *v7; // $a0
  int v8; // $v0
  int v9; // $v0
  unsigned int *v10; // $a0
  _DWORD *v11; // $s0
  int v12; // $a1
  int v13; // [sp+14h] [-14h]
  int v14; // [sp+18h] [-10h]
  int v15; // [sp+1Ch] [-Ch]
  int v16; // [sp+20h] [-8h]
  int v17; // [sp+24h] [-4h]

  result = *(_DWORD *)(a1 + 8);
  v4 = *(unsigned int **)(a1 + 232);
  *(_DWORD *)(result + 40) = 0;
  if ( !v4 )
    return result;
  v6 = *(unsigned __int8 *)v4;
  if ( v6 == 4 )
    goto LABEL_8;
  v7 = v4 + 1;
  if ( v6 == 1 )
    v7 = v4 + 4;
  result = (unsigned int)v7 & 0xFF800003;
  if ( ((unsigned int)v7 & 0xFF800003) == 0x80000000 )
  {
    v8 = sub_800142B4(v7, 1, 0);
    *(_DWORD *)(*(_DWORD *)(a1 + 8) + 40) = v8;
    if ( v8 >= -254 )
    {
      result = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(result + 40) = 0;
      return result;
    }
LABEL_8:
    result = -14;
    if ( **(_BYTE **)(a1 + 232) == 1 )
    {
      v9 = sub_8001B524(a1, (_DWORD *)(*(_DWORD *)(a1 + 8) + 32), (_DWORD *)(*(_DWORD *)(a1 + 8) + 36));
      v10 = v4 + 3;
      *(_DWORD *)(*(_DWORD *)(a1 + 8) + 44) = v9;
      v11 = *(_DWORD **)(*(_DWORD *)(a1 + 8) + 32);
      result = sub_800142B4(v10, 1, 0);
      *(_DWORD *)(*(_DWORD *)(a1 + 8) + 40) = result;
      if ( !a1 )
      {
        v12 = *a2;
        if ( *a2 < 0 )
          *a2 = -*a2;
        v13 = v11[9] + v11[12];
        v14 = v11[10] + v11[13];
        v15 = v11[8] + v11[14];
        v16 = v11[9] + v11[15];
        v17 = v11[10] + v11[16];
        *(_DWORD *)(MEMORY[8] + 48) = (((v11[8] + v11[11]) >> 8) * *a2) >> 4;
        *(_DWORD *)(MEMORY[8] + 52) = ((v13 >> 8) * a2[1]) >> 4;
        *(_DWORD *)(MEMORY[8] + 56) = ((v14 >> 8) * a2[2]) >> 4;
        *(_DWORD *)(MEMORY[8] + 60) = ((v15 >> 8) * *a2) >> 4;
        *(_DWORD *)(MEMORY[8] + 64) = ((v16 >> 8) * a2[1]) >> 4;
        result = ((v17 >> 8) * a2[2]) >> 4;
        *(_DWORD *)(MEMORY[8] + 68) = result;
        *a2 = v12;
      }
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(a1 + 8) + 40) = -14;
    }
  }
  return result;
}
// 80060A90: using guessed type int dword_80060A90;

//----- (8001B328) --------------------------------------------------------
int __fastcall sub_8001B328(_DWORD *a1, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v7; // $s1
  int result; // $v0
  int v10; // $s0
  int v11; // $v1
  int v12; // $v1
  bool v13; // dc
  _DWORD v14[6]; // [sp+10h] [-30h] BYREF
  _DWORD v15[6]; // [sp+28h] [-18h] BYREF

  v7 = (_DWORD *)a1[22];
  if ( !v7 || v7 == a3 )
    goto LABEL_7;
  result = -28;
  if ( (a3[64] & 0x200) != 0 )
  {
    a3[22] = a1;
    return result;
  }
  v10 = sub_80031A54(a1 + 24, v7 + 24);
  if ( sub_80031A54(a1 + 24, a3 + 24) < v10 || (result = -28, (v7[64] & 0x200) != 0) )
  {
LABEL_7:
    a1[22] = a3;
    a3[22] = a1;
    if ( a2 )
    {
      result = -255;
      if ( !a4 )
        return result;
      v11 = a1[74];
      if ( v11 )
      {
        v14[0] = *a2 + v11;
        v14[1] = a2[1];
        v14[2] = a2[2] + a1[74];
        v14[3] = a2[3] - a1[74];
        v14[4] = a2[4];
        v14[5] = a2[5] - a1[74];
        if ( sub_8003191C(v14, a4) )
          a1[42] |= 0x1000u;
      }
      v12 = a3[74];
      if ( v12 )
      {
        v15[0] = *a4 + v12;
        v15[1] = a4[1];
        v15[2] = a4[2] + a3[74];
        v15[3] = a4[3] - a3[74];
        v15[4] = a4[4];
        v15[5] = a4[5] - a3[74];
        v13 = !sub_8003191C(v15, a2);
        result = -255;
        if ( v13 )
          return result;
        a3[42] |= 0x1000u;
      }
    }
    return -255;
  }
  return result;
}

//----- (8001B524) --------------------------------------------------------
int __fastcall sub_8001B524(int a1, _DWORD *a2, _DWORD *a3)
{
  int v6; // $s1
  int v7; // $a1
  unsigned int v8; // $v1
  int v9; // $v0
  unsigned int v10; // $a0
  int v11; // $v0
  int v12; // $v1
  int result; // $v0
  int v14; // $v0
  unsigned int v15; // $v1
  int v16; // $v0

  v6 = *(_DWORD *)(a1 + 232);
  v7 = sub_800142B4((unsigned int *)(v6 + 16), 1, 0);
  v8 = *(_DWORD *)(a1 + 236);
  v9 = *(_DWORD *)(v6 + 4) & 1;
  v10 = v8 >> 8;
  if ( a3 )
  {
    if ( v9 )
    {
      if ( (v8 & 0x100) != 0 )
      {
        v15 = v8 >> 9;
        if ( (int)(v10 + 1) < *(unsigned __int16 *)(v6 + 2) )
        {
          *a2 = *(_DWORD *)(v7 + 4 * v15 + 16);
          *a3 = *(_DWORD *)(v7 + 4 * (v15 + 1) + 16);
          return v10;
        }
      }
      v14 = 4 * ((int)(v10 + 1) >> 1);
    }
    else
    {
      v14 = 4 * v10;
    }
    v16 = *(_DWORD *)(v7 + v14 + 16);
    *a2 = v16;
    *a3 = v16;
    return v10;
  }
  if ( v9 )
    v11 = 4 * (v8 >> 9);
  else
    v11 = 4 * v10;
  v12 = *(_DWORD *)(v7 + v11 + 16);
  result = v10;
  *a2 = v12;
  return result;
}

//----- (8001B630) --------------------------------------------------------
int __fastcall sub_8001B630(int a1, int *a2)
{
  int result; // $v0
  unsigned int v3; // $v1
  int v4; // $v1
  int v5; // $v1
  int v6; // $v0
  int v7; // $t0
  int v8; // $v0

  result = *(_DWORD *)(a1 + 232);
  if ( !result )
    return result;
  v3 = *(unsigned __int8 *)result;
  if ( v3 != 2 )
  {
    if ( v3 < 3 )
    {
      result = -2147090432;
      if ( v3 == 1 )
      {
        v7 = *(unsigned __int8 *)(a1 + 288);
        v8 = dword_8005C1F0[v7];
        *a2 = v8;
        if ( !v8 )
        {
          v7 = dword_80067A34;
          *a2 = dword_8005C1F0[dword_80067A34];
        }
        return ((int (__fastcall *)(_DWORD, int, int, _DWORD))dword_8005C1B0[v7])(
                 *(_DWORD *)(a1 + 8),
                 a1 + 108,
                 a1 + 120,
                 *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 8) + 40) + 16));
      }
      return result;
    }
    result = 5;
    if ( v3 != 5 )
      return result;
  }
  v4 = *(_DWORD *)(a1 + 120);
  if ( v4 < 0 )
    v4 = -v4;
  a2[1] = v4 / 27279;
  v5 = *(unsigned __int8 *)(a1 + 288);
  v6 = dword_8005C1F0[v5];
  *a2 = v6;
  if ( !v6 )
  {
    v5 = dword_80067A30;
    *a2 = dword_8005C1F0[dword_80067A30];
  }
  return ((int (__fastcall *)(_DWORD, int, int, _DWORD))dword_8005C1B0[v5])(*(_DWORD *)(a1 + 8), a1 + 108, a1 + 120, 0);
}
// 8005C1B0: using guessed type int dword_8005C1B0[2];
// 8005C1F0: using guessed type int dword_8005C1F0[2];
// 80067A30: using guessed type int dword_80067A30;
// 80067A34: using guessed type int dword_80067A34;

//----- (8001B7A0) --------------------------------------------------------
unsigned int __fastcall sub_8001B7A0(int a1, _DWORD *a2)
{
  int v2; // $gp
  unsigned __int8 *v5; // $a2
  _DWORD *v6; // $a3
  int v7; // $s3
  unsigned int result; // $v0
  int v9; // $v1
  _DWORD *v10; // $s3
  int v11; // $s2
  int v12; // $s2
  int v13; // $s1
  _DWORD *v14; // $a0
  int v15; // $v1
  int v16; // $v1
  int v17; // $v1
  int v18; // $v1
  int v19; // $a0
  int v20; // $s0
  int v21; // $s6
  unsigned __int8 *v22; // $s1
  _DWORD *v23; // $a0
  int v24; // $a0
  int v25; // $v0
  int v26; // $v0
  int v27; // $t3
  int v28; // $v0
  void (*v29)(); // $v0
  int v30; // $s5
  int v31; // $s7
  int v32; // $fp
  int v33; // $s6
  int v34; // $t0
  int v35; // $a1
  int v36; // $v1
  int v37; // $v1
  int v38; // $s2
  int v39; // $s2
  int v40; // $s0
  int v41; // $s1
  unsigned int v42; // $a0
  int v43; // $s0
  int v44; // $s1
  int v45; // $a0
  int v46; // $t0
  int v47; // $a1
  int v48; // $v1
  int v49; // $s2
  int v50; // $s0
  unsigned int v51; // $a0
  int v52; // $s2
  int v53; // $s0
  int v54; // $s1
  int v55; // $a0
  _DWORD *v56; // $a0
  int v57; // $v0
  int v58; // $v1
  int v59; // $v0
  int v60; // $v1
  int v61; // $v1
  int v62; // [sp+28h] [-18h]
  int v63; // [sp+2Ch] [-14h]
  int *v64; // [sp+30h] [-10h]
  __int16 *v65; // [sp+34h] [-Ch]

  v5 = *(unsigned __int8 **)(a1 + 232);
  v6 = *(_DWORD **)(dword_80061A84 + 8344);
  v7 = *(_DWORD *)(a1 + 236) >> 8;
  if ( (unsigned int)v6 - *(_DWORD *)(dword_80061A84 + 8340) + 224 < 0x1A41 || (result = 0, !a1) )
  {
    v9 = *v5;
    if ( v9 == 2 )
    {
      v12 = a2[1];
      v13 = *(_DWORD *)(a1 + 232);
      sub_80019090((int)&v5[16 * v7 + 12], (int)(v5 + 4));
      v14 = *(_DWORD **)(dword_80061A84 + 8344);
      *(_DWORD *)(dword_80061A84 + 8344) = v14 + 11;
      *v14 = *(_DWORD *)(dword_80061A84 + 8336);
      *(_DWORD *)(dword_80061A84 + 8336) = v14;
      v15 = (unsigned __int8)*(_DWORD *)(a1 + 288);
      if ( BYTE1(*(_DWORD *)(a1 + 288)) )
      {
        v16 = (unsigned __int8)BYTE1(*(_DWORD *)(a1 + 288));
      }
      else if ( v15 == 6 || v15 == 13 )
      {
        v16 = 4;
      }
      else
      {
        v16 = dword_80067A2C;
      }
      v14[5] = *(_DWORD *)(a1 + 8);
      v17 = v16;
      v14[1] = *a2;
      v14[2] = off_8005C2F8[v17];
      v18 = dword_8005C270[v17];
      v14[4] = a1;
      v14[9] = v13 + 16 * v7 + 8;
      v14[3] = v18;
      result = *(__int16 *)(a1 + 38);
      if ( *(_WORD *)(a1 + 38) )
      {
        v14[8] = (*(__int16 *)(a1 + 58) << 20) | (*(__int16 *)(a1 + 60) << 12) | (16 * *(__int16 *)(a1 + 62));
        result = *(__int16 *)(a1 + 38);
        v14[7] = result;
      }
      else
      {
        v14[7] = 0;
      }
      v14[10] = v12;
    }
    else
    {
      result = 1;
      if ( *v5 >= 3u )
      {
        result = 5;
        if ( v9 == 4 )
        {
          v24 = *(_DWORD *)(dword_80061A84 + 8348);
          *(_DWORD *)(dword_80061A84 + 8348) = v6;
          *(_DWORD *)(dword_80061A84 + 8344) += 72;
          **(_DWORD **)(dword_80061A84 + 8348) = v24;
          result = *(_DWORD *)(dword_80061A84 + 8348);
          *(_DWORD *)(result + 4) = a1;
        }
        else
        {
          v11 = *(_DWORD *)(a1 + 232);
          if ( v9 == 5 )
          {
            v19 = *((_DWORD *)v5 + 2);
            v20 = 0;
            v21 = a2[1];
            v22 = &v5[24 * v7 * v19 + 12];
            if ( v19 > 0 )
            {
              do
              {
                sub_80019090((int)(v22 + 4), v11 + 4);
                ++v20;
                v22 += 24;
              }
              while ( v20 < *(_DWORD *)(v11 + 8) );
            }
            v23 = *(_DWORD **)(dword_80061A84 + 8344);
            *(_DWORD *)(dword_80061A84 + 8344) = v23 + 12;
            *v23 = *(_DWORD *)(dword_80061A84 + 8336);
            *(_DWORD *)(dword_80061A84 + 8336) = v23;
            v23[5] = *(_DWORD *)(a1 + 8);
            v23[1] = *a2;
            v23[2] = nullsub_3;
            v23[4] = a1;
            v23[9] = v11;
            v23[3] = &loc_8003E3AC;
            result = *(__int16 *)(a1 + 38);
            if ( *(_WORD *)(a1 + 38) )
            {
              v23[8] = (*(__int16 *)(a1 + 58) << 20) | (*(__int16 *)(a1 + 60) << 12) | (16 * *(__int16 *)(a1 + 62));
              result = *(__int16 *)(a1 + 38);
              v23[7] = result;
            }
            else
            {
              v23[7] = 0;
            }
            v23[10] = v21;
            v23[11] = v7;
          }
        }
      }
      else
      {
        v10 = *(_DWORD **)(dword_80061A84 + 8344);
        if ( v9 == 1 )
        {
          v25 = *(_DWORD *)(a1 + 8);
          v62 = *(_DWORD *)(v25 + 32);
          v63 = *(_DWORD *)(v25 + 36);
          *(_DWORD *)(dword_80061A84 + 8344) = v6 + 28;
          *v6 = *(_DWORD *)(dword_80061A84 + 8336);
          *(_DWORD *)(dword_80061A84 + 8336) = v6;
          v26 = *(_DWORD *)(a1 + 8);
          v27 = *(unsigned __int8 *)(a1 + 289);
          v64 = *(int **)(v26 + 40);
          v6[5] = v26;
          v6[1] = *a2;
          v28 = *(_DWORD *)(a1 + 160);
          v6[4] = a1;
          v6[20] = v28;
          v65 = (__int16 *)(a1 + 32);
          if ( (*(_DWORD *)(a1 + 172) & 0x100000) != 0 )
            v6[6] = *(_DWORD *)(a1 + 228);
          else
            v6[6] = dword_80069034;
          if ( (*(_DWORD *)(a1 + 172) & 0x40000) != 0 )
            v29 = sub_8003E034;
          else
            v29 = (void (*)())&loc_8003DEF4;
          v6[9] = v29;
          if ( !v27 )
            v27 = dword_80067A1C;
          v30 = *(unsigned __int8 *)(a1 + 290);
          v6[10] = off_8005C230[v30];
          v6[11] = *(&off_8005C250 + v30);
          if ( v30 >= 3 )
          {
            if ( v30 < 5 )
            {
              v31 = *(__int16 *)(a1 + 46);
              v32 = *(__int16 *)(a1 + 48);
              v33 = *(__int16 *)(a1 + 50);
              v27 = 6;
              if ( v30 == 4 )
              {
                v34 = v31 * *(_DWORD *)(a1 + 156);
                v35 = v31 * *(_DWORD *)(a1 + 132);
                v36 = v32 * *(_DWORD *)(a1 + 136);
                v31 = (v31 * *(_DWORD *)(a1 + 144) + v32 * *(_DWORD *)(a1 + 148) + v33 * *(_DWORD *)(a1 + 152)) >> 18;
                v32 = (v34 + v32 * *(_DWORD *)(a1 + 160) + v33 * *(_DWORD *)(a1 + 164)) >> 18;
                v33 = (v35 + v36 + v33 * *(_DWORD *)(a1 + 140)) >> 18;
              }
              v10[20] = (v32 << 16) | (unsigned __int16)v31;
              v10[21] = v33;
              v37 = *(unsigned __int8 *)(a1 + 288);
              if ( v37 == 10 || (v38 = -2896, v37 == 15) )
              {
                v39 = (dword_80065CF0 - *(_DWORD *)(a1 + 96)) >> 8;
                v40 = (dword_80065CF4 - *(_DWORD *)(a1 + 100)) >> 8;
                v41 = (dword_80065CF8 - *(_DWORD *)(a1 + 104)) >> 8;
                v42 = v39 * v39 + v40 * v40 + v41 * v41;
                if ( v42 )
                {
                  v45 = sub_8003D9DC(v42);
                  if ( !v45 )
                    _break(7u, 0);
                  if ( v45 == -1 && v39 << 12 == 0x80000000 )
                    _break(6u, 0);
                  v38 = (v39 << 12) / v45;
                  if ( v45 == -1 && v40 << 12 == 0x80000000 )
                    _break(6u, 0);
                  v43 = (v40 << 12) / v45;
                  v27 = 6;
                  if ( v45 == -1 && v41 << 12 == 0x80000000 )
                    _break(6u, 0);
                  v44 = (v41 << 12) / v45;
                }
                else
                {
                  v38 = 0;
                  v43 = 0;
                  v44 = 0;
                }
              }
              else
              {
                v43 = 0;
                v44 = 2896;
              }
              if ( v30 == 4 )
              {
                v46 = v38 * *(_DWORD *)(a1 + 156);
                v47 = v38 * *(_DWORD *)(a1 + 132);
                v48 = v43 * *(_DWORD *)(a1 + 136);
                v38 = (v38 * *(_DWORD *)(a1 + 144) + v43 * *(_DWORD *)(a1 + 148) + v44 * *(_DWORD *)(a1 + 152)) >> 18;
                v43 = (v46 + v43 * *(_DWORD *)(a1 + 160) + v44 * *(_DWORD *)(a1 + 164)) >> 18;
                v44 = (v47 + v48 + v44 * *(_DWORD *)(a1 + 140)) >> 18;
              }
              v49 = v38 + v31;
              v50 = v43 + v32 + v33;
              v51 = v49 * v49 + v50 * v50 + v44 * v44;
              if ( v51 )
              {
                v55 = sub_8003D9DC(v51);
                if ( !v55 )
                  _break(7u, 0);
                if ( v55 == -1 && v49 << 12 == 0x80000000 )
                  _break(6u, 0);
                v52 = (v49 << 12) / v55;
                if ( v55 == -1 && v50 << 12 == 0x80000000 )
                  _break(6u, 0);
                v53 = (v50 << 12) / v55;
                if ( v55 == -1 && v44 << 12 == 0x80000000 )
                  _break(6u, 0);
                v54 = (v44 << 12) / v55;
                v27 = 6;
              }
              else
              {
                LOWORD(v52) = 0;
                v53 = 0;
                v54 = 0;
              }
              v10[22] = (v53 << 16) | (unsigned __int16)v52;
              v10[23] = v54;
            }
            else if ( v30 == 6 )
            {
              v6[19] = *(_DWORD *)(a1 + 316);
            }
          }
          v10[18] = *(_DWORD *)(a1 + 280);
          switch ( v27 )
          {
            case 10:
            case 18:
            case 22:
              goto LABEL_83;
            case 14:
            case 30:
              if ( (dword_80067A28 & 0x1000) != 0
                && (a1 && *(_DWORD *)(a1 + 180) != 196638 || (dword_80067A28 & 0x2000000) != 0)
                && (a1 || MEMORY[0x64] - (dword_800676E4 >> 4) <= 409600) )
              {
LABEL_83:
                if ( *(int *)(a1 + 172) >= 0 )
                {
                  v10[21] = dword_800676E4;
                  v10[18] = *(_DWORD *)(a1 + 280) + dword_80067A20;
                  v10[19] = *(_DWORD *)(a1 + 280) + dword_80067A24;
                  v10[22] = dword_800676E8;
                  v57 = dword_800676EC;
                  v10[25] = 0;
                  v10[26] = 0;
                  v10[23] = v57;
                }
                else
                {
                  v56 = *(_DWORD **)(a1 + 308);
                  v10[21] = 16 * *v56;
                  v10[22] = v56[1];
                  v10[23] = v56[2];
                  v10[18] = *(_DWORD *)(a1 + 280) + v56[5];
                  v10[19] = *(_DWORD *)(a1 + 280) + v56[6];
                  v10[25] = v56[3];
                  v10[26] = v56[4];
                }
              }
              else
              {
                v27 = 6;
              }
              break;
            case 26:
              v10[26] = &unk_8006AEB8;
              v10[25] = 0;
              break;
            default:
              break;
          }
          if ( v62 == v63 )
          {
            v10[2] = off_8005C2F8[v27];
            v58 = dword_8005C270[v27];
            v59 = 0x40000000;
            v10[12] = v63;
          }
          else
          {
            v60 = v27 + 1;
            v10[2] = off_8005C2F8[v60];
            v58 = dword_8005C270[v60];
            v10[12] = v62;
            v59 = 1610612736;
            v10[13] = v63;
          }
          v10[7] = v59;
          v10[3] = v58;
          if ( *(_WORD *)(a1 + 182) == 56 )
            v10[7] |= 0x10000000u;
          if ( (*(_DWORD *)(a1 + 172) & 0x10000000) != 0 )
          {
            if ( dword_800690C4 && a1 == *(_DWORD *)(dword_800690C4 + 68) )
              *(_DWORD *)(v2 + 544) = v10;
            if ( dword_800691E0 && a1 == *(_DWORD *)(dword_800691E0 + 68) )
              *(_DWORD *)(v2 + 548) = v10;
          }
          v10[14] = v64[5];
          v10[15] = v64[6];
          v10[16] = v64[7];
          v10[17] = v64[8];
          v10[27] = v64[4];
          if ( v64[3] >= 6 )
            v10[24] = v64[9];
          else
            v10[24] = 0;
          if ( v65[3] )
          {
            v10[8] = (v65[13] << 20) | (v65[14] << 12) | (16 * v65[15]);
            v10[7] |= v65[3];
          }
          v61 = v10[7];
          result = 0x80000000;
          if ( *(int *)(a1 + 120) < 0 )
            v61 |= 0x80000000;
          v10[7] = v61;
        }
      }
    }
  }
  return result;
}
// 8001BE00: conditional instruction was optimized away because $a0.4!=0
// 8001BE34: conditional instruction was optimized away because $a0.4!=0
// 8001BFC0: conditional instruction was optimized away because $a0.4!=0
// 8001BFF4: conditional instruction was optimized away because $a0.4!=0
// 8001C2C0: variable 'v2' is possibly undefined
// 8005C230: using guessed type int (*off_8005C230[8])(int, int, int, int, int, int, int, int, int, int);
// 8005C250: using guessed type _UNKNOWN *off_8005C250;
// 8005C270: using guessed type int dword_8005C270[2];
// 8005C2F8: using guessed type int (*off_8005C2F8[3])();
// 80060A90: using guessed type int dword_80060A90;
// 80061A84: using guessed type int dword_80061A84;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 800676E4: using guessed type int dword_800676E4;
// 800676E8: using guessed type int dword_800676E8;
// 800676EC: using guessed type int dword_800676EC;
// 80067A1C: using guessed type int dword_80067A1C;
// 80067A20: using guessed type int dword_80067A20;
// 80067A24: using guessed type int dword_80067A24;
// 80067A28: using guessed type int dword_80067A28;
// 80067A2C: using guessed type int dword_80067A2C;
// 80069034: using guessed type int dword_80069034;
// 800690C4: using guessed type int dword_800690C4;
// 800691E0: using guessed type int dword_800691E0;

//----- (8001C3F8) --------------------------------------------------------
int __fastcall sub_8001C3F8(int a1, _BYTE *a2, int a3, int a4, int a5, char a6, unsigned int a7)
{
  _BYTE *i; // $s0
  int v9; // $fp
  int v10; // $s2
  int v11; // $v0
  unsigned __int8 *v12; // $s0
  int v13; // $v1
  int v14; // $a1
  int v15; // $v0
  int v16; // $v1
  int v17; // $v1
  char v18; // $v1
  unsigned __int8 *v19; // $s0
  int v20; // $a1
  int v21; // $a0
  _BYTE *v22; // $v0
  int v23; // $a0
  char j; // $v1
  _BYTE *v25; // $v0
  int v26; // $v0
  int v27; // $a0
  int v28; // $v0
  int v29; // $s1
  _DWORD v31[4]; // [sp+20h] [-50h] BYREF
  int v32; // [sp+30h] [-40h]
  _BYTE v33[8]; // [sp+50h] [-20h] BYREF
  _BYTE v34[8]; // [sp+58h] [-18h] BYREF
  int v35; // [sp+60h] [-10h]
  BOOL v36; // [sp+64h] [-Ch]
  int v37; // [sp+68h] [-8h]

  i = a2;
  v9 = 400;
  v36 = 1;
  v35 = 0;
  v37 = 400;
  v31[0] = a3;
  v10 = 0;
  if ( *a2 )
  {
    while ( 1 )
    {
LABEL_2:
      v11 = (unsigned __int8)*i;
      while ( v11 != 126 )
      {
LABEL_41:
        v27 = (unsigned __int8)*i;
        if ( v27 == 10 )
        {
          v10 -= *(__int16 *)(a4 + 26) << a6;
          v31[0] = a3;
        }
        else
        {
          v28 = v9 << a6;
          if ( v27 == 38 )
            return v35;
          v29 = a4 + 20 * v27 - 632;
          v31[3] = v31[0] + v28;
          v32 = v10 + (*(__int16 *)(v29 + 18) << a6);
          v31[1] = v32 - (v37 << a6);
          if ( v35 < v31[0] + v28 )
            v35 = v31[0] + v28;
          if ( a7 && *(_DWORD *)v29 )
          {
            sub_80019090(v29 + 4, a4 + 4);
            sub_800192F8(
              (__int16 *)a1,
              (unsigned __int8 *)v29,
              *(_DWORD *)(a1 + 280),
              a5,
              (unsigned __int16 *)v31,
              a7,
              v36,
              0);
          }
          v31[0] += (*(__int16 *)(v29 + 16) << a6) * v9 / 400;
        }
        v11 = (unsigned __int8)*++i;
        if ( !*i )
          return v35;
      }
      while ( 1 )
      {
        while ( 1 )
        {
          while ( 1 )
          {
            v12 = i + 1;
            v13 = *v12;
            i = v12 + 1;
            if ( v13 != 112 )
              break;
            v17 = *(_DWORD *)(*(_DWORD *)(a1 + 188) - 4 * ((unsigned __int8)*i++ - 46));
            if ( v17 == 1 )
              ++i;
            if ( !*i )
              return v35;
            if ( *i != 126 )
              goto LABEL_41;
          }
          if ( v13 < 113 )
            break;
          if ( v13 == 115 )
          {
            v18 = *i;
            v19 = i + 1;
            v20 = 0;
            v21 = *v19;
            for ( i = v19 + 1; v21 != 126; ++i )
            {
              v22 = &v33[v20++];
              *v22 = v21;
              v21 = (unsigned __int8)*i;
            }
            v33[v20] = 0;
            if ( v18 == 120 )
              v9 = atoi(v33);
            else
              v37 = atoi(v33);
          }
          else
          {
            if ( v13 < 115 )
              goto LABEL_41;
            if ( v13 >= 122 )
              goto LABEL_41;
            v14 = 0;
            if ( v13 < 120 )
              goto LABEL_41;
            v23 = (unsigned __int8)*i;
            for ( j = *(i++ - 1); v23 != 126; ++i )
            {
              v25 = &v34[v14++];
              *v25 = v23;
              v23 = (unsigned __int8)*i;
            }
            v34[v14] = 0;
            if ( j == 120 )
            {
              v26 = atoi(v34);
              v31[0] += v26;
            }
            else
            {
              v10 += atoi(v34);
            }
          }
          if ( *i != 126 )
            goto LABEL_41;
        }
        if ( v13 == 108 )
        {
          if ( !*i )
            return v35;
          v10 -= *(__int16 *)(a4 + 26) << a6;
          goto LABEL_2;
        }
        if ( v13 >= 109 )
          break;
        if ( v13 == 37 )
          goto LABEL_39;
        if ( v13 == 99 )
        {
          v15 = (unsigned __int8)*i++;
          v16 = (unsigned __int8)*i;
          v36 = v15 == 0x31;
          if ( v16 == 126 )
            continue;
        }
        goto LABEL_41;
      }
      if ( v13 != 110 )
        goto LABEL_41;
LABEL_39:
      if ( !*i )
        return v35;
      v10 -= *(__int16 *)(a4 + 26) << a6;
      v31[0] = a3;
    }
  }
  return v35;
}
// 80048070: using guessed type int __fastcall atoi(_DWORD);

//----- (8001C824) --------------------------------------------------------
int __fastcall sub_8001C824(int a1, int a2, int a3, unsigned int a4, int a5)
{
  int *v9; // $a0
  int v10; // $v1
  int v11; // $a2
  int v12; // $s3
  int result; // $v0
  int v14; // $a1
  unsigned __int8 *v15; // $s0
  int v16; // $v1
  BOOL v17; // $v0
  int v18; // $v0
  int v19; // $a0
  bool v20; // dc
  int v21; // $v0
  int v22; // $s1
  int v23; // $s4
  unsigned __int8 *v24; // $v1
  unsigned __int8 *v25; // $v1
  unsigned __int8 *v27; // $v1
  int v28; // $v0
  int v29; // $v0
  int v30; // [sp+1Ch] [-CCh]
  char v31; // [sp+20h] [-C8h] BYREF
  _BYTE v32[3]; // [sp+21h] [-C7h] BYREF

  v9 = (int *)(a1 + 96);
  v10 = *(_DWORD *)(a1 + 120);
  v11 = *(unsigned __int8 *)(a1 + 288);
  if ( v10 < 0 )
    v10 = -v10;
  v30 = ((unsigned __int8)(*(_DWORD *)(a1 + 172) >> 18) ^ 1) & 1;
  v12 = v10 / 27279;
  result = sub_8003C3D0(
             v9,
             &dword_80065CF0,
             (unsigned int)(v11 - 6) < 2,
             v10 / 27279,
             &dword_80065CB0,
             dword_80065D54,
             15360);
  v14 = a2;
  if ( result )
  {
    v15 = (unsigned __int8 *)(a2 + 12);
    v16 = 0;
    if ( a3 > 0 )
    {
      do
      {
        v17 = v16 < a3;
        if ( !*v15 )
          v17 = ++v16 < a3;
        ++v15;
      }
      while ( v17 );
    }
    v18 = *(_DWORD *)(a1 + 264) >> 8;
    v19 = *(_DWORD *)(*(_DWORD *)(a1 + 12) + 36);
    v20 = v18 != 0;
    v21 = 4 * v18;
    if ( !v20 )
      v21 = 4 * *(_DWORD *)(v14 + 8);
    v22 = v19 + v21;
    v23 = sub_800142B4((unsigned int *)(v19 + v21 + 4), 1, 0);
    sub_80048120(
      (int)&v31,
      v15,
      *(_DWORD *)(*(_DWORD *)(a1 + 188) - 8),
      *(_DWORD *)(*(_DWORD *)(a1 + 188) - 12),
      *(_DWORD *)(*(_DWORD *)(a1 + 188) - 16),
      *(_DWORD *)(*(_DWORD *)(a1 + 188) - 20));
    v24 = (unsigned __int8 *)&v31;
    if ( v31 )
    {
      v25 = v32;
      while ( *v25++ )
        ;
      v24 = v25 - 1;
    }
    v20 = v24 == (unsigned __int8 *)&v31;
    v27 = v24 - 1;
    if ( !v20 )
    {
      for ( ; v27 != (unsigned __int8 *)&v31; --v27 )
      {
        if ( *v27 != 32 )
          break;
      }
      v27[1] = 0;
    }
    v28 = 0;
    if ( a5 <= 0 )
    {
      v29 = sub_8001C3F8(a1, &v31, 0, v22, v23, v12, 0);
      if ( a5 )
        v28 = -v29;
      else
        v28 = -v29 / 2;
    }
    return sub_8001C3F8(a1, &v31, v28, v22, v23, v12, a4);
  }
  return result;
}
// 80065CB0: using guessed type int dword_80065CB0;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065D54: using guessed type int dword_80065D54;

//----- (8001CA60) --------------------------------------------------------
void __fastcall sub_8001CA60(int a1)
{
  *(_WORD *)(a1 + 36) = 0;
}

//----- (8001CA68) --------------------------------------------------------
int __fastcall sub_8001CA68(int *a1)
{
  int *v2; // $s0
  int v3; // $v0
  int v4; // $v1
  int v5; // $v0
  int v6; // $v1
  _BYTE *v7; // $a0
  __int16 v8; // $t1
  __int16 v9; // $t1
  __int16 v10; // $t1
  int v12; // [sp+18h] [-8h] BYREF

  v2 = a1 + 8;
  switch ( a1[66] )
  {
    case 1:
      break;
    case 2:
      goto LABEL_21;
    case 3:
      v4 = a1[66];
      if ( v4 != 3 )
        goto LABEL_13;
      if ( (unsigned int)(dword_80068EEC - a1[67]) < 0x1C3 )
      {
        v4 = a1[66];
LABEL_13:
        if ( v4 == 4 )
        {
          v5 = a1[22];
          if ( v5 )
          {
            if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v5 + 12) + 16) + 4) == 768 )
            {
              v12 = 0;
              sub_8001DB38((int)a1, a1[22], 2560, 1, &v12);
            }
          }
        }
      }
      else
      {
        a1[66] = 0;
      }
LABEL_17:
      if ( a1[66] == 5 && ((unsigned int)(dword_80068EEC - a1[67]) >= 0x259 || (a1[64] & 0x2000000) != 0) )
        a1[66] = 0;
LABEL_21:
      v6 = dword_80069034;
      *((_WORD *)v2 + 10) = 60;
      *((_WORD *)v2 + 11) = 60;
      *((_WORD *)v2 + 12) = 60;
      *((_WORD *)v2 + 2) = (unsigned __int16)(v6 % 4) << 10;
      break;
    case 4:
      if ( (unsigned int)(dword_80068EEC - a1[67]) >= 0x3D )
        a1[66] = 0;
      break;
    case 5:
      goto LABEL_17;
    case 6:
      if ( (unsigned int)(dword_80068EEC - a1[67]) < 0x10 )
        break;
      goto LABEL_6;
    case 7:
      if ( (unsigned int)(dword_80068EEC - a1[67]) >= 0x10 || (a1[42] & 1) != 0 )
      {
LABEL_6:
        v3 = a1[43];
        a1[66] = 0;
        a1[43] = v3 | 0x80;
      }
      break;
    default:
      sub_8001CA60((int)a1);
      break;
  }
  v7 = (_BYTE *)a1[58];
  if ( v7 && *v7 != 4 )
  {
    *((_WORD *)v2 + 3) = *((_WORD *)v2 + 1);
    v8 = *((_WORD *)v2 + 9);
    *(int *)((char *)v2 + 26) = *(int *)((char *)v2 + 14);
    *((_WORD *)v2 + 15) = v8;
    if ( *(_WORD *)v2 )
    {
      *((_WORD *)v2 + 3) = *(_WORD *)v2;
      v9 = *((_WORD *)v2 + 6);
      *(int *)((char *)v2 + 26) = v2[2];
      *((_WORD *)v2 + 15) = v9;
    }
    if ( *((_WORD *)v2 + 2) )
    {
      *((_WORD *)v2 + 3) = *((_WORD *)v2 + 2);
      v10 = *((_WORD *)v2 + 12);
      *(int *)((char *)v2 + 26) = v2[5];
      *((_WORD *)v2 + 15) = v10;
    }
  }
  return -255;
}
// 80068EEC: using guessed type int dword_80068EEC;
// 80069034: using guessed type int dword_80069034;

//----- (8001CD28) --------------------------------------------------------
int __fastcall sub_8001CD28(int a1, int a2, int a3)
{
  char v3; // $s0
  int result; // $v0
  int v5; // $gp

  v3 = a3;
  sub_8001832C(1, *(unsigned __int8 **)(a1 + 232), 0, &word_8006AEC8[4 * a3]);
  result = 1 << v3;
  *(_DWORD *)(v5 + 168) |= 1 << v3;
  return result;
}
// 8001CD64: variable 'v5' is possibly undefined
// 8006AEC8: using guessed type unsigned __int16 word_8006AEC8[8];

//----- (8001CD80) --------------------------------------------------------
int __fastcall sub_8001CD80(int a1, _DWORD *a2, _DWORD *a3, int a4)
{
  int v4; // $gp
  int v6; // $a1
  int v9; // $a0
  int v10; // $s2
  int v11; // $s0
  int v12; // $s7
  int result; // $v0
  unsigned __int16 *v14; // $s3
  int v15; // $v1
  __int16 v16; // $s0
  __int16 v17; // $s0
  __int16 v18; // $v0
  int v19; // $v1
  int v20; // $s4
  _BYTE v21[96]; // [sp+18h] [-A8h] BYREF
  _WORD v22[4]; // [sp+78h] [-48h] BYREF
  __int16 v23; // [sp+80h] [-40h]
  __int16 v24; // [sp+82h] [-3Eh]
  __int16 v25; // [sp+84h] [-3Ch]
  __int16 v26; // [sp+86h] [-3Ah]
  __int16 v27; // [sp+88h] [-38h]
  int v28; // [sp+8Ch] [-34h]
  int v29; // [sp+90h] [-30h]
  int v30; // [sp+94h] [-2Ch]
  _WORD v31[16]; // [sp+98h] [-28h] BYREF
  int v32; // [sp+B8h] [-8h] BYREF
  int v33; // [sp+BCh] [-4h] BYREF

  v6 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v6 + 16;
  v9 = *(_DWORD *)(dword_80061A84 + 8);
  *(_DWORD *)(dword_80061A84 + 8) = v9 + 64;
  v10 = v6;
  v11 = *(_DWORD *)(dword_80061A84 + 8);
  v12 = v9;
  *(_DWORD *)(dword_80061A84 + 8) = v11 + 64;
  result = (int)word_8006AEC8;
  v14 = &word_8006AEC8[4 * a4];
  if ( a3 )
  {
    if ( a1 )
    {
      result = *(_DWORD *)(a1 + 232);
      if ( result )
      {
        if ( a2 )
        {
          result = a2[58];
          if ( result )
          {
            v15 = *(unsigned __int8 *)result;
            result = 1;
            if ( v15 == 1 )
            {
              result = *(_DWORD *)(a1 + 172) & 0x100;
              if ( !result )
              {
                if ( ((*(int *)(v4 + 168) >> a4) & 1) == 0 )
                  sub_8001CD28(a1, (int)a2, a4);
                sub_8004D464(v11, dword_80061A84 + 8244);
                sub_8004F244(dword_80061A84 + 32, v11);
                v16 = sub_8003C2F0(1024);
                v22[0] = 4096;
                v22[1] = 0;
                v22[2] = 0;
                v22[3] = 0;
                v23 = sub_8003C364(1024);
                v24 = -v16;
                v25 = 0;
                v26 = v16;
                v27 = v23;
                v17 = sub_8003C2F0(-*(_WORD *)(a1 + 112));
                v18 = sub_8003C364(-*(_WORD *)(a1 + 112));
                v31[2] = v17;
                v31[0] = v18;
                v31[1] = 0;
                v31[3] = 0;
                v31[4] = 4096;
                v31[5] = 0;
                v31[6] = -v17;
                v31[7] = 0;
                v31[8] = v18;
                MulMatrix(v22, v31);
                v28 = *(int *)(a1 + 96) >> 8;
                if ( (a2[64] & 0x10) != 0 )
                  v19 = -2457600;
                else
                  v19 = -1740800;
                v29 = (*(_DWORD *)(a1 + 100) + v19) >> 8;
                v30 = *(int *)(a1 + 104) >> 8;
                ReadGeomOffset(&v32, &v33);
                SetGeomOffset(((__int16)v14[2] + (v14[2] >> 15)) >> 1, ((__int16)v14[3] + (v14[3] >> 15)) >> 1);
                SetGeomScreen(491);
                dword_800676BC = (int)v22;
                v20 = a2[42];
                *a3 = 0;
                a3[10] = sub_8003FC40;
                a3[11] = sub_8003FC18;
                if ( (a3[7] & 0x20000000) != 0 )
                {
                  a3[2] = nullsub_3;
                  a3[3] = sub_8003F2FC;
                }
                else
                {
                  a3[2] = nullsub_3;
                  a3[3] = sub_8003FC50;
                }
                a3[7] |= 0x10000000u;
                sub_8003F3AC(a3, dword_80061A84, dword_800676B0);
                SetGeomScreen(dword_80065D54);
                SetGeomOffset(v32, v33);
                a2[42] = v20;
                *(_BYTE *)(v10 + 3) = 3;
                *(_BYTE *)(v10 + 7) = 2;
                *(_BYTE *)(v10 + 4) = 0;
                *(_BYTE *)(v10 + 5) = 0;
                *(_BYTE *)(v10 + 6) = 0;
                *(_WORD *)(v10 + 12) = v14[2];
                *(_WORD *)(v10 + 14) = v14[3];
                *(_WORD *)(v10 + 8) = *v14;
                *(_WORD *)(v10 + 10) = v14[1];
                sub_8004F244(dword_80061A84 + 32, v10);
                SetDefDrawEnv(v21, (__int16)*v14, (__int16)v14[1], (__int16)v14[2], (__int16)v14[3]);
                v21[23] = 0;
                sub_8004D464(v12, v21);
                return sub_8004F244(dword_80061A84 + 32, v12);
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 8001CE60: variable 'v4' is possibly undefined
// 8003F2FC: using guessed type int sub_8003F2FC(int, int, int, int, int, int, int, int, int, int, int, int);
// 8003F3AC: using guessed type int __fastcall sub_8003F3AC(_DWORD, _DWORD, _DWORD);
// 8003FC18: using guessed type int sub_8003FC18();
// 8003FC40: using guessed type int sub_8003FC40();
// 8003FC50: using guessed type int sub_8003FC50();
// 8004C194: using guessed type int __fastcall SetDefDrawEnv(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 8004D464: using guessed type int __fastcall sub_8004D464(_DWORD, _DWORD);
// 8004F244: using guessed type int __fastcall sub_8004F244(_DWORD, _DWORD);
// 8004F404: using guessed type int __fastcall MulMatrix(_DWORD, _DWORD);
// 8004F6E4: using guessed type int __fastcall ReadGeomOffset(_DWORD, _DWORD);
// 8004F704: using guessed type int __fastcall SetGeomOffset(_DWORD, _DWORD);
// 8004F724: using guessed type int __fastcall SetGeomScreen(_DWORD);
// 80061A84: using guessed type int dword_80061A84;
// 80065D54: using guessed type int dword_80065D54;
// 800676B0: using guessed type int dword_800676B0[];
// 800676BC: using guessed type int dword_800676BC;
// 8006AEC8: using guessed type unsigned __int16 word_8006AEC8[8];

//----- (8001D16C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
_UNKNOWN **sub_8001D16C()
{
  int v0; // $v0
  _UNKNOWN **result; // $v0

  dword_80068EEC = *(_DWORD *)(dword_80061A80 + 16) / 0x22u;
  sub_8002D8C8();
  if ( MEMORY[0x100] >> 28 == 8 )
  {
    v0 = 10223616;
LABEL_6:
    dword_8006921C = v0 | 0x4000;
    dword_80069220 = v0 | 0x4000;
    dword_80069224 = v0 | 0x4000;
    goto LABEL_7;
  }
  if ( MEMORY[0x100] >> 28 == 13 )
  {
    v0 = 2031616;
    goto LABEL_6;
  }
  dword_8006921C = 614400;
  dword_80069220 = 716800;
  dword_80069224 = 614400;
LABEL_7:
  sub_8001AB64();
  result = &off_8005D120;
  MEMORY[0x1F80005C] = &off_8005D120;
  return result;
}
// 8001D24C: write access to const memory at 80060A98 has been detected
// 8005D120: using guessed type _UNKNOWN *off_8005D120;
// 80060A90: using guessed type int dword_80060A90;
// 80060A98: using guessed type int dword_80060A98;
// 80061A80: using guessed type int dword_80061A80;
// 80068EEC: using guessed type int dword_80068EEC;
// 80068F1C: using guessed type int dword_80068F1C;
// 8006921C: using guessed type int dword_8006921C;
// 80069220: using guessed type int dword_80069220;
// 80069224: using guessed type int dword_80069224;

//----- (8001D2D4) --------------------------------------------------------
void __fastcall sub_8001D2D4(int a1, int a2, int a3, _DWORD *a4)
{
  int v6; // $s3
  int v8; // $v0
  int v9; // $s1
  int v10; // $a0
  int v11; // $v1
  int v12; // $v0
  int v13; // $v1
  int v14; // $v0
  int v15; // $v0
  int v16; // $v1
  int v17; // $v0
  int v18; // $v0
  int v19; // $v1
  int v20; // $a1
  int v21; // $v1
  _DWORD *v22; // $a3
  _DWORD *v23; // $v0
  int v24; // $v0
  _DWORD *v25; // $v0
  int v26; // $v1

  v6 = *(_DWORD *)(a1 + 208);
  if ( a2 != 255 )
  {
    v8 = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 28) = a2;
    v9 = *(_DWORD *)(v8 + 32) + 16 * a2;
    *(_DWORD *)(a1 + 176) = *(_DWORD *)(v9 + 4);
    v10 = sub_800142B4(
            (unsigned int *)(*(_DWORD *)(*(_DWORD *)(a1 + 16) + 24) + 4 * *(unsigned __int16 *)(v9 + 8)),
            1,
            0);
    *(_DWORD *)(a1 + 20) = v10;
    v11 = *(unsigned __int16 *)(v9 + 14);
    if ( v11 == 0x3FFF )
    {
      v12 = 0;
    }
    else if ( (v11 & 0x4000) != 0 )
    {
      v12 = *(_DWORD *)(v10 + 20) + 4 * (v11 & 0x3FFF);
    }
    else
    {
      v12 = *(_DWORD *)(*(_DWORD *)(a1 + 12) + 20) + 4 * (v11 & 0x3FFF);
    }
    *(_DWORD *)(a1 + 192) = v12;
    v13 = *(unsigned __int16 *)(v9 + 10);
    if ( v13 == 0x3FFF )
    {
      v15 = 0;
    }
    else
    {
      if ( (v13 & 0x4000) != 0 )
        v14 = *(_DWORD *)(a1 + 20);
      else
        v14 = *(_DWORD *)(a1 + 12);
      v15 = *(_DWORD *)(v14 + 20) + 4 * (v13 & 0x3FFF);
    }
    *(_DWORD *)(a1 + 204) = v15;
    v16 = *(unsigned __int16 *)(v9 + 12);
    if ( v16 == 0x3FFF )
    {
      v18 = 0;
    }
    else
    {
      if ( (v16 & 0x4000) != 0 )
        v17 = *(_DWORD *)(a1 + 20);
      else
        v17 = *(_DWORD *)(a1 + 12);
      v18 = *(_DWORD *)(v17 + 20) + 4 * (v16 & 0x3FFF);
    }
    v19 = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 200) = v18;
    *(_DWORD *)(a1 + 208) = 0;
    *(_DWORD *)(a1 + 196) = a1 + 64;
    v20 = 0;
    *(_DWORD *)(a1 + 188) = a1 + 4 * *(_DWORD *)(*(_DWORD *)(v19 + 16) + 12) + 64;
    v21 = *(_DWORD *)v9;
    *(_DWORD *)(a1 + 168) |= 0x20020u;
    *(_DWORD *)(a1 + 256) = v21;
    if ( a3 > 0 )
    {
      v22 = a4;
      do
      {
        v23 = *(_DWORD **)(a1 + 188);
        ++v20;
        *v23 = *v22;
        *(_DWORD *)(a1 + 188) = v23 + 1;
        ++v22;
      }
      while ( v20 < a3 );
    }
    sub_8001D588((char *)a1, a3, 0xFFFF);
    if ( v6 )
    {
      sub_8001D588((char *)a1, 0, 0xFFFF);
      *(_DWORD *)(a1 + 192) = v6;
      sub_80038E28(a1);
      if ( v24 >= -254 )
        return;
    }
    else
    {
      v25 = *(_DWORD **)(a1 + 188);
      *v25 = 0;
      *(_DWORD *)(a1 + 188) = v25 + 1;
    }
    v26 = *(_DWORD *)(a1 + 200);
    *(_DWORD *)(a1 + 224) = dword_80068EEC;
    if ( v26 )
    {
      if ( a1 == dword_80068EE8 )
      {
        sub_8001D588((char *)a1, 0, 0xFFFF);
        *(_DWORD *)(a1 + 192) = *(_DWORD *)(a1 + 200);
        sub_80038E28(a1);
      }
    }
  }
}
// 8001D4E0: variable 'v24' is possibly undefined
// 80068EE8: using guessed type int dword_80068EE8;
// 80068EEC: using guessed type int dword_80068EEC;

//----- (8001D588) --------------------------------------------------------
int __fastcall sub_8001D588(char *a1, int a2, int a3)
{
  int v3; // $t0
  _DWORD *v4; // $v1
  int v5; // $v0
  int result; // $v0

  v3 = *((_DWORD *)a1 + 49);
  v4 = (_DWORD *)*((_DWORD *)a1 + 47);
  *((_DWORD *)a1 + 49) = v4;
  *v4 = a3;
  v5 = *((_DWORD *)a1 + 48);
  *((_DWORD *)a1 + 47) = v4 + 1;
  v4[1] = v5;
  *((_DWORD *)a1 + 47) = v4 + 2;
  v4[2] = ((char *)&v4[-a2 - 16] - a1) | ((v3 - 64 - (_DWORD)a1) << 16);
  result = -255;
  *((_DWORD *)a1 + 47) = v4 + 3;
  return result;
}

//----- (8001D5E8) --------------------------------------------------------
int __fastcall sub_8001D5E8(_DWORD *a1, unsigned int *a2)
{
  int v2; // $v1
  unsigned int v3; // $a3
  int result; // $v0
  int v5; // $v0
  int v6; // $v1

  v2 = a1[49];
  a1[47] = v2 + 8;
  v3 = *(_DWORD *)(v2 + 8);
  if ( !HIWORD(v3) )
    return -25;
  a1[47] = v2 + 4;
  v5 = *(_DWORD *)(v2 + 4);
  v6 = a1[47];
  a1[48] = v5;
  a1[47] = v6 - 4;
  if ( a2 )
    *a2 = *a2 & 0xFFFF0000 | (unsigned __int16)*(_DWORD *)(v6 - 4);
  result = -255;
  a1[47] = (char *)a1 + (unsigned __int16)v3 + 64;
  a1[49] = (char *)a1 + HIWORD(v3) + 64;
  return result;
}

//----- (8001D674) --------------------------------------------------------
void __fastcall sub_8001D674(int a1, int a2)
{
  int v4; // $a0
  int v5; // $a1
  int v6; // $v0
  int v7; // $v1
  int v8; // $v0
  int v9; // $t0
  int v10; // $t1
  int v11; // $t0
  int v12; // $t1
  int v13; // $v0
  int v14; // $a1
  unsigned int v15; // $a0
  unsigned int v16; // $v0
  bool v17; // dc
  BOOL v18; // $v0
  int *v19; // $a0
  int v20; // $v0
  int v21; // $v1
  int v22; // $v0
  int v23; // $a0
  int v24; // $v1
  int v25[2]; // [sp+10h] [-20h] BYREF
  _DWORD v26[6]; // [sp+18h] [-18h] BYREF

  if ( !a1 )
    sub_80015798();
  v4 = dword_80068F1C & 8;
  dword_80068EE8 = a1;
  if ( (dword_80068F1C & 8) != 0 )
  {
    v5 = *(_DWORD *)(a1 + 256);
    if ( (v5 & 0x40000) != 0 )
      a2 = 1;
    v6 = dword_80068F1C & 0x8000;
    if ( (*(_DWORD *)(a1 + 172) & 0x2000000) != 0 || (v6 = dword_80068F1C & 0x8000, (v5 & 0x8000) != 0) )
    {
      if ( v6 )
      {
        v4 = 1;
        goto LABEL_28;
      }
    }
    v7 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 12) + 16) + 4);
    if ( v7 != 1024 )
    {
      if ( v7 < 1025 )
      {
        if ( v7 == 512 )
        {
          v4 = dword_80068F1C & 0x100;
          goto LABEL_28;
        }
        if ( v7 < 513 )
        {
          if ( v7 == 256 )
            v4 = dword_80068F1C & 0x20;
          goto LABEL_28;
        }
        if ( v7 != 768 )
          goto LABEL_28;
LABEL_25:
        v4 = dword_80068F1C & 0x80;
        goto LABEL_28;
      }
      if ( v7 == 1536 )
        goto LABEL_25;
      if ( v7 < 1537 )
      {
        if ( v7 != 1280 )
          goto LABEL_28;
        goto LABEL_25;
      }
      if ( v7 != 2304 )
        goto LABEL_28;
    }
    v4 = dword_80068F1C & 0x400;
  }
LABEL_28:
  if ( !a2 || !v4 )
  {
    sub_8001B630(a1, v25);
    goto LABEL_39;
  }
  v8 = *(_DWORD *)(a1 + 172) & 0x10;
  *(_DWORD *)(a1 + 220) = dword_80068EEC;
  if ( v8 )
  {
    v9 = *(_DWORD *)(a1 + 100);
    v10 = *(_DWORD *)(a1 + 104);
    v26[0] = *(_DWORD *)(a1 + 96);
    v26[1] = v9;
    v26[2] = v10;
    v11 = *(_DWORD *)(a1 + 112);
    v12 = *(_DWORD *)(a1 + 116);
    v26[3] = *(_DWORD *)(a1 + 108);
    v26[4] = v11;
    v26[5] = v12;
  }
  if ( !*(_DWORD *)(a1 + 200)
    || (sub_8001D588((char *)a1, 0, 0xFFFF), *(_DWORD *)(a1 + 192) = *(_DWORD *)(a1 + 200), sub_80038E28(a1), v13 < -254) )
  {
    v14 = *(_DWORD *)(a1 + 188);
    v15 = *(_DWORD *)(v14 - 4);
    v16 = dword_80068EEC - (v15 & 0xFFFFFF);
    v15 >>= 24;
    v17 = v16 >= v15;
    v18 = v15 < 2;
    if ( !v17 )
    {
      v19 = (int *)a1;
      if ( !v18 )
        goto LABEL_37;
    }
    *(_DWORD *)(a1 + 188) = v14 - 4;
    sub_80038E28(a1);
    v19 = (int *)a1;
    if ( v20 < -254 )
    {
LABEL_37:
      sub_8001CA68(v19);
      sub_8001E78C((_DWORD *)a1, v26, v25);
      *(_DWORD *)(a1 + 168) &= ~0x20u;
LABEL_39:
      if ( !*(_DWORD *)(a1 + 232) )
        goto LABEL_76;
      if ( *(_BYTE *)(a1 + 288) == 1 )
        goto LABEL_76;
      v21 = *(_DWORD *)(a1 + 172);
      if ( (v21 & 0x100) != 0 || (dword_80068F1C & 4) == 0 )
        goto LABEL_76;
      v22 = dword_80068F1C & 0x4000;
      if ( (v21 & 0x2000000) != 0 || (v22 = dword_80068F1C & 0x4000, (*(_DWORD *)(a1 + 256) & 0x8000) != 0) )
      {
        v23 = 1;
        if ( v22 )
          goto LABEL_70;
      }
      v24 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 12) + 16) + 4);
      v23 = 0;
      if ( v24 != 1024 )
      {
        if ( v24 < 1025 )
        {
          if ( v24 == 512 )
          {
            v23 = dword_80068F1C & 0x200;
            if ( a2 )
            {
LABEL_74:
              if ( v23 )
                sub_8001B7A0(a1, v25);
LABEL_76:
              dword_80068EE8 = 0;
              return;
            }
            if ( (*(_DWORD *)(a1 + 256) & 0x40000) == 0 && dword_80068F28 )
              v23 = 0;
            goto LABEL_70;
          }
          if ( v24 < 513 )
          {
            if ( v24 == 256 && (dword_80068F1C & 0x10) != 0 && ((dword_80069034 & 1) != 0 || *(_DWORD *)(a1 + 264) != 4) )
              v23 = 1;
            goto LABEL_70;
          }
          if ( v24 != 768 )
          {
LABEL_70:
            if ( !a2 && (dword_80068F1C & 0x8000000) == 0 && (*(_DWORD *)(a1 + 256) & 0x40000) == 0 )
              v23 = 0;
            goto LABEL_74;
          }
LABEL_64:
          v23 = dword_80068F1C & 0x40;
          goto LABEL_70;
        }
        if ( v24 == 1536 )
          goto LABEL_64;
        if ( v24 < 1537 )
        {
          if ( v24 != 1280 )
            goto LABEL_70;
          goto LABEL_64;
        }
        if ( v24 != 2304 )
          goto LABEL_70;
      }
      v23 = dword_80068F1C & 0x800;
      goto LABEL_70;
    }
  }
}
// 8001D868: variable 'v13' is possibly undefined
// 8001D8C8: variable 'v20' is possibly undefined
// 80060A90: using guessed type int dword_80060A90;
// 80068EE8: using guessed type int dword_80068EE8;
// 80068EEC: using guessed type int dword_80068EEC;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F28: using guessed type int dword_80068F28;
// 80069034: using guessed type int dword_80069034;

//----- (8001DB38) --------------------------------------------------------
void __fastcall sub_8001DB38(int a1, int a2, int a3, int a4, _DWORD *a5)
{
  int v5; // $s1
  int v10; // $a0
  int v11; // $v0
  int *v12; // $v0
  int v13; // $v0
  bool v14; // dc
  BOOL v15; // $v0
  BOOL v16; // $v0
  int v17; // $a0
  _DWORD *v18; // $a3
  _DWORD *v19; // $v0
  int v20; // $a0
  int v21; // $a1
  int v22; // $v0
  int v23; // $a0
  int v24; // [sp+10h] [-50h]
  int v25; // [sp+14h] [-4Ch]

  v10 = -26;
  if ( !a2 || !*(_DWORD *)a2 || a3 >> 8 >= *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a2 + 12) + 16) + 16) )
    goto LABEL_36;
  if ( a1 )
    *(_DWORD *)(a1 + 212) = 1;
  v11 = *(_DWORD *)(a2 + 204);
  *(_DWORD *)(a2 + 92) = a1;
  if ( !v11 )
    goto LABEL_12;
  v12 = *(int **)(a2 + 188);
  *v12++ = a3;
  *(_DWORD *)(a2 + 188) = v12;
  *v12 = (int)a5;
  *(_DWORD *)(a2 + 188) = v12 + 1;
  sub_8001D588((char *)a2, 2, 0xFFFF);
  *(_DWORD *)(a2 + 192) = *(_DWORD *)(a2 + 204);
  sub_80038E28(a2);
  v10 = v13;
  v14 = v13 == -26;
  v15 = v13 < -254;
  if ( !v14 )
  {
    if ( !v15 )
      return;
    v5 = v24;
  }
  v16 = v10 < -254;
  if ( a1 )
  {
    *(_DWORD *)(a1 + 212) = v25;
LABEL_12:
    v16 = v10 < -254;
  }
  if ( !v16 )
  {
    v5 = *(unsigned __int16 *)(2 * (a3 >> 8) + *(_DWORD *)(*(_DWORD *)(a2 + 12) + 28));
    if ( a1 )
      *(_DWORD *)(a1 + 212) = v5 != 0xFF;
    if ( (v5 & 0x8000) != 0 )
    {
      *(_DWORD *)(a2 + 284) = a3;
      v17 = 0;
      if ( a4 > 0 )
      {
        v18 = a5;
        do
        {
          v19 = *(_DWORD **)(a2 + 188);
          ++v17;
          *v19 = *v18;
          *(_DWORD *)(a2 + 188) = v19 + 1;
          ++v18;
        }
        while ( v17 < a4 );
      }
      sub_8001D588((char *)a2, a4, 0xFFFF);
      *(_DWORD *)(a2 + 192) = *(_DWORD *)(*(_DWORD *)(a2 + 12) + 20) + 4 * (v5 & 0x3FFF);
      sub_80038E28(a2);
      return;
    }
  }
  if ( v5 == 255 )
    return;
  v20 = *(_DWORD *)(a2 + 176);
  if ( a3 == 6144 || a3 == 9728 || a3 == 6400 || a3 == 9472 )
    v20 &= ~2u;
  v21 = *(_DWORD *)(16 * v5 + *(_DWORD *)(*(_DWORD *)(a2 + 12) + 32));
  v22 = v20 & v21;
  if ( !a2 )
  {
    if ( (unsigned int)(MEMORY[0x108] - 2) >= 3 )
      v22 = v20 & v21;
    else
      v22 = (v20 | 0x402) & v21;
  }
  if ( !v22 )
  {
    *(_DWORD *)(a2 + 284) = a3;
    if ( a3 == 6144 || (v23 = a2, a3 == 6400) )
    {
      *(_DWORD *)(a2 + 168) |= 0x10000u;
      v23 = a2;
    }
    sub_8001D2D4(v23, v5, a4, a5);
    return;
  }
LABEL_36:
  if ( a1 )
    *(_DWORD *)(a1 + 212) = 0;
}
// 8001DDB8: conditional instruction was optimized away because $s1.4!=FF
// 8001DC08: variable 'v13' is possibly undefined
// 8001DC20: variable 'v24' is possibly undefined
// 8001DC34: variable 'v25' is possibly undefined
// 8001DCEC: variable 'v5' is possibly undefined
// 80060A90: using guessed type int dword_80060A90;

//----- (8001DDF4) --------------------------------------------------------
int __fastcall sub_8001DDF4(int a1, int *a2)
{
  _DWORD *v4; // $v1
  int result; // $v0
  bool v6; // dc

  v4 = (_DWORD *)a2[6];
  ++a2[4];
  sub_8001DB38(*a2, a1, a2[1], a2[2], v4);
  if ( *a2 )
  {
    result = -255;
    if ( !*(_DWORD *)(*a2 + 212) )
      return result;
    v6 = *a2 != 0;
    ++a2[5];
    if ( !v6 )
    {
      result = -255;
      if ( a2[1] != 11776 )
        return result;
      *(_DWORD *)(a1 + 172) &= ~0x10u;
    }
  }
  return -255;
}
// 80060A90: using guessed type int dword_80060A90;

//----- (8001E34C) --------------------------------------------------------
int __fastcall sub_8001E34C(int a1, int a2, int a3, int a4, int a5)
{
  _DWORD v7[5]; // [sp+10h] [-20h] BYREF
  int v8; // [sp+24h] [-Ch]
  int v9; // [sp+28h] [-8h]

  v7[1] = a2;
  v7[3] = a3;
  v7[0] = a1;
  v7[2] = a4;
  v7[4] = 0;
  v8 = 0;
  v9 = a5;
  sub_80019A38((void (__fastcall *)(char *, int, int))sub_8001997C, (int)sub_8001DDF4, (int)v7);
  if ( a1 )
    *(_DWORD *)(a1 + 212) = v8;
  return -255;
}

//----- (8001E3BC) --------------------------------------------------------
int __fastcall sub_8001E3BC(int a1, _DWORD *a2, int a3, int a4, int a5, int a6)
{
  _DWORD v8[5]; // [sp+10h] [-20h] BYREF
  int v9; // [sp+24h] [-Ch]
  int v10; // [sp+28h] [-8h]

  v8[1] = a3;
  v8[0] = a1;
  v8[3] = a4;
  v8[4] = 0;
  v9 = 0;
  v8[2] = a5;
  v10 = a6;
  sub_8001997C(a2, (int (__fastcall *)(_DWORD, _DWORD))sub_8001DDF4, (int)v8);
  if ( a1 )
    *(_DWORD *)(a1 + 212) = v9;
  return -255;
}

//----- (8001E42C) --------------------------------------------------------
void __fastcall sub_8001E42C(int a1, __int16 a2, int a3, _DWORD *a4)
{
  int i; // $a0
  _DWORD *v7; // $v0

  for ( i = 0; i < a3; ++a4 )
  {
    v7 = *(_DWORD **)(a1 + 188);
    ++i;
    *v7 = *a4;
    *(_DWORD *)(a1 + 188) = v7 + 1;
  }
  sub_8001D588((char *)a1, a3, 0xFFFF);
  *(_DWORD *)(a1 + 192) = *(_DWORD *)(*(_DWORD *)(a1 + 12) + 20) + 4 * (a2 & 0x3FFF);
  sub_80038E28(a1);
}

//----- (8001E4BC) --------------------------------------------------------
int __fastcall sub_8001E4BC(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  int v5; // $s1
  int v6; // $s3
  __int16 v7; // $s2
  unsigned int v9; // $v1
  int v10; // $s1
  int v11; // $a0
  int v12; // $lo
  int v13; // $a0
  int v14; // $v1
  int v15; // $v0
  int v16; // $a0
  int v17; // $v1
  int v18; // $v0
  int v19; // $v0
  int v20; // $a0
  int v21; // $v0
  int v22; // $v1
  int result; // $v0
  int v24; // $a1
  _DWORD v25[4]; // [sp+10h] [-20h] BYREF
  int v26[4]; // [sp+20h] [-10h] BYREF

  v5 = dword_80065C08;
  v6 = dword_80065C0C;
  v7 = dword_80065C04;
  if ( dword_80065C08 >= 153 && (a1[43] & 0x80) != 0 )
  {
    a1[37] = sub_8001FAC8(a1[37], ((_WORD)dword_80065DA4 + (_WORD)dword_80065C04) & 0xFFF, a2[5], 0);
  }
  else
  {
    v6 = 8;
    v5 = 0;
  }
  v9 = *(_DWORD *)(dword_80061A7C + 24);
  if ( v9 >= 0x67 )
    v9 = 102;
  v10 = (v5 * ((int)(*a2 * v9) / 1020)) >> 8;
  v25[1] = 0;
  v25[0] = ((sub_8003C2F0(v7) >> 4) * v10) >> 8;
  v25[2] = ((sub_8003C364(v7) >> 4) * v10) >> 8;
  sub_80020184(v25, v26);
  a1[33] += v26[0];
  a1[35] += v26[2];
  if ( v6 == 8 || (a1[42] & 0x2000000) == 0 )
  {
    v11 = a2[2];
    if ( (a1[42] & 0x2000000) == 0 )
      v11 = 199;
    v12 = a1[35] * v11;
    a1[33] = (a1[33] * v11) >> 8;
    a1[35] = v12 >> 8;
  }
  v13 = a1[33];
  v14 = a2[1];
  v15 = -v14;
  if ( v13 < v14 )
  {
    v14 = -v14;
    if ( v13 >= v15 )
      v14 = a1[33];
  }
  v16 = a1[35];
  a1[33] = v14;
  v17 = a2[1];
  v18 = -v17;
  if ( v16 < v17 )
  {
    v17 = -v17;
    if ( v16 >= v18 )
      v17 = v16;
  }
  v19 = a1[24];
  a1[35] = v17;
  v20 = ((v19 - *a3) >> 6) * ((v19 - *a3) >> 6);
  v21 = (a1[26] - a3[2]) >> 6;
  v22 = 7680 * sub_8003D9DC(v20 + v21 * v21);
  a1[65] = v22;
  if ( v22 >= 25600 )
  {
    v24 = a2[1];
    result = v24 < v22;
    if ( v24 < v22 )
      a1[65] = v24;
  }
  else
  {
    result = 8;
    if ( v6 != 8 )
    {
      result = 25600;
      a1[65] = 25600;
    }
  }
  return result;
}
// 80061A7C: using guessed type int dword_80061A7C;
// 80065C04: using guessed type int dword_80065C04;
// 80065C08: using guessed type int dword_80065C08;
// 80065C0C: using guessed type int dword_80065C0C;
// 80065DA4: using guessed type int dword_80065DA4;

//----- (8001E78C) --------------------------------------------------------
int __fastcall sub_8001E78C(_DWORD *a1, _DWORD *a2, int *a3)
{
  int v3; // $gp
  int result; // $v0
  int v8; // $a1
  int v9; // $s6
  _DWORD *v10; // $s5
  int v11; // $v1
  int v12; // $v1
  int v13; // $v1
  unsigned int v14; // $v1
  unsigned int v15; // $a0
  int *v16; // $s0
  unsigned int v17; // $v1
  unsigned int v18; // $v1
  unsigned int v19; // $v1
  int v20; // $s4
  int v21; // $a0
  int v22; // $s3
  int v23; // $s1
  int v24; // $v1
  int v25; // $v0
  unsigned int v26; // $v1
  int v27; // $v0
  BOOL v28; // $v0
  unsigned int v29; // $v1
  int v30; // $v1
  int v31; // $a1
  unsigned int v32; // $v1
  unsigned int v33; // $a0
  int v34; // $v0
  int v35; // $v1
  unsigned int v36; // $a0
  int v37; // $v0
  int v38; // $v0
  int v39; // $s4
  int v40; // $a0
  int i; // $a1
  int v42; // $a0
  int v43; // $v1
  int v44; // $v0
  int v45; // $a0
  int v46; // $v0
  int v47; // $t3
  int v48; // $t4
  unsigned int v49; // $v1
  int v50; // $a2
  unsigned int v51; // $v1
  unsigned int v52; // $v1
  unsigned int v53; // $v1
  _DWORD *v54; // $s3
  int v55; // $s1
  int v56; // $v0
  int v57; // $s0
  int v58; // $v0
  int v59; // $v1
  _DWORD *v60; // $a0
  int v61; // $v1
  int v62; // $v1
  int v63; // $v0
  int v64; // $t2
  int v65; // $t3
  int v66; // $a0
  int v67; // $a1
  int v68; // $v1
  int v69; // $a1
  int v70; // $v1
  int v71; // $a1
  int v72; // $v1
  unsigned int v73; // $v1
  int v74; // $v0
  signed int v75; // $a0
  int v76; // $v0
  int v77; // $v1
  int v78; // $a0
  int v79; // $a1
  int v80; // $v0
  int v81; // $a1
  int v82; // $a0
  int v83; // $v1
  int v84; // $v0
  int v85; // $a1
  int v86; // $v0
  int v87; // $a0
  int v88; // $v0
  int v89; // $v0
  unsigned int v90; // $a1
  int v91; // $v1
  unsigned int v92; // $a0
  unsigned int v93; // $v1
  int v94; // $v1
  int v95; // $v1
  int v96; // $v1
  unsigned int v97; // $a0
  int v98; // $v1
  int v99; // $s1
  int v100; // $v1
  int v101; // $s0
  int v102; // [sp+18h] [-40h] BYREF
  int v103; // [sp+1Ch] [-3Ch]
  int v104; // [sp+20h] [-38h]
  int v105; // [sp+28h] [-30h] BYREF
  int v106; // [sp+2Ch] [-2Ch]
  int v107; // [sp+30h] [-28h]
  int v108[2]; // [sp+38h] [-20h] BYREF
  int v109; // [sp+40h] [-18h]
  int v110[4]; // [sp+48h] [-10h] BYREF

  if ( !a1[43] )
  {
    a1[42] &= 0xF8CA207E;
    sub_8001B0BC((int)a1, a1 + 30);
    sub_8001B630((int)a1, a3);
    result = -255;
    a1[22] = 0;
    return result;
  }
  v8 = a1[43] & 0x80;
  v9 = a1[42];
  v10 = (_DWORD *)a1[22];
  if ( a1 )
  {
LABEL_26:
    if ( !v8 || dword_80068F3C != 256 )
      goto LABEL_121;
    v15 = a1[64];
    v16 = &dword_8005C380;
    v17 = v15 >> 28;
    if ( (v15 & 4) != 0 )
    {
      if ( v17 == 2 )
      {
        v16 = dword_8005C470;
        if ( a1[66] == 5 )
          v16 = dword_8005C3E0;
      }
      else
      {
        if ( v17 == 4 )
        {
          v16 = dword_8005C4E8;
          goto LABEL_56;
        }
        if ( (v15 & 0x200000) != 0 )
        {
          v16 = dword_8005C458;
          goto LABEL_56;
        }
        if ( (v15 & 0x80000) == 0 )
        {
          if ( (a1[42] & 0x2000) != 0 )
          {
            v16 = dword_8005C3F8;
            goto LABEL_56;
          }
          if ( v17 == 11 )
          {
            v16 = dword_8005C548;
            goto LABEL_56;
          }
          if ( v17 >= 0xC )
          {
            v16 = dword_8005C578;
            if ( v17 == 12 )
              goto LABEL_56;
          }
          else if ( v17 == 3 )
          {
            if ( a1[66] == 5 )
              v16 = dword_8005C5A8;
            else
              v16 = dword_8005C518;
            goto LABEL_56;
          }
          if ( a1[66] == 5 )
            v16 = dword_8005C3E0;
          else
            v16 = dword_8005C398;
          goto LABEL_56;
        }
        if ( v17 == 3 || a1[66] == 5 )
          v16 = dword_8005C4D0;
        else
          v16 = dword_8005C428;
      }
    }
LABEL_56:
    v18 = a1[64];
    if ( (v18 & 8) == 0 )
      goto LABEL_77;
    if ( (v18 & 0x80000) != 0 )
    {
      if ( v18 >> 28 == 3 || a1[66] == 5 )
        v16 = dword_8005C4D0;
      else
        v16 = dword_8005C440;
LABEL_77:
      if ( (a1[64] & 0x10) != 0 )
        v16 = dword_8005C3C8;
      v20 = dword_80065C08;
      if ( dword_80065C0C == 8 )
      {
        v20 = 256;
        if ( (a1[42] & 0x2000000) == 0 && v16 != dword_8005C428 && v16 != dword_8005C4D0 )
        {
          v36 = *(_DWORD *)(dword_80061A7C + 24);
          if ( v36 >= 0x67 )
            v36 = 102;
          v37 = a1[65] - v16[4] / 1020 * v36;
          a1[65] = v37;
          if ( v37 < 0 )
            a1[65] = 0;
        }
        goto LABEL_120;
      }
      v21 = a1[37];
      v22 = (dword_80065DA4 + dword_80065C04) & 0xFFF;
      v23 = v22 - v21;
      a1[91] = v22;
      if ( v22 - v21 < 0 )
        v23 = v21 - v22;
      if ( v23 >= 2049 )
        v23 = 4096 - v23;
      v24 = a1[64];
      if ( (v24 & 8) == 0 )
      {
        v31 = a1[65];
        if ( v31 >= 257 && v23 >= 1025 )
        {
          if ( !v16[2] )
            goto LABEL_110;
          v33 = *(_DWORD *)(dword_80061A7C + 24);
          if ( v33 >= 0x67 )
            v33 = 102;
          v34 = v31 - (int)(v16[3] * v33) / 1020;
          a1[65] = v34;
          if ( v34 < 0 )
LABEL_110:
            a1[65] = 0;
        }
        else
        {
          if ( (v24 & 0x80000) != 0 )
            a1[37] = sub_8001FAC8(v21, v22, v16[5], 0);
          else
            a1[37] = v22;
          v32 = *(_DWORD *)(dword_80061A7C + 24);
          if ( v32 >= 0x67 )
            v32 = 102;
          a1[65] += (int)(*v16 * v32) / 1020;
        }
        goto LABEL_111;
      }
      v25 = sub_8003C364(v23);
      v26 = *(_DWORD *)(dword_80061A7C + 24);
      if ( v26 >= 0x67 )
        v26 = 102;
      v27 = a1[65] + (((int)(*v16 * v26) / 1020 * (v25 >> 6)) >> 6);
      a1[65] = v27;
      if ( v27 >= 257 )
      {
        v28 = v23 < 1992;
      }
      else
      {
        v28 = v23 < 1992;
        if ( (a1[64] & 0x80000) == 0 )
        {
          a1[37] = v22;
LABEL_111:
          v35 = v16[1];
          if ( v35 < a1[65] )
            a1[65] = v35;
LABEL_120:
          v39 = (v20 * a1[65]) >> 8;
          v38 = sub_8003C2F0(a1[37]);
          v40 = a1[37];
          a1[33] = ((v38 >> 4) * v39) >> 8;
          a1[35] = ((sub_8003C364(v40) >> 4) * v39) >> 8;
          goto LABEL_121;
        }
      }
      if ( v28 || (a1[64] & 0x80000) != 0 )
      {
        a1[37] = sub_8001FAC8(a1[37], v22, v16[5], 0);
      }
      else
      {
        v29 = *(_DWORD *)(dword_80061A7C + 24);
        if ( v29 >= 0x67 )
          v29 = 102;
        v30 = a1[65] - (int)(v16[3] * v29) / 1020;
        a1[65] = v30;
        if ( v30 < 0 )
          a1[65] = 0;
      }
      goto LABEL_111;
    }
    if ( (a1[42] & 0x2000) != 0 )
    {
      v16 = dword_8005C410;
      goto LABEL_77;
    }
    v19 = v18 >> 28;
    if ( v19 == 3 )
    {
      v16 = dword_8005C530;
      goto LABEL_77;
    }
    if ( v19 >= 4 )
    {
      if ( v19 == 11 )
      {
        v16 = dword_8005C560;
        goto LABEL_77;
      }
      if ( v19 == 12 )
      {
        v16 = dword_8005C590;
        goto LABEL_77;
      }
    }
    else if ( v19 == 2 )
    {
LABEL_76:
      v16 = dword_8005C3B0;
      goto LABEL_77;
    }
    if ( a1[66] == 5 )
    {
      v16 = dword_8005C5C0;
      goto LABEL_77;
    }
    goto LABEL_76;
  }
  if ( (v9 & 0x2000000) == 0
    && ((unsigned int)(dword_80068EEC - MEMORY[0x170]) >= 0xB || (MEMORY[0x100] & 0x282000) != 0) )
  {
    v14 = MEMORY[0x100] >> 28;
    if ( MEMORY[0x100] >> 28 == 1 || v14 && v14 < 0xB && v14 >= 8 )
      v8 = 0;
    goto LABEL_26;
  }
  if ( (MEMORY[0x100] & 0x282000) != 0 )
  {
    if ( (v9 & 0x2000000) == 0 )
    {
      MEMORY[0x84] = (230 * MEMORY[0x84]) >> 8;
      MEMORY[0x8C] = (230 * MEMORY[0x8C]) >> 8;
    }
    v11 = 1800000;
    if ( MEMORY[0x84] < 1800000 )
    {
      v11 = -1800000;
      if ( MEMORY[0x84] >= -1800000 )
        v11 = MEMORY[0x84];
    }
    MEMORY[0x84] = v11;
    v12 = 1800000;
    if ( MEMORY[0x88] < 1800000 )
    {
      v12 = -1800000;
      if ( MEMORY[0x88] >= -1800000 )
        v12 = MEMORY[0x88];
    }
    MEMORY[0x88] = v12;
    v13 = 1800000;
    if ( MEMORY[0x8C] < 1800000 )
    {
      v13 = -1800000;
      if ( MEMORY[0x8C] >= -1800000 )
        v13 = MEMORY[0x8C];
    }
    MEMORY[0x8C] = v13;
  }
  else
  {
    *(_DWORD *)(v3 + 172) = dword_8005C488;
    sub_8001E4BC(0, dword_8005C488, &dword_8006AED8);
  }
LABEL_121:
  if ( !a1 )
  {
    dword_8006AED8 = MEMORY[0x60];
    dword_8006AEDC = MEMORY[0x64];
    dword_8006AEE0 = MEMORY[0x68];
    for ( i = 7; i > 0; *(_DWORD *)(MEMORY[8] + v42 + 76) = *(_DWORD *)(MEMORY[8] + 4 * i + 76) )
      v42 = 4 * i--;
    *(_DWORD *)(MEMORY[8] + 76) = v9;
  }
  v43 = a1[42];
  v44 = -87425024;
  if ( (v43 & 1) != 0 )
  {
    v44 = -87425024;
    if ( (a1[64] & 8) == 0 )
      v44 = -120979456;
  }
  a1[42] = v43 & (v44 | 0x207E);
  if ( (a1[43] & 1) != 0 )
    a1[28] = sub_8001FAC8(a1[28], a1[37], a1[36], (int)a1);
  if ( (a1[43] & 0x80000) != 0 )
    a1[28] = sub_8001FC40(a1[28], a1[37], a1[36], (int)a1);
  v45 = (int)a1;
  if ( (a1[43] & 0x2000) != 0 )
  {
    a1[27] = sub_8001FAC8(a1[27], a1[38], a1[73], 0);
    v45 = (int)a1;
  }
  sub_8001B0BC(v45, a1 + 30);
  sub_8001B630((int)a1, a3);
  v46 = a1[43] & 0x40;
  a1[22] = 0;
  if ( !v46 )
    goto LABEL_210;
  v47 = a1[25];
  v48 = a1[26];
  v105 = a1[24];
  v106 = v47;
  v107 = v48;
  v49 = *(_DWORD *)(dword_80061A7C + 24);
  if ( v49 >= 0x67 )
    v49 = 102;
  v50 = (int)(a1[33] * v49) / 1020;
  v102 = v50;
  v51 = *(_DWORD *)(dword_80061A7C + 24);
  if ( v51 >= 0x67 )
    v51 = 102;
  v103 = (int)(a1[34] * v51) / 1020;
  v52 = *(_DWORD *)(dword_80061A7C + 24);
  if ( v52 >= 0x67 )
    v52 = 102;
  v104 = (int)(a1[35] * v52) / 1020;
  if ( (a1[43] & 8) != 0 )
  {
    a1[71] = 255;
    v53 = a1[64];
    MEMORY[0x1F80005C] = &off_8005D120;
    if ( v53 >> 28 == 10 )
    {
      v54 = *(_DWORD **)(a1[77] + 16);
      a1[63] = sub_80044CA0(v108, a1, (int)dword_800676B0, &v102);
      dword_800679F8 = 0;
      sub_8005D968((int)dword_800676B0);
      v55 = v108[0] >> 8;
      if ( v108[0] < 0 )
        v55 = -v108[0] >> 8;
      v56 = v109;
      if ( v109 < 0 )
        v56 = -v109;
      v57 = v56 >> 8;
      v54[1] = sub_8004F794(v108[0], v109);
      v58 = sub_8003D9DC(v55 * v55 + v57 * v57);
      *v54 = 1024 - sub_8004F794(v108[1], v58 << 8);
      v54[2] = 0;
      v59 = a1[79];
      if ( a1[63] < v59 )
        a1[63] = v59;
      v60 = (_DWORD *)a1[77];
      v61 = a1[63];
      a1[79] = 0x80000000;
      *v60 = v61;
    }
    else
    {
      sub_8002D8E0();
      sub_8002AA94(a1, &v102, dword_80067E40);
      if ( (v9 & 0x2000000) != 0 )
      {
        v62 = a1[42];
        if ( (v62 & 1) == 0 && (v9 & 1) != 0 )
          a1[42] = v62 | 0x2000000;
      }
    }
    sub_8001AB64();
  }
  else
  {
    a1[24] += v50;
    a1[25] += v103;
    a1[26] += v104;
  }
  if ( (a1[43] & 0x8000) != 0 )
  {
    sub_80020670(a1, 0, v110);
    v63 = a1[42] & 0x200;
    a1[63] = v110[1];
    if ( v63 )
    {
      v64 = v106;
      v65 = v107;
      a1[24] = v105;
      a1[25] = v64;
      a1[26] = v65;
    }
  }
  if ( (a1[43] & 0x1000) != 0 )
  {
    v66 = a1[38];
    v67 = a1[33];
    if ( v67 >= v66 )
    {
      v68 = a1[38];
    }
    else
    {
      v68 = -v66;
      if ( v67 >= -v66 )
        v68 = a1[33];
    }
    v69 = a1[34];
    a1[33] = v68;
    if ( v69 >= v66 )
    {
      v70 = v66;
    }
    else
    {
      v70 = -v66;
      if ( v69 >= -v66 )
        v70 = v69;
    }
    v71 = a1[35];
    a1[34] = v70;
    if ( v71 >= v66 )
    {
      v72 = v66;
    }
    else
    {
      v72 = -v66;
      if ( v71 >= -v66 )
        v72 = v71;
    }
    a1[35] = v72;
  }
  if ( (a1[43] & 0x4000) == 0 || a1[63] < a1[25] )
    goto LABEL_210;
  if ( a1[64] >> 28 != 10 )
    goto LABEL_208;
  v73 = *(_DWORD *)(dword_80061A7C + 24);
  v74 = 32 * v73;
  if ( v73 >= 0x67 )
  {
    v73 = 102;
    v74 = 3264;
  }
  v75 = ((4 * (v74 - v73) + v73) << 12) / 0x22;
  if ( (int)a1[95] >= 0 && a1[34] < -v75 && (unsigned int)(a1[55] - a1[68]) >= 2 )
  {
    v76 = (int)(a1[27] << 20) >> 20;
    v77 = (int)(a1[27] << 20) >> 22;
    if ( v76 < 0 )
      v77 = (v76 + 3) >> 2;
    v78 = -45;
    if ( v77 >= 113 )
    {
      v78 = 113;
    }
    else if ( v77 >= -45 )
    {
      v78 = v77;
    }
    v79 = a1[34];
    a1[69] = v79;
    if ( v78 < 0 )
      v80 = 128 - v78;
    else
      v80 = v78 + 128;
    a1[95] = (v79 * v80) >> 8;
    a1[94] = 0;
    goto LABEL_192;
  }
  v81 = a1[63] - a1[25];
  if ( v81 < v75 / 30 )
  {
    if ( a1[64] >> 28 == 10 )
    {
      v91 = v81 * (44 * a1[65] / 2048000);
      a1[34] = v91;
      v92 = *(_DWORD *)(dword_80061A7C + 24);
      v93 = 34 * v91;
      if ( v92 >= 0x67 )
        v92 = 102;
      if ( !v92 )
        _break(7u, 0);
      a1[95] = 0;
      a1[34] = v93 / v92;
    }
LABEL_208:
    v94 = a1[63];
    a1[42] |= 1u;
    a1[25] = v94;
    v95 = a1[34];
    a1[68] = dword_80068EEC;
    if ( v95 < 0 )
    {
      a1[69] = v95;
      a1[34] = 0;
    }
    goto LABEL_210;
  }
LABEL_192:
  v82 = a1[95] + 119442;
  v83 = dword_80068EEC;
  a1[42] |= 1u;
  v84 = a1[94];
  a1[95] = v82;
  a1[68] = v83;
  v85 = v82 / 30;
  v86 = v84 + v82 / 30;
  a1[94] = v86;
  if ( v86 > 0 )
    a1[94] = 0;
  v87 = a1[25];
  if ( v87 < a1[63] + a1[94] )
    v87 = a1[63] + a1[94];
  v88 = a1[95];
  a1[25] = v87;
  if ( v88 > 0 )
  {
    a1[34] = 22 * v85;
    v89 = 374 * v85;
    v90 = *(_DWORD *)(dword_80061A7C + 24);
    if ( v90 >= 0x67 )
      v90 = 102;
    if ( !v90 )
      _break(7u, 0);
    a1[34] = 2 * v89 / v90;
  }
LABEL_210:
  if ( (a1[43] & 0x200000) != 0 )
  {
    if ( v10 )
    {
      if ( (v9 & 0x4000) != 0 )
      {
        v102 = a1[24] - *a2;
        v103 = a1[25] - a2[1];
        v104 = a1[26] - a2[2];
        v10[24] += v102;
        v10[25] += v103;
        v10[26] += v104;
        v102 = v10[24] - a1[24];
        v103 = v10[25] - a1[25];
        v104 = v10[26] - a1[26];
        v105 = (a1[27] - a2[3]) << 20 >> 20;
        v96 = (a1[28] - a2[4]) << 20 >> 20;
        v106 = v96;
        v107 = a1[29];
        if ( v105 || v96 )
        {
          sub_8001FFF0(&v102, a1 + 24, (int)&v105, 0, 0, v10 + 24);
          v10[37] += v106;
        }
      }
    }
  }
  if ( (a1[43] & 0x20) != 0 )
  {
    v97 = *(_DWORD *)(dword_80061A7C + 24);
    if ( v97 >= 0x67 )
      v97 = 102;
    v98 = a1[34] - (int)(4096000 * v97) / 1020;
    a1[34] = v98;
    if ( v98 < -3072000 )
      a1[34] = -3072000;
  }
  result = a1[43] & 0x10;
  if ( result )
  {
    result = sub_80031BD0((int)a1, a1 + 24, (_DWORD *)0x60, dword_8006921C, dword_80069220, dword_80069224);
    if ( !result )
    {
      result = a1[58];
      v99 = 1;
      if ( result )
      {
        v100 = *(unsigned __int8 *)result;
        result = 1;
        v101 = 0;
        if ( v100 == 1 )
        {
          result = *(_DWORD *)(a1[2] + 32);
          v99 = *(_DWORD *)(result + 20);
        }
      }
      else
      {
        v101 = 0;
      }
      if ( v99 > 0 )
      {
        do
        {
          sub_8002D0E8((int)a1, 1, v101++);
          result = v101 < v99;
        }
        while ( v101 < v99 );
      }
    }
  }
  return result;
}
// 8001E878: variable 'v3' is possibly undefined
// 8005C380: using guessed type int dword_8005C380;
// 8005C398: using guessed type int dword_8005C398[3];
// 8005C3B0: using guessed type int dword_8005C3B0[3];
// 8005C3C8: using guessed type int dword_8005C3C8[3];
// 8005C3E0: using guessed type int dword_8005C3E0[3];
// 8005C3F8: using guessed type int dword_8005C3F8[3];
// 8005C410: using guessed type int dword_8005C410[3];
// 8005C428: using guessed type int dword_8005C428[6];
// 8005C440: using guessed type int dword_8005C440[6];
// 8005C458: using guessed type int dword_8005C458[3];
// 8005C470: using guessed type int dword_8005C470[3];
// 8005C488: using guessed type int dword_8005C488[5];
// 8005C4D0: using guessed type int dword_8005C4D0[6];
// 8005C4E8: using guessed type int dword_8005C4E8[3];
// 8005C518: using guessed type int dword_8005C518[3];
// 8005C530: using guessed type int dword_8005C530[3];
// 8005C548: using guessed type int dword_8005C548[6];
// 8005C560: using guessed type int dword_8005C560[6];
// 8005C578: using guessed type int dword_8005C578[3];
// 8005C590: using guessed type int dword_8005C590[3];
// 8005C5A8: using guessed type int dword_8005C5A8[3];
// 8005C5C0: using guessed type int dword_8005C5C0[3];
// 8005D120: using guessed type _UNKNOWN *off_8005D120;
// 80060A90: using guessed type int dword_80060A90;
// 80061A7C: using guessed type int dword_80061A7C;
// 80065C04: using guessed type int dword_80065C04;
// 80065C08: using guessed type int dword_80065C08;
// 80065C0C: using guessed type int dword_80065C0C;
// 80065DA4: using guessed type int dword_80065DA4;
// 800676B0: using guessed type int dword_800676B0[];
// 800679F8: using guessed type int dword_800679F8;
// 80067E40: using guessed type unsigned int dword_80067E40[1024];
// 80068EEC: using guessed type int dword_80068EEC;
// 80068F3C: using guessed type int dword_80068F3C;
// 8006921C: using guessed type int dword_8006921C;
// 80069220: using guessed type int dword_80069220;
// 80069224: using guessed type int dword_80069224;
// 8006AED8: using guessed type int dword_8006AED8;
// 8006AEDC: using guessed type int dword_8006AEDC;
// 8006AEE0: using guessed type int dword_8006AEE0;

//----- (8001FAC8) --------------------------------------------------------
int __fastcall sub_8001FAC8(int a1, int a2, int a3, int a4)
{
  unsigned int v4; // $t0
  int v5; // $lo
  int v6; // $t1
  int v7; // $t0
  int v8; // $a2
  int v9; // $v0
  int v10; // $v1
  int v11; // $a0
  unsigned int v12; // $v0
  int v13; // $v1

  v4 = *(_DWORD *)(dword_80061A7C + 24);
  v5 = a3 * v4;
  if ( v4 >= 0x67 )
    v5 = 102 * a3;
  v6 = (a2 - a1) << 20 >> 20;
  v7 = v6;
  v8 = v5 / 1020;
  if ( v6 < 0 )
    v7 = -v6;
  if ( a4 && (*(_DWORD *)(a4 + 172) & 0x20000000) != 0 && v7 < 4 * v8 )
  {
    if ( v7 < 2 * v8 )
    {
      if ( v7 < v8 )
      {
        v8 /= 8;
        goto LABEL_17;
      }
      v9 = v8 + (v8 < 0 ? 3 : 0);
      goto LABEL_16;
    }
    v10 = 3 * v8;
    if ( v7 < 3 * v8 )
    {
      v8 /= 2;
      goto LABEL_17;
    }
    v8 = v10 >> 2;
    if ( v10 < 0 )
    {
      v9 = v10 + 3;
LABEL_16:
      v8 = v9 >> 2;
    }
  }
LABEL_17:
  if ( v7 >= v8 )
  {
    v13 = v7;
    if ( v7 < 0 )
      v13 = -v7;
    if ( v13 == 2048 && a2 >= 2048 )
      v6 = -v6;
    if ( v6 >= 0 )
    {
      v11 = ((_WORD)a1 + (_WORD)v8) & 0xFFF;
      if ( a4 )
      {
        v12 = *(_DWORD *)(a4 + 168) & 0xFFFFFFF7;
        goto LABEL_30;
      }
    }
    else
    {
      v11 = (a1 - v8) & 0xFFF;
      if ( a4 )
      {
        v12 = *(_DWORD *)(a4 + 168) | 8;
        goto LABEL_30;
      }
    }
  }
  else
  {
    v11 = a2;
    if ( a4 )
    {
      v12 = *(_DWORD *)(a4 + 168) | 0x800;
LABEL_30:
      *(_DWORD *)(a4 + 168) = v12;
    }
  }
  return v11;
}
// 80061A7C: using guessed type int dword_80061A7C;

//----- (8001FC40) --------------------------------------------------------
int __fastcall sub_8001FC40(int a1, int a2, int a3, int a4)
{
  unsigned int v4; // $t0
  int v5; // $lo
  int v6; // $a2
  int v7; // $v0
  int v8; // $v1
  int v9; // $t0
  int v10; // $a0
  __int16 v11; // $v0

  v4 = *(_DWORD *)(dword_80061A7C + 24);
  v5 = a3 * v4;
  if ( v4 >= 0x67 )
    v5 = 102 * a3;
  v6 = v5 / 1020;
  v7 = (a2 - a1) << 20;
  v8 = v7 >> 20;
  if ( !(v7 >> 20) )
    goto LABEL_11;
  v9 = v7 >> 20;
  if ( v8 < 0 )
    v9 = -v8;
  if ( v6 < 0 )
  {
    v11 = a1 + v6;
    if ( v9 >= v5 / -1020 )
      return v11 & 0xFFF;
  }
  else if ( v9 >= v6 )
  {
    return ((_WORD)a1 + (_WORD)v6) & 0xFFF;
  }
  v11 = a1 + v6;
  if ( (v6 ^ v8) < 0 )
    return v11 & 0xFFF;
LABEL_11:
  v10 = a2;
  if ( a4 )
    *(_DWORD *)(a4 + 168) |= 0x800u;
  return v10;
}
// 80061A7C: using guessed type int dword_80061A7C;

//----- (8001FD08) --------------------------------------------------------
int __fastcall sub_8001FD08(int a1, int a2, int a3)
{
  int v3; // $v1
  int result; // $v0

  v3 = a2 - a1;
  if ( a3 > 0 )
  {
    if ( v3 < 0 )
    {
      if ( a1 - a2 < a3 )
        return a2;
    }
    else if ( v3 < a3 )
    {
      return a2;
    }
  }
  result = a1 - a3;
  if ( v3 > 0 )
    return a1 + a3;
  return result;
}

//----- (8001FD58) --------------------------------------------------------
int __fastcall sub_8001FD58(__int16 a1, int a2, int a3)
{
  int v4; // $s1
  int v5; // $hi
  char v6; // $s3
  int v7; // $v1
  int v8; // $a0

  v4 = a1 & 0xFFF;
  v5 = v4 % a2;
  if ( a2 == -1 && v5 << 11 == 0x80000000 )
    _break(6u, 0);
  v6 = 2 * (a2 > 0xFFFF);
  v7 = (sub_8003C2F0((v5 << 11) / a2 - 1024) * a3) >> 12;
  v8 = -4096;
  if ( v7 >= 4096 )
  {
    v8 = 4096;
  }
  else if ( v7 >= -4096 )
  {
    v8 = v7;
  }
  if ( !a2 )
    _break(7u, 0);
  return v4 / a2 * a2 + ((((v8 + 4096) >> v6) * a2) >> (13 - v6));
}
// 8001FD70: conditional instruction was optimized away because $a1.4!=0
// 8001FD88: conditional instruction was optimized away because $s1.4<1000u
// 8001FDA4: conditional instruction was optimized away because $a1.4!=0
// 8001FE3C: conditional instruction was optimized away because $s1.4<1000u

//----- (8001FE98) --------------------------------------------------------
int *__fastcall sub_8001FE98(int a1, int a2, int *a3)
{
  __int16 v6; // $s0
  __int16 v7; // $v0
  __int16 v8; // $v0
  __int16 v9; // $s0
  __int16 v10; // $s0
  __int16 v11; // $v0
  int *result; // $v0
  __int16 v13; // [sp+10h] [-20h] BYREF
  __int16 v14; // [sp+12h] [-1Eh]
  __int16 v15; // [sp+14h] [-1Ch]
  __int16 v16; // [sp+16h] [-1Ah]
  __int16 v17; // [sp+18h] [-18h]
  __int16 v18; // [sp+1Ah] [-16h]
  __int16 v19; // [sp+1Ch] [-14h]
  __int16 v20; // [sp+1Eh] [-12h]
  __int16 v21; // [sp+20h] [-10h]

  v6 = sub_8003C2F0(*(_WORD *)(a2 + 8) & 0xFFF);
  v7 = sub_8003C364(*(_WORD *)(a2 + 8) & 0xFFF);
  *(_WORD *)(a1 + 4) = v6;
  *(_WORD *)a1 = v7;
  *(_WORD *)(a1 + 2) = 0;
  *(_WORD *)(a1 + 6) = 0;
  *(_DWORD *)(a1 + 8) = 4096;
  *(_DWORD *)(a1 + 12) = (unsigned __int16)-v6;
  *(_WORD *)(a1 + 16) = v7;
  v9 = sub_8003C2F0(*(_DWORD *)a2);
  v8 = sub_8003C364(*(_DWORD *)a2);
  v13 = 4096;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = v8;
  v18 = -v9;
  v19 = 0;
  v20 = v9;
  v21 = v8;
  MulMatrix(a1, &v13);
  v10 = sub_8003C2F0(-((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) & 0xFFF));
  v11 = sub_8003C364(-((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) & 0xFFF));
  v15 = v10;
  v13 = v11;
  v14 = 0;
  v16 = 0;
  v17 = 4096;
  v18 = 0;
  v19 = -v10;
  v20 = 0;
  v21 = v11;
  result = (int *)MulMatrix(a1, &v13);
  if ( a3 )
    return sub_8004F544((int *)a1, a3);
  return result;
}
// 8004F404: using guessed type int __fastcall MulMatrix(_DWORD, _DWORD);

//----- (8001FFF0) --------------------------------------------------------
int __fastcall sub_8001FFF0(int *a1, _DWORD *a2, int a3, int *a4, int a5, _DWORD *a6)
{
  int result; // $v0
  __int16 v9[16]; // [sp+10h] [-40h] BYREF
  int v10; // [sp+30h] [-20h] BYREF
  int v11; // [sp+34h] [-1Ch]
  int v12; // [sp+38h] [-18h]
  _DWORD v13[4]; // [sp+40h] [-10h] BYREF

  sub_8001FE98((int)v9, a3, a4);
  v13[0] = *a1 >> 4;
  v13[1] = a1[1] >> 4;
  v13[2] = a1[2] >> 4;
  sub_80018DD4(v13, v9, &v10);
  v10 *= 16;
  v11 *= 16;
  v12 *= 16;
  *a6 = v10 + *a2;
  a6[1] = v11 + a2[1];
  result = v12 + a2[2];
  a6[2] = result;
  return result;
}

//----- (800200C8) --------------------------------------------------------
int __fastcall sub_800200C8(_DWORD *a1, int a2, int *a3, _DWORD *a4)
{
  __int16 *v6; // $a1
  int result; // $v0
  int v8; // [sp+10h] [-20h] BYREF
  int v9; // [sp+14h] [-1Ch]
  int v10; // [sp+18h] [-18h]
  _DWORD v11[4]; // [sp+20h] [-10h] BYREF

  v6 = (__int16 *)a1[2];
  v11[0] = *a3 >> 4;
  v11[1] = a3[1] >> 4;
  v11[2] = a3[2] >> 4;
  sub_80018DD4(v11, v6, &v8);
  v8 *= 16;
  v9 *= 16;
  v10 *= 16;
  *a4 = v8 + a1[24];
  a4[1] = v9 + a1[25];
  result = v10 + a1[26];
  a4[2] = result;
  return result;
}

//----- (80020184) --------------------------------------------------------
int __fastcall sub_80020184(_DWORD *a1, int *a2)
{
  __int16 v4; // $s1
  __int16 v6; // [sp+10h] [-40h] BYREF
  __int16 v7; // [sp+12h] [-3Eh]
  __int16 v8; // [sp+14h] [-3Ch]
  __int16 v9; // [sp+16h] [-3Ah]
  __int16 v10; // [sp+18h] [-38h]
  __int16 v11; // [sp+1Ah] [-36h]
  __int16 v12; // [sp+1Ch] [-34h]
  __int16 v13; // [sp+1Eh] [-32h]
  __int16 v14; // [sp+20h] [-30h]
  __int16 v15; // [sp+30h] [-20h] BYREF
  __int16 v16; // [sp+32h] [-1Eh]
  __int16 v17; // [sp+34h] [-1Ch]
  __int16 v18; // [sp+36h] [-1Ah]
  __int16 v19; // [sp+38h] [-18h]
  __int16 v20; // [sp+3Ah] [-16h]
  __int16 v21; // [sp+3Ch] [-14h]
  __int16 v22; // [sp+3Eh] [-12h]
  __int16 v23; // [sp+40h] [-10h]

  v4 = sub_8003C2F0(-(__int16)dword_80065D04);
  v6 = sub_8003C364(-(__int16)dword_80065D04);
  v7 = -v4;
  v8 = 0;
  v9 = v4;
  v10 = v6;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 4096;
  v17 = sub_8003C2F0(-(__int16)dword_80065DA4);
  v15 = sub_8003C364(-(__int16)dword_80065DA4);
  v16 = 0;
  v18 = 0;
  v19 = 4096;
  v20 = 0;
  v21 = -v17;
  v22 = 0;
  v23 = v15;
  MulMatrix(&v6, &v15);
  v17 = v12;
  v15 = v6;
  v16 = v9;
  v18 = v7;
  v19 = v10;
  v20 = v13;
  v21 = v8;
  v22 = v11;
  v23 = v14;
  sub_80018DD4(a1, &v15, a2);
  return -255;
}
// 8004F404: using guessed type int __fastcall MulMatrix(_DWORD, _DWORD);
// 80065D04: using guessed type int dword_80065D04;
// 80065DA4: using guessed type int dword_80065DA4;

//----- (800202CC) --------------------------------------------------------
int __fastcall sub_800202CC(int *a1, _DWORD *a2)
{
  int v3; // $v1
  int v4; // $v0
  _WORD v6[4]; // [sp+10h] [-20h] BYREF
  int v7; // [sp+18h] [-18h]
  int v8; // [sp+1Ch] [-14h]
  int v9; // [sp+20h] [-10h]
  _BYTE v10[8]; // [sp+28h] [-8h] BYREF

  v7 = *a1;
  v8 = a1[1];
  v9 = a1[2];
  SetRotMatrix(&dword_80065CB0);
  SetTransMatrix(&unk_80065C70);
  v6[0] = (v7 - dword_80065CF0) >> 8;
  v6[1] = (v8 - dword_80065CF4) >> 8;
  v6[2] = (v9 - dword_80065CF8) >> 8;
  ((void (__fastcall *)(_WORD *, _DWORD *, _BYTE *))RotTrans)(v6, a2, v10);
  v3 = a2[1] << 8;
  *a2 <<= 8;
  v4 = a2[2];
  a2[1] = -v3;
  a2[2] = v4 << 8;
  return -255;
}
// 8004F674: using guessed type int __fastcall SetRotMatrix(_DWORD);
// 8004F6A4: using guessed type int __fastcall SetTransMatrix(_DWORD);
// 8004F764: using guessed type int __fastcall RotTrans(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 80065CB0: using guessed type int dword_80065CB0;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;

//----- (800203A4) --------------------------------------------------------
int __fastcall sub_800203A4(int *a1, _DWORD *a2)
{
  _WORD v4[4]; // [sp+10h] [-30h] BYREF
  int v5; // [sp+18h] [-28h]
  int v6; // [sp+1Ch] [-24h]
  int v7; // [sp+20h] [-20h]
  _WORD v8[2]; // [sp+28h] [-18h] BYREF
  _BYTE v9[4]; // [sp+2Ch] [-14h] BYREF
  _BYTE v10[4]; // [sp+30h] [-10h] BYREF
  _BYTE v11[4]; // [sp+34h] [-Ch] BYREF
  _BYTE v12[4]; // [sp+38h] [-8h] BYREF
  int v13; // [sp+3Ch] [-4h] BYREF

  v5 = *a1;
  v6 = a1[1];
  v7 = a1[2];
  SetRotMatrix(&dword_80065CB0);
  SetTransMatrix(&unk_80065C70);
  v4[0] = (v5 - dword_80065CF0) >> 8;
  v4[1] = (v6 - dword_80065CF4) >> 8;
  v4[2] = (v7 - dword_80065CF8) >> 8;
  ((void (__fastcall *)(_WORD *, _WORD *, _BYTE *, _BYTE *))RotTransPers)(v4, v8, v9, v10);
  *a2 = (v8[0] - 256) << 8;
  a2[1] = (108 - v8[1]) << 8;
  ReadSZfifo3(v11, v12, &v13);
  a2[2] = v13 << 8;
  return -255;
}
// 8004F674: using guessed type int __fastcall SetRotMatrix(_DWORD);
// 8004F6A4: using guessed type int __fastcall SetTransMatrix(_DWORD);
// 8004F6C4: using guessed type int __fastcall ReadSZfifo3(_DWORD, _DWORD, _DWORD);
// 8004F734: using guessed type int __fastcall RotTransPers(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 80065CB0: using guessed type int dword_80065CB0;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;

//----- (8002049C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_8002049C()
{
  int v0; // $v0
  int v1; // $a1
  int result; // $v0
  int v3; // $t0
  char *v4; // $a3
  int v5; // $a2
  _DWORD *v6; // $v1
  int v7; // $a1
  _DWORD *v8; // $a0
  _DWORD *v9; // $v1

  dword_80060A90 = 0;
  dword_80068E9C = sub_800112F8();
  v0 = sub_800112F8();
  dword_80068E98[0] = v0;
  if ( !dword_80068E9C )
    return -15;
  v1 = 0;
  if ( !v0 )
    return -15;
  v3 = 572;
  v4 = (char *)&unk_80069CB4;
  v5 = 0;
  dword_80068EE8 = 0;
  dword_80068EEC = 0;
  *(_DWORD *)(v0 + 8) = &unk_80069C48;
  dword_80068EE0 = 2;
  dword_80068EE4 = dword_80068E9C;
  do
  {
    v6 = (_DWORD *)(dword_80068E9C + v5);
    v6[2] = v4;
    *v6 = 0;
    v6[17] = &dword_80068EE0;
    v6[19] = 0;
    if ( v1 >= 95 )
      v6[18] = 0;
    else
      v6[18] = dword_80068E9C + v3;
    v3 += 572;
    v4 += 48;
    ++v1;
    v5 += 572;
  }
  while ( v1 < 96 );
  v7 = 0;
  v8 = &unk_80068EA4;
  v9 = &unk_80068EA0;
  do
  {
    *v9 = 2;
    *v8 = 0;
    v8 += 2;
    ++v7;
    v9 += 2;
  }
  while ( v7 < 8 );
  *(_DWORD *)dword_80068E98[0] = 0;
  *(_DWORD *)(dword_80068E98[0] + 68) = 0;
  *(_DWORD *)(dword_80068E98[0] + 76) = 0;
  result = -255;
  *(_DWORD *)(dword_80068E98[0] + 72) = 0;
  return result;
}
// 800204AC: write access to const memory at 80060A90 has been detected
// 80060A90: using guessed type int dword_80060A90;
// 80068E98: using guessed type int dword_80068E98[];
// 80068E9C: using guessed type int dword_80068E9C;
// 80068EE0: using guessed type int dword_80068EE0;
// 80068EE4: using guessed type int dword_80068EE4;
// 80068EE8: using guessed type int dword_80068EE8;
// 80068EEC: using guessed type int dword_80068EEC;

//----- (800205F4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_800205F4()
{
  sub_8001152C(dword_80068E9C);
  dword_80060A90 = 0;
  return sub_8001152C(dword_80068E98[0]);
}
// 80020618: write access to const memory at 80060A90 has been detected
// 80060A90: using guessed type int dword_80060A90;
// 80068E98: using guessed type int dword_80068E98[];
// 80068E9C: using guessed type int dword_80068E9C;

//----- (80020638) --------------------------------------------------------
int sub_80020638()
{
  int result; // $v0

  dword_80068EF8 = *(_DWORD *)(dword_80061044 + 8) << 8;
  result = -14;
  if ( *(_DWORD *)(dword_80061044 + 4) )
    return -255;
  return result;
}
// 80061044: using guessed type int dword_80061044;
// 80068EF8: using guessed type int dword_80068EF8;

//----- (80020670) --------------------------------------------------------
int __fastcall sub_80020670(_DWORD *a1, int a2, int *a3)
{
  char v3; // $s6
  _DWORD *v4; // $fp
  int v7; // $t1
  int result; // $v0
  int v10; // $a3
  int v11; // $s1
  int v12; // $v1
  int v13; // $s4
  unsigned __int8 *v14; // $a2
  __int16 *v15; // $a2
  int v16; // $s7
  int v17; // $a0
  int v18; // $v0
  int v19; // $v1
  bool v20; // dc
  int v21; // $v0
  int v22; // $v0
  int v23; // $s0
  int v24; // $a1
  int v25; // $v1
  int v26; // $a0
  int v27; // $a0
  int v28; // $t0
  int v29; // $a1
  int v30; // $v1
  int v31; // $t0
  int v32; // $v0
  int v33; // $v1
  int v34; // $a0
  int v35; // $a1
  int v36; // $v1
  int v37; // $v0
  unsigned int v38; // $v1
  unsigned int v39; // $v1
  unsigned int v40; // $v0
  int v41; // $a1
  unsigned int v42; // $v0
  int v43; // $a0
  unsigned int v44; // $v0
  int v45; // $v1
  int v46; // $a0
  int v47; // $a1
  int v48; // $s1
  int v49; // $s0
  int v50; // $a1
  int v51; // $v1
  int v52; // $a1
  BOOL v53; // $v0
  int v54; // $a1
  int v55; // $v1
  int v56; // [sp+28h] [-68h]
  int v57; // [sp+2Ch] [-64h]
  int v58; // [sp+2Ch] [-64h]
  int v59; // [sp+30h] [-60h]
  int v60; // [sp+30h] [-60h]
  int v61; // [sp+38h] [-58h]
  int v62; // [sp+3Ch] [-54h]
  int v63; // [sp+40h] [-50h]
  _BYTE v64[4]; // [sp+78h] [-18h] BYREF
  int v65; // [sp+80h] [-10h]
  int v66; // [sp+84h] [-Ch]
  int v67; // [sp+88h] [-8h]

  v7 = a1[60];
  v65 = v7;
  if ( a1 && v7 )
  {
    v10 = *(_DWORD *)(v65 + 4);
    if ( *(_DWORD *)(v10 + 8) == 7 )
    {
      v4 = *(_DWORD **)(v10 + 20);
      v3 = sub_80032DF8(v65, 782, 0, 0, 0, 2, 2);
    }
    v66 = sub_80032EDC(v65, 75, 0, 2);
    while ( 1 )
    {
      v11 = a2 >> 8;
      if ( a2 < 0 )
        v11 = -a2 >> 8;
      v12 = sub_80032EDC(v65, 75, 0, 2);
      v13 = (unsigned __int8)a2;
      if ( v11 == v12 - 1 && v11 )
      {
        v13 = (unsigned __int8)a2 + 256;
        v11 = v12 - 2;
      }
      v14 = &sub_80032710(v65, 75, 0, 0, 0, 2, 0, 0, 0)[6 * (v11 << 8 >> 8)];
      *a3 = ((*(__int16 *)v14 << v3) + *v4) << 8;
      a3[1] = ((*((__int16 *)v14 + 1) << v3) + v4[1]) << 8;
      a3[2] = ((*((__int16 *)v14 + 2) << v3) + v4[2]) << 8;
      result = 1;
      v15 = (__int16 *)(v14 + 6);
      if ( v66 == 1 )
        return result;
      v56 = ((*v15 << v3) + *v4) << 8;
      v57 = ((v15[1] << v3) + v4[1]) << 8;
      v59 = ((v15[2] << v3) + v4[2]) << 8;
      v61 = v56 - *a3;
      v62 = v57 - a3[1];
      v63 = v59 - a3[2];
      if ( (a1[43] & 0x8000) == 0 )
        goto LABEL_60;
      v16 = a1[24] - *a3;
      v17 = a1[26] - a3[2];
      v67 = v17;
      if ( a2 >> 8 >= v66 - 1 )
        goto LABEL_21;
      v18 = v16;
      if ( v16 < 0 )
        v18 = -v16;
      v19 = 2 * a1[77];
      v20 = v19 < v18;
      v21 = v11 + 1;
      if ( !v20 )
      {
        v22 = v17;
        if ( v17 < 0 )
          v22 = -v17;
        v20 = v19 < v22;
        v21 = v11 + 1;
        if ( !v20 )
        {
LABEL_21:
          v23 = sub_8003D9DC(((v56 - *a3) >> 8) * ((v56 - *a3) >> 8) + ((v59 - a3[2]) >> 8) * ((v59 - a3[2]) >> 8));
          if ( !v23 )
          {
            a1[42] |= 0x200u;
            v39 = a2 & 0xFFFFFF00;
            v40 = (a2 & 0xFFFFFF00) + 255;
            if ( v13 >= 255 )
              goto LABEL_58;
            a1[53] = v39;
            if ( v13 >= 0 )
            {
              v40 = v39 + v13;
LABEL_58:
              a1[53] = v40;
            }
            a1[40] = 0;
LABEL_60:
            v41 = a1[42];
            if ( (int)a1[61] >= 0 && a2 >> 8 < v66 - 1 )
              v42 = v41 & 0xFFFFFFFB;
            else
              v42 = v41 | 4;
            a1[42] = v42;
            v43 = a1[42];
            if ( (v43 & 4) == (v41 & 4) || (v44 = v43 | 0x10, (v43 & 0x10) != 0) )
              v44 = a1[42] & 0xFFFFFFEF;
            a1[42] = v44;
            v45 = a1[43];
            if ( (v45 & 4) != 0 )
            {
              if ( (v45 & 2) != 0 && (a1[42] & 4) != 0 )
              {
                v46 = -v61;
                v47 = -v63;
              }
              else
              {
                v46 = v61;
                v47 = v63;
              }
              a1[37] = sub_8004F794(v46, v47);
              if ( (a1[43] & 0x800) != 0 )
              {
                v48 = v61;
                if ( v61 < 0 )
                  v48 = -v61;
                v49 = v63;
                if ( v63 < 0 )
                  v49 = -v63;
                a1[29] = sub_8004F794(v61, v63);
                if ( v49 >= v48 )
                  v50 = v49 + v48 / 2;
                else
                  v50 = v48 + v49 / 2;
                a1[38] = -sub_8004F794(v62, v50);
              }
            }
            else if ( (v45 & 0x800) != 0 )
            {
              v51 = v61;
              if ( v61 < 0 )
                v51 = -v61;
              v52 = v63;
              v53 = v63 < v51;
              if ( v63 < 0 )
              {
                v52 = -v63;
                v53 = -v63 < v51;
              }
              if ( v53 )
                v54 = v51 + v52 / 2;
              else
                v54 = v52 + v51 / 2;
              a1[38] = sub_8004F794(v62, v54);
              a1[29] = sub_8004F794(-v61, -v63);
            }
            v58 = ((v57 - a3[1]) * v13) >> 8;
            v60 = ((v59 - a3[2]) * v13) >> 8;
            *a3 += ((v56 - *a3) * v13) >> 8;
            v55 = a3[2];
            a3[1] += v58;
            result = v66;
            a3[2] = v55 + v60;
            return result;
          }
          memset(v64, 0, sizeof(v64));
          v64[0] = 0x80;
          v24 = (v16 >> 4) * ((v56 - *a3) >> 4);
          v25 = (v67 >> 4) * ((v59 - a3[2]) >> 4);
          if ( v23 == -1 && v24 + v25 == 0x80000000 )
            _break(6u, 0);
          v26 = (v24 + v25) / v23;
          if ( v23 == -1 && v26 == 0x80000000 )
            _break(6u, 0);
          v13 = (v24 + v25) / v23 / v23;
          if ( v13 < 256 || (v21 = v11 + 1, a2 >> 8 >= v66 - 1) )
          {
            v27 = v26 >> 4;
            v28 = v27 * ((v56 - *a3) >> 4);
            if ( v23 == -1 && v28 == 0x80000000 )
              _break(6u, 0);
            v29 = v28 / v23 + *a3;
            v30 = a3[2];
            v31 = v27 * ((v59 - v30) >> 4);
            if ( v23 == -1 && v31 == 0x80000000 )
              _break(6u, 0);
            v32 = v31 / v23 + v30;
            v33 = a1[24];
            v34 = v29 - v33;
            if ( v29 - v33 < 0 )
              v34 = v33 - v29;
            v35 = a1[26];
            v36 = v32 - v35;
            if ( v32 - v35 < 0 )
              v36 = v35 - v32;
            if ( v36 >= v34 )
              v37 = v36 + v34 / 2;
            else
              v37 = v34 + v36 / 2;
            a1[40] = v37;
            if ( a1[77] < a1[40] || v13 < 0 && !v11 || v13 >= 256 )
              a1[42] |= 0x200u;
            if ( (v59 - a3[2]) * ((int)a1[24] >> 8)
               - (v56 - *a3) * ((int)a1[26] >> 8)
               - v59 * (*a3 >> 8)
               + v56 * (a3[2] >> 8) < 0 )
              a1[40] = -a1[40];
            v38 = a2 & 0xFFFFFF00;
            if ( v13 >= 255 )
            {
              a1[53] = (a2 & 0xFFFFFF00) + 255;
            }
            else
            {
              a1[53] = v38;
              if ( v13 >= 0 )
                a1[53] = v38 + v13;
            }
            goto LABEL_60;
          }
        }
      }
      a2 = v21 << 8;
    }
  }
  return -14;
}
// 800209D8: conditional instruction was optimized away because $s0.4!=0
// 80020A58: conditional instruction was optimized away because $s0.4!=0
// 80020AB4: conditional instruction was optimized away because $s0.4!=0
// 800207B8: variable 'v3' is possibly undefined
// 800207B4: variable 'v4' is possibly undefined
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);

//----- (80020F04) --------------------------------------------------------
int __fastcall sub_80020F04(int a1)
{
  int result; // $v0
  __int16 *v2; // $a1
  unsigned int v3; // $v1
  bool v4; // dc
  int v5; // $v1

  result = -2147024896;
  v2 = &word_8006AEE8;
  if ( word_8006AEE8 )
  {
    do
    {
      v3 = (unsigned __int16)*v2;
      v4 = v3 >> 9 != a1;
      v5 = v3 & 0x1FF;
      if ( !v4 )
        dword_8006B688[v5] |= 8u;
      result = (unsigned __int16)*++v2;
    }
    while ( *v2 );
  }
  return result;
}
// 8006AEE8: using guessed type __int16 word_8006AEE8;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (80020F68) --------------------------------------------------------
int __fastcall sub_80020F68(int a1)
{
  __int16 *v1; // $a2
  __int16 *v2; // $a3
  int result; // $v0
  int v4; // $a0

  v1 = &word_8006AEE8;
  v2 = 0;
  result = *(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) & 0x2000;
  v4 = (a1 >> 8) | (*(unsigned __int16 *)(dword_80061044 + 8) << 9);
  if ( !result )
  {
    result = (unsigned __int16)word_8006AEE8;
    if ( word_8006AEE8 )
    {
      result = (unsigned __int16)word_8006AEE8;
      while ( result != (unsigned __int16)v4 )
      {
        if ( result == 1 )
          v2 = v1;
        result = (unsigned __int16)*++v1;
        if ( !*v1 )
          goto LABEL_8;
      }
    }
    else
    {
LABEL_8:
      if ( !v2 )
        v2 = v1;
      *v2 = v4;
    }
  }
  return result;
}
// 80061044: using guessed type int dword_80061044;
// 80065D5C: using guessed type int dword_80065D5C;
// 8006AEE8: using guessed type __int16 word_8006AEE8;

//----- (80021008) --------------------------------------------------------
int __fastcall sub_80021008(int a1)
{
  __int16 *v1; // $a1
  int result; // $v0
  int v3; // $a0

  v1 = &word_8006AEE8;
  result = *(unsigned __int16 *)(dword_80061044 + 8) << 9;
  v3 = (a1 >> 8) | result;
  if ( word_8006AEE8 )
  {
    result = (unsigned __int16)word_8006AEE8;
    while ( result != (unsigned __int16)v3 )
    {
      result = (unsigned __int16)*++v1;
      if ( !*v1 )
        return result;
    }
    result = (unsigned __int16)v1[1];
    if ( v1[1] )
      *v1 = 1;
    else
      *v1 = 0;
  }
  return result;
}
// 80061044: using guessed type int dword_80061044;
// 8006AEE8: using guessed type __int16 word_8006AEE8;

//----- (80021084) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80021084()
{
  _DWORD *v0; // $gp
  int v1; // $v1
  int v2; // $s0
  int v3; // $s5
  int v4; // $a0
  int *v5; // $v0
  int v6; // $v1
  char *v7; // $v0
  int v8; // $gp
  int v9; // $v0
  int v10; // $a1
  int v11; // $s2
  int v12; // $s3
  int v13; // $s0
  int v14; // $a0
  int result; // $v0

  dword_8006909C = 0;
  if ( *(_DWORD *)dword_80061040 == 1670788223 )
  {
    *(_DWORD *)(dword_80061044 + 4) = 0;
  }
  else
  {
    v1 = dword_80061044;
    v0[142] = 0;
    v0[143] = 0;
    dword_80068F08 = 201457663;
    dword_80068F1C = 201457663;
    v2 = dword_80069104;
    v3 = 0;
    if ( *(_DWORD *)(v1 + 8) != v0[145] )
    {
      while ( 1 )
        ;
    }
    if ( *(_DWORD *)(dword_80061044 + 8) == 2 )
    {
      v2 = 2;
      if ( (dword_80069060 & 1) == 0 )
      {
        v4 = dword_8006905C;
        if ( dword_8006905C == 99 )
          v4 = dword_80068F48;
        if ( v4 != 99 )
          v4 >>= 8;
        v5 = dword_8005C5E8;
        while ( 1 )
        {
          v6 = *(char *)v5;
          v7 = (char *)v5 + 1;
          v2 = *v7;
          v5 = (int *)(v7 + 1);
          if ( v6 < 0 )
            break;
          if ( v6 == v4 )
            goto LABEL_13;
        }
        v2 = 1;
      }
    }
LABEL_13:
    dword_80069104 = v2;
    if ( v2 >= *(_DWORD *)dword_80061044 )
    {
      v2 = 0;
      dword_80069104 = 0;
    }
    memset(dword_8006B688, 0, 3072);
    sub_80020F04(*(_DWORD *)(dword_80061044 + 8));
    sub_800188EC();
    if ( *(_DWORD *)(v8 + 176) == 1 )
    {
      v9 = dword_80061044;
      v10 = dword_80065DFC;
      *(_DWORD *)(v8 + 176) = 0;
      *(_DWORD *)(v9 + 24 * v2 + 732) = v10;
      *(_DWORD *)(dword_80061044 + 24 * v2 + 736) = dword_80065E00;
      v3 = dword_80065E04;
    }
    dword_80065D5C = 0;
    dword_80065D64 = 0;
    dword_80065D70 = 0;
    v11 = 24 * v2;
    v12 = 24 * v2 + 732;
    v13 = sub_800142B4((unsigned int *)(dword_80061044 + v12), 1, 1);
    dword_80060A64 = 1670788223;
    v14 = v13;
    if ( dword_80068F3C == 1536 )
    {
      sub_80030940(&dword_80060A64);
      v14 = v13;
    }
    sub_800215E8(
      v14,
      *(_DWORD *)(v14 + 4 * (3 * *(_DWORD *)(dword_80061044 + v11 + 736) + *(_DWORD *)(*(_DWORD *)(v14 + 16) + 388)) + 16),
      v3,
      0);
    sub_8001440C((unsigned int *)(dword_80061044 + v12), 1);
  }
  result = -255;
  v0[45] = 0;
  return result;
}
// 80021274: write access to const memory at 80060A64 has been detected
// 800210D8: variable 'v0' is possibly undefined
// 800211E4: variable 'v8' is possibly undefined
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 8005C5E8: using guessed type int dword_8005C5E8[19];
// 80060A64: using guessed type int dword_80060A64;
// 80061040: using guessed type int dword_80061040;
// 80061044: using guessed type int dword_80061044;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065DFC: using guessed type int dword_80065DFC;
// 80065E00: using guessed type int dword_80065E00;
// 80065E04: using guessed type int dword_80065E04;
// 80068F08: using guessed type int dword_80068F08;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F3C: using guessed type int dword_80068F3C;
// 80068F48: using guessed type int dword_80068F48;
// 8006905C: using guessed type int dword_8006905C;
// 80069060: using guessed type int dword_80069060;
// 8006909C: using guessed type int dword_8006909C;
// 80069104: using guessed type int dword_80069104;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (80021330) --------------------------------------------------------
int __fastcall sub_80021330(int a1)
{
  int v2; // $t1
  int v3; // $a3
  int v4; // $a1
  int v5; // $a0
  int v6; // $a2
  int v7; // $v0
  _DWORD *v8; // $v1
  int i; // $a0

  v2 = *(_DWORD *)(*(_DWORD *)(a1 + 16) + 392) / 3;
  v3 = 0;
  if ( v2 > 0 )
  {
    v4 = 0;
    do
    {
      v5 = 1;
      v6 = *(_DWORD *)(a1 + 4 * (v4 + *(_DWORD *)(*(_DWORD *)(a1 + 16) + 388)) + 16);
      *(_DWORD *)(v6 + 4) = a1;
      do
      {
        v7 = *(_DWORD *)(a1 + 4 * (v4 + v5++ + *(_DWORD *)(*(_DWORD *)(a1 + 16) + 388)) + 16);
        *(_DWORD *)(v7 + 4) = a1;
        *(_DWORD *)(v7 + 8) = v6;
      }
      while ( v5 < 3 );
      ++v3;
      v4 += 3;
    }
    while ( v3 < v2 );
  }
  v8 = *(_DWORD **)(a1 + 16);
  for ( i = 0; i < v8[99]; ++i )
  {
    *(_DWORD *)(*(_DWORD *)(a1 + 4 * (i + v8[97] + v8[98]) + 16) + 4) = a1;
    v8 = *(_DWORD **)(a1 + 16);
  }
  if ( dword_80065D5C && sub_800214B8(dword_80065D5C, a1) )
    sub_80021530(a1);
  return -255;
}
// 80065D5C: using guessed type int dword_80065D5C;

//----- (80021474) --------------------------------------------------------
int __fastcall sub_80021474(int a1)
{
  int v1; // $s1

  v1 = dword_80065D60;
  dword_80065D60 = dword_80065D5C;
  sub_8002157C(a1);
  dword_80065D60 = v1;
  return -255;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D60: using guessed type int dword_80065D60;

//----- (800214B8) --------------------------------------------------------
int __fastcall sub_800214B8(int a1, int a2)
{
  int v2; // $v1
  int v3; // $a0
  int v4; // $a1
  int v5; // $a3
  int v6; // $a2
  int v7; // $v1

  v2 = *(_DWORD *)(a1 + 16);
  v3 = 0;
  if ( *(int *)(v2 + 400) > 0 )
  {
    v4 = *(_DWORD *)(a2 + 4);
    v5 = *(_DWORD *)(v2 + 400);
    v6 = v2;
    do
    {
      v7 = *(_DWORD *)(v6 + 404);
      if ( (v7 & 1) != 0 )
      {
        v6 += 4;
        if ( v7 == v4 )
          return 1;
        ++v3;
      }
      else
      {
        v6 += 4;
        if ( *(_DWORD *)(v7 + 4) == v4 )
          return 1;
        ++v3;
      }
    }
    while ( v3 < v5 );
  }
  return 0;
}

//----- (80021530) --------------------------------------------------------
int __fastcall sub_80021530(int a1)
{
  int v1; // $a0
  int result; // $v0

  v1 = *(_DWORD *)(a1 + 16);
  result = *(_DWORD *)(v1 + 700) & 1;
  if ( !result )
  {
    dword_80069210 = 0;
    dword_80069218 = 0;
    dword_80069214 = 102400;
    result = *(_DWORD *)(v1 + 700) | 1;
    *(_DWORD *)(v1 + 700) = result;
  }
  return result;
}
// 80069210: using guessed type int dword_80069210;
// 80069214: using guessed type int dword_80069214;
// 80069218: using guessed type int dword_80069218;

//----- (8002157C) --------------------------------------------------------
unsigned int __fastcall sub_8002157C(int a1)
{
  int v1; // $s0
  unsigned int result; // $v0

  v1 = *(_DWORD *)(a1 + 16);
  if ( MEMORY[0x18] == a1 )
    MEMORY[0x18] = dword_80065D60;
  result = *(_DWORD *)(v1 + 700) & 1;
  if ( result )
  {
    sub_8001AA98(a1);
    result = *(_DWORD *)(v1 + 700) & 0xFFFFFFFC;
    *(_DWORD *)(v1 + 700) = result;
  }
  return result;
}
// 80060A90: using guessed type int dword_80060A90;
// 80065D60: using guessed type int dword_80065D60;

//----- (800215E8) --------------------------------------------------------
int __fastcall sub_800215E8(int a1, int a2, int a3, char a4)
{
  int v4; // $gp
  char v7; // $s5
  int v8; // $s3
  int v9; // $s1
  int v10; // $s2
  int v11; // $s0
  int v12; // $s7
  int v13; // $s4
  unsigned __int8 *v14; // $v0
  int v15; // $gp
  unsigned __int16 *v16; // $a2
  int v17; // $s1
  unsigned __int16 *v18; // $v0
  int v19; // $gp
  unsigned __int16 *v20; // $v0
  int v21; // $gp
  int v22; // $s2
  int v23; // $s3
  unsigned __int16 *v24; // $a2
  unsigned __int16 *v25; // $v0
  int v26; // $gp
  unsigned __int16 *v27; // $v0
  int v28; // $gp
  unsigned __int8 *v29; // $v0
  int v30; // $s4
  int v31; // $a0
  int v32; // $a1
  int v33; // $s1
  int v34; // $s3
  int v35; // $s2
  int v36; // $a0
  int v37; // $v0
  int v38; // $s1
  unsigned __int8 *v39; // $v0
  int v40; // $s1
  unsigned __int8 *v41; // $v0
  int *v42; // $v0
  int *v43; // $v1
  int v44; // $t4
  int v45; // $t1
  int v46; // $t2
  int v47; // $v0
  int result; // $v0
  _DWORD *v49; // $v0
  int v50; // $t4
  int v51; // $t1
  int v52; // [sp+30h] [-18h]
  int v53; // [sp+34h] [-14h]
  int v54; // [sp+38h] [-10h]
  int v55; // [sp+3Ch] [-Ch]
  int v56; // [sp+40h] [-8h]
  int v57; // [sp+44h] [-4h]

  v7 = 0;
  v56 = 1;
  if ( (a4 & 8) != 0 )
    v7 = 7;
  if ( a2 && a1 )
  {
    if ( a1 != dword_80065D5C )
    {
      v7 |= 1u;
      if ( dword_80065D5C )
      {
        v56 = a4 & 2;
        if ( (a4 & 0x10) == 0 )
        {
          v8 = *(_DWORD *)(dword_80065D5C + 16);
          dword_80065D60 = a1;
          v9 = 0;
          if ( *(int *)(v8 + 400) > 0 )
          {
            v10 = 404;
            do
            {
              if ( sub_8001440C((unsigned int *)(v8 + v10), 0) )
              {
                v11 = sub_800142B4((unsigned int *)(v8 + v10), 1, 0);
                if ( !sub_800214B8(a1, v11) )
                  sub_8002157C(v11);
              }
              ++v9;
              v10 += 4;
            }
            while ( v9 < *(_DWORD *)(v8 + 400) );
          }
        }
      }
    }
    if ( a2 == dword_80065D64 && (a4 & 8) == 0 )
    {
      v12 = dword_80065D7C;
      v55 = dword_80065D74;
      v53 = dword_80065D80;
    }
    else
    {
      v7 |= 2u;
      v12 = sub_80032EDC(a2, 639, 0, 2);
      v55 = (v12 - 1) << 8;
      v53 = sub_80032DF8(a2, 41, 0, 0, 0, 2, 0);
    }
    v54 = dword_80065D80;
    if ( v53 != dword_80065D80 )
      v7 |= 0x10u;
    if ( a3 >= 0 )
    {
      if ( v55 < a3 )
        a3 = v55;
    }
    else
    {
      a3 = 0;
    }
    if ( a3 != dword_80065D70 )
      v7 |= 4u;
    v52 = a3 >> 8;
    if ( a3 >> 8 != dword_80065D78 )
      v7 |= 8u;
    dword_80065DA8 = dword_80065CFC;
    dword_80065DAC = dword_80065D00;
    dword_80065DB0 = dword_80065D04;
    v13 = **(_DWORD **)(a1 + 16);
    if ( (v7 & 7) == 0 )
      goto LABEL_78;
    if ( v13 )
    {
      v14 = sub_80032710(a2, 259, 0, 0, 0, 2, 0, 0, 0);
      v57 = sub_800142B4((unsigned int *)v14, 1, 1);
    }
    if ( (v7 & 2) != 0 )
    {
      sub_8001AC74();
      sub_80014468();
      v16 = *(unsigned __int16 **)(v15 + 560);
      *(_DWORD *)(v15 + 560) = *(_DWORD *)(v15 + 576);
      *(_DWORD *)(v15 + 576) = v16;
      if ( v52 >= v12 >> 1 )
      {
        if ( v13 )
        {
          v20 = sub_8002AA14(*(unsigned __int16 **)(v57 + 4 * v12 + 16), *(unsigned __int16 **)(v15 + 556), v16, 0);
          *(_DWORD *)(v21 + 556) = v20;
        }
        v17 = v12 - 1;
        sub_80022C9C(a2, (v12 - 1) << 8, 1);
        sub_8001AD68(a2, (v12 - 1) << 8, 1);
      }
      else
      {
        v17 = 0;
        if ( v13 )
        {
          v18 = sub_8002AA14(*(unsigned __int16 **)(v57 + 16), *(unsigned __int16 **)(v15 + 556), v16, 1);
          *(_DWORD *)(v19 + 556) = v18;
          v17 = 0;
        }
        sub_80022C9C(a2, 0, 2);
        sub_8001AD68(a2, 0, 2);
      }
    }
    else
    {
      v17 = dword_80065D78;
    }
    v22 = v52 - v17;
    if ( v52 != v17 )
    {
      v23 = 4 * v17 + v57;
      do
      {
        v24 = *(unsigned __int16 **)(v4 + 560);
        *(_DWORD *)(v4 + 560) = *(_DWORD *)(v4 + 576);
        *(_DWORD *)(v4 + 576) = v24;
        if ( v22 <= 0 )
        {
          if ( v13 )
          {
            v27 = sub_8002AA14(*(unsigned __int16 **)(v23 + 16), *(unsigned __int16 **)(v4 + 556), v24, 0);
            *(_DWORD *)(v28 + 556) = v27;
          }
          v23 -= 4;
          sub_80022C9C(a2, --v17 << 8, 1);
          sub_8001AD68(a2, v17 << 8, 1);
          ++v22;
        }
        else
        {
          v23 += 4;
          ++v17;
          if ( v13 )
          {
            v25 = sub_8002AA14(*(unsigned __int16 **)(v23 + 16), *(unsigned __int16 **)(v4 + 556), v24, 1);
            *(_DWORD *)(v26 + 556) = v25;
          }
          sub_80022C9C(a2, v17 << 8, 2);
          sub_8001AD68(a2, v17 << 8, 2);
          --v22;
        }
      }
      while ( v22 );
    }
    if ( v13 )
    {
      v29 = sub_80032710(a2, 259, 0, 0, 0, 2, 0, 0, 0);
      sub_8001440C((unsigned int *)v29, 1);
    }
    sub_8001AE64(*(_DWORD *)(a2 + 4), 315);
    if ( (v7 & 7) == 0 )
      goto LABEL_78;
    if ( (v7 & 1) != 0 )
    {
      v30 = *(_DWORD *)(a1 + 16);
      if ( dword_80068F3C == 1536 && (a4 & 2) == 0 )
        v56 = 0;
      dword_80065D5C = a1;
      dword_80065D64 = a2;
      dword_80065D70 = a3;
      dword_80065D78 = a3 >> 8;
      dword_80065D7C = v12;
      dword_80065D74 = v55;
      dword_80065D80 = v53;
      sub_80021E60(v30 + 704, a4);
      if ( v56 )
        sub_80012EAC(v31, v32);
      v33 = 0;
      if ( *(int *)(v30 + 400) > 0 )
      {
        v34 = 404;
        v35 = v30;
        do
        {
          if ( (*(_DWORD *)(v35 + 468) & 0x10) != 0 )
          {
            if ( sub_8001440C((unsigned int *)(v30 + v34), 0) )
            {
              v36 = sub_800142B4((unsigned int *)(v30 + v34), 1, 0);
              if ( (*(_DWORD *)(*(_DWORD *)(v36 + 16) + 700) & 1) == 0 )
                sub_80021530(v36);
            }
          }
          v34 += 4;
          ++v33;
          v35 += 4;
        }
        while ( v33 < *(_DWORD *)(v30 + 400) );
        v37 = v7 & 0x10;
        goto LABEL_69;
      }
    }
    else
    {
      dword_80065D5C = a1;
      dword_80065D64 = a2;
      dword_80065D70 = a3;
      dword_80065D78 = a3 >> 8;
      dword_80065D7C = v12;
      dword_80065D74 = v55;
      dword_80065D80 = v53;
    }
    v37 = v7 & 0x10;
LABEL_69:
    if ( v37 )
      sub_80024330(v54);
    sub_8002437C(dword_80065D8C);
    sub_80028740(dword_80065D64, dword_80065D70, &dword_80065D14, dword_80065DB4);
    dword_80065D58 = sub_80032DF8(dword_80065D64, 426, dword_80065D70, 0, 0, 3, 0);
    v38 = 0xFFFF;
    if ( (v7 & 3) != 0 )
    {
      v39 = sub_80032710(dword_80065D64, 374, 0, 0, 0, 1, 0, 0, 0);
      if ( v39 )
        v38 = *(__int16 *)v39;
      dword_80065D90 = v38;
      v40 = 0xFFFF;
      v41 = sub_80032710(dword_80065D64, 374, dword_80065D74, 0, 0, 1, 0, 0, 0);
      if ( v41 )
        v40 = *(__int16 *)v41;
      dword_80065D94 = v40;
    }
    sub_8001AE64(dword_80065D5C, -1);
LABEL_78:
    v42 = &dword_80065CF0;
    v43 = &dword_80065D14;
    do
    {
      v44 = v43[1];
      v45 = v43[2];
      v46 = v43[3];
      *v42 = *v43;
      v42[1] = v44;
      v42[2] = v45;
      v42[3] = v46;
      v43 += 4;
      v42 += 4;
    }
    while ( v43 != (int *)&unk_80065D34 );
    *v42 = *v43;
    v47 = sub_80025C0C();
    if ( dword_80065D54 != v47 )
    {
      dword_80065D54 = v47;
      SetGeomScreen(v47);
    }
  }
  dword_80061A70 = 0;
  result = *(_DWORD *)(dword_80061044 + 16);
  if ( result != 1670788223 )
  {
    sub_8001A42C(dword_80068ED0, 0, 0, 0, 0, 1);
    v49 = (_DWORD *)(dword_80061044 + 24 * dword_80069104);
    v50 = v49[187];
    v51 = v49[188];
    MEMORY[0x60] = v49[186];
    MEMORY[0x64] = v50;
    MEMORY[0x68] = v51;
    MEMORY[0x18] = dword_80065D5C;
    dword_8006900C = -1;
    return sub_8002FF3C(0, dword_80065DD8, 1, 0);
  }
  return result;
}
// 800218A0: variable 'v15' is possibly undefined
// 800218D0: variable 'v57' is possibly undefined
// 800218DC: variable 'v19' is possibly undefined
// 8002192C: variable 'v21' is possibly undefined
// 80021988: variable 'v4' is possibly undefined
// 800219B8: variable 'v26' is possibly undefined
// 80021A00: variable 'v28' is possibly undefined
// 80021B20: variable 'v31' is possibly undefined
// 80021B20: variable 'v32' is possibly undefined
// 8004F724: using guessed type int __fastcall SetGeomScreen(_DWORD);
// 80060A90: using guessed type int dword_80060A90;
// 80061044: using guessed type int dword_80061044;
// 80061A70: using guessed type int dword_80061A70;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D14: using guessed type int dword_80065D14;
// 80065D54: using guessed type int dword_80065D54;
// 80065D58: using guessed type int dword_80065D58;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D60: using guessed type int dword_80065D60;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065D74: using guessed type int dword_80065D74;
// 80065D78: using guessed type int dword_80065D78;
// 80065D7C: using guessed type int dword_80065D7C;
// 80065D80: using guessed type int dword_80065D80;
// 80065D8C: using guessed type int dword_80065D8C;
// 80065D90: using guessed type int dword_80065D90;
// 80065D94: using guessed type int dword_80065D94;
// 80065DA8: using guessed type int dword_80065DA8;
// 80065DAC: using guessed type int dword_80065DAC;
// 80065DB0: using guessed type int dword_80065DB0;
// 80065DB4: using guessed type _DWORD dword_80065DB4[3];
// 80065DD8: using guessed type _DWORD dword_80065DD8[9];
// 80068ED0: using guessed type _DWORD dword_80068ED0[2];
// 80068F3C: using guessed type int dword_80068F3C;
// 8006900C: using guessed type int dword_8006900C;
// 80069104: using guessed type int dword_80069104;

//----- (80021E60) --------------------------------------------------------
int __fastcall sub_80021E60(int a1, char a2)
{
  int result; // $v0

  result = *(_DWORD *)(a1 + 28);
  dword_80068F70 = result;
  if ( (a2 & 4) == 0 )
    return sub_8003505C();
  return result;
}
// 80068F70: using guessed type int dword_80068F70;

//----- (80021E94) --------------------------------------------------------
int *sub_80021E94()
{
  unsigned __int8 *v0; // $v0
  unsigned __int8 *v1; // $v0
  void (*v2)(); // $v1
  unsigned __int8 *v3; // $a0
  __int16 *v4; // $a0
  unsigned __int8 *v5; // $a2
  int *v6; // $v0
  int v7; // $v0
  int *v8; // $v1
  int *v9; // $v0
  __int16 *v10; // $v0
  int v11; // $s0
  int v12; // $a0
  int *v13; // $v1
  int v14; // $v0
  int v15; // $s3
  int v16; // $s0
  int v17; // $a1
  int v18; // $a0
  int v19; // $v1
  int v20; // $s1
  int v21; // $s0
  int v22; // $s2
  unsigned int v23; // $v1
  int v24; // $v0
  char *v25; // $a0
  _DWORD *v26; // $s3
  int v27; // $s1
  int v28; // $s0
  int v29; // $s2
  int v30; // $s1
  int v31; // $s0
  int v32; // $s2
  int v33; // $s1
  int v34; // $s0
  int v35; // $s2
  unsigned int v36; // $v0
  unsigned int v37; // $v0
  int *result; // $v0
  unsigned int v39; // $v1
  char *v40; // $a0
  int v41; // $s3
  int v42; // $s1
  int v43; // $s0
  int v44; // $s2
  unsigned __int8 v45[8]; // [sp+28h] [-38h] BYREF
  unsigned __int8 v46[8]; // [sp+30h] [-30h] BYREF
  unsigned __int8 v47[16]; // [sp+38h] [-28h] BYREF
  unsigned __int8 v48[8]; // [sp+48h] [-18h] BYREF
  int v49; // [sp+50h] [-10h] BYREF
  int v50; // [sp+54h] [-Ch] BYREF
  int v51; // [sp+58h] [-8h] BYREF
  int v52; // [sp+5Ch] [-4h] BYREF

  dword_800676B0[0] = (int)&dword_80065CF0;
  dword_800676B4 = (int)&dword_80065D20;
  dword_800676B8 = (int)&unk_80065DB4;
  dword_800676BC = (int)&dword_80065CB0;
  dword_80067A34 = 3;
  dword_80067A30 = 4;
  dword_80067A2C = 4;
  dword_800676C0 = (int)&word_80065C90;
  dword_80067A1C = 6;
  dword_800676C4 = (int)nullsub_3;
  word_800679F0 = (MEMORY[0x60] - dword_80065CF0) >> 8;
  word_800679F2 = (MEMORY[0x64] - dword_80065CF4) >> 8;
  dword_800679F4 = (MEMORY[0x68] - dword_80065CF8) >> 8;
  v0 = sub_80032710(dword_80065D64, 775, dword_80065D70, 0, 0, 0, 0, 0, 0);
  if ( v0 )
    dword_800676E0 = *(unsigned __int16 *)v0;
  else
    dword_800676E0 = 6;
  v1 = sub_80032710(dword_80065D6C, 389, dword_80065D70, 0, 0, 0, 0, 0, 0);
  if ( v1 )
    dword_80067A28 = *(_DWORD *)v1;
  else
    dword_80067A28 = 0;
  dword_800690D4 = dword_80067A28;
  sub_80011F68();
  if ( dword_80067A28 >= 0 )
    v2 = sub_80041550;
  else
    v2 = (void (*)())&loc_80041618;
  v3 = 0;
  dword_800676D8 = (int)v2;
  if ( (dword_80067A28 & 0x1001) != 0 )
    v3 = sub_80032710(dword_80065D6C, 390, dword_80065D70, 0, 0, 0, 0, 0, 0);
  if ( v3 )
  {
    if ( (dword_80067A28 & 1) != 0 )
      dword_80067A1C = 10;
    dword_800676E8 = *((_DWORD *)v3 + 2);
    dword_800676EC = *((_DWORD *)v3 + 1);
    dword_80067A20 = *((_DWORD *)v3 + 3);
    dword_80069208 = dword_80067A20;
    dword_80067A24 = *((_DWORD *)v3 + 4);
    dword_8006920C = dword_80067A24;
    if ( (dword_80067A28 & 0x40000000) != 0 )
    {
      dword_800676E4 = 16 * dword_800690D0;
    }
    else
    {
      dword_800676E4 = 16 * *(_DWORD *)v3;
      dword_800690D0 = *(_DWORD *)v3;
      dword_8006906C = dword_800690D0;
    }
  }
  else
  {
    dword_80067A20 = 0;
    dword_80067A24 = 0;
    dword_800690D0 = 0x80000000;
  }
  if ( (dword_80067A28 & 0x400000) != 0 )
  {
    v4 = (__int16 *)sub_80032710(dword_80065D6C, 682, dword_80065D70, 0, 0, 3, v45, 0, 0);
    if ( *(_DWORD *)(dword_80061044 + 8) == 40 )
      dword_800676D8 = (int)&loc_800415A4;
    if ( v4 )
    {
      dword_80067748 = *v4;
      dword_8006773C = v4[1];
      dword_80067744 = v4[2];
      dword_80067740 = v4[3];
    }
  }
  else
  {
    dword_80067748 = 0;
  }
  if ( (dword_80067A28 & 0x10) != 0 )
  {
    v5 = sub_80032710(dword_80065D6C, 437, dword_80065D70, 0, 0, 3, v47, 0, 0);
    if ( v5 )
    {
      word_80067714 = word_8006771C;
      word_80067716 = word_8006771E;
      dword_80067718 = dword_80067720;
      if ( (dword_80068F1C & 0x10000000) != 0 )
      {
        word_8006771C -= word_8006904C;
        word_8006771E -= word_80069050;
        dword_80067720 -= dword_80069054;
      }
      else
      {
        word_8006771C -= *(_WORD *)v5;
        word_8006771E -= *((_WORD *)v5 + 1);
        dword_80067720 -= *((__int16 *)v5 + 2);
      }
      if ( (dword_80068F1C & 0x10000000) != 0 )
      {
        dword_80067738 = dword_80069058;
      }
      else
      {
        dword_80067738 = *((__int16 *)v5 + 3);
        dword_80069058 = dword_80067738;
      }
      dword_80067730 = *((__int16 *)v5 + 4);
      dword_80067734 = *((__int16 *)v5 + 5);
    }
    v6 = (int *)sub_80032710(dword_80065D6C, 438, dword_80065D70, 0, 0, 0, 0, 0, 0);
    if ( v6 )
    {
      dword_80067724 = *v6;
      dword_80067728 = v6[1];
      dword_8006772C = v6[2];
    }
  }
  else
  {
    dword_80067738 = 0;
  }
  if ( (dword_80067A28 & 0x800004) != 0 )
  {
    sub_80032710(dword_80065D6C, 439, dword_80065D70, 0, 0, 0, 0, 0, 0);
    dword_800676C4 = (int)sub_80041E88;
    dword_800676C8 = (int)&loc_80041648;
    dword_800676CC = (int)sub_800418C4;
    dword_800676D0 = (int)&loc_80042EF8;
    dword_800676D4 = (int)&loc_80042F70;
    dword_800676DC = (int)sub_8003E520;
    dword_80067A1C = 8;
    dword_80067A2C = 5;
    if ( dword_800690D8 )
    {
      dword_80067708 = ((((*(_DWORD *)(dword_800690D8 + 100) - dword_80065CF4) >> 8) & 0xFFFE) << 16)
                     | (unsigned __int16)((*(_DWORD *)(dword_800690D8 + 96) - dword_80065CF0) >> 8);
      v7 = (*(_DWORD *)(dword_800690D8 + 104) - dword_80065CF8) >> 8;
    }
    else
    {
      dword_80067708 = (int)&unk_80008000;
      v7 = -32768;
    }
    dword_8006770C = v7;
    if ( dword_80068FD0 )
    {
      dword_80067700 = ((((*(_DWORD *)(dword_80068FD0 + 100) - dword_80065CF4) >> 8) & 0xFFFE) << 16)
                     | (unsigned __int16)((*(_DWORD *)(dword_80068FD0 + 96) - dword_80065CF0) >> 8);
      dword_80067704 = (*(_DWORD *)(dword_80068FD0 + 104) - dword_80065CF8) >> 8;
    }
    else
    {
      dword_80067700 = (int)&unk_80008000;
      dword_80067704 = -32768;
    }
  }
  if ( (dword_80067A28 & 8) != 0 )
  {
    v8 = (int *)sub_80032710(dword_80065D6C, 440, dword_80065D70, 0, 0, 0, 0, 0, 0);
    if ( v8 )
    {
      dword_800676F0 = *v8;
      dword_800676F4 = v8[1];
    }
    dword_800676C4 = (int)sub_80041E1C;
    dword_800676C8 = (int)sub_80041C64;
    dword_800676CC = (int)&loc_80041D28;
    dword_800676D0 = (int)&loc_80041CF0;
    dword_800676D4 = (int)&loc_80041DD8;
    dword_80067A10 = dword_80069118;
  }
  if ( (dword_80067A28 & 0x8000000) != 0 )
  {
    v9 = (int *)sub_80032710(dword_80065D6C, 440, dword_80065D70, 0, 0, 0, 0, 0, 0);
    if ( v9 )
    {
      dword_800676F0 = *v9;
      dword_800676F4 = v9[1];
    }
    dword_800676C4 = (int)&loc_80043004;
    dword_800676C8 = (int)sub_800428D0;
    dword_800676CC = (int)&loc_800429E4;
    dword_800676D0 = (int)&loc_80042994;
    dword_800676D4 = (int)&loc_80042ADC;
    dword_800676DC = (int)sub_8003FA00;
    dword_80067A1C = 8;
    dword_80067A10 = 42124032;
    dword_80067A2C = 5;
  }
  if ( (dword_80067A28 & 0x40) != 0 )
  {
    dword_800676C4 = (int)sub_80041E58;
    dword_800676C8 = (int)&loc_80041648;
    dword_800676CC = (int)&loc_800418CC;
    dword_800676D0 = (int)sub_80042648;
    dword_800676D4 = (int)&loc_80042764;
  }
  if ( (dword_80067A28 & 0x4000000) != 0 )
  {
    v10 = (__int16 *)sub_80032710(dword_80065D68, 761, dword_80065D70, 0, 0, 3, v48, 0, 0);
    dword_80069188 = *v10 << 8;
    dword_8006918C = v10[1] << 8;
    dword_80069190 = v10[2] << 8;
    dword_80069194 = v10[3] << 8;
  }
  dword_800691F8 = sub_80032DF8(dword_80065D6C, 837, dword_80065D70, 0, 0, 3, 0);
  if ( (dword_80067A28 & 0x1000000) != 0 )
  {
    v11 = 0;
    sub_80032710(dword_80065D68, 749, dword_80065D70, 0, 0, 3, v46, 0, 0);
    v49 = sub_800120AC("Wat1R");
    v12 = sub_800142B4((unsigned int *)&v49, 1, 0);
    v13 = dword_800676B0;
    do
    {
      v14 = *(_DWORD *)(v12 + 16);
      v12 += 4;
      ++v11;
      v13[46] = v14;
      ++v13;
    }
    while ( v11 < 14 );
    v49 = sub_800120AC("Wat2R");
    v15 = sub_800142B4((unsigned int *)&v49, 1, 0);
    v16 = 0;
    v17 = v15;
    v18 = 14;
    do
    {
      v19 = *(_DWORD *)(v17 + 16);
      v17 += 4;
      ++v16;
      dword_800676B0[v18 + 46] = v19;
      ++v18;
    }
    while ( v16 < 14 );
    dword_800677D8 = dword_80067768;
    if ( (dword_80067A28 & 0x8000000) != 0 )
    {
      dword_8006774C = -4800;
      dword_800676D8 = (int)&loc_800415A4;
      dword_8006775C = 0;
      dword_80067760 = 0;
      v20 = *(_DWORD *)(v15 + 72);
      v21 = 0;
      if ( *(_WORD *)(v20 + 2) )
      {
        v22 = 8;
        do
        {
          sub_80019090(v20 + v22 + 4, v20 + 4);
          ++v21;
          v22 += 16;
        }
        while ( v21 < *(unsigned __int16 *)(v20 + 2) );
      }
      dword_80067764 = v20 + 8;
      goto LABEL_91;
    }
    dword_8006774C = 0;
    v23 = *(_DWORD *)(dword_80061044 + 8);
    if ( v23 == 25 )
    {
      v49 = sub_800120AC("Wat6R");
      v24 = sub_800120AC("Wat7R");
      v25 = "Wat8R";
    }
    else if ( v23 >= 0x1A )
    {
      if ( v23 == 33 )
      {
        v49 = sub_800120AC("Wat9R");
        v24 = sub_800120AC("WatAR");
        v25 = "WatBR";
      }
      else
      {
        if ( v23 != 39 )
          goto LABEL_78;
        v49 = sub_800120AC("WatCR");
        v24 = sub_800120AC("WatDR");
        v25 = "WatER";
      }
    }
    else
    {
      if ( v23 != 13 )
        goto LABEL_78;
      v49 = sub_800120AC("Wat3R");
      v24 = sub_800120AC("Wat4R");
      v25 = "Wat5R";
    }
    v50 = v24;
    v51 = sub_800120AC((unsigned __int8 *)v25);
LABEL_78:
    dword_8006775C = *(_DWORD *)(sub_800142B4((unsigned int *)&v49, 1, 0) + 16);
    dword_80067760 = *(_DWORD *)(sub_800142B4((unsigned int *)&v50, 1, 0) + 16);
    v26 = (_DWORD *)sub_800142B4((unsigned int *)&v51, 1, 0);
    dword_800677E0 = v26[4];
    v27 = v26[5];
    v28 = 0;
    if ( *(_WORD *)(v27 + 2) )
    {
      v29 = 8;
      do
      {
        sub_80019090(v27 + v29 + 4, v27 + 4);
        ++v28;
        v29 += 16;
      }
      while ( v28 < *(unsigned __int16 *)(v27 + 2) );
    }
    dword_800677E4 = v27 + 8;
    v30 = v26[6];
    v31 = 0;
    if ( *(_WORD *)(v30 + 2) )
    {
      v32 = 8;
      do
      {
        sub_80019090(v30 + v32 + 4, v30 + 4);
        ++v31;
        v32 += 16;
      }
      while ( v31 < *(unsigned __int16 *)(v30 + 2) );
    }
    dword_800677EC = v30 + 8;
    v33 = v26[7];
    v34 = 0;
    if ( *(_WORD *)(v33 + 2) )
    {
      v35 = 8;
      do
      {
        sub_80019090(v33 + v35 + 4, v33 + 4);
        ++v34;
        v35 += 16;
      }
      while ( v34 < *(unsigned __int16 *)(v33 + 2) );
    }
    dword_80067764 = v33 + 8;
    dword_800677DC = v26[8];
    v36 = *(unsigned __int8 *)(dword_800677DC + ((int)MEMORY[0x68] >> 19 << 6) + ((int)MEMORY[0x60] >> 20));
    if ( (((int)MEMORY[0x60] >> 19) & 1) != 0 )
      v37 = v36 >> 4;
    else
      v37 = v36 & 0xF;
    dword_80069188 = -256 * v37;
  }
LABEL_91:
  result = (int *)-2147090432;
  if ( (dword_80067A28 & 0x10000000) == 0 )
    return result;
  v39 = *(_DWORD *)(dword_80061044 + 8);
  if ( v39 == 19 )
  {
    v40 = "Ter1R";
  }
  else if ( v39 >= 0x14 )
  {
    if ( v39 == 23 )
    {
      v40 = "Ter2R";
    }
    else
    {
      if ( v39 != 31 )
        goto LABEL_104;
      v40 = "Ter3R";
    }
  }
  else
  {
    if ( v39 != 5 )
      goto LABEL_104;
    v40 = "Ter4R";
  }
  v52 = sub_800120AC((unsigned __int8 *)v40);
LABEL_104:
  v41 = sub_800142B4((unsigned int *)&v52, 1, 0);
  v42 = *(_DWORD *)(v41 + 16);
  v43 = 0;
  if ( *(_WORD *)(v42 + 2) )
  {
    v44 = 8;
    do
    {
      sub_80019090(v42 + v44 + 4, v42 + 4);
      ++v43;
      v44 += 16;
    }
    while ( v43 < *(unsigned __int16 *)(v42 + 2) );
  }
  result = dword_800676B0;
  dword_80067764 = v42 + 8;
  dword_80067768 = *(_DWORD *)(v41 + 20);
  return result;
}
// 8003E520: using guessed type int sub_8003E520();
// 8003FA00: using guessed type int sub_8003FA00();
// 80041C64: using guessed type int sub_80041C64();
// 80041E1C: using guessed type int sub_80041E1C();
// 80041E58: using guessed type int sub_80041E58();
// 80041E88: using guessed type int sub_80041E88();
// 80042648: using guessed type int sub_80042648();
// 800428D0: using guessed type int sub_800428D0();
// 80060A90: using guessed type int dword_80060A90;
// 80061044: using guessed type int dword_80061044;
// 80065C90: using guessed type __int16 word_80065C90;
// 80065CB0: using guessed type int dword_80065CB0;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D20: using guessed type int dword_80065D20;
// 80065D64: using guessed type int dword_80065D64;
// 80065D68: using guessed type int dword_80065D68;
// 80065D6C: using guessed type int dword_80065D6C;
// 80065D70: using guessed type int dword_80065D70;
// 800676B0: using guessed type int dword_800676B0[];
// 800676B4: using guessed type int dword_800676B4;
// 800676B8: using guessed type int dword_800676B8;
// 800676BC: using guessed type int dword_800676BC;
// 800676C0: using guessed type int dword_800676C0;
// 800676C4: using guessed type int dword_800676C4;
// 800676C8: using guessed type int dword_800676C8;
// 800676CC: using guessed type int dword_800676CC;
// 800676D0: using guessed type int dword_800676D0;
// 800676D4: using guessed type int dword_800676D4;
// 800676D8: using guessed type int dword_800676D8;
// 800676DC: using guessed type int dword_800676DC;
// 800676E0: using guessed type int dword_800676E0;
// 800676E4: using guessed type int dword_800676E4;
// 800676E8: using guessed type int dword_800676E8;
// 800676EC: using guessed type int dword_800676EC;
// 800676F0: using guessed type int dword_800676F0;
// 800676F4: using guessed type int dword_800676F4;
// 80067700: using guessed type int dword_80067700;
// 80067704: using guessed type int dword_80067704;
// 80067708: using guessed type int dword_80067708;
// 8006770C: using guessed type int dword_8006770C;
// 80067714: using guessed type __int16 word_80067714;
// 80067716: using guessed type __int16 word_80067716;
// 80067718: using guessed type int dword_80067718;
// 8006771C: using guessed type __int16 word_8006771C;
// 8006771E: using guessed type __int16 word_8006771E;
// 80067720: using guessed type int dword_80067720;
// 80067724: using guessed type int dword_80067724;
// 80067728: using guessed type int dword_80067728;
// 8006772C: using guessed type int dword_8006772C;
// 80067730: using guessed type int dword_80067730;
// 80067734: using guessed type int dword_80067734;
// 80067738: using guessed type int dword_80067738;
// 8006773C: using guessed type int dword_8006773C;
// 80067740: using guessed type int dword_80067740;
// 80067744: using guessed type int dword_80067744;
// 80067748: using guessed type int dword_80067748;
// 8006774C: using guessed type int dword_8006774C;
// 8006775C: using guessed type int dword_8006775C;
// 80067760: using guessed type int dword_80067760;
// 80067764: using guessed type int dword_80067764;
// 80067768: using guessed type int dword_80067768;
// 800677D8: using guessed type int dword_800677D8;
// 800677DC: using guessed type int dword_800677DC;
// 800677E0: using guessed type int dword_800677E0;
// 800677E4: using guessed type int dword_800677E4;
// 800677EC: using guessed type int dword_800677EC;
// 800679F0: using guessed type __int16 word_800679F0;
// 800679F2: using guessed type __int16 word_800679F2;
// 800679F4: using guessed type int dword_800679F4;
// 80067A10: using guessed type int dword_80067A10;
// 80067A1C: using guessed type int dword_80067A1C;
// 80067A20: using guessed type int dword_80067A20;
// 80067A24: using guessed type int dword_80067A24;
// 80067A28: using guessed type int dword_80067A28;
// 80067A2C: using guessed type int dword_80067A2C;
// 80067A30: using guessed type int dword_80067A30;
// 80067A34: using guessed type int dword_80067A34;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068FD0: using guessed type int dword_80068FD0;
// 8006904C: using guessed type __int16 word_8006904C;
// 80069050: using guessed type __int16 word_80069050;
// 80069054: using guessed type int dword_80069054;
// 80069058: using guessed type int dword_80069058;
// 8006906C: using guessed type int dword_8006906C;
// 800690D0: using guessed type int dword_800690D0;
// 800690D4: using guessed type int dword_800690D4;
// 800690D8: using guessed type int dword_800690D8;
// 80069118: using guessed type int dword_80069118;
// 80069188: using guessed type int dword_80069188;
// 8006918C: using guessed type int dword_8006918C;
// 80069190: using guessed type int dword_80069190;
// 80069194: using guessed type int dword_80069194;
// 800691F8: using guessed type int dword_800691F8;
// 80069208: using guessed type int dword_80069208;
// 8006920C: using guessed type int dword_8006920C;

//----- (80022C9C) --------------------------------------------------------
unsigned __int8 *__fastcall sub_80022C9C(int a1, int a2, int a3)
{
  int v6; // $a1
  int v7; // $a2
  unsigned __int8 *v8; // $v0
  int v9; // $a1
  unsigned __int8 *result; // $v0
  int v11[2]; // [sp+28h] [-8h] BYREF

  v6 = 520;
  if ( a3 == 2 )
  {
    v6 = 521;
    v7 = a2 - 256;
  }
  else
  {
    v7 = a2 + 256;
  }
  v8 = sub_80032710(a1, v6, v7, 0, v11, 1, 0, 0, 0);
  if ( v8 && v11[0] )
    sub_80022DA0(v11[0], v8, 20, 1);
  v9 = 521;
  if ( a3 == 2 )
    v9 = 520;
  result = sub_80032710(a1, v9, a2, 0, v11, 1, 0, 0, 0);
  if ( result )
  {
    if ( v11[0] )
      return (unsigned __int8 *)sub_80022DA0(v11[0], result, 12, 1);
  }
  return result;
}

//----- (80022DA0) --------------------------------------------------------
int __fastcall sub_80022DA0(int a1, _DWORD *a2, char a3, int a4)
{
  unsigned int *v8; // $s0
  unsigned int *v9; // $a0
  int v10; // $v0
  unsigned int *v11; // $s0
  unsigned int *v12; // $v0
  int result; // $v0
  int v14; // $a1

  v8 = 0;
  do
  {
    v9 = (unsigned int *)*a2;
    if ( (*a2 & 1) != 0 )
    {
      if ( !v8 || (unsigned int)v8 < *(_DWORD *)(((*a2 >> 13) & 0x3FC) + dword_80061038) )
        v8 = *(unsigned int **)(((*a2 >> 13) & 0x3FC) + dword_80061038);
      v10 = a3 & 8;
      if ( (unsigned int *)v8[1] != v9 )
      {
        v11 = v8 + 2;
        do
        {
          v12 = (unsigned int *)v11[1];
          v11 += 2;
        }
        while ( v12 != v9 );
        v8 = v11 - 2;
        v10 = a3 & 8;
      }
    }
    else
    {
      v8 = (unsigned int *)*a2;
      v10 = a3 & 8;
    }
    if ( v10 )
    {
      result = sub_800142B4(v8, a3 | 2, a4);
      ++a2;
    }
    else
    {
      v14 = a4;
      if ( (a3 & 4) != 0 )
        v14 = -a4;
      result = sub_8001439C((int *)v8, v14);
      ++a2;
    }
    --a1;
  }
  while ( a1 );
  return result;
}
// 80061038: using guessed type int dword_80061038;

//----- (80022EB4) --------------------------------------------------------
int sub_80022EB4()
{
  return sub_800215E8(dword_80065D5C, dword_80065D64, dword_80065D70, 0);
}
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065DA4: using guessed type int dword_80065DA4;

//----- (80023170) --------------------------------------------------------
int __fastcall sub_80023170(int a1, int a2, unsigned int *a3)
{
  int v4; // $s6
  int v5; // $a2
  unsigned __int8 *v6; // $s2
  int v7; // $v0
  int v8; // $a0
  int v9; // $a2
  int v10; // $s3
  int v11; // $s1
  unsigned __int8 *v12; // $s0
  unsigned int *v13; // $s5
  int v14; // $v0
  int v15; // $s4
  unsigned __int8 *v16; // $v0
  int v17; // $s0
  int result; // $v0

  v4 = 0;
  while ( 1 )
  {
    v5 = v4 ? (sub_80032EDC(dword_80065D64, 639, 0, 2) - 1) << 8 : 0;
    v6 = sub_80032710(dword_80065D64, 265, v5, 0, 0, 1, 0, 0, 0);
    if ( v6 )
    {
      if ( v4 )
      {
        v7 = sub_80032EDC(dword_80065D64, 639, 0, 2);
        v8 = dword_80065D64;
        v9 = (v7 - 1) << 8;
      }
      else
      {
        v8 = dword_80065D64;
        v9 = 0;
      }
      v10 = sub_80032EDC(v8, 265, v9, 1);
      v11 = 0;
      if ( v10 > 0 )
        break;
    }
LABEL_18:
    ++v4;
    result = 0;
    if ( v4 >= 2 )
      return result;
  }
  v12 = v6 + 1;
  while ( 1 )
  {
    v13 = (unsigned int *)(*(_DWORD *)(*(_DWORD *)(dword_80065D64 + 4) + 16) + 4 * v12[1] + 404);
    v14 = sub_800142B4(v13, 1, 0);
    v15 = *(_DWORD *)(v14 + 4 * (3 * *v12 + *(_DWORD *)(*(_DWORD *)(v14 + 16) + 388)) + 16);
    v16 = sub_80032710(v15, 777, 0, 0, 0, 2, 0, 0, 0);
    if ( !v16 || *((_DWORD *)v16 + 5) != a2 )
    {
      v12 += 4;
      goto LABEL_17;
    }
    v12 += 4;
    if ( *((_DWORD *)v16 + 4) == a1 )
      break;
LABEL_17:
    ++v11;
    v6 += 4;
    if ( v11 >= v10 )
      goto LABEL_18;
  }
  v17 = 1;
  if ( v4 )
    v17 = 2;
  *a3 = *v13;
  a3[1] = v6[1];
  if ( *v6 == 1 )
  {
    a3[3] = 2;
    a3[2] = 0;
  }
  else
  {
    a3[3] = 1;
    a3[2] = (sub_80032EDC(v15, 639, 0, 2) - 1) << 8;
  }
  return v17;
}
// 80065D64: using guessed type int dword_80065D64;

//----- (800233DC) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_800233DC(int *a1, int a2)
{
  int v3; // $s0
  int v4; // $s4
  int v5; // $s5
  int v6; // $a2
  int *result; // $v0
  int v8; // $v1
  BOOL v9; // $v0
  bool v10; // dc
  unsigned int v11; // $v0
  int v12; // $v0
  int v13; // $s1
  int v14; // $a0
  int v15; // $a1
  int v16; // $a2
  int v17; // $s1
  int v18; // $a2
  int v19; // $s1
  int v20; // $v1
  int v21; // $v1
  int v22; // $a2
  char *v23; // $a0
  int v24; // $a1
  int v25[4]; // [sp+10h] [-80h] BYREF
  int v26[4]; // [sp+20h] [-70h] BYREF
  _DWORD v27[4]; // [sp+30h] [-60h] BYREF
  int v28; // [sp+40h] [-50h] BYREF
  int *v29; // [sp+44h] [-4Ch]
  int v30; // [sp+48h] [-48h]
  int v31; // [sp+50h] [-40h]
  int v32; // [sp+54h] [-3Ch]
  _DWORD v33[10]; // [sp+60h] [-30h] BYREF
  int v34[2]; // [sp+88h] [-8h] BYREF

  if ( a2 )
    dword_8005C654 = 4097;
  sub_800255BC(&dword_8005C69C, dword_8005C794, 0);
  sub_800255BC(&dword_8005C644, dword_8005C7A4, 0);
  v27[0] = *a1;
  v27[1] = a1[1];
  v3 = -a1[2];
  v27[2] = a1[2];
  v4 = sub_8004F794(-v27[0], v3) & 0xFFF;
  v5 = sub_8003D9DC((v3 >> 8) * (v3 >> 8) + (-v27[0] >> 8) * (-v27[0] >> 8)) << 8;
  if ( v5 <= 1280000 || (unsigned int)(v4 % 682 - 228) < 0xE3 )
    goto LABEL_9;
  v6 = 1;
  if ( dword_80065D70 >= dword_80065D74 >> 1 )
    v6 = 2;
  if ( sub_80023B68(1024, (unsigned int *)&dword_8005C76C, v6) )
  {
    byte_8005C63F = 1;
    sub_80024E80(a1);
    sub_8002513C();
    return sub_80023A94(a1, 1);
  }
  else
  {
LABEL_9:
    if ( v5 <= 81999 )
    {
      byte_8005C63E = 1;
      dword_8005C650 = v4;
    }
    dword_80065DA4 = v4;
    dword_8005C654 = v4;
    v8 = v4 - (sub_8004F794(dword_80065D14, dword_80065D1C) & 0xFFF);
    v9 = v8 < -2048;
    if ( v8 >= 2049 )
    {
      v8 -= 4096;
      v9 = v8 < -2048;
    }
    v10 = !v9;
    v11 = v8 + 2;
    if ( !v10 )
    {
      v8 += 4096;
      v11 = v8 + 2;
    }
    if ( v11 < 5 )
    {
      dword_80065D88 = 0;
    }
    else if ( v8 >= 0 )
    {
      dword_80065D88 = 2;
    }
    else
    {
      dword_80065D88 = 1;
    }
    if ( dword_80065D88 )
    {
      v12 = 8 * v8;
      if ( v8 < 0 )
      {
        v8 = -v8;
        v12 = 8 * v8;
      }
      v25[0] = dword_80065D5C;
      v25[1] = dword_80065D64;
      v25[2] = dword_80065D70;
      v25[3] = dword_80065D88;
      v13 = sub_800260B4(v25, (v12 + v8) << 9 >> 8, v34);
      if ( v13 && sub_80028484(v25, v26) )
      {
        dword_80065D88 = v26[3];
        sub_800260B4(v26, v13, v34);
        v14 = v26[0];
        v15 = v26[1];
        v16 = v34[0];
      }
      else
      {
        v14 = dword_80065D5C;
        v15 = dword_80065D64;
        v16 = v34[0];
      }
    }
    else
    {
      v14 = dword_80065D5C;
      v15 = dword_80065D64;
      v16 = dword_80065D70;
    }
    sub_800215E8(v14, v15, v16, 0);
    v17 = 0;
    if ( v5 > 819199 )
    {
      v18 = 1;
      if ( (unsigned int)(v4 % 682 - 228) >= 0xE3 )
      {
        if ( dword_80065D70 >= dword_80065D74 >> 1 )
          v18 = 2;
        if ( sub_80023B68(1024, (unsigned int *)&dword_8005C76C, v18)
          && !sub_80023DBC((unsigned int *)&dword_8005C76C, a1, v33) )
        {
          v19 = v5 - 819200;
          if ( v5 - 819200 > 409600 )
            v19 = 409600;
          v17 = (v19 << 8) / 409600;
        }
      }
    }
    if ( v17 )
    {
      v31 = dword_80065D20;
      v32 = dword_80065D24;
      dword_80065D20 = sub_80031E10(dword_80065D20, v33[3], v17);
      dword_80065D24 = sub_80031E10(dword_80065D24, v33[4], v17);
      sub_80025188(v27);
      dword_80065D20 = v31;
      dword_80065D24 = v32;
    }
    else
    {
      sub_80025188(v27);
    }
    v20 = v5;
    if ( v5 > 963000 )
      v20 = 963000;
    v21 = v20 - 268000;
    if ( v21 < 0 )
      v21 = 0;
    sub_80030A34(&v28, -v21, dword_80065CFC, dword_80065D00);
    v22 = dword_80065CF0 + v28;
    dword_80065CF0 += v28;
    result = v29;
    v23 = (char *)v29 + dword_80065CF4;
    v24 = dword_80065CF8 + v30;
    dword_80065CF4 += (int)v29;
    dword_80065CF8 += v30;
    if ( v17 )
    {
      dword_80065CF0 = v22 + (((v33[0] - v22) * v17) >> 8);
      dword_80065CF4 = (int)&v23[((v33[1] - (int)v23) * v17) >> 8];
      result = (int *)(v24 + (((v33[2] - v24) * v17) >> 8));
      dword_80065CF8 = (int)result;
    }
  }
  return result;
}
// 80023410: write access to const memory at 8005C654 has been detected
// 80023538: write access to const memory at 8005C63F has been detected
// 80023618: write access to const memory at 8005C650 has been detected
// 80023678: write access to const memory at 8005C654 has been detected
// 800235B8: write access to const memory at 8005C63E has been detected
// 800235BC: write access to const memory at 8005C650 has been detected
// 8005C63E: using guessed type char byte_8005C63E;
// 8005C63F: using guessed type char byte_8005C63F;
// 8005C644: using guessed type int dword_8005C644;
// 8005C650: using guessed type int dword_8005C650;
// 8005C654: using guessed type int dword_8005C654;
// 8005C69C: using guessed type int dword_8005C69C;
// 8005C76C: using guessed type int dword_8005C76C;
// 8005C794: using guessed type int dword_8005C794[4];
// 8005C7A4: using guessed type int dword_8005C7A4[4];
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D14: using guessed type int dword_80065D14;
// 80065D1C: using guessed type int dword_80065D1C;
// 80065D20: using guessed type int dword_80065D20;
// 80065D24: using guessed type int dword_80065D24;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065D74: using guessed type int dword_80065D74;
// 80065D88: using guessed type int dword_80065D88;
// 80065DA4: using guessed type int dword_80065DA4;

//----- (80023A94) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_80023A94(int *a1, int a2)
{
  int v4; // $v0
  int *v5; // $a0

  v4 = sub_8003D9DC((-a1[2] >> 8) * (-a1[2] >> 8) + (-*a1 >> 8) * (-*a1 >> 8));
  v5 = a1;
  if ( v4 << 8 <= 1228800 )
  {
    if ( sub_80023B68(8, (unsigned int *)&dword_8005C76C, 3) )
    {
      byte_8005C63F = 1;
      sub_80024E80(a1);
      sub_8002513C();
      return (int *)sub_800233DC(a1, 1);
    }
    v5 = a1;
  }
  return sub_800247DC(v5, a2);
}
// 80023B1C: write access to const memory at 8005C63F has been detected
// 800233DC: using guessed type int __fastcall sub_800233DC(_DWORD, _DWORD);
// 8005C63F: using guessed type char byte_8005C63F;
// 8005C76C: using guessed type int dword_8005C76C;

//----- (80023B68) --------------------------------------------------------
int __fastcall sub_80023B68(int a1, unsigned int *a2, int a3)
{
  int v3; // $s6
  int i; // $fp
  int v5; // $a2
  unsigned __int8 *v6; // $s2
  int v7; // $v0
  int v8; // $a0
  int v9; // $a2
  int v10; // $s4
  int v11; // $s1
  unsigned __int8 *v12; // $s0
  unsigned int *v13; // $s5
  int v14; // $v0
  int v15; // $s3
  int result; // $v0

  v3 = 0;
  for ( i = 1; ; i = 2 )
  {
    if ( (a3 & i) != 0 )
    {
      v5 = v3 ? (sub_80032EDC(dword_80065D64, 639, 0, 2) - 1) << 8 : 0;
      v6 = sub_80032710(dword_80065D64, 265, v5, 0, 0, 1, 0, 0, 0);
      if ( v6 )
      {
        if ( v3 )
        {
          v7 = sub_80032EDC(dword_80065D64, 639, 0, 2);
          v8 = dword_80065D64;
          v9 = (v7 - 1) << 8;
        }
        else
        {
          v8 = dword_80065D64;
          v9 = 0;
        }
        v10 = sub_80032EDC(v8, 265, v9, 1);
        v11 = 0;
        if ( v10 > 0 )
          break;
      }
    }
LABEL_14:
    ++v3;
    result = 0;
    if ( v3 >= 2 )
      return result;
  }
  v12 = v6 + 1;
  while ( 1 )
  {
    v13 = (unsigned int *)(*(_DWORD *)(*(_DWORD *)(dword_80065D64 + 4) + 16) + 4 * v12[1] + 404);
    v14 = sub_800142B4(v13, 1, 0);
    v15 = *(_DWORD *)(v14 + 4 * (3 * *v12 + *(_DWORD *)(*(_DWORD *)(v14 + 16) + 388)) + 16);
    v12 += 4;
    if ( sub_80032DF8(v15, 41, 0, 0, 0, 2, 0) == a1 )
      break;
    ++v11;
    v6 += 4;
    if ( v11 >= v10 )
      goto LABEL_14;
  }
  *a2 = *v13;
  a2[1] = v6[1];
  if ( *v6 == 1 )
  {
    a2[3] = 2;
    a2[2] = 0;
  }
  else
  {
    a2[3] = 1;
    a2[2] = (sub_80032EDC(v15, 639, 0, 2) - 1) << 8;
  }
  return i;
}
// 80065D64: using guessed type int dword_80065D64;

//----- (80023DBC) --------------------------------------------------------
int __fastcall sub_80023DBC(unsigned int *a1, int *a2, _DWORD *a3)
{
  int v6; // $v0
  int v7; // $s0
  bool v8; // dc
  int result; // $v0
  int v10; // [sp+20h] [-20h] BYREF
  int v11; // [sp+24h] [-1Ch]
  unsigned int v12; // [sp+28h] [-18h]
  unsigned int v13; // [sp+2Ch] [-14h]
  int v14; // [sp+30h] [-10h] BYREF
  int v15; // [sp+34h] [-Ch] BYREF
  int v16; // [sp+38h] [-8h] BYREF
  int v17; // [sp+3Ch] [-4h] BYREF

  v10 = sub_800142B4(a1, 1, 0);
  v11 = *(_DWORD *)(v10 + 4 * (3 * a1[1] + *(_DWORD *)(*(_DWORD *)(v10 + 16) + 388)) + 16);
  v12 = a1[2];
  v13 = a1[3];
  sub_8002616C(&v10, a2, &v14, &v15, &v16);
  v7 = sub_8003C364(v16);
  v6 = sub_8003C2F0(v16);
  v8 = sub_8002697C(&v10, a2, v14, v7, v6, 4, &v17) != 0;
  result = 1;
  if ( !v8 )
  {
    sub_80028740(v11, v17, a3, 0);
    return 0;
  }
  return result;
}

//----- (80023EBC) --------------------------------------------------------
int sub_80023EBC()
{
  return sub_800215E8(dword_80065D5C, dword_80065D64, dword_80065D70, 0);
}
// 80060A90: using guessed type int dword_80060A90;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;

//----- (80024124) --------------------------------------------------------
int sub_80024124()
{
  return sub_800215E8(dword_80065D5C, dword_80065D64, dword_80065D70, 0);
}
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065DA4: using guessed type int dword_80065DA4;

//----- (80024330) --------------------------------------------------------
int __fastcall sub_80024330(int a1)
{
  int result; // $v0

  dword_80065D88 = 0;
  result = 16;
  if ( a1 != 16 )
    return (int)sub_8002513C();
  return result;
}
// 80065D88: using guessed type int dword_80065D88;

//----- (8002437C) --------------------------------------------------------
int __fastcall sub_8002437C(int a1)
{
  int result; // $v0
  int v3; // $a0
  int v4; // $v1

  result = dword_80065D64;
  dword_80065D8C = a1;
  if ( dword_80065D64 )
  {
    result = 2;
    if ( dword_80065D5C )
    {
      v3 = 3 * sub_80032DF8(dword_80065D64, 371, 0, 0, 0, 2, 0);
      v4 = *(_DWORD *)(dword_80065D5C + 4 * (v3 + *(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 388) + 1) + 16);
      result = 1;
      dword_80065D68 = v4;
      if ( a1 == 1 )
      {
        dword_80065D6C = v4;
      }
      else
      {
        result = *(_DWORD *)(dword_80065D5C + 4 * (v3 + a1 + *(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 388)) + 16);
        dword_80065D6C = result;
      }
    }
  }
  return result;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D68: using guessed type int dword_80065D68;
// 80065D6C: using guessed type int dword_80065D6C;
// 80065D8C: using guessed type int dword_80065D8C;

//----- (8002444C) --------------------------------------------------------
int *__fastcall sub_8002444C(int *a1, int a2)
{
  int v4; // $v0
  int v5; // $v0
  int v6; // $a3
  int v7; // $a0
  int v8; // $a1
  int v9; // $a2
  int v11[8]; // [sp+18h] [-40h] BYREF
  int v12[4]; // [sp+38h] [-20h] BYREF
  int v13; // [sp+48h] [-10h] BYREF
  int v14; // [sp+4Ch] [-Ch] BYREF
  int v15; // [sp+50h] [-8h] BYREF

  v11[0] = dword_80065D5C;
  v11[1] = dword_80065D64;
  v11[2] = dword_80065D70;
  v4 = sub_8002616C(v11, a1, &v13, &v14, &v15);
  if ( v4 <= 0 )
  {
    if ( v4 >= 0 )
    {
      v7 = dword_80065D5C;
      v8 = dword_80065D64;
      v9 = dword_80065D70;
      goto LABEL_10;
    }
    v5 = sub_80026464(v11, a1, v13, 1, v15, 1);
    v6 = -1;
    if ( a2 )
      v6 = 256;
  }
  else
  {
    v5 = sub_80026464(v11, a1, v14, 0, v15, 1);
    v6 = -1;
    if ( a2 )
      v6 = 256;
  }
  sub_80025CE8(v11, v5, v12, v6);
  v7 = v12[0];
  v8 = v12[1];
  v9 = v12[2];
LABEL_10:
  sub_800215E8(v7, v8, v9, 0);
  sub_80024590((int)a1);
  return sub_80025188(a1);
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;

//----- (80024590) --------------------------------------------------------
unsigned __int8 *__fastcall sub_80024590(int a1)
{
  unsigned __int8 *result; // $v0
  int v3; // $a1
  int v4; // $a3
  int v5; // $v1
  int v6; // $a0
  bool v7; // dc
  int v8; // $a0
  int v9; // $lo
  unsigned __int8 v10[8]; // [sp+28h] [-8h] BYREF

  result = sub_80032710(dword_80065D68, 594, dword_80065D70, 0, 0, 0, 0, 0, 0);
  if ( result )
  {
    result = sub_80032710(dword_80065D68, 596, dword_80065D70, 0, 0, 3, v10, 0, 0);
    if ( result )
    {
      v3 = *((__int16 *)result + 2);
      v4 = *(__int16 *)result << 8;
      v5 = *((__int16 *)result + 1) << 8;
      if ( dword_80069120 != 256 )
        v3 = (v3 * dword_80069120) >> 8;
      v6 = dword_80065CF8 - *(_DWORD *)(a1 + 8);
      v7 = v5 >= v6;
      v8 = v6 - v4;
      if ( !v7 )
        v8 = v5 - v4;
      v9 = v8 * v3;
      if ( v8 < 0 )
        v9 = 0;
      result = (unsigned __int8 *)(dword_80065CF8 - (v9 >> 8));
      dword_80065CF8 = (int)result;
    }
  }
  return result;
}
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D68: using guessed type int dword_80065D68;
// 80065D70: using guessed type int dword_80065D70;
// 80069120: using guessed type int dword_80069120;

//----- (800246A0) --------------------------------------------------------
int *__fastcall sub_800246A0(int *a1, int a2)
{
  int v4; // $v0
  int v5; // $v0
  int v6; // $a3
  int v7; // $a0
  int v8; // $a1
  int v9; // $a2
  int v11[8]; // [sp+18h] [-40h] BYREF
  int v12[4]; // [sp+38h] [-20h] BYREF
  int v13; // [sp+48h] [-10h] BYREF
  int v14; // [sp+4Ch] [-Ch] BYREF
  int v15; // [sp+50h] [-8h] BYREF

  v11[0] = dword_80065D5C;
  v11[1] = dword_80065D64;
  v11[2] = dword_80065D70;
  v4 = sub_8002616C(v11, a1, &v13, &v14, &v15);
  if ( v4 <= 0 )
  {
    if ( v4 >= 0 )
    {
      v7 = dword_80065D5C;
      v8 = dword_80065D64;
      v9 = dword_80065D70;
      goto LABEL_10;
    }
    v5 = sub_80026464(v11, a1, v13, 1, v15, 1);
    v6 = -1;
    if ( a2 )
      v6 = 256;
  }
  else
  {
    v5 = sub_80026464(v11, a1, v14, 0, v15, 1);
    v6 = -1;
    if ( a2 )
      v6 = 256;
  }
  sub_80025CE8(v11, v5, v12, v6);
  v7 = v12[0];
  v8 = v12[1];
  v9 = v12[2];
LABEL_10:
  sub_800215E8(v7, v8, v9, 0);
  return sub_80025188(a1);
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;

//----- (800247DC) --------------------------------------------------------
int *__fastcall sub_800247DC(int *a1, int a2)
{
  int v4; // $v0
  int v5; // $v0
  int v6; // $a3
  int v7; // $a0
  int v8; // $a1
  int v9; // $a2
  int v11[8]; // [sp+18h] [-40h] BYREF
  int v12[4]; // [sp+38h] [-20h] BYREF
  int v13; // [sp+48h] [-10h] BYREF
  int v14; // [sp+4Ch] [-Ch] BYREF
  int v15; // [sp+50h] [-8h] BYREF

  v11[0] = dword_80065D5C;
  v11[1] = dword_80065D64;
  v11[2] = dword_80065D70;
  v4 = sub_8002616C(v11, a1, &v13, &v14, &v15);
  if ( v4 <= 0 )
  {
    if ( v4 >= 0 )
    {
      v7 = dword_80065D5C;
      v8 = dword_80065D64;
      v9 = dword_80065D70;
      goto LABEL_10;
    }
    v5 = sub_80026464(v11, a1, v13, 1, v15, 1);
    v6 = -1;
    if ( a2 )
      v6 = 256;
  }
  else
  {
    v5 = sub_80026464(v11, a1, v14, 0, v15, 1);
    v6 = -1;
    if ( a2 )
      v6 = 256;
  }
  sub_80025CE8(v11, v5, v12, v6);
  v7 = v12[0];
  v8 = v12[1];
  v9 = v12[2];
LABEL_10:
  sub_800215E8(v7, v8, v9, 0);
  return sub_80025188(a1);
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;

//----- (80024918) --------------------------------------------------------
int *__fastcall sub_80024918(_DWORD *a1)
{
  int v2; // $a1
  int v3; // $a1
  int v4; // $v1
  int v5; // $s3
  int v6; // $a0
  int v7; // $a1
  int v9[4]; // [sp+20h] [-28h] BYREF
  int v10; // [sp+30h] [-18h] BYREF
  int v11; // [sp+34h] [-14h]
  int v12; // [sp+38h] [-10h]
  int v13; // [sp+3Ch] [-Ch]
  int v14[2]; // [sp+40h] [-8h] BYREF

  if ( !dword_80065D88 )
  {
    v2 = 2;
    if ( dword_80065D7C < 2 * dword_80065D78 )
      v2 = 1;
    dword_80065D88 = v2;
  }
  v3 = sub_80032DF8(dword_80065D6C, 352, dword_80065D70, 0, 0, 3, 256);
  if ( v3 < 0 )
  {
    v4 = 1;
    v3 = -v3;
    if ( dword_80065D88 == 1 )
      v4 = 2;
    dword_80065D88 = v4;
  }
  v9[0] = dword_80065D5C;
  v9[1] = dword_80065D64;
  v9[2] = dword_80065D70;
  v9[3] = dword_80065D88;
  v5 = sub_800260B4(v9, v3, v14);
  if ( v5 && sub_80028484(v9, &v10) )
  {
    v14[0] = v12;
    dword_80065D88 = v13;
    if ( sub_80032DF8(v11, 41, 0, 0, 0, 2, 0) == 2 )
      sub_800260B4(&v10, v5, v14);
    else
      sub_80025070(v11, v12);
    v6 = v10;
    v7 = v11;
  }
  else
  {
    v6 = dword_80065D5C;
    v7 = dword_80065D64;
  }
  sub_800215E8(v6, v7, v14[0], 0);
  sub_80024590((int)a1);
  return sub_80025188(a1);
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D6C: using guessed type int dword_80065D6C;
// 80065D70: using guessed type int dword_80065D70;
// 80065D78: using guessed type int dword_80065D78;
// 80065D7C: using guessed type int dword_80065D7C;
// 80065D88: using guessed type int dword_80065D88;

//----- (80024AD4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
unsigned __int8 *__fastcall sub_80024AD4(int *a1)
{
  int v2; // $a0
  int v3; // $v0
  int v4; // $s0
  int *v5; // $a1
  int v6; // $a2
  __int16 v7; // $v0
  int v8; // $a3
  unsigned __int8 *result; // $v0
  int v10[4]; // [sp+18h] [-78h] BYREF
  int v11; // [sp+28h] [-68h] BYREF
  unsigned __int8 *v12; // [sp+2Ch] [-64h]
  int v13; // [sp+30h] [-60h]
  int v14; // [sp+34h] [-5Ch]
  int v15[4]; // [sp+48h] [-48h] BYREF
  int v16; // [sp+80h] [-10h] BYREF
  int v17; // [sp+84h] [-Ch] BYREF
  int v18; // [sp+88h] [-8h] BYREF

  v10[0] = dword_80065D5C;
  v10[1] = dword_80065D64;
  v10[2] = dword_80065D70;
  v10[3] = 0;
  v11 = sub_800142B4((unsigned int *)&dword_8005C76C, 1, 0);
  v12 = *(unsigned __int8 **)(v11 + 4 * *(_DWORD *)(*(_DWORD *)(v11 + 16) + 388) + 16);
  if ( (unsigned __int8 *)dword_80065D64 == v12 )
    v2 = dword_80065D70;
  else
    v2 = 0;
  v13 = v2;
  v14 = 2;
  v3 = sub_8002616C(&v11, a1, &v16, &v17, &v18);
  v4 = 2;
  if ( v3 <= 0 )
  {
    v5 = a1;
    if ( v3 >= 0 )
      goto LABEL_9;
    v6 = v16;
    v7 = v18;
    v8 = 1;
  }
  else
  {
    v5 = a1;
    v6 = v17;
    v7 = v18;
    v8 = 0;
  }
  v4 = sub_80026464(v10, v5, v6, v8, v7, 2);
LABEL_9:
  sub_80025CE8(v10, v4, v15, -1);
  sub_800215E8(v15[0], v15[1], v15[2], 0);
  sub_80025188(a1);
  result = v12;
  if ( (unsigned __int8 *)dword_80065D64 == v12 )
  {
    dword_8005C634 = 16;
    return sub_80025070(dword_80065D64, 0);
  }
  return result;
}
// 80024E64: write access to const memory at 8005C634 has been detected
// 8005C634: using guessed type int dword_8005C634;
// 8005C76C: using guessed type int dword_8005C76C;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;

//----- (80024E80) --------------------------------------------------------
int *__fastcall sub_80024E80(_DWORD *a1)
{
  sub_800215E8(dword_80065D5C, dword_80065D64, dword_80065D70, 0);
  return sub_80025188(a1);
}
// 80060A90: using guessed type int dword_80060A90;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065D88: using guessed type int dword_80065D88;

//----- (80024F54) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80024F54(_DWORD *a1)
{
  int v2; // $v0
  int v4; // [sp+20h] [-70h] BYREF
  int v5; // [sp+24h] [-6Ch]
  int v6; // [sp+28h] [-68h]
  int v7[4]; // [sp+80h] [-10h] BYREF

  v7[0] = dword_80065D5C;
  v7[1] = dword_80065D64;
  v7[2] = dword_80065D70;
  v7[3] = dword_80065D88;
  if ( sub_800284E8(&v4, v7, 1) == 1 )
  {
    if ( sub_80032DF8(v5, 41, 0, 0, 0, 2, 0) != dword_80065D80 )
      dword_8005C634 = 16;
    sub_800215E8(v4, v5, v6, 0);
  }
  else
  {
    v2 = sub_80032EDC(dword_80065D64, 639, 0, 2);
    sub_800215E8(dword_80065D5C, dword_80065D64, (v2 - 1) << 8, 0);
    dword_8005C634 = 16;
  }
  sub_80025188(a1);
  return 16;
}
// 80024FF0: write access to const memory at 8005C634 has been detected
// 80025038: write access to const memory at 8005C634 has been detected
// 8005C634: using guessed type int dword_8005C634;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80065D80: using guessed type int dword_80065D80;
// 80065D88: using guessed type int dword_80065D88;

//----- (80025070) --------------------------------------------------------
unsigned __int8 *__fastcall sub_80025070(int a1, int a2)
{
  unsigned __int8 *result; // $v0
  unsigned __int8 *v5; // $s1
  int v6; // $a1
  unsigned __int8 *i; // $s2
  int v8; // $a2
  int v9; // $s0

  result = sub_80032710(a1, 408, a2, 0, 0, 1, 0, 0, 0);
  v5 = result;
  if ( result )
  {
    result = (unsigned __int8 *)sub_80032EDC(a1, 408, a2, 1);
    for ( i = result; i; v5 += 4 * v9 )
    {
      v8 = *((_DWORD *)v5 + 1);
      v9 = *(_DWORD *)v5;
      if ( v8 < 0 )
        sub_80012EAC(0, v6);
      else
        sub_8001DB38(0, 0, v8, v9 - 2, (_DWORD *)v5 + 2);
      result = (unsigned __int8 *)(4 * v9);
      i -= v9;
    }
  }
  return result;
}
// 8002510C: variable 'v6' is possibly undefined
// 80060A90: using guessed type int dword_80060A90;

//----- (8002513C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
__int16 *sub_8002513C()
{
  __int16 *result; // $v0

  dword_8005C66C = 1;
  dword_8005C674 = 340;
  result = &word_80065C90;
  dword_8005C670 = 0;
  dword_8005C678 = dword_80065DA8;
  dword_8005C67C = dword_80065DAC;
  dword_8005C680 = dword_80065DB0;
  return result;
}
// 80025148: write access to const memory at 8005C66C has been detected
// 80025150: write access to const memory at 8005C674 has been detected
// 80025164: write access to const memory at 8005C670 has been detected
// 80025174: write access to const memory at 8005C678 has been detected
// 80025178: write access to const memory at 8005C67C has been detected
// 8002517C: write access to const memory at 8005C680 has been detected
// 8005C66C: using guessed type int dword_8005C66C;
// 8005C670: using guessed type int dword_8005C670;
// 8005C674: using guessed type int dword_8005C674;
// 8005C678: using guessed type int dword_8005C678;
// 8005C67C: using guessed type int dword_8005C67C;
// 8005C680: using guessed type int dword_8005C680;
// 80065C90: using guessed type __int16 word_80065C90;
// 80065DA8: using guessed type int dword_80065DA8;
// 80065DAC: using guessed type int dword_80065DAC;
// 80065DB0: using guessed type int dword_80065DB0;

//----- (80025188) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_80025188(_DWORD *a1)
{
  unsigned __int8 *v1; // $s0
  int v2; // $s2
  int v3; // $s3
  int v4; // $s4
  int v5; // $s2
  __int16 *v6; // $a2
  int v7; // $a0
  int v8; // $v1
  int v9; // $a0
  int v10; // $a1
  int v11; // $a2
  BOOL v12; // $v0
  bool v13; // dc
  __int16 v14; // $v0
  int *result; // $v0
  int v16; // [sp+28h] [-30h] BYREF
  int v17; // [sp+2Ch] [-2Ch]
  int v18; // [sp+30h] [-28h]
  _DWORD v19[4]; // [sp+38h] [-20h] BYREF
  unsigned __int8 v20[8]; // [sp+48h] [-10h] BYREF
  unsigned __int8 v21[8]; // [sp+50h] [-8h] BYREF

  v19[0] = *a1 - dword_80065CF0;
  v19[1] = a1[1] - dword_80065CF4;
  v19[2] = a1[2] - dword_80065CF8;
  sub_80031E84(&v16, v19, dword_80065D24);
  v16 = (v16 + dword_80065D58) & 0xFFF;
  v1 = sub_80032710(dword_80065D6C, 387, dword_80065D70, 0, 0, 3, v21, 0, 0);
  if ( v1 || (v1 = sub_80032710(dword_80065D68, 387, dword_80065D70, 0, 0, 3, v21, 0, 0)) != 0 )
  {
    v2 = sub_80031E10(v16, dword_80065D20, *(__int16 *)v1);
    v3 = sub_80031E10(v17, dword_80065D24, *((__int16 *)v1 + 1));
    v4 = sub_80031E10(v18, dword_80065D28, *((__int16 *)v1 + 2));
  }
  else
  {
    v2 = sub_80031F9C(v16, dword_80065D20);
    v3 = sub_80031F9C(v17, dword_80065D24);
    v4 = sub_80031F9C(v18, dword_80065D28);
  }
  v5 = (v2 + sub_80025C54()) & 0xFFF;
  if ( dword_80065DA8 != 4097 && dword_80065D80 != 2 )
  {
    v5 = sub_80031E34(dword_80065DA8, v5, 128, 45);
    v3 = sub_80031E34(dword_80065DAC, v3, 128, 45);
    v4 = sub_80031E34(dword_80065DB0, v4, 128, 45);
  }
  v6 = (__int16 *)sub_80032710(dword_80065D68, 281, dword_80065D70, 0, 0, 3, v20, 0, 0);
  if ( v6 )
  {
    v7 = (v5 & 0xFFF) - (dword_80065D20 & 0xFFF);
    if ( v7 < 2049 )
    {
      if ( v7 < -2048 )
        v7 += 4096;
    }
    else
    {
      v7 -= 4096;
    }
    if ( v6[2] < v7 )
      v7 = v6[2];
    if ( v7 < -v6[3] )
      v7 = -v6[3];
    v5 = ((dword_80065D20 & 0xFFF) + (_WORD)v7) & 0xFFF;
    v8 = dword_80065D24 & 0xFFF;
    v9 = (v3 & 0xFFF) - v8;
    if ( v9 < 2049 )
    {
      if ( v9 < -2048 )
        v9 += 4096;
    }
    else
    {
      v9 -= 4096;
    }
    v10 = *v6;
    v11 = -v6[1];
    v12 = v9 < v11;
    if ( v10 < v9 )
    {
      LOWORD(v9) = v10;
      v12 = v10 < v11;
    }
    v13 = !v12;
    v14 = v8 + v9;
    if ( !v13 )
      v14 = v8 + v11;
    v3 = v14 & 0xFFF;
    v4 &= 0xFFFu;
  }
  result = &dword_80065CF0;
  dword_80065CFC = v5;
  dword_80065D00 = v3;
  dword_80065D04 = v4;
  return result;
}
// 80025398: write access to const memory at 8005C66C has been detected
// 8003AE8C: using guessed type int dword_8003AE8C;
// 8005C66C: using guessed type int dword_8005C66C;
// 8005C670: using guessed type int dword_8005C670;
// 8005C674: using guessed type int dword_8005C674;
// 8005C678: using guessed type int dword_8005C678;
// 8005C67C: using guessed type int dword_8005C67C;
// 8005C680: using guessed type int dword_8005C680;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065CFC: using guessed type int dword_80065CFC;
// 80065D00: using guessed type int dword_80065D00;
// 80065D04: using guessed type int dword_80065D04;
// 80065D20: using guessed type int dword_80065D20;
// 80065D24: using guessed type int dword_80065D24;
// 80065D28: using guessed type int dword_80065D28;
// 80065D58: using guessed type int dword_80065D58;
// 80065D68: using guessed type int dword_80065D68;
// 80065D6C: using guessed type int dword_80065D6C;
// 80065D70: using guessed type int dword_80065D70;
// 80065D80: using guessed type int dword_80065D80;
// 80065DA8: using guessed type int dword_80065DA8;
// 80065DAC: using guessed type int dword_80065DAC;
// 80065DB0: using guessed type int dword_80065DB0;

//----- (800255BC) --------------------------------------------------------
int __fastcall sub_800255BC(int *a1, int *a2, int a3)
{
  int v3; // $t1
  int v4; // $v0
  int v5; // $v0
  int v6; // $a2
  int v7; // $v1
  int v8; // $a3
  int v9; // $v0
  int v10; // $t0
  BOOL v11; // $v0
  int v12; // $v0
  BOOL v13; // $v0

  v3 = *a1;
  v4 = ~a3;
  if ( !a3 )
  {
    v4 = ~a1[2];
    if ( !a1[2] )
      return v3;
  }
  v5 = (v4 >> 31) & 0x400;
  v6 = v5 - v3;
  if ( v5 == v3 )
  {
    a1[1] = 0;
    return v3;
  }
  v7 = v5 - v3;
  if ( v6 < 0 )
    v7 = v3 - v5;
  v8 = a1[1];
  if ( *a2 >= v7 )
  {
    v7 >>= a2[3];
    if ( !v7 )
      v7 = 1;
    v9 = v7;
    if ( v6 < 0 )
      v9 = -v7;
    v6 = v9;
  }
  v10 = a2[1];
  v11 = v8 < v6;
  if ( v10 < v7 )
  {
    v12 = a2[1];
    if ( v6 < 0 )
      v12 = -v10;
    v6 = v12;
    v11 = v8 < v12;
  }
  if ( v11 )
  {
    v8 += a2[2];
    v13 = v6 < v8;
    goto LABEL_20;
  }
  if ( v6 < v8 )
  {
    v8 -= a2[2];
    v13 = v8 < v6;
LABEL_20:
    if ( v13 )
      v8 = v6;
  }
  v3 += v8;
  if ( v3 >= 0 )
  {
    if ( v3 >= 1025 )
      v3 = 1024;
  }
  else
  {
    v3 = 0;
  }
  a1[1] = v8;
  *a1 = v3;
  return v3;
}

//----- (800256D4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
BOOL sub_800256D4()
{
  int v0; // $s6
  int v1; // $s1
  int v2; // $v1
  unsigned int v3; // $v0
  int *v4; // $s3
  int *v5; // $s4
  int v6; // $s2
  int *v7; // $s0
  int v8; // $v1
  int v9; // $v0
  int v10; // $v0
  int v11; // $a2
  BOOL result; // $v0

  v0 = 0;
  if ( (MEMORY[0xAC] & 0x80) == 0 || MEMORY[0x100] >> 28 == 8 || MEMORY[0x100] >> 28 == 1 )
    v0 = 1;
  v1 = 0;
  if ( v0 )
    goto LABEL_26;
  v2 = (MEMORY[0x70] - dword_80065DA4) << 20 >> 20;
  if ( (unsigned int)(v2 - 113) < 0x71E )
  {
    v1 = 2;
LABEL_10:
    v3 = v2 + 909;
    goto LABEL_11;
  }
  v3 = v2 + 909;
  if ( (unsigned int)(v2 + 1934) < 0x71E )
  {
    v1 = 8;
    goto LABEL_10;
  }
LABEL_11:
  if ( v3 >= 0x71B )
  {
    if ( (unsigned int)(v2 + 1137) >= 0x8E3 )
      v1 |= 1u;
  }
  else
  {
    v1 |= 4u;
  }
  if ( v1 )
  {
    dword_8005C664 = v1;
    LOBYTE(v1) = 0;
    dword_8005C668 = 0;
  }
  else
  {
    dword_8005C668 = 1;
    LOBYTE(v1) = 0;
  }
  if ( (dword_80065BF4 & 0x1000) != 0 )
  {
    LOBYTE(v1) = 1;
  }
  else if ( (dword_80065BF4 & 0x4000) != 0 )
  {
    LOBYTE(v1) = 4;
  }
  if ( (dword_80065BF4 & 0x2000) != 0 )
  {
    LOBYTE(v1) = v1 | 2;
  }
  else if ( (dword_80065BF4 & 0x8000) != 0 )
  {
    LOBYTE(v1) = v1 | 8;
  }
LABEL_26:
  v4 = dword_8005C6BC;
  v5 = (int *)byte_8005C7B4;
  v6 = 0;
  v7 = dword_8005C6C8;
  do
  {
    if ( v0 )
      goto LABEL_42;
    if ( v6 == 1 )
    {
      if ( (v1 & 1) != 0 )
      {
        if ( *(v7 - 2) != 1 )
          goto LABEL_42;
        *(v7 - 2) = 0;
        goto LABEL_41;
      }
      if ( (v1 & 4) != 0 && !*(v7 - 2) )
      {
        *(v7 - 2) = 1;
LABEL_41:
        *(v7 - 1) = 0;
      }
    }
    else
    {
      if ( (v1 & 2) != 0 )
      {
        if ( *(v7 - 2) != 1 )
          goto LABEL_42;
        *(v7 - 2) = 0;
        goto LABEL_41;
      }
      if ( (v1 & 8) != 0 && !*(v7 - 2) )
      {
        *(v7 - 2) = 1;
        goto LABEL_41;
      }
    }
LABEL_42:
    v8 = *(v7 - 2);
    v9 = *v4;
    if ( v8 != *v4 )
    {
      v10 = *(v7 - 1) + 1;
      *(v7 - 1) = v10;
      if ( v10 > 0 )
      {
        *v4 = v8;
        v7[1] = 0;
      }
      v9 = *v4;
    }
    v11 = 1;
    if ( !v9 )
      v11 = -1;
    sub_800255BC(v7, v5, v11);
    v7 += 6;
    v4 += 6;
    result = ++v6 < 2;
    v5 += 4;
  }
  while ( v6 < 2 );
  return result;
}
// 800257CC: write access to const memory at 8005C664 has been detected
// 800257D8: write access to const memory at 8005C668 has been detected
// 800257FC: write access to const memory at 8005C668 has been detected
// 800257E8: write access to const memory at 8005C668 has been detected
// 8005C664: using guessed type int dword_8005C664;
// 8005C668: using guessed type int dword_8005C668;
// 8005C6BC: using guessed type int dword_8005C6BC[3];
// 8005C6C8: using guessed type int dword_8005C6C8[3];
// 80060A90: using guessed type int dword_80060A90;
// 80065BF4: using guessed type int dword_80065BF4;
// 80065DA4: using guessed type int dword_80065DA4;

//----- (800259A0) --------------------------------------------------------
int __fastcall sub_800259A0(int *a1, int *a2, int *a3)
{
  int v3; // $s0
  __int16 v7; // $s3
  int v8; // $a0
  int v9; // $s2
  int *v10; // $s4
  __int16 *v11; // $v1
  int v12; // $v0
  int v13; // $a0
  int v14; // $a2
  int result; // $v0
  int v16; // $a0
  int v17; // $a1
  int v18; // $a3
  int v19; // $v1
  unsigned __int8 v20[8]; // [sp+28h] [-8h] BYREF

  if ( a1[1] == dword_80065D64 )
  {
    v7 = dword_80065D80;
    v8 = dword_80065D6C;
  }
  else
  {
    v7 = sub_80032DF8(a1[1], 41, 0, 0, 0, 2, 0);
    v3 = sub_80032DF8(a1[1], 371, 0, 0, 0, 2, 0);
    v8 = *(_DWORD *)(*a1 + 4 * (3 * v3 + dword_80065D8C + *(_DWORD *)(*(_DWORD *)(*a1 + 16) + 388)) + 16);
  }
  v9 = a1[2];
  if ( (v7 & 0x2401) != 0 )
    v10 = dword_8005C6D4;
  else
    v10 = dword_8005C6BC;
  v11 = (__int16 *)sub_80032710(v8, 322, a1[2], 0, 0, 3, v20, 0, 0);
  v12 = v7 & 0x240D;
  if ( !v11 )
  {
    if ( a1[1] == dword_80065D64 )
      v13 = dword_80065D68;
    else
      v13 = *(_DWORD *)(*a1 + 4 * (3 * v3 + *(_DWORD *)(*(_DWORD *)(*a1 + 16) + 388) + 1) + 16);
    v11 = (__int16 *)sub_80032710(v13, 322, v9, 0, 0, 3, v20, 0, 0);
    v12 = v7 & 0x240D;
  }
  if ( v12 )
  {
    v14 = *v11 << 8;
    result = v11[1];
    v16 = v10[3];
    v17 = result << 8;
    if ( v16 )
    {
      v18 = v11[2] << 8;
      result = 1024;
      v19 = v11[3] << 8;
      if ( v16 == 1024 )
      {
        v14 = v18;
        v17 = v19;
      }
      else
      {
        v14 += ((v18 - v14) * v16) >> 10;
        result = ((v19 - v17) * v16) >> 10;
        v17 += result;
      }
    }
  }
  else
  {
    result = *v11;
    v14 = result << 8;
    v17 = v11[1] << 8;
  }
  *a2 = v14;
  *a3 = v17;
  return result;
}
// 80025B04: variable 'v3' is possibly undefined
// 8005C6BC: using guessed type int dword_8005C6BC[3];
// 8005C6D4: using guessed type int dword_8005C6D4[3];
// 80065D64: using guessed type int dword_80065D64;
// 80065D68: using guessed type int dword_80065D68;
// 80065D6C: using guessed type int dword_80065D6C;
// 80065D80: using guessed type int dword_80065D80;
// 80065D8C: using guessed type int dword_80065D8C;

//----- (80025C0C) --------------------------------------------------------
int sub_80025C0C()
{
  return sub_80032DF8(dword_80065D64, 304, dword_80065D70, 0, 0, 3, 288);
}
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;

//----- (80025C54) --------------------------------------------------------
int sub_80025C54()
{
  unsigned __int8 *v0; // $a1
  int result; // $v0
  unsigned __int8 v2[8]; // [sp+28h] [-8h] BYREF

  v0 = sub_80032710(dword_80065D6C, 366, dword_80065D70, 0, 0, 3, v2, 0, 0);
  result = 0;
  if ( v0 )
    return *(__int16 *)v0;
  return result;
}
// 80065D6C: using guessed type int dword_80065D6C;
// 80065D70: using guessed type int dword_80065D70;

//----- (80025CE8) --------------------------------------------------------
int __fastcall sub_80025CE8(int *a1, int a2, int *a3, int a4)
{
  int *v7; // $s1
  int v8; // $a0
  int v10; // $v1
  int v11; // $v0
  int v12; // $s3
  int v13; // $s0
  int v14; // $s3
  int v15; // $s0
  int v16; // $s0
  int *v17; // $s2
  int v18; // $a0
  int v19; // $a1
  int v20; // $v1
  int result; // $v0
  int v22; // $s0
  int v23; // $t2
  int v24; // $t3
  int v25; // $t0
  int v26; // $v0
  int *v27; // $s2
  int v28; // $a0
  int v29; // $v1
  int v30; // $v1
  _DWORD *v31; // $s1
  int v32; // $s0
  bool v33; // dc
  int v34; // $v0
  int v35; // $v0

  v7 = &a1[4 * a2 - 4];
  v8 = a1[1];
  if ( v8 == v7[1] )
  {
    v10 = v7[2];
    v11 = a1[2];
    v12 = v10 - v11;
    if ( v10 - v11 < 0 )
      v12 = v11 - v10;
  }
  else
  {
    v14 = a1[2];
    if ( a1[3] == 2 )
    {
      v13 = a1[2];
      v14 = ((sub_80032EDC(v8, 639, 0, 2) - 1) << 8) - v13;
    }
    v15 = v7[2];
    if ( v7[3] == 1 )
      v15 = ((sub_80032EDC(v7[1], 639, 0, 2) - 1) << 8) - v15;
    v12 = v14 + v15;
    v16 = a2 - 2;
    if ( a2 - 2 > 0 )
    {
      v17 = a1 + 4;
      do
      {
        v18 = v17[1];
        v17 += 4;
        --v16;
        v12 = v12 - 2 + ((sub_80032EDC(v18, 639, 0, 2) - 1) << 8);
      }
      while ( v16 );
    }
  }
  if ( a4 >= 0 )
  {
    v12 = (v12 * a4) >> 8;
    v27 = a1;
  }
  else
  {
    v19 = sub_80032DF8(a1[1], 201, 0, 0, 0, 2, 0);
    v20 = (v12 * v19) >> 8;
    result = v20 < 9;
    v22 = v20;
    if ( v20 < 9 )
    {
      v23 = v7[1];
      v24 = v7[2];
      v25 = v7[3];
      *a3 = *v7;
      a3[1] = v23;
      a3[2] = v24;
      a3[3] = v25;
      return result;
    }
    if ( v20 > 512000 )
      v22 = 512000;
    v26 = (300 * v22 / 512000 + 100) << 16;
    if ( v19 == -1 && v26 == 0x80000000 )
      _break(6u, 0);
    v27 = a1;
    if ( v26 / v19 < v12 )
      v12 = v26 / v19;
  }
  if ( v27[3] == 2 )
    v28 = (sub_80032EDC(v27[1], 639, 0, 2) - 1) << 8;
  else
    v28 = 0;
  v30 = v27[2];
  v31 = v27 + 3;
  while ( *v31 == 2 )
  {
    v32 = v28 - v30;
    v33 = v28 - v30 >= v12;
    v29 = v30 + v12;
    if ( v33 )
      goto LABEL_35;
    v12 -= v32;
LABEL_32:
    v31 += 4;
    v27 += 4;
    v34 = sub_80032EDC(*(v31 - 2), 639, 0, 2) - 1;
    if ( *v31 == 2 )
    {
      v28 = v34 << 8;
      v30 = 1;
    }
    else
    {
      v28 = 0;
      v30 = (v34 << 8) - 1;
    }
  }
  if ( v30 < v12 )
  {
    v12 -= v30;
    goto LABEL_32;
  }
  v29 = v30 - v12;
LABEL_35:
  *a3 = *v27;
  v35 = v27[1];
  a3[2] = v29;
  a3[1] = v35;
  result = v27[3];
  a3[3] = result;
  return result;
}
// 80025EC0: conditional instruction was optimized away because $a1.4!=0

//----- (80026018) --------------------------------------------------------
int sub_80026018()
{
  sub_80026038();
  return -255;
}

//----- (80026038) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80026038()
{
  dword_80065D88 = 0;
  dword_8005C634 = 16;
  dword_8005C688 = 0;
  dword_8005C68C = 0;
  dword_8005C66C = 0;
  byte_8005C63E = 0;
  dword_80065DA8 = 4097;
  dword_8005C654 = 4097;
  dword_8005C664 = 0;
  dword_8005C668 = 0;
  dword_80065D80 = 16;
  dword_8005C6A4 = 0;
  dword_8005C6A0 = 0;
  dword_8005C69C[0] = 0;
  dword_80069120 = 256;
  return sub_8002437C(1);
}
// 80026054: write access to const memory at 8005C634 has been detected
// 80026060: write access to const memory at 8005C688 has been detected
// 80026064: write access to const memory at 8005C68C has been detected
// 80026068: write access to const memory at 8005C66C has been detected
// 8002606C: write access to const memory at 8005C63E has been detected
// 80026074: write access to const memory at 8005C654 has been detected
// 8002607C: write access to const memory at 8005C664 has been detected
// 80026080: write access to const memory at 8005C668 has been detected
// 80026088: write access to const memory at 8005C6A4 has been detected
// 8002608C: write access to const memory at 8005C6A0 has been detected
// 80026090: write access to const memory at 8005C69C has been detected
// 8005C634: using guessed type int dword_8005C634;
// 8005C63E: using guessed type char byte_8005C63E;
// 8005C654: using guessed type int dword_8005C654;
// 8005C664: using guessed type int dword_8005C664;
// 8005C668: using guessed type int dword_8005C668;
// 8005C66C: using guessed type int dword_8005C66C;
// 8005C688: using guessed type int dword_8005C688;
// 8005C68C: using guessed type int dword_8005C68C;
// 8005C69C: using guessed type int dword_8005C69C[];
// 8005C6A0: using guessed type int dword_8005C6A0;
// 8005C6A4: using guessed type int dword_8005C6A4;
// 80065D80: using guessed type int dword_80065D80;
// 80065D88: using guessed type int dword_80065D88;
// 80065DA8: using guessed type int dword_80065DA8;
// 80069120: using guessed type int dword_80069120;

//----- (800260B4) --------------------------------------------------------
int __fastcall sub_800260B4(int *a1, int a2, int *a3)
{
  int v3; // $s0
  int v5; // $s0
  int v6; // $v0
  int result; // $v0

  v3 = a1[2];
  if ( a1[3] == 2 )
  {
    v5 = v3 + a2;
    v6 = (sub_80032EDC(a1[1], 639, 0, 2) - 1) << 8;
    if ( v5 - v6 > 0 )
    {
      *a3 = v6;
      return v5 - v6;
    }
  }
  else
  {
    v5 = v3 - a2;
    result = -v5;
    if ( v5 < 0 )
    {
      *a3 = 0;
      return result;
    }
  }
  *a3 = v5;
  return 0;
}

//----- (80026140) --------------------------------------------------------
int __fastcall sub_80026140(unsigned int a1)
{
  if ( (a1 & 0x3E01) != 0 )
    return 4;
  if ( (a1 & 4) != 0 )
    return 1;
  return (a1 >> 6) & 2;
}

//----- (8002616C) --------------------------------------------------------
int __fastcall sub_8002616C(int *a1, _DWORD *a2, _DWORD *a3, _DWORD *a4, int *a5)
{
  int v9; // $s0
  int v10; // $s1
  unsigned int v11; // $v0
  int v12; // $s4
  int v13; // $s0
  int v14; // $s1
  unsigned __int8 *v15; // $v0
  _DWORD *v16; // $a1
  int v17; // $v0
  int v18; // $v1
  int v19; // $s0
  int v20; // $v0
  __int16 v21; // $a0
  int v22; // $s0
  int v23; // $a1
  int v24; // $a0
  int v25; // $v1
  int v26; // $a0
  int v28; // [sp+28h] [-18h]
  int v29; // [sp+2Ch] [-14h]
  int v30; // [sp+30h] [-10h]
  int v31; // [sp+38h] [-8h] BYREF
  int v32; // [sp+3Ch] [-4h] BYREF

  sub_800259A0(a1, &v31, &v32);
  if ( a3 )
    *a3 = v31;
  if ( a4 )
    *a4 = v32;
  v9 = a1[1];
  v10 = a1[2];
  v11 = sub_80032DF8(v9, 41, 0, 0, 0, 2, 0);
  v12 = sub_80026140(v11);
  if ( v9 == dword_80065D64 )
  {
    v28 = *a2 - dword_80065CF0;
    v29 = a2[1] - dword_80065CF4;
    v13 = dword_80065D24;
    v30 = a2[2] - dword_80065CF8;
  }
  else
  {
    v14 = v10 >> 8;
    v15 = sub_80032710(v9, 75, 0, v14, 0, 2, 0, 0, 0);
    v16 = *(_DWORD **)(*(_DWORD *)(v9 + 4) + 20);
    v28 = *a2 - ((*v16 + *(__int16 *)v15) << 8);
    v29 = a2[1] - ((v16[1] + *((__int16 *)v15 + 1)) << 8);
    v30 = a2[2] - ((v16[2] + *((__int16 *)v15 + 2)) << 8);
    if ( v12 == 2 )
    {
LABEL_10:
      v18 = -v29;
      goto LABEL_16;
    }
    v17 = sub_80032DF8(v9, 371, 0, 0, 0, 2, 0);
    v13 = *((__int16 *)sub_80032710(
                         *(_DWORD *)(*a1 + 4 * (3 * v17 + *(_DWORD *)(*(_DWORD *)(*a1 + 16) + 388) + 1) + 16),
                         75,
                         0,
                         2 * v14,
                         0,
                         2,
                         0,
                         0,
                         0)
          + 1);
  }
  if ( v12 == 2 )
    goto LABEL_10;
  v19 = -v13;
  if ( a5 )
    *a5 = v19;
  v20 = sub_8003C364(v19);
  v21 = v19;
  v22 = v20;
  v23 = sub_8003C2F0(v21);
  v24 = v28 >> 8;
  v25 = v30 >> 8;
  if ( v12 == 1 )
    v18 = ((v25 * v23) >> 4) + ((v24 * v22) >> 4);
  else
    v18 = ((v24 * v23) >> 4) - ((v25 * v22) >> 4);
LABEL_16:
  v26 = 1;
  if ( v32 >= v18 )
  {
    v26 = 0;
    if ( v18 < v31 )
      return -1;
  }
  return v26;
}
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D24: using guessed type int dword_80065D24;
// 80065D64: using guessed type int dword_80065D64;

//----- (80026464) --------------------------------------------------------
int __fastcall sub_80026464(int *a1, int *a2, int a3, int a4, __int16 a5, int a6)
{
  int v6; // $s6
  int v7; // $s7
  int *v9; // $s1
  unsigned int v10; // $v0
  int v11; // $s2
  int v12; // $v1
  int v13; // $a0
  int v14; // $t1
  int v15; // $t2
  int v16; // $t3
  int v17; // $v0
  int *v18; // $s1
  int v19; // $s4
  char *v20; // $s3
  unsigned int v21; // $v0
  int v22; // $v0
  int v23; // $s0
  int v24; // $v1
  int v25; // $t3
  int v26; // $t4
  int v27; // $t0
  int v28; // $v1
  int v29; // $t4
  int v30; // $t0
  int v31; // $t1
  int v34[2]; // [sp+20h] [-88h] BYREF
  char v35; // [sp+28h] [-80h] BYREF
  int v36; // [sp+90h] [-18h] BYREF
  int v37; // [sp+94h] [-14h] BYREF
  int v38; // [sp+98h] [-10h] BYREF
  int v39; // [sp+9Ch] [-Ch] BYREF
  int v40; // [sp+A0h] [-8h]
  int v41; // [sp+A4h] [-4h]

  v9 = &a1[4 * a6 - 4];
  v41 = a6;
  v10 = sub_80032DF8(v9[1], 41, 0, 0, 0, 2, 0);
  v40 = sub_80026140(v10);
  if ( v40 != 2 )
  {
    v7 = sub_8003C364(a5);
    v6 = sub_8003C2F0(a5);
  }
  if ( v41 == 1 )
  {
    if ( a4 )
      v11 = sub_8002719C(v9, a2, a3, v7, v6, v40, &v36);
    else
      v11 = sub_80026880(v9, a2, a3, v7, v6, v40, &v36);
  }
  else if ( a4 )
  {
    v11 = sub_80027298(v9, a2, a3, v7, v6, v40, &v36);
  }
  else
  {
    v11 = sub_8002697C(v9, a2, a3, v7, v6, v40, &v36);
  }
  if ( a6 == 1 )
  {
    v41 = 2;
    v12 = a1[1];
    v13 = a1[3];
    v9 += 4;
    a1[4] = *a1;
    a1[5] = v12;
    a1[7] = v13;
  }
  v9[2] = v36;
  if ( v11 )
  {
    if ( a6 == 1 )
    {
      v17 = sub_800284E8(v34, a1, 0);
      v18 = v34;
      v19 = v17 - 1;
      if ( v17 )
      {
        v20 = &v35;
        do
        {
          v21 = sub_80032DF8(*((_DWORD *)v20 - 1), 41, 0, 0, 0, 2, 0);
          v22 = sub_80026140(v21);
          v23 = v22;
          if ( v40 == v22 )
          {
            if ( a4 )
              v24 = sub_80027298(v18, a2, a3, v7, v6, v22, &v36);
            else
              v24 = sub_8002697C(v18, a2, a3, v7, v6, v22, &v36);
            if ( v11 < 0 || v24 >= 0 && v24 < v11 )
            {
              *(_DWORD *)v20 = v36;
              v25 = v18[1];
              v26 = v18[2];
              v27 = v18[3];
              a1[4] = *v18;
              a1[5] = v25;
              a1[6] = v26;
              a1[7] = v27;
              v11 = v24;
            }
          }
          else if ( v22 )
          {
            a4 = sub_8002616C(v18, a2, &v37, &v38, &v39);
            if ( !a4 )
            {
              v14 = v18[1];
              v15 = v18[2];
              v16 = v18[3];
              a1[4] = *v18;
              a1[5] = v14;
              a1[6] = v15;
              a1[7] = v16;
              return v41;
            }
            if ( v23 != 2 )
            {
              v7 = sub_8003C364(v39);
              v6 = sub_8003C2F0(v39);
            }
            if ( a4 >= 0 )
              v28 = sub_8002697C(v18, a2, v37, v7, v6, v23, &v36);
            else
              v28 = sub_80027298(v18, a2, v38, v7, v6, v23, &v36);
            if ( v11 < 0 || v28 >= 0 && v28 < v11 )
            {
              *(_DWORD *)v20 = v36;
              v11 = v28;
              v29 = v18[1];
              v30 = v18[2];
              v31 = v18[3];
              a1[4] = *v18;
              a1[5] = v29;
              a1[6] = v30;
              a1[7] = v31;
            }
          }
          v20 += 16;
          v18 += 4;
        }
        while ( v19-- != 0 );
      }
    }
  }
  return v41;
}
// 80026540: variable 'v7' is possibly undefined
// 80026540: variable 'v6' is possibly undefined

//----- (80026880) --------------------------------------------------------
int __fastcall sub_80026880(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7)
{
  int v11; // $s1
  int v12; // $s0
  int v13; // $v0
  int v14; // $a0
  int result; // $v0
  int v16; // [sp+20h] [-8h] BYREF
  int v17; // [sp+24h] [-4h] BYREF

  v11 = 2;
  a1[3] = 2;
  v12 = sub_8002697C(a1, a2, a3, a4, a5, a6, &v16);
  if ( v12 )
  {
    a1[3] = 1;
    v13 = sub_8002697C(a1, a2, a3, a4, a5, a6, &v17);
    if ( v13 >= 0 && (v12 < 0 || v13 < v12) )
    {
      v12 = v13;
      v11 = 1;
      v16 = v17;
    }
  }
  v14 = v16;
  a1[3] = v11;
  result = v12;
  *a7 = v14;
  return result;
}

//----- (8002697C) --------------------------------------------------------
int __fastcall sub_8002697C(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7)
{
  int v9; // $s2
  _DWORD *v10; // $s6
  int v11; // $s3
  unsigned __int8 *v12; // $v0
  int v13; // $s5
  unsigned __int8 *v14; // $a3
  int v15; // $a2
  int v16; // $v1
  int v17; // $a3
  int v18; // $s7
  int result; // $v0
  int v20; // $s4
  int v21; // $a2
  int v22; // $v1
  int v23; // $s1
  int v24; // $v1
  int v25; // $v0
  int v26; // $lo
  int v27; // $s2
  int v28; // $s3
  int v29; // $s0
  unsigned __int8 *v30; // $v0
  int v31; // $a2
  int v32; // $v1
  int v33; // $a2
  int v34; // $v1
  int v35; // $s0
  int v36; // $v0
  int v37; // $lo
  int v38; // $s2
  int v39; // $s5
  int v40; // $s1
  unsigned __int8 *v41; // $v0
  int v42; // $a2
  int v43; // $v1
  int v44; // $v1
  int v45; // $v1
  int v46; // [sp+28h] [-38h]
  int v47; // [sp+2Ch] [-34h]
  int v48; // [sp+30h] [-30h]
  int v49; // [sp+38h] [-28h]
  int v50; // [sp+3Ch] [-24h]
  int v51; // [sp+40h] [-20h]
  int v52; // [sp+48h] [-18h]
  int v53; // [sp+4Ch] [-14h]
  int v54; // [sp+50h] [-10h]
  int v55; // [sp+58h] [-8h]
  int v56; // [sp+5Ch] [-4h]

  v56 = a1[1];
  v9 = a1[2];
  v46 = *a2 >> 8;
  v47 = a2[1] >> 8;
  v48 = a2[2] >> 8;
  v10 = *(_DWORD **)(*(_DWORD *)(v56 + 4) + 20);
  v11 = v9 >> 8;
  v55 = sub_80032EDC(v56, 639, 0, 2) - 1;
  v12 = sub_80032710(v56, 75, 0, v9 >> 8, 0, 2, 0, 0, 0);
  v13 = (v9 >> 8) + 1;
  if ( v9 >> 8 < v55 )
  {
    v14 = v12 + 6;
  }
  else
  {
    v13 = v9 >> 8;
    v14 = v12;
  }
  if ( (a6 & 5) != 0 )
  {
    v49 = *(__int16 *)v12 + *v10;
    v51 = *((__int16 *)v12 + 2) + v10[2];
    v52 = *(__int16 *)v14 + *v10;
    v54 = *((__int16 *)v14 + 2) + v10[2];
    v15 = v46 - (v49 + (((v52 - v49) * (unsigned __int8)v9) >> 8));
    v16 = v48 - (v51 + (((v54 - v51) * (unsigned __int8)v9) >> 8));
    if ( a6 == 1 )
      v17 = ((v16 * a5) >> 4) + ((v15 * a4) >> 4);
    else
      v17 = ((v15 * a5) >> 4) - ((v16 * a4) >> 4);
  }
  else
  {
    v50 = *((__int16 *)v12 + 1) + v10[1];
    v53 = *((__int16 *)v14 + 1) + v10[1];
    v17 = (v50 + (((v53 - v50) * (unsigned __int8)v9) >> 8) - v47) << 8;
  }
  v18 = v9;
  if ( a3 < v17 )
  {
    v20 = v17 - a3;
    if ( a1[3] == 2 )
    {
      if ( (a6 & 5) != 0 )
      {
        v21 = v46 - v52;
        v22 = v48 - v54;
        if ( a6 == 1 )
          v23 = ((v22 * a5) >> 4) + ((v21 * a4) >> 4);
        else
          v23 = ((v21 * a5) >> 4) - ((v22 * a4) >> 4);
      }
      else
      {
        v23 = (v53 - v47) << 8;
      }
      v24 = v23 - a3;
      if ( a3 < v23 )
      {
        v27 = 0;
        if ( v24 >= v20 )
          goto LABEL_26;
LABEL_25:
        v20 = v24;
        v18 = v13 << 8;
        v27 = 0;
        while ( 1 )
        {
LABEL_26:
          v28 = v13;
          if ( v13 == v55 )
          {
            result = v20;
            *a7 = v18;
            return result;
          }
          v29 = v23;
          ++v13;
          v30 = sub_80032710(v56, 75, 0, (v28 + 1) << 8 >> 8, 0, 2, 0, 0, 0);
          if ( (a6 & 5) != 0 )
          {
            v31 = v46 - (*(__int16 *)v30 + *v10);
            v32 = v48 - (*((__int16 *)v30 + 2) + v10[2]);
            v23 = a6 == 1 ? ((v32 * a5) >> 4) + ((v31 * a4) >> 4) : ((v31 * a5) >> 4) - ((v32 * a4) >> 4);
          }
          else
          {
            v23 = (*((__int16 *)v30 + 1) + v10[1] - v47) << 8;
          }
          v24 = v23 - a3;
          if ( a3 >= v23 )
            break;
          ++v27;
          if ( v24 < v20 )
            goto LABEL_25;
          if ( v27 >= 3 )
            goto LABEL_75;
        }
        v45 = (v29 - a3) << 8;
        if ( v29 == v23 )
          _break(7u, 0);
        if ( v29 - v23 == -1 && v45 == 0x80000000 )
          _break(6u, 0);
        result = 0;
        *a7 = (v28 << 8) + v45 / (v29 - v23);
      }
      else
      {
        v25 = (v17 - a3) << 8;
        if ( v17 == v23 )
          _break(7u, 0);
        if ( v17 - v23 == -1 && v25 == 0x80000000 )
          _break(6u, 0);
        v26 = ((v13 << 8) - v9) * (v25 / (v17 - v23));
        result = 0;
        *a7 = v9 + (v26 >> 8);
      }
    }
    else
    {
      if ( (a6 & 5) != 0 )
      {
        v33 = v46 - v49;
        v34 = v48 - v51;
        if ( a6 == 1 )
          v35 = ((v34 * a5) >> 4) + ((v33 * a4) >> 4);
        else
          v35 = ((v33 * a5) >> 4) - ((v34 * a4) >> 4);
      }
      else
      {
        v35 = (v50 - v47) << 8;
      }
      if ( a3 < v35 )
      {
        v38 = 0;
        if ( v35 - a3 >= v20 )
          goto LABEL_51;
        v20 = v35 - a3;
LABEL_50:
        v18 = v11 << 8;
        v38 = 0;
        while ( 1 )
        {
LABEL_51:
          v39 = v11;
          if ( !v11 )
          {
            *a7 = v18;
            return v20;
          }
          v40 = v35;
          v41 = sub_80032710(v56, 75, 0, --v11 << 8 >> 8, 0, 2, 0, 0, 0);
          if ( (a6 & 5) != 0 )
          {
            v42 = v46 - (*(__int16 *)v41 + *v10);
            v43 = v48 - (*((__int16 *)v41 + 2) + v10[2]);
            v35 = a6 == 1 ? ((v43 * a5) >> 4) + ((v42 * a4) >> 4) : ((v42 * a5) >> 4) - ((v43 * a4) >> 4);
          }
          else
          {
            v35 = (*((__int16 *)v41 + 1) + v10[1] - v47) << 8;
          }
          if ( a3 >= v35 )
            break;
          ++v38;
          if ( v35 - a3 < v20 )
          {
            v20 = v35 - a3;
            goto LABEL_50;
          }
          if ( v38 >= 3 )
          {
LABEL_75:
            *a7 = v18;
            return -1;
          }
        }
        v44 = (v40 - a3) << 8;
        if ( v40 == v35 )
          _break(7u, 0);
        if ( v40 - v35 == -1 && v44 == 0x80000000 )
          _break(6u, 0);
        result = 0;
        *a7 = (v39 << 8) - v44 / (v40 - v35);
      }
      else
      {
        v36 = (v17 - a3) << 8;
        if ( v17 == v35 )
          _break(7u, 0);
        if ( v17 - v35 == -1 && v36 == 0x80000000 )
          _break(6u, 0);
        v37 = (v9 - (v11 << 8)) * (v36 / (v17 - v35));
        result = 0;
        *a7 = v9 - (v37 >> 8);
      }
    }
  }
  else
  {
    result = a3 - v17;
    *a7 = v9;
  }
  return result;
}
// 80026BFC: variable 'v52' is possibly undefined
// 80026C00: variable 'v54' is possibly undefined
// 80026C7C: variable 'v53' is possibly undefined
// 80026E60: variable 'v49' is possibly undefined
// 80026E64: variable 'v51' is possibly undefined
// 80026EE0: variable 'v50' is possibly undefined

//----- (8002719C) --------------------------------------------------------
int __fastcall sub_8002719C(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7)
{
  int v11; // $s1
  int v12; // $s0
  int v13; // $v0
  int v14; // $a0
  int result; // $v0
  int v16; // [sp+20h] [-8h] BYREF
  int v17; // [sp+24h] [-4h] BYREF

  v11 = 2;
  a1[3] = 2;
  v12 = sub_80027298(a1, a2, a3, a4, a5, a6, &v16);
  if ( v12 )
  {
    a1[3] = 1;
    v13 = sub_80027298(a1, a2, a3, a4, a5, a6, &v17);
    if ( v13 >= 0 && (v12 < 0 || v13 < v12) )
    {
      v12 = v13;
      v11 = 1;
      v16 = v17;
    }
  }
  v14 = v16;
  a1[3] = v11;
  result = v12;
  *a7 = v14;
  return result;
}

//----- (80027298) --------------------------------------------------------
int __fastcall sub_80027298(_DWORD *a1, int *a2, int a3, int a4, int a5, int a6, int *a7)
{
  int v9; // $s2
  _DWORD *v10; // $s6
  int v11; // $s3
  unsigned __int8 *v12; // $v0
  int v13; // $s5
  unsigned __int8 *v14; // $a3
  int v15; // $a2
  int v16; // $v1
  int v17; // $a3
  int v18; // $s4
  int result; // $v0
  int v20; // $s7
  int v21; // $a2
  int v22; // $v1
  int v23; // $s1
  int v24; // $v1
  int v25; // $v0
  int v26; // $lo
  int v27; // $s2
  int v28; // $s3
  int v29; // $s0
  unsigned __int8 *v30; // $v0
  int v31; // $a2
  int v32; // $v1
  int v33; // $a2
  int v34; // $v1
  int v35; // $s0
  int v36; // $v0
  int v37; // $lo
  int v38; // $s2
  int v39; // $s5
  int v40; // $s1
  unsigned __int8 *v41; // $v0
  int v42; // $a2
  int v43; // $v1
  int v44; // $v1
  int v45; // $v1
  int v46; // [sp+28h] [-38h]
  int v47; // [sp+2Ch] [-34h]
  int v48; // [sp+30h] [-30h]
  int v49; // [sp+38h] [-28h]
  int v50; // [sp+3Ch] [-24h]
  int v51; // [sp+40h] [-20h]
  int v52; // [sp+48h] [-18h]
  int v53; // [sp+4Ch] [-14h]
  int v54; // [sp+50h] [-10h]
  int v55; // [sp+58h] [-8h]
  int v56; // [sp+5Ch] [-4h]

  v56 = a1[1];
  v9 = a1[2];
  v46 = *a2 >> 8;
  v47 = a2[1] >> 8;
  v48 = a2[2] >> 8;
  v10 = *(_DWORD **)(*(_DWORD *)(v56 + 4) + 20);
  v11 = v9 >> 8;
  v55 = sub_80032EDC(v56, 639, 0, 2) - 1;
  v12 = sub_80032710(v56, 75, 0, v9 >> 8, 0, 2, 0, 0, 0);
  v13 = (v9 >> 8) + 1;
  if ( v9 >> 8 < v55 )
  {
    v14 = v12 + 6;
  }
  else
  {
    v13 = v9 >> 8;
    v14 = v12;
  }
  if ( (a6 & 5) != 0 )
  {
    v49 = *(__int16 *)v12 + *v10;
    v51 = *((__int16 *)v12 + 2) + v10[2];
    v52 = *(__int16 *)v14 + *v10;
    v54 = *((__int16 *)v14 + 2) + v10[2];
    v15 = v46 - (v49 + (((v52 - v49) * (unsigned __int8)v9) >> 8));
    v16 = v48 - (v51 + (((v54 - v51) * (unsigned __int8)v9) >> 8));
    if ( a6 == 1 )
      v17 = ((v16 * a5) >> 4) + ((v15 * a4) >> 4);
    else
      v17 = ((v15 * a5) >> 4) - ((v16 * a4) >> 4);
  }
  else
  {
    v50 = *((__int16 *)v12 + 1) + v10[1];
    v53 = *((__int16 *)v14 + 1) + v10[1];
    v17 = (v50 + (((v53 - v50) * (unsigned __int8)v9) >> 8) - v47) << 8;
  }
  v18 = a3 - v17;
  if ( v17 < a3 )
  {
    v20 = v9;
    if ( a1[3] == 2 )
    {
      if ( (a6 & 5) != 0 )
      {
        v21 = v46 - v52;
        v22 = v48 - v54;
        if ( a6 == 1 )
          v23 = ((v22 * a5) >> 4) + ((v21 * a4) >> 4);
        else
          v23 = ((v21 * a5) >> 4) - ((v22 * a4) >> 4);
      }
      else
      {
        v23 = (v53 - v47) << 8;
      }
      v24 = a3 - v23;
      if ( v23 < a3 )
      {
        v27 = 0;
        if ( v24 >= v18 )
          goto LABEL_26;
LABEL_25:
        v18 = v24;
        v20 = v13 << 8;
        v27 = 0;
        while ( 1 )
        {
LABEL_26:
          v28 = v13;
          if ( v13 == v55 )
          {
            result = v18;
            *a7 = v20;
            return result;
          }
          v29 = v23;
          ++v13;
          v30 = sub_80032710(v56, 75, 0, (v28 + 1) << 8 >> 8, 0, 2, 0, 0, 0);
          if ( (a6 & 5) != 0 )
          {
            v31 = v46 - (*(__int16 *)v30 + *v10);
            v32 = v48 - (*((__int16 *)v30 + 2) + v10[2]);
            v23 = a6 == 1 ? ((v32 * a5) >> 4) + ((v31 * a4) >> 4) : ((v31 * a5) >> 4) - ((v32 * a4) >> 4);
          }
          else
          {
            v23 = (*((__int16 *)v30 + 1) + v10[1] - v47) << 8;
          }
          v24 = a3 - v23;
          if ( v23 >= a3 )
            break;
          ++v27;
          if ( v18 >= v24 )
            goto LABEL_25;
          if ( v27 >= 3 )
            goto LABEL_75;
        }
        v45 = (a3 - v29) << 8;
        if ( v23 == v29 )
          _break(7u, 0);
        if ( v23 - v29 == -1 && v45 == 0x80000000 )
          _break(6u, 0);
        result = 0;
        *a7 = (v28 << 8) + v45 / (v23 - v29);
      }
      else
      {
        v25 = (a3 - v17) << 8;
        if ( v23 == v17 )
          _break(7u, 0);
        if ( v23 - v17 == -1 && v25 == 0x80000000 )
          _break(6u, 0);
        v26 = ((v13 << 8) - v9) * (v25 / (v23 - v17));
        result = 0;
        *a7 = v9 + (v26 >> 8);
      }
    }
    else
    {
      if ( (a6 & 5) != 0 )
      {
        v33 = v46 - v49;
        v34 = v48 - v51;
        if ( a6 == 1 )
          v35 = ((v34 * a5) >> 4) + ((v33 * a4) >> 4);
        else
          v35 = ((v33 * a5) >> 4) - ((v34 * a4) >> 4);
      }
      else
      {
        v35 = (v50 - v47) << 8;
      }
      if ( v35 < a3 )
      {
        v38 = 0;
        if ( a3 - v35 >= v18 )
          goto LABEL_51;
        v18 = a3 - v35;
LABEL_50:
        v20 = v11 << 8;
        v38 = 0;
        while ( 1 )
        {
LABEL_51:
          v39 = v11;
          if ( !v11 )
          {
            *a7 = v20;
            return v18;
          }
          v40 = v35;
          v41 = sub_80032710(v56, 75, 0, --v11 << 8 >> 8, 0, 2, 0, 0, 0);
          if ( (a6 & 5) != 0 )
          {
            v42 = v46 - (*(__int16 *)v41 + *v10);
            v43 = v48 - (*((__int16 *)v41 + 2) + v10[2]);
            v35 = a6 == 1 ? ((v43 * a5) >> 4) + ((v42 * a4) >> 4) : ((v42 * a5) >> 4) - ((v43 * a4) >> 4);
          }
          else
          {
            v35 = (*((__int16 *)v41 + 1) + v10[1] - v47) << 8;
          }
          if ( v35 >= a3 )
            break;
          ++v38;
          if ( a3 - v35 < v18 )
          {
            v18 = a3 - v35;
            goto LABEL_50;
          }
          if ( v38 >= 3 )
          {
LABEL_75:
            *a7 = v20;
            return -1;
          }
        }
        v44 = (a3 - v40) << 8;
        if ( v35 == v40 )
          _break(7u, 0);
        if ( v35 - v40 == -1 && v44 == 0x80000000 )
          _break(6u, 0);
        result = 0;
        *a7 = (v39 << 8) - v44 / (v35 - v40);
      }
      else
      {
        v36 = (a3 - v17) << 8;
        if ( v35 == v17 )
          _break(7u, 0);
        if ( v35 - v17 == -1 && v36 == 0x80000000 )
          _break(6u, 0);
        v37 = (v9 - (v11 << 8)) * (v36 / (v35 - v17));
        result = 0;
        *a7 = v9 - (v37 >> 8);
      }
    }
  }
  else
  {
    result = v17 - a3;
    *a7 = v9;
  }
  return result;
}
// 80027518: variable 'v52' is possibly undefined
// 8002751C: variable 'v54' is possibly undefined
// 80027598: variable 'v53' is possibly undefined
// 8002777C: variable 'v49' is possibly undefined
// 80027780: variable 'v51' is possibly undefined
// 800277FC: variable 'v50' is possibly undefined

//----- (80027AB8) --------------------------------------------------------
int __fastcall sub_80027AB8(_DWORD *a1)
{
  int v1; // $s5
  int v2; // $s6
  int v3; // $s7
  int v4; // $fp
  unsigned __int8 *v6; // $v0
  int v7; // $v1
  unsigned __int8 *v8; // $v0
  unsigned __int8 *v9; // $s3
  int result; // $v0
  unsigned __int8 *v11; // $s1
  int v12; // $s2
  int v13; // $s0
  int v14; // $s4
  int v15; // $v0
  __int16 v16; // $a0
  int v17; // $v0
  int v18; // $s0
  int v19; // $a2
  int v20; // $s2
  int v21; // $s4
  _DWORD v22[2]; // [sp+28h] [-8h] BYREF

  v6 = sub_80032710(dword_80065D68, 483, dword_80065D70, 0, 0, 0, 0, 0, 0);
  if ( v6 )
  {
    v1 = *(__int16 *)v6;
    v2 = *((__int16 *)v6 + 1);
    if ( v2 >= v1 )
    {
      v7 = a1[1] - dword_80065CF4;
      if ( v7 < v1 << 8 || v2 << 8 < v7 )
      {
        v22[0] = *((__int16 *)v6 + 2) << 8;
        sub_80027D6C(0, v22);
      }
    }
  }
  v8 = sub_80032710(dword_80065D68, 482, dword_80065D70, 0, 0, 0, 0, 0, 0);
  v9 = v8;
  if ( v8 )
  {
    v1 = *(__int16 *)v8;
    v2 = *((__int16 *)v8 + 1);
    if ( v2 < v1 )
      v9 = 0;
  }
  result = (int)sub_80032710(dword_80065D68, 484, dword_80065D70, 0, 0, 0, 0, 0, 0);
  v11 = (unsigned __int8 *)result;
  if ( result )
  {
    v3 = *(__int16 *)result;
    v4 = *(__int16 *)(result + 2);
    result = v4 < v3;
    if ( v4 < v3 )
      v11 = 0;
  }
  if ( v9 || v11 )
  {
    v12 = *a1 - dword_80065CF0;
    v13 = -dword_80065D24;
    v14 = a1[2] - dword_80065CF8;
    v15 = sub_8003C364(-(__int16)dword_80065D24);
    v16 = v13;
    v18 = v15;
    v17 = sub_8003C2F0(v16);
    v19 = (v12 >> 8) * v17;
    v20 = (((v14 >> 8) * v17) >> 4) + (((v12 >> 8) * v18) >> 4);
    v21 = (v19 >> 4) - (((v14 >> 8) * v18) >> 4);
    if ( v9 && (v20 < v1 << 8 || v2 << 8 < v20) )
    {
      v22[0] = *((__int16 *)v9 + 2) << 8;
      sub_80027D6C(0, v22);
    }
    result = v3 << 8;
    if ( v11 )
    {
      if ( v21 < result || (result = v4 << 8 < v21) != 0 )
      {
        v22[0] = *((__int16 *)v11 + 2) << 8;
        return sub_80027D6C(0, v22);
      }
    }
  }
  return result;
}
// 80027CD0: variable 'v1' is possibly undefined
// 80027CE0: variable 'v2' is possibly undefined
// 80027D08: variable 'v3' is possibly undefined
// 80027D18: variable 'v4' is possibly undefined
// 80027D6C: using guessed type int __fastcall sub_80027D6C(_DWORD, _DWORD);
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D24: using guessed type int dword_80065D24;
// 80065D68: using guessed type int dword_80065D68;
// 80065D70: using guessed type int dword_80065D70;

//----- (80027D6C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80027D6C(int a1, int *a2)
{
  int v2; // $a3
  int v3; // $v0
  int result; // $v0
  int *v5; // $a2
  int v6; // $v0

  if ( a1 == 1536 )
  {
LABEL_8:
    v3 = 3;
LABEL_12:
    v2 = v3 - 1;
    goto LABEL_13;
  }
  if ( a1 < 1537 )
  {
    if ( a1 != 1280 )
    {
      v2 = 0;
LABEL_13:
      v5 = &dword_8005C6EC[1];
      for ( dword_8005C6EC[0] = a1; v2 >= 0; ++v5 )
      {
        v6 = *a2++;
        --v2;
        *v5 = v6;
      }
      result = 1;
      dword_8005C688 = 1;
      return result;
    }
    goto LABEL_8;
  }
  if ( a1 == 2304 )
  {
    v3 = 1;
    goto LABEL_12;
  }
  if ( a1 != 2816 )
  {
    v2 = 0;
    goto LABEL_13;
  }
  result = (unsigned int)dword_80068F3C < 0x101;
  if ( (unsigned int)dword_80068F3C < 0x101 )
  {
    sub_80028A78();
    return sub_80018A54();
  }
  return result;
}
// 80027E24: write access to const memory at 8005C6EC has been detected
// 80027E54: write access to const memory at 8005C688 has been detected
// 8005C688: using guessed type int dword_8005C688;
// 8005C6EC: using guessed type int dword_8005C6EC[32];
// 80068F3C: using guessed type int dword_80068F3C;

//----- (80027E68) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80027E68()
{
  int result; // $v0

  result = -2147090432;
  dword_8005C688 = 0;
  return result;
}
// 80027EB4: write access to const memory at 8005C688 has been detected
// 8005C688: using guessed type int dword_8005C688;

//----- (80027EC0) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80027EC0(int *a1)
{
  int v2; // $v1
  int result; // $v0
  int v4; // $a0
  int v5; // $a2
  int v6; // $v0
  int *v7; // $a0

  v2 = *a1;
  if ( *a1 == 1024 )
  {
    result = 1;
    byte_8005C63F = 1;
    return result;
  }
  if ( *a1 >= 1025 )
  {
    if ( v2 != 1536 )
    {
      if ( v2 >= 1537 )
      {
        result = 2560;
        if ( v2 == 2304 )
          return result;
        if ( v2 == 2560 )
        {
          result = -2147090432;
          dword_8005C640 = a1[1];
          return result;
        }
      }
      else if ( v2 == 1280 )
      {
        result = (int)&dword_8005C690[3 * a1[1]];
        *(_DWORD *)result = a1[2];
        *(_DWORD *)(result + 4) = a1[3];
        return result;
      }
      return printf("ERROR CamProcessMessage():  Unknown opcode (%d)\n", *a1);
    }
    v5 = 3 * a1[1];
    v6 = a1[2];
    v7 = &dword_8005C69C[v5];
    if ( v6 )
    {
      v7[2] = 1;
      result = (int)&dword_8005C69C[v5];
      dword_8005C69C[v5 - 1] = a1[3];
    }
    else
    {
      result = -1;
      v7[2] = -1;
    }
    v7[1] = 0;
  }
  else
  {
    if ( v2 != 256 )
    {
      if ( v2 >= 257 )
      {
        if ( v2 == 512 )
        {
          result = (int)&dword_8005C634;
          dword_8005C68C = a1[1] >> 8;
          return result;
        }
        if ( v2 == 768 )
        {
          result = 0;
          dword_8005C68C = 0;
          return result;
        }
      }
      else if ( !v2 )
      {
        return sub_800280A4(a1[1] >> 8);
      }
      return printf("ERROR CamProcessMessage():  Unknown opcode (%d)\n", *a1);
    }
    result = dword_80065D8C;
    v4 = a1[1] >> 8;
    if ( dword_80065D8C != v4 )
    {
      sub_8002437C(v4);
      return (int)sub_8002513C();
    }
  }
  return result;
}
// 80027FF0: write access to const memory at 8005C63F has been detected
// 80028084: write access to const memory at 8005C640 has been detected
// 80027FBC: write access to const memory at 8005C68C has been detected
// 80027FE0: write access to const memory at 8005C68C has been detected
// 80048110: using guessed type int printf(const char *, ...);
// 8005C634: using guessed type int dword_8005C634;
// 8005C63F: using guessed type char byte_8005C63F;
// 8005C640: using guessed type int dword_8005C640;
// 8005C68C: using guessed type int dword_8005C68C;
// 8005C690: using guessed type int dword_8005C690[];
// 8005C69C: using guessed type int dword_8005C69C[];
// 80065D8C: using guessed type int dword_80065D8C;

//----- (800280A4) --------------------------------------------------------
int __fastcall sub_800280A4(int a1)
{
  int result; // $v0
  int v3; // $v0
  unsigned __int8 *v4; // $s0
  int v5; // $s0

  result = -1;
  if ( a1 )
  {
    v3 = sub_80032EDC(dword_80065D64, 639, 0, 2);
    v4 = sub_80032710(dword_80065D64, 424, (v3 - 1) << 8, 0, 0, 1, 0, 0, 0);
    if ( v4 && v4[3] )
    {
      do
      {
        if ( *((_DWORD *)v4 + 1) == a1 )
          sub_800281F8(v4, 2);
        v4 += (char)v4[3];
      }
      while ( v4[3] );
    }
    result = (int)sub_80032710(dword_80065D64, 424, 0, 0, 0, 1, 0, 0, 0);
    v5 = result;
    if ( result )
    {
      for ( result = *(char *)(result + 3); *(_BYTE *)(v5 + 3); result = *(char *)(v5 + 3) )
      {
        if ( *(_DWORD *)(v5 + 4) == a1 )
          sub_800281F8((_BYTE *)v5, 1);
        v5 += *(char *)(v5 + 3);
      }
    }
  }
  return result;
}
// 80065D64: using guessed type int dword_80065D64;

//----- (800281F8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_800281F8(_BYTE *a1, int a2)
{
  int result; // $v0
  int v5; // $a0
  int v6; // $v1
  int v7; // $a2
  unsigned __int8 *v8; // $s1
  unsigned int *v9; // $s0
  int v10; // $v0
  int v11; // $s4
  int v12; // $v1

  result = ((unsigned __int8)a1[2] - 1) << 24;
  switch ( a1[2] )
  {
    case 1:
      v6 = 64;
      goto LABEL_10;
    case 2:
      result = -2147090432;
      if ( a2 == 1 )
      {
        result = -2147090432;
        dword_80065D90 = (unsigned __int8)a1[1];
      }
      else
      {
        dword_80065D94 = (unsigned __int8)a1[1];
      }
      break;
    case 3:
      v6 = 32;
LABEL_10:
      v7 = 0;
      dword_8005C634 = v6;
      if ( a2 != 1 )
        v7 = dword_80065D74;
      v8 = &sub_80032710(dword_80065D64, 265, v7, 0, 0, 1, 0, 0, 0)[4 * (char)a1[1]];
      v9 = (unsigned int *)(*(_DWORD *)(*(_DWORD *)(dword_80065D64 + 4) + 16) + 4 * v8[2] + 404);
      v10 = sub_800142B4(v9, 1, 0);
      v11 = *(_DWORD *)(v10 + 4 * (3 * v8[1] + *(_DWORD *)(*(_DWORD *)(v10 + 16) + 388)) + 16);
      dword_8005C76C = *v9;
      dword_8005C770 = v8[1];
      if ( *v8 == 1 )
        dword_8005C774 = 0;
      else
        dword_8005C774 = (sub_80032EDC(v11, 639, 0, 2) - 1) << 8;
      dword_8005C778 = a2;
      v12 = (char)a1[2];
      if ( v12 == 3 && *a1 )
      {
        dword_8005C6AC = 16;
        dword_8005C6A8 = 16;
        dword_8005C6B0 = dword_80065CF0;
        dword_8005C6B4 = dword_80065CF4;
        dword_8005C6B8 = dword_80065CF8;
        v12 = (char)a1[2];
      }
      result = -2147090432;
      if ( v12 == 1 )
        result = (int)sub_80025070(v11, 0);
      break;
    case 4:
      v5 = (char)a1[1];
      result = dword_80065D8C;
      if ( dword_80065D8C != v5 )
      {
        sub_8002437C(v5);
        result = (int)sub_8002513C();
      }
      break;
    case 5:
      result = -2147090432;
      dword_8005C634 = 256;
      dword_80065D88 = a2;
      break;
    case 6:
      result = 1;
      byte_8005C63F = 1;
      break;
    default:
      return result;
  }
  return result;
}
// 800282BC: write access to const memory at 8005C63F has been detected
// 800282E4: write access to const memory at 8005C634 has been detected
// 80028458: write access to const memory at 8005C634 has been detected
// 80028388: write access to const memory at 8005C76C has been detected
// 80028394: write access to const memory at 8005C770 has been detected
// 800283D4: write access to const memory at 8005C778 has been detected
// 8002840C: write access to const memory at 8005C6AC has been detected
// 80028410: write access to const memory at 8005C6A8 has been detected
// 80028414: write access to const memory at 8005C6B0 has been detected
// 80028418: write access to const memory at 8005C6B4 has been detected
// 8002841C: write access to const memory at 8005C6B8 has been detected
// 800283AC: write access to const memory at 8005C774 has been detected
// 800283C8: write access to const memory at 8005C774 has been detected
// 800282DC: conditional instruction was optimized away because $v1.4 is in (==20|==40)
// 8005C634: using guessed type int dword_8005C634;
// 8005C63F: using guessed type char byte_8005C63F;
// 8005C6A8: using guessed type int dword_8005C6A8;
// 8005C6AC: using guessed type int dword_8005C6AC;
// 8005C6B0: using guessed type int dword_8005C6B0;
// 8005C6B4: using guessed type int dword_8005C6B4;
// 8005C6B8: using guessed type int dword_8005C6B8;
// 8005C76C: using guessed type int dword_8005C76C;
// 8005C770: using guessed type int dword_8005C770;
// 8005C774: using guessed type int dword_8005C774;
// 8005C778: using guessed type int dword_8005C778;
// 80065CF0: using guessed type int dword_80065CF0;
// 80065CF4: using guessed type int dword_80065CF4;
// 80065CF8: using guessed type int dword_80065CF8;
// 80065D64: using guessed type int dword_80065D64;
// 80065D74: using guessed type int dword_80065D74;
// 80065D88: using guessed type int dword_80065D88;
// 80065D8C: using guessed type int dword_80065D8C;
// 80065D90: using guessed type int dword_80065D90;
// 80065D94: using guessed type int dword_80065D94;

//----- (80028484) --------------------------------------------------------
int __fastcall sub_80028484(int *a1, _DWORD *a2)
{
  bool v3; // dc
  int result; // $v0
  int v5; // $a3
  int v6; // $t0
  int v7; // $t1
  int v8[24]; // [sp+10h] [-60h] BYREF

  v3 = sub_800284E8(v8, a1, 0) != 0;
  result = 1;
  if ( !v3 )
    return 0;
  v5 = v8[1];
  v6 = v8[2];
  v7 = v8[3];
  *a2 = v8[0];
  a2[1] = v5;
  a2[2] = v6;
  a2[3] = v7;
  return result;
}

//----- (800284E8) --------------------------------------------------------
int __fastcall sub_800284E8(int *a1, int *a2, int a3)
{
  unsigned __int8 *v6; // $s3
  int v7; // $s4
  int v8; // $v0
  int v9; // $v0
  int v10; // $s7
  int v12; // $s6
  int v13; // $s5
  unsigned __int8 *v14; // $s1
  _DWORD *v15; // $s0
  int v16; // $v0
  int v17; // $a0
  int v18; // [sp+28h] [-8h]

  if ( a2[3] == 1 )
  {
    v6 = sub_80032710(a2[1], 265, 0, 0, 0, 1, 0, 0, 0);
    if ( v6 )
    {
      v7 = sub_80032EDC(a2[1], 265, 0, 1);
      if ( !a3 )
      {
        v18 = dword_80065D90;
        goto LABEL_10;
      }
LABEL_8:
      v18 = 0xFFFF;
      goto LABEL_10;
    }
  }
  else
  {
    v8 = sub_80032EDC(a2[1], 639, 0, 2);
    v6 = sub_80032710(a2[1], 265, (v8 - 1) << 8, 0, 0, 1, 0, 0, 0);
    if ( v6 )
    {
      v9 = sub_80032EDC(a2[1], 639, 0, 2);
      v7 = sub_80032EDC(a2[1], 265, (v9 - 1) << 8, 1);
      if ( !a3 )
      {
        v18 = dword_80065D94;
        goto LABEL_10;
      }
      goto LABEL_8;
    }
  }
  v7 = 0;
LABEL_10:
  v10 = 1;
  if ( !v7 )
    return 0;
  v12 = 0;
  v13 = 0;
  if ( v7 > 0 )
  {
    v14 = v6 + 1;
    v15 = a1 + 2;
    do
    {
      if ( (v18 & v10) != 0 )
      {
        v16 = sub_800142B4((unsigned int *)(*(_DWORD *)(*a2 + 16) + 4 * v14[1] + 404), 1, 0);
        v17 = *(_DWORD *)(v16 + 4 * (3 * *v14 + *(_DWORD *)(*(_DWORD *)(v16 + 16) + 388)) + 16);
        *a1 = v16;
        *(v15 - 1) = v17;
        if ( *v6 == 1 )
        {
          v15[1] = 2;
          *v15 = 0;
        }
        else
        {
          v15[1] = 1;
          *v15 = (sub_80032EDC(v17, 639, 0, 2) - 1) << 8;
        }
        v15 += 4;
        a1 += 4;
        ++v13;
      }
      v14 += 4;
      v6 += 4;
      ++v12;
      v10 *= 2;
    }
    while ( v12 < v7 );
  }
  return v13;
}
// 80028650: variable 'v18' is possibly undefined
// 80065D90: using guessed type int dword_80065D90;
// 80065D94: using guessed type int dword_80065D94;

//----- (80028740) --------------------------------------------------------
unsigned __int8 *__fastcall sub_80028740(int a1, int a2, _DWORD *a3, _DWORD *a4)
{
  int v8; // $s0
  _DWORD *v9; // $s5
  unsigned __int8 *result; // $v0
  __int16 *v11; // $s4
  int v12; // $a0
  __int16 *v13; // $s1
  int v14; // $a0
  int v15; // $v0
  int v16; // $a0
  int v17; // $v0
  int v18; // $a0
  int v19; // [sp+2Ch] [-24h]
  int v20; // [sp+30h] [-20h]
  int v21; // [sp+34h] [-1Ch]
  int v22; // [sp+38h] [-18h]
  int v23; // [sp+3Ch] [-14h]

  v8 = *(_DWORD *)(a1 + 4);
  v9 = *(_DWORD **)(v8 + 20);
  result = sub_80032710(a1, 75, 0, a2 >> 8, 0, 2, 0, 0, 0);
  v11 = (__int16 *)result;
  if ( result )
  {
    if ( a1 == dword_80065D64 )
      v12 = dword_80065D68;
    else
      v12 = *(_DWORD *)(v8
                      + 4 * (3 * sub_80032DF8(a1, 371, 0, 0, 0, 2, 0) + *(_DWORD *)(*(_DWORD *)(v8 + 16) + 388) + 1)
                      + 16);
    v13 = (__int16 *)sub_80032710(v12, 75, 0, 2 * (a2 >> 8), 0, 2, 0, 0, 0);
    *a3 = (*v9 + *v11) << 8;
    a3[1] = (v9[1] + v11[1]) << 8;
    a3[2] = (v9[2] + v11[2]) << 8;
    a3[3] = *v13;
    a3[4] = v13[1];
    result = (unsigned __int8 *)v13[2];
    a3[5] = result;
    if ( a4 )
    {
      *a4 = v13[3];
      a4[1] = v13[4];
      result = (unsigned __int8 *)v13[5];
      a4[2] = result;
    }
    if ( (_BYTE)a2 )
    {
      result = (unsigned __int8 *)sub_80032EDC(a1, 639, 0, 2);
      if ( (a2 >> 8) + 1 < (int)result )
      {
        v19 = (v9[1] + v11[4]) << 8;
        v20 = (v9[2] + v11[5]) << 8;
        v21 = v13[6];
        v22 = v13[7];
        v23 = v13[8];
        *a3 += ((((*v9 + v11[3]) << 8) - *a3) * (unsigned __int8)a2) >> 8;
        a3[1] += ((v19 - a3[1]) * (unsigned __int8)a2) >> 8;
        v14 = a3[3];
        a3[2] += ((v20 - a3[2]) * (unsigned __int8)a2) >> 8;
        v15 = sub_80031E10(v14, v21, (unsigned __int8)a2);
        v16 = a3[4];
        a3[3] = v15;
        v17 = sub_80031E10(v16, v22, (unsigned __int8)a2);
        v18 = a3[5];
        a3[4] = v17;
        result = (unsigned __int8 *)sub_80031E10(v18, v23, (unsigned __int8)a2);
        a3[5] = result;
      }
    }
  }
  else
  {
    a3[2] = 0;
    a3[1] = 0;
    *a3 = 0;
    a3[5] = 0;
    a3[4] = 0;
    a3[3] = 0;
    if ( a4 )
    {
      a4[2] = 0;
      a4[1] = 0;
      *a4 = 0;
    }
  }
  return result;
}
// 80065D64: using guessed type int dword_80065D64;
// 80065D68: using guessed type int dword_80065D68;

//----- (80028A78) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80028A78()
{
  int v1; // [sp+18h] [-8h] BYREF

  if ( *(_DWORD *)(dword_80061044 + 8) < 8u
    && !dword_800690A0
    && (dword_80065BF4 & 0x10) != 0
    && (dword_80067A28 & 0x400) != 0 )
  {
    v1 = 0x8000;
    sub_80027D6C(0, &v1);
    sub_8001E34C(0, 17152, 0, 0, 0);
  }
  return 0;
}
// 80028B3C: write access to const memory at 8005C63F has been detected
// 80027D6C: using guessed type int __fastcall sub_80027D6C(_DWORD, _DWORD);
// 8005C634: using guessed type int dword_8005C634;
// 8005C63F: using guessed type char byte_8005C63F;
// 80060A90: using guessed type int dword_80060A90;
// 80061044: using guessed type int dword_80061044;
// 80065BF4: using guessed type int dword_80065BF4;
// 80065D80: using guessed type int dword_80065D80;
// 80067A28: using guessed type int dword_80067A28;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F3C: using guessed type int dword_80068F3C;
// 800690A0: using guessed type int dword_800690A0;

//----- (80028D8C) --------------------------------------------------------
int __fastcall sub_80028D8C(int a1, int *a2)
{
  int v3; // $s4
  int v4; // $s1
  int v6; // $s3
  int v7; // $s2
  int v8; // $s0
  bool v9; // dc
  int result; // $v0
  int v11; // $s4
  int v12; // $s1
  int v13; // $v0
  int v14; // $s3
  int v15; // $s2
  int v16; // $s0

  v3 = *(_DWORD *)(a1 + 16);
  v4 = *(_DWORD *)(v3 + 400) - 1;
  if ( v4 < 0 )
  {
LABEL_6:
    result = -23;
    if ( a1 == dword_80065D5C )
      return result;
    v11 = *(_DWORD *)(dword_80065D5C + 16);
    v12 = *(_DWORD *)(v11 + 400) - 1;
    v13 = 4 * v12;
    if ( v12 >= 0 )
    {
      v14 = v13 + 404;
      v15 = v13 + v11;
      do
      {
        if ( (*(_DWORD *)(v15 + 468) & 4) != 0 )
        {
          v16 = sub_800142B4((unsigned int *)(v11 + v14), 1, 0);
          v14 -= 4;
          if ( sub_80031868(v16, a2) )
            return v16;
        }
        else
        {
          v14 -= 4;
        }
        --v12;
        v15 -= 4;
      }
      while ( v12 >= 0 );
    }
    return -23;
  }
  else
  {
    v6 = 4 * v4 + 404;
    v7 = 4 * v4 + v3;
    while ( 1 )
    {
      if ( (*(_DWORD *)(v7 + 468) & 4) != 0 )
      {
        v8 = sub_800142B4((unsigned int *)(v3 + v6), 1, 0);
        v9 = sub_80031868(v8, a2);
        result = v8;
        if ( v9 )
          break;
      }
      v6 -= 4;
      --v4;
      v7 -= 4;
      if ( v4 < 0 )
        goto LABEL_6;
    }
  }
  return result;
}
// 80065D5C: using guessed type int dword_80065D5C;

//----- (80028ED8) --------------------------------------------------------
int __fastcall sub_80028ED8(__int16 *a1, unsigned __int16 a2, int *a3, _DWORD *a4, int *a5, int a6)
{
  int v6; // $t0
  int v10; // $t1
  int v11; // $a1
  int v12; // $v0
  int v13; // $v0
  int v14; // $v0
  int v15; // $a0
  int v16; // $v0
  int v17; // $a0
  int v18; // $v0
  int v19; // $a0
  int v20; // $v0
  int v21; // $a1
  int v22; // $v0
  int v23; // $v0
  int v24; // $v0
  int v25; // $v0
  int v26; // $a0
  int v27; // $a1
  int v28; // $v0
  int v29; // $a0
  int v30; // $v0
  int v31; // $lo
  int v32; // $v0
  int v33; // $a0
  int v34; // $v0
  int v35; // $v0
  int v36; // $v1
  int v37; // $v1
  int v38; // $a0
  int result; // $v0
  int v40; // $v0
  int v41; // $v0
  int v42; // $v0
  int v43; // $s3
  int v44; // $s4
  int v45; // $v1
  int i; // $s1
  int v47; // $v1
  bool v48; // dc
  int v49; // $s0
  int v50; // $v1
  int v51; // $a1
  int v52; // $a0
  int v53; // $v1
  int v54; // $a3
  int v55; // $t0
  int v56; // $a1
  int v57; // [sp+18h] [-30h]
  int v58; // [sp+18h] [-30h]
  BOOL v59; // [sp+18h] [-30h]
  int v60; // [sp+1Ch] [-2Ch]
  int v61; // [sp+1Ch] [-2Ch]
  BOOL v62; // [sp+1Ch] [-2Ch]
  int v63; // [sp+20h] [-28h]
  int v64; // [sp+20h] [-28h]
  BOOL v65; // [sp+20h] [-28h]
  _DWORD v66[3]; // [sp+28h] [-20h] BYREF
  int v67; // [sp+34h] [-14h]
  int v68; // [sp+38h] [-10h]
  int v69; // [sp+3Ch] [-Ch]
  int v70; // [sp+40h] [-8h]

  if ( (a2 & 1) != 0 || (v10 = (int)a1 + a2, !a2) )
    v10 = a2;
  if ( (a2 & 1) != 0 || !a2 )
  {
    v11 = 0x7FFFFFFF;
    if ( !v10 )
    {
      if ( *a5 <= 0 )
        v12 = *a3;
      else
        v12 = *a3 + a3[3];
      v57 = v12;
      if ( a5[1] <= 0 )
        v13 = a3[1];
      else
        v13 = a3[1] + a3[4];
      v60 = v13;
      if ( a5[2] <= 0 )
        v14 = a3[2];
      else
        v14 = a3[2] + a3[5];
      v63 = v14;
      v15 = *a5;
      if ( *a5 )
      {
        v16 = (v57 - *a4) << 8;
        if ( v15 == -1 && v16 == 0x80000000 )
          _break(6u, 0);
        if ( v16 / v15 != 0x7FFFFFFF )
          v11 = v16 / v15;
      }
      v17 = a5[1];
      if ( v17 )
      {
        v18 = (v60 - a4[1]) << 8;
        if ( v17 == -1 && v18 == 0x80000000 )
          _break(6u, 0);
        if ( v18 / v17 < v11 )
          v11 = v18 / v17;
      }
      v19 = a5[2];
      if ( v19 )
      {
        v20 = (v63 - a4[2]) << 8;
        if ( v19 == -1 && v20 == 0x80000000 )
          _break(6u, 0);
        if ( v20 / v19 < v11 )
          v11 = v20 / v19;
      }
      v21 = v11 + 256;
      *a4 += (v21 * *a5) >> 8;
      a4[1] += (v21 * a5[1]) >> 8;
      v22 = a4[2] + ((v21 * a5[2]) >> 8);
LABEL_91:
      a4[2] = v22;
      return v10;
    }
    if ( *a5 >= 0 )
      v23 = *a3;
    else
      v23 = *a3 + a3[3];
    v58 = v23;
    if ( a5[1] >= 0 )
      v24 = a3[1];
    else
      v24 = a3[1] + a3[4];
    v61 = v24;
    if ( a5[2] >= 0 )
      v25 = a3[2];
    else
      v25 = a3[2] + a3[5];
    v64 = v25;
    v26 = *a5;
    v27 = 0x80000000;
    if ( *a5 )
    {
      v28 = (v58 - (*a4 - v26)) << 8;
      if ( v26 == -1 && v28 == 0x80000000 )
        _break(6u, 0);
      if ( v28 / v26 != 0x80000000 )
      {
        v27 = v28 / v26;
        v6 = 0;
      }
    }
    v29 = a5[2];
    if ( !v29 )
    {
LABEL_63:
      v33 = a5[1];
      if ( !v33 )
        goto LABEL_82;
      v34 = (v61 - (a4[1] - v33)) << 8;
      if ( v33 == -1 && v34 == 0x80000000 )
        _break(6u, 0);
      if ( v27 >= v34 / v33 )
      {
        if ( v6 )
          goto LABEL_74;
        v35 = *a5;
        v36 = a5[1];
        if ( v33 < 0 )
          v36 = -v33;
        if ( v35 < 0 )
          v35 = -v35;
        if ( v35 >= v36 )
        {
LABEL_74:
          if ( v6 != 2 )
            goto LABEL_82;
          v37 = a5[2];
          v38 = a5[1];
          if ( v38 < 0 )
            v38 = -v38;
          if ( v37 < 0 )
          {
            if ( -v37 >= v38 )
              goto LABEL_82;
          }
          else if ( v37 >= v38 )
          {
LABEL_82:
            if ( v6 == 1 )
            {
              a5[1] = -a5[1];
              a4[1] = v61;
            }
            else
            {
              if ( v6 >= 2 )
              {
                if ( v6 != 2 )
                  return v10;
                a5[2] = -a5[2];
                v22 = v64;
                goto LABEL_91;
              }
              result = v10;
              if ( v6 )
                return result;
              *a5 = -*a5;
              *a4 = v58;
            }
            return v10;
          }
        }
      }
      v6 = 1;
      goto LABEL_82;
    }
    v30 = (v64 - (a4[2] - v29)) << 8;
    v31 = v30 / v29;
    if ( v29 == -1 && v30 == 0x80000000 )
      _break(6u, 0);
    if ( v27 >= v31 )
    {
      v32 = *a5;
      if ( v29 < 0 )
        v29 = -v29;
      if ( v32 >= 0 )
      {
        if ( v32 >= v29 )
          goto LABEL_63;
        v27 = v31;
        goto LABEL_62;
      }
      if ( -v32 >= v29 )
        goto LABEL_63;
    }
    v27 = v31;
LABEL_62:
    v6 = 2;
    goto LABEL_63;
  }
  v59 = a6 < a1[15];
  if ( a6 >= a1[15] )
    v40 = a3[3];
  else
    v40 = a3[3] / 2;
  v67 = v40;
  v62 = a6 < a1[16];
  if ( a6 >= a1[16] )
    v41 = a3[4];
  else
    v41 = a3[4] / 2;
  v68 = v41;
  v65 = a6 < a1[17];
  if ( a6 >= a1[17] )
    v42 = a3[5];
  else
    v42 = a3[5] / 2;
  v69 = v42;
  v43 = 0;
  v44 = 0;
  result = v59;
  v45 = 0;
  if ( !v59 )
  {
LABEL_103:
    if ( v45 > 0 )
      return result;
  }
  for ( i = 0; ; i = 0 )
  {
    v47 = 0;
    if ( v62 )
      goto LABEL_107;
LABEL_106:
    v48 = v47 > 0;
    v45 = v44 + 1;
    if ( !v48 )
      break;
LABEL_126:
    result = v59;
    v44 = v45;
    if ( !v59 )
      goto LABEL_103;
    result = v45 < 2;
    if ( v45 >= 2 )
      return result;
  }
  while ( 1 )
  {
LABEL_107:
    v49 = 0;
    v50 = 0;
    if ( v65 )
      goto LABEL_109;
LABEL_108:
    v48 = v50 > 0;
    v47 = i + 1;
    if ( !v48 )
      break;
LABEL_124:
    i = v47;
    if ( !v62 )
      goto LABEL_106;
    v48 = v47 < 2;
    v45 = v44 + 1;
    if ( !v48 )
      goto LABEL_126;
  }
  while ( 1 )
  {
LABEL_109:
    v51 = *a3;
    if ( v44 )
      v51 += v67;
    v66[0] = v51;
    v52 = a3[1];
    if ( i )
      v52 += v68;
    v66[1] = v52;
    v53 = a3[2];
    if ( v49 )
      v53 += v69;
    v66[2] = v53;
    if ( v51 < *a4 )
    {
      v54 = a4[1];
      if ( v52 < v54 )
      {
        v55 = a4[2];
        if ( v53 < v55 && v51 + v67 >= *a4 && v52 + v68 >= v54 && v53 + v69 >= v55 )
        {
          v56 = *(unsigned __int16 *)(v10 + 2 * v43);
          v70 = v10;
          result = sub_80028ED8(a1, v56, v66, a4, a5, a6 + 1);
          v10 = v70;
          if ( result )
            return result;
        }
      }
    }
    ++v49;
    ++v43;
    v50 = v49;
    if ( !v65 )
      goto LABEL_108;
    v47 = i + 1;
    if ( v49 >= 2 )
      goto LABEL_124;
  }
}
// 80029354: variable 'v6' is possibly undefined

//----- (800296F8) --------------------------------------------------------
int __fastcall sub_800296F8(int *a1, int *a2)
{
  int v4; // $fp
  int v5; // $s6
  int v6; // $s5
  int result; // $v0
  int v8; // $v0
  int v9; // $s3
  int *v10; // $s1
  _DWORD *v11; // $a1
  int v12; // $s0
  BOOL v13; // $v0
  int v14; // $v0
  int v15; // $s3
  int v16; // $s2
  int v17; // $s1
  int v18; // $s0
  int v19; // $a0
  bool v20; // dc
  int v21; // [sp+18h] [-48h]
  int v22; // [sp+1Ch] [-44h]
  int v23; // [sp+20h] [-40h]
  _DWORD v24[6]; // [sp+28h] [-38h] BYREF
  int v25[6]; // [sp+40h] [-20h] BYREF
  int v26; // [sp+58h] [-8h]
  int v27; // [sp+5Ch] [-4h]

  v4 = 0;
  v26 = 0;
  v27 = MEMORY[0x64];
  v5 = *(_DWORD *)(dword_80065D5C + 16);
  v6 = 0;
  if ( !*a2 && !a2[1] )
  {
    result = 0;
    if ( !a2[2] )
      return result;
  }
  if ( MEMORY[0x100] >> 28 == 8 )
  {
    v8 = *(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) & 0x800;
    v26 = 1;
    if ( v8 )
      v27 -= 3072000;
  }
  while ( 1 )
  {
    v21 = *a1;
    v22 = a1[1];
    v23 = a1[2];
    if ( dword_80068EF4 > 0 )
      break;
LABEL_16:
    if ( v26 && MEMORY[0x68] < a1[2] && v27 < a1[1] )
    {
      v13 = ++v6 < 81;
LABEL_32:
      v20 = !v13;
      result = 5;
      if ( v20 )
        return result;
      *a1 += *a2;
      a1[1] += a2[1];
      a1[2] += a2[2];
      goto LABEL_34;
    }
    v14 = *(_DWORD *)(v5 + 400);
    v15 = 0;
    if ( v14 > 0 )
    {
      v16 = 404;
      v17 = v5;
      while ( 1 )
      {
        if ( (*(_DWORD *)(v17 + 468) & 4) != 0 )
        {
          v18 = sub_800142B4((unsigned int *)(v5 + v16), 1, 0);
          if ( sub_80031868(v18, a1) )
            break;
        }
        v16 += 4;
        ++v15;
        v17 += 4;
        if ( v15 >= *(_DWORD *)(v5 + 400) )
          goto LABEL_29;
      }
      v19 = *(_DWORD *)(v18 + 20);
      v25[0] = *(_DWORD *)v19 << 8;
      v25[1] = *(_DWORD *)(v19 + 4) << 8;
      v25[2] = *(_DWORD *)(v19 + 8) << 8;
      v25[3] = *(_DWORD *)(v19 + 12) << 8;
      v25[4] = *(_DWORD *)(v19 + 16) << 8;
      v25[5] = *(_DWORD *)(v19 + 20) << 8;
      v4 = sub_80028ED8((__int16 *)v19, *(_WORD *)(v19 + 28), v25, a1, a2, 0);
      if ( *a1 == v21 )
      {
        v6 = 0;
        if ( a1[1] == v22 )
        {
          result = 0;
          if ( a1[2] == v23 )
            return result;
          goto LABEL_27;
        }
      }
      else
      {
LABEL_27:
        v6 = 0;
      }
LABEL_29:
      v14 = *(_DWORD *)(v5 + 400);
    }
    if ( v15 == v14 )
    {
      v13 = ++v6 < 41;
      goto LABEL_32;
    }
LABEL_34:
    if ( v4 )
      return v4;
  }
  v24[0] = *a1 - 20000;
  v24[3] = *a1 + 20000;
  v24[2] = a1[2] - 20000;
  v24[5] = a1[2] + 20000;
  v24[1] = a1[1] - 20000;
  v9 = 0;
  v24[4] = a1[1] + 20000;
  v10 = dword_80068E98;
  while ( 1 )
  {
    v11 = (_DWORD *)v10[228];
    if ( (*v11 & 7) == 0 )
    {
      v12 = v11[1];
      if ( (*(_DWORD *)(v12 + 172) & 0x10) != 0
        && (*(_DWORD *)(v12 + 256) & 0x800000) == 0
        && sub_8003191C(v24, v11 + 2) )
      {
        return v12;
      }
    }
    ++v9;
    ++v10;
    if ( v9 >= dword_80068EF4 )
      goto LABEL_16;
  }
}
// 80060A90: using guessed type int dword_80060A90;
// 80065D5C: using guessed type int dword_80065D5C;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (80029B10) --------------------------------------------------------
int __fastcall sub_80029B10(int a1, int a2, int a3)
{
  int result; // $v0

  result = *(_DWORD *)(a1 + 172) & 0x4000000;
  if ( result )
  {
    result = a3 + 32;
    if ( a2 >= 0 )
      result = dword_8005C7D4[a2] + 32;
    *(_DWORD *)(a1 + 280) = result;
  }
  return result;
}
// 8005C7D4: using guessed type int dword_8005C7D4[];

//----- (80029B5C) --------------------------------------------------------
int __fastcall sub_80029B5C(int a1, int *a2)
{
  int result; // $v0

  result = a1 < 64;
  if ( (unsigned int)(a1 - 48) >= 0x10 || (*a2 = 0, a1 >= 64) )
  {
    *a2 = 0;
  }
  else
  {
    result = -2147090432;
    if ( a1 >= 48 )
    {
      result = 4096 - 20 * *((unsigned __int8 *)&dword_8005C814[-12] + a1);
      *a2 = result;
    }
  }
  return result;
}
// 8005C814: using guessed type int dword_8005C814[4];

//----- (80029BBC) --------------------------------------------------------
int __fastcall sub_80029BBC(int a1, int a2, int a3)
{
  int v4; // $s1
  int result; // $v0
  int v6; // [sp+10h] [-8h] BYREF

  v4 = a1 + 32;
  sub_80029B5C(a2, &v6);
  if ( a3 )
  {
    result = sub_8001FD08(*(__int16 *)(v4 + 2), v6, 256);
    *(_WORD *)(v4 + 2) = result;
  }
  else
  {
    result = (unsigned __int16)v6;
    *(_WORD *)(v4 + 2) = v6;
  }
  return result;
}

//----- (80029C1C) --------------------------------------------------------
int __fastcall sub_80029C1C(int a1, int *a2)
{
  int v3; // $s5
  int v4; // $s4
  int v5; // $v0
  int v6; // $s3
  int v7; // $s2
  int v8; // $s1
  int v9; // $s0
  int v10; // $s2
  int v11; // $s3
  int v12; // $s4
  int *v13; // $s1
  _DWORD *v14; // $a0
  int v15; // $s0
  int v16; // $v0
  int result; // $v0
  int v18; // [sp+20h] [-28h]
  int v19; // [sp+24h] [-24h]
  int v20; // [sp+28h] [-20h]
  _DWORD v21[6]; // [sp+30h] [-18h] BYREF

  v3 = 0;
  v18 = *a2;
  v19 = a2[1];
  v20 = a2[2];
  v4 = *(_DWORD *)(dword_80065D5C + 16);
  while ( 1 )
  {
    v5 = *(_DWORD *)(v4 + 400);
    v6 = 0;
    if ( v5 > 0 )
    {
      v7 = 404;
      v8 = v4;
      while ( 1 )
      {
        if ( (*(_DWORD *)(v8 + 468) & 4) != 0 )
        {
          v9 = sub_800142B4((unsigned int *)(v4 + v7), 1, 0);
          if ( sub_80031868(v9, a2) )
            break;
        }
        v7 += 4;
        ++v6;
        v8 += 4;
        if ( v6 >= *(_DWORD *)(v4 + 400) )
          goto LABEL_7;
      }
      v3 = sub_8003C990(*(_DWORD *)(v9 + 20), a2, 9);
LABEL_7:
      v5 = *(_DWORD *)(v4 + 400);
    }
    if ( v6 == v5 )
      break;
    if ( v3 )
      goto LABEL_12;
  }
  v3 = 0;
LABEL_12:
  if ( dword_80068EF4 <= 0 )
    return v3;
  v10 = -999999999;
  v11 = 0;
  v12 = 0;
  v21[0] = v18 - 20000;
  v21[2] = v20 - 20000;
  v21[3] = v18 + 20000;
  v21[5] = v20 + 20000;
  v21[4] = v19;
  v21[1] = v19;
  v13 = dword_80068E98;
  do
  {
    v14 = (_DWORD *)v13[228];
    v15 = v14[1];
    if ( (*(_DWORD *)(v15 + 172) & 0x20000) != 0 )
    {
      v16 = sub_8002B9A4(v14, v21, 1, 0, v10, v19, 0);
      if ( v16 != -999999999 )
      {
        v12 = v15;
        v10 = v16;
      }
    }
    ++v11;
    ++v13;
  }
  while ( v11 < dword_80068EF4 );
  result = v3;
  if ( v12 )
  {
    if ( !v3 || (result = v3, v10 >= a2[1]) )
    {
      a2[1] = v10;
      return v12;
    }
  }
  return result;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (80029E40) --------------------------------------------------------
int __fastcall sub_80029E40(int a1, int *a2)
{
  int v3; // $s7
  int v4; // $s5
  int v5; // $fp
  int v7; // $s4
  int v8; // $v0
  int v9; // $s3
  int v10; // $s2
  int v11; // $s1
  int v12; // $s0
  int v13; // $s3
  int *v14; // $t0
  _DWORD *v15; // $a0
  int v16; // $a3
  _DWORD *v17; // $a1
  int v18; // $a2
  int v19; // $a0
  BOOL v20; // $v0
  int v21; // $v1
  int v22; // $a1
  int v23; // $a2
  int v24; // $a0
  int v25; // [sp+28h] [-18h]
  int v26; // [sp+2Ch] [-14h]
  int v27; // [sp+30h] [-10h]
  int v28; // [sp+38h] [-8h]

  v3 = -999999999;
  v4 = 0;
  v28 = 0;
  v5 = 0;
  if ( (*(_DWORD *)(a1 + 172) & 0x4000000) == 0 )
    return 0;
  v7 = *(_DWORD *)(dword_80065D5C + 16);
  v25 = *a2;
  v26 = a2[1];
  v27 = a2[2];
  while ( 1 )
  {
    v8 = *(_DWORD *)(v7 + 400);
    v9 = 0;
    if ( v8 > 0 )
    {
      v10 = 404;
      v11 = v7;
      while ( 1 )
      {
        if ( (*(_DWORD *)(v11 + 468) & 4) != 0 )
        {
          v12 = sub_800142B4((unsigned int *)(v7 + v10), 1, 0);
          if ( sub_80031868(v12, a2) )
            break;
        }
        v10 += 4;
        ++v9;
        v11 += 4;
        if ( v9 >= *(_DWORD *)(v7 + 400) )
          goto LABEL_10;
      }
      v4 = sub_8003C990(*(_DWORD *)(v12 + 20), a2, 1);
LABEL_10:
      v8 = *(_DWORD *)(v7 + 400);
    }
    if ( v9 == v8 )
      break;
    if ( v4 )
      goto LABEL_15;
  }
  v4 = 0;
LABEL_15:
  if ( dword_80068EF4 > 0 )
  {
    v13 = 0;
    v14 = dword_80068E98;
    do
    {
      v15 = (_DWORD *)v14[228];
      v16 = v15[1];
      if ( (*(_DWORD *)(v16 + 172) & 0x40020000) == 0x20000 )
      {
        v17 = v15 + 2;
        if ( (*v15 & 7) == 1 )
          v17 = v15 + 11;
        v18 = v17[4];
        if ( v25 >= *v17 - 35000 && v17[3] + 35000 >= v25 && v27 >= v17[2] - 35000 && v17[5] + 35000 >= v27 )
        {
          v19 = a2[1];
          v20 = v3 < v18;
          if ( v18 >= v19 )
          {
            v21 = v17[1];
            v20 = v3 < v18;
            if ( v19 >= v21 )
            {
              v20 = v3 < v18;
              if ( v26 >= (v18 + v21) / 2 )
              {
                v4 = v16;
                a2[1] = v18;
                v28 = 1;
                goto LABEL_35;
              }
            }
          }
          if ( v20 && v26 >= (v18 + v17[1]) / 2 )
          {
            v5 = v16;
            v3 = v17[4];
          }
        }
      }
      ++v13;
      ++v14;
    }
    while ( v13 < dword_80068EF4 );
    if ( v5 && (!v4 || v3 >= a2[1]) )
    {
      a2[1] = v3;
      v4 = v5;
      v28 = 1;
    }
  }
LABEL_35:
  if ( !v4 )
  {
    v24 = *(_DWORD *)(a1 + 68);
    v23 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v24 + 24) + 16) + 716);
    v22 = -1;
    if ( v23 )
      goto LABEL_42;
    v22 = 0;
LABEL_41:
    v23 = -1;
    goto LABEL_42;
  }
  v22 = -1;
  if ( !v28 )
  {
    v24 = *(_DWORD *)(a1 + 68);
    v22 = (unsigned __int16)(v4 & 0x3C00) >> 10;
    goto LABEL_41;
  }
  v23 = *(_DWORD *)(v4 + 280);
  v24 = *(_DWORD *)(a1 + 68);
LABEL_42:
  sub_80029B10(v24, v22, v23);
  return v4;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002A22C) --------------------------------------------------------
int __fastcall sub_8002A22C(int a1, int *a2, char a3, int a4)
{
  int v4; // $s7
  int v5; // $s6
  int v6; // $fp
  int result; // $v0
  int v8; // $t5
  int v9; // $t6
  int v10; // $s3
  int v11; // $v0
  int v12; // $s4
  int v13; // $s2
  int v14; // $s1
  int v15; // $s0
  int v16; // $s4
  int *v17; // $t2
  _DWORD *v18; // $a0
  int v19; // $a2
  int *v20; // $v1
  int v21; // $a1
  BOOL v22; // $v0
  int v23; // $v1
  bool v24; // dc
  BOOL v25; // $v0
  BOOL v26; // $v0
  int v27; // $v1
  int v28; // $s0
  unsigned int v29; // $v0
  int v30; // [sp+28h] [-28h]
  int v31; // [sp+2Ch] [-24h]
  int v32; // [sp+30h] [-20h]
  int v33; // [sp+38h] [-18h] BYREF
  int v34; // [sp+3Ch] [-14h]
  int v35; // [sp+40h] [-10h]
  int v36; // [sp+48h] [-8h]

  v4 = -999999999;
  v5 = 0;
  v36 = 0;
  v6 = 0;
  if ( (*(_DWORD *)(a1 + 172) & 0x4000000) == 0
    || (a3 & 4) != 0 && (*(_DWORD *)(*(_DWORD *)(a1 + 68) + 172) & 0x4000000) == 0 )
  {
    return 0;
  }
  v8 = a2[1];
  v9 = a2[2];
  v33 = *a2;
  v35 = v9;
  v34 = v8 + 25000;
  v10 = *(_DWORD *)(dword_80065D5C + 16);
  v30 = v33;
  v31 = v8 + 25000;
  v32 = v9;
  while ( 1 )
  {
    v11 = *(_DWORD *)(v10 + 400);
    v12 = 0;
    if ( v11 > 0 )
    {
      v13 = 404;
      v14 = v10;
      while ( 1 )
      {
        if ( (*(_DWORD *)(v14 + 468) & 4) != 0 )
        {
          v15 = sub_800142B4((unsigned int *)(v10 + v13), 1, 0);
          if ( sub_80031868(v15, &v33) )
            break;
        }
        v13 += 4;
        ++v12;
        v14 += 4;
        if ( v12 >= *(_DWORD *)(v10 + 400) )
          goto LABEL_11;
      }
      v5 = sub_8003C990(*(_DWORD *)(v15 + 20), &v33, a3 & 3);
LABEL_11:
      v11 = *(_DWORD *)(v10 + 400);
    }
    if ( v12 == v11 )
      break;
    if ( v5 )
      goto LABEL_16;
  }
  v5 = 0;
LABEL_16:
  if ( dword_80068EF4 <= 0 )
    goto LABEL_54;
  v16 = 0;
  v17 = dword_80068E98;
  do
  {
    v18 = (_DWORD *)v17[228];
    v19 = v18[1];
    if ( v19 == a1 || *(_DWORD *)(v19 + 312) == 0xFFFF )
      goto LABEL_41;
    v20 = v18 + 2;
    if ( (*v18 & 7) == 1 )
      v20 = v18 + 11;
    if ( (a3 & 1) != 0 )
    {
      v21 = v20[4];
      if ( v30 >= *v20 && v20[3] >= v30 && v32 >= v20[2] && v20[5] >= v32 )
      {
        v22 = v4 < v21;
        if ( v21 >= v34 )
        {
          v23 = v20[1];
          v22 = v4 < v21;
          if ( v34 >= v23 )
          {
            v5 = v18[1];
            v34 = v23;
            v36 = 1;
            goto LABEL_54;
          }
        }
        v24 = !v22;
        v25 = v31 < v21;
        if ( !v24 )
          goto LABEL_39;
      }
    }
    else if ( (a3 & 2) != 0 )
    {
      v21 = v20[5];
      if ( v30 >= *v20 && v20[3] >= v30 && v31 >= v20[1] && v20[4] >= v31 )
      {
        v26 = v4 < v21;
        if ( v21 >= v35 )
        {
          v27 = v20[2];
          v26 = v4 < v21;
          if ( v35 >= v27 )
          {
            v5 = v18[1];
            v35 = v27;
            v36 = 1;
            goto LABEL_54;
          }
        }
        v24 = !v26;
        v25 = v32 < v21;
        if ( !v24 )
        {
LABEL_39:
          if ( !v25 )
          {
            v6 = v18[1];
            v4 = v21;
          }
        }
      }
    }
LABEL_41:
    ++v16;
    ++v17;
  }
  while ( v16 < dword_80068EF4 );
  if ( !v6 )
    goto LABEL_54;
  if ( (a3 & 1) != 0 )
  {
    if ( !v5 || v4 >= v34 )
    {
      v5 = v6;
      v34 = v4;
      goto LABEL_53;
    }
  }
  else if ( (a3 & 2) != 0 && (!v5 || v4 >= v35) )
  {
    v35 = v4;
    v5 = v6;
LABEL_53:
    v36 = 1;
  }
LABEL_54:
  v28 = -1;
  if ( v5 )
  {
    v29 = v5 & 0x3F0;
    if ( v36 )
    {
      v28 = *(_DWORD *)(v5 + 312);
      if ( v28 < 0 )
      {
        v28 = -v28;
        a4 = 0;
      }
    }
    else
    {
      v28 = v29 >> 4;
      if ( (v29 >> 4) - 48 >= 0x10 )
        v28 = -1;
    }
  }
  sub_80029BBC(a1, v28, a4);
  result = v5;
  if ( (a3 & 4) != 0 )
  {
    sub_80029BBC(*(_DWORD *)(a1 + 68), v28, a4);
    return v5;
  }
  return result;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002A728) --------------------------------------------------------
void __fastcall sub_8002A728(int a1)
{
  int v2; // $a0
  unsigned __int16 v3; // $v0
  bool v4; // dc
  unsigned int v5; // $v0
  int v6; // $a1

  v2 = *(_DWORD *)(a1 + 240);
  if ( v2 )
  {
    v3 = sub_80032DF8(v2, 242, 0, 0, 0, 2, 0);
    v4 = v3 == 0xFFFF;
    v5 = v3 & 0x3F0;
    if ( !v4 )
    {
      v6 = v5 >> 4;
      if ( (v5 >> 4) - 48 >= 0x10 )
        v6 = -1;
      sub_80029BBC(a1, v6, 0);
    }
  }
}

//----- (8002A7A8) --------------------------------------------------------
int __fastcall sub_8002A7A8(_DWORD *a1, int a2, _DWORD *a3)
{
  int v4; // $s5
  int v5; // $s1
  int v6; // $s3
  int v7; // $s2
  int *v8; // $s0

  a3[1025] = 0;
  a3[1024] = 1;
  a3[1026] = *a1 - 76800;
  a3[1027] = a1[1] + *(_DWORD *)(*(_DWORD *)(a2 + 8) + 64) / 2 - 153600;
  a3[1028] = a1[2] - 76800;
  a3[1029] = *a1 + 76800;
  a3[1030] = a1[1] + *(_DWORD *)(*(_DWORD *)(a2 + 8) + 64) / 2 + 153600;
  a3[1031] = a1[2] + 76800;
  v4 = *(_DWORD *)(dword_80065D5C + 16);
  v5 = 0;
  if ( *(int *)(v4 + 400) > 0 )
  {
    v6 = 404;
    v7 = *(_DWORD *)(dword_80065D5C + 16);
    do
    {
      if ( (*(_DWORD *)(v7 + 468) & 4) != 0 )
      {
        v8 = *(int **)(sub_800142B4((unsigned int *)(v4 + v6), 1, 0) + 20);
        if ( sub_80031FB4(a3 + 1026, v8) )
          a3[1025] = sub_8003AF78(v8, a3 + 1026, &a3[2 * a3[1025]], a3[1025]);
      }
      v6 += 4;
      ++v5;
      v7 += 4;
    }
    while ( v5 < *(_DWORD *)(v4 + 400) );
  }
  LOWORD(a3[2 * a3[1025]]) = -1;
  return a3[1025];
}
// 80065D5C: using guessed type int dword_80065D5C;

//----- (8002A950) --------------------------------------------------------
int __fastcall sub_8002A950(int a1, _DWORD *a2)
{
  return sub_8002A7A8((_DWORD *)(a1 + 96), a1, a2);
}

//----- (8002A97C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_8002A97C()
{
  int v0; // $v0
  int v1; // $v0

  v0 = sub_800112F8();
  dword_80060AA4 = v0;
  dword_80060AB8 = v0;
  if ( !v0 )
    return -15;
  *(_WORD *)(v0 + 2) = 0;
  v1 = sub_800112F8();
  dword_80060AA8 = v1;
  if ( !v1 )
    return -15;
  *(_WORD *)(v1 + 2) = 0;
  return -255;
}
// 8002A98C: write access to const memory at 80060AA4 has been detected
// 8002A994: write access to const memory at 80060AB8 has been detected
// 8002A9AC: write access to const memory at 80060AA8 has been detected
// 80060AA4: using guessed type int dword_80060AA4;
// 80060AA8: using guessed type int dword_80060AA8;
// 80060AB8: using guessed type int dword_80060AB8;

//----- (8002A9DC) --------------------------------------------------------
int sub_8002A9DC()
{
  sub_8001152C(0);
  sub_8001152C(0);
  return -255;
}
// 80060AA8: using guessed type int dword_80060AA8;
// 80060AB8: using guessed type int dword_80060AB8;

//----- (8002AA14) --------------------------------------------------------
unsigned __int16 *__fastcall sub_8002AA14(unsigned __int16 *a1, unsigned __int16 *a2, unsigned __int16 *a3, int a4)
{
  unsigned __int16 *result; // $v0

  if ( (a1[1] & 1) != 0 )
  {
    if ( a4 )
      sub_80039E3C(a1, a2, a3);
    else
      sub_8003A234(a1, a2, a3);
    return a3;
  }
  else
  {
    sub_8003A928((int)(a1 + 2), (int)(a3 + 2), *a1);
    result = a3;
    *a3 = *a1;
  }
  return result;
}

//----- (8002AA94) --------------------------------------------------------
void __fastcall sub_8002AA94(_DWORD *a1, int *a2, unsigned int *a3)
{
  int v3; // $gp
  int v6; // $v1
  int v7; // $v0
  int v8; // $v1
  _DWORD *v9; // $s3
  int v10; // $v0
  bool v11; // dc
  BOOL v12; // $v0
  int v13; // $v1
  int v14; // $v1
  int v15; // $gp
  int v16; // $v0
  BOOL v17; // $v0
  int v18; // $a0
  int v19; // $a0
  int v20; // $a0
  int v21; // $s0
  int v22; // $v0
  int v23; // $s1
  int v24; // $s0
  int v25; // $s2
  unsigned int v26; // $a0
  int v27; // $a0
  unsigned int v28; // $v1
  int v29; // $a1
  int v30; // [sp+18h] [-28h] BYREF
  int v31; // [sp+1Ch] [-24h]
  int v32; // [sp+20h] [-20h]
  int v33[2]; // [sp+28h] [-18h] BYREF
  int v34; // [sp+30h] [-10h]
  int v35; // [sp+38h] [-8h] BYREF
  int v36; // [sp+3Ch] [-4h] BYREF

  if ( !a1 )
  {
    *(_DWORD *)(v3 + 592) = 0;
    return;
  }
  *(_DWORD *)(a1[2] + 72) = 0;
  v6 = *(_DWORD *)(dword_80061044 + 8);
  if ( v6 == 10 || (v7 = 62500, v6 == 17) )
  {
    if ( (a1[64] & 0x2000000) != 0 )
      v7 = 162500;
    else
      v7 = 62500;
  }
  *(_DWORD *)(v3 + 328) = v7;
  v8 = *(_DWORD *)(v3 + 592);
  v9 = a1 + 24;
  v30 = a1[24];
  v31 = a1[25];
  v32 = a1[26];
  v33[0] = *a2;
  v33[1] = a2[1];
  v34 = a2[2];
  if ( v8 )
  {
    v10 = dword_8006C2C8 - *a2;
    v11 = v10 < 0;
    v12 = v10 < 10;
    if ( v11 )
    {
      if ( *a2 - dword_8006C2C8 >= 10 )
        goto LABEL_22;
    }
    else if ( !v12 )
    {
      goto LABEL_22;
    }
    v13 = a2[1];
    if ( dword_8006C2CC - v13 < 0 )
    {
      if ( v13 - dword_8006C2CC >= 10 )
        goto LABEL_22;
    }
    else if ( dword_8006C2CC - v13 >= 10 )
    {
      goto LABEL_22;
    }
    v14 = a2[2];
    if ( dword_8006C2D0 - v14 >= 0 )
    {
      if ( dword_8006C2D0 - v14 >= 10 )
        goto LABEL_22;
      goto LABEL_21;
    }
    if ( v14 - dword_8006C2D0 < 10 )
    {
LABEL_21:
      v34 = 0;
      v33[0] = 0;
    }
  }
LABEL_22:
  sub_8002AF70(a1, a3, &v30, v33);
  if ( *(_DWORD *)(v15 + 592) || !*a2 && !a2[2] )
    goto LABEL_38;
  v16 = *v9 - v30;
  v11 = v16 < 0;
  v17 = v16 < 2;
  if ( v11 )
  {
    if ( v30 - *v9 >= 2 )
      goto LABEL_38;
  }
  else if ( !v17 )
  {
    goto LABEL_38;
  }
  v18 = a1[25];
  if ( v18 - v31 < 0 )
  {
    if ( v31 - v18 >= 2 )
      goto LABEL_38;
  }
  else if ( v18 - v31 >= 2 )
  {
    goto LABEL_38;
  }
  v19 = a1[26];
  if ( v19 - v32 < 0 )
  {
    if ( v32 - v19 < 2 )
    {
LABEL_37:
      dword_8006C2C8 = *a2;
      dword_8006C2CC = a2[1];
      v20 = a2[2];
      *(_DWORD *)(v15 + 592) = 1;
      dword_8006C2D0 = v20;
      goto LABEL_39;
    }
  }
  else if ( v19 - v32 < 2 )
  {
    goto LABEL_37;
  }
LABEL_38:
  *(_DWORD *)(v15 + 592) = 0;
LABEL_39:
  if ( (v33[0] || v34) && (a1[42] & 0x100) != 0 )
  {
    v21 = sub_8004F794(*a2, a2[2]) & 0xFFF;
    v23 = sub_8004F794(v30 - *v9, v32 - a1[26]) & 0xFFF;
    v22 = sub_80031CF0(a1 + 24, &v30);
    v24 = (v21 - v23) << 20 >> 20;
    if ( v24 < 0 )
      v24 = -v24;
    v25 = 30 * v22;
    if ( v24 >= 1013 )
      v25 = 0;
    a1[33] = ((sub_8003C2F0(v23) >> 4) * v25) >> 8;
    a1[35] = ((sub_8003C364(v23) >> 4) * v25) >> 8;
  }
  *v9 = v30;
  a1[25] = v31;
  a1[26] = v32;
  if ( (a1[42] & 0x400) != 0 )
  {
    v26 = a1[71];
    if ( v26 <= 0x3FFFF )
    {
      v36 = 25600;
      v28 = a1[71];
      if ( v28 == 7936 )
      {
        v29 = (int)a1;
      }
      else if ( v28 >= 0x1F01 )
      {
        if ( v28 == 12288 || v28 == 12544 )
        {
          sub_8001E34C(0, a1[71], 0, 0, 0);
          return;
        }
        v29 = (int)a1;
      }
      else if ( v28 == 2304 )
      {
        v29 = (int)a1;
        if ( (a1[42] & 1) != 0 )
          return;
      }
      else
      {
        v29 = (int)a1;
      }
      sub_8001DB38(0, v29, *(_DWORD *)(v29 + 284), 1, &v36);
      return;
    }
    if ( v26 <= 0x40024 )
    {
      v35 = 256 << (v26 - 29);
      v27 = 0;
    }
    else
    {
      v35 = (v26 - 262180) << 8;
      v27 = 256;
    }
    sub_80027D6C(v27, &v35);
  }
}
// 8002AAC0: variable 'v3' is possibly undefined
// 8002AC30: variable 'v15' is possibly undefined
// 80061044: using guessed type int dword_80061044;
// 8006C2C8: using guessed type int dword_8006C2C8;
// 8006C2CC: using guessed type int dword_8006C2CC;
// 8006C2D0: using guessed type int dword_8006C2D0;

//----- (8002AF70) --------------------------------------------------------
char *__fastcall sub_8002AF70(_DWORD *a1, unsigned int *a2, int *a3, int *a4)
{
  int v7; // $a0
  __int64 v9; // kr00_8
  int v10; // $v0
  int v11; // $a0
  int v12; // $a2
  __int64 v13; // kr10_8
  int v14; // $v0
  int v15; // $a0
  int v16; // $a1
  __int64 v17; // kr20_8
  int v18; // $v0
  int v19; // $v1
  int v20; // $s0
  BOOL v21; // $v0
  int v22; // $s0
  int v23; // $a1
  char *result; // $v0
  int v25; // $s1
  int v26; // $t0
  int v27; // $a1
  int *v28; // $a0
  int *v29; // $a3
  int *v30; // $a2
  int v31; // $lo
  int v32; // $v0
  int v33; // $a1
  int *v34; // $a0
  int *v35; // $v1
  int v36; // $v0
  int v37[4]; // [sp+18h] [-30h] BYREF
  _DWORD v38[4]; // [sp+28h] [-20h] BYREF
  char v39; // [sp+38h] [-10h] BYREF
  char v40; // [sp+40h] [-8h] BYREF

  a2[1044] = 0;
  v7 = *a4;
  if ( *a4 < 0 )
  {
    v10 = -v7 >> 31;
    v9 = 1374389535LL * -v7;
  }
  else
  {
    v9 = 1374389535LL * v7;
    v10 = v7 >> 31;
  }
  v11 = a4[2];
  v12 = (SHIDWORD(v9) >> 13) - v10;
  if ( v11 < 0 )
  {
    v14 = -v11 >> 31;
    v13 = 1374389535LL * -v11;
  }
  else
  {
    v13 = 1374389535LL * v11;
    v14 = v11 >> 31;
  }
  v15 = a4[1];
  v16 = (SHIDWORD(v13) >> 13) - v14;
  if ( v15 < 0 )
  {
    v18 = -v15 >> 31;
    v17 = 458129845LL * -v15;
  }
  else
  {
    v17 = 458129845LL * v15;
    v18 = v15 >> 31;
  }
  v19 = (SHIDWORD(v17) >> 14) - v18;
  v20 = v12;
  v21 = v12 < v16;
  if ( v12 < v19 )
  {
    v20 = v19;
    v21 = v19 < v16;
  }
  v22 = v20 + 1;
  if ( v21 )
    v22 = v16 + 1;
  v23 = 2;
  result = &v40;
  do
  {
    *(_DWORD *)result = 0;
    --v23;
    result -= 4;
  }
  while ( v23 >= 0 );
  v25 = 1;
  if ( v22 > 0 )
  {
    v26 = 0;
    do
    {
      v27 = 0;
      v28 = (int *)&v39;
      v29 = v37;
      v30 = a4;
      do
      {
        v31 = *v30++ * ((v25 << 8) / v22);
        ++v27;
        v32 = (v31 >> 8) - *v28;
        v26 |= v32;
        *v29 = v32;
        *v28++ = v31 >> 8;
        ++v29;
      }
      while ( v27 < 3 );
      if ( v26 )
      {
        sub_8002CEA8(a1, a2, a3, v37, v38);
        v33 = 0;
        v34 = a3;
        v35 = v38;
        do
        {
          v36 = *v35++;
          ++v33;
          *v34++ = v36;
        }
        while ( v33 < 3 );
      }
      result = (char *)(v22 < ++v25);
      v26 = 0;
    }
    while ( v22 >= v25 );
  }
  return result;
}
// 8002B0E0: conditional instruction was optimized away because $s0.4>=1
// 8002B0F0: conditional instruction was optimized away because $s0.4>=1

//----- (8002B1CC) --------------------------------------------------------
BOOL __fastcall sub_8002B1CC(_DWORD *a1, int a2)
{
  int v3; // $a3
  int v4; // $v0
  int v5; // $v1
  BOOL result; // $v0
  int v7; // $v1
  int v8; // $a0
  int v9; // $v0
  int v10; // $v0
  int v11; // $v1

  if ( a2 )
    v3 = ((unsigned __int8)(a2 & 0xE) >> 1) + 1;
  else
    v3 = 0;
  switch ( (unsigned __int16)(a2 & 0x3F0) >> 4 )
  {
    case 1:
      v4 = a1[42];
      v5 = 1792;
      goto LABEL_24;
    case 2:
      v4 = a1[42];
      v5 = 3072;
      goto LABEL_24;
    case 3:
      v4 = a1[42];
      v5 = 8448;
      goto LABEL_24;
    case 4:
      v4 = a1[42];
      v5 = 7936;
      goto LABEL_24;
    case 5:
      v4 = a1[42];
      v5 = 7680;
      goto LABEL_24;
    case 6:
      v4 = a1[42];
      v5 = 3328;
      goto LABEL_24;
    case 7:
    case 8:
    case 9:
    case 0xA:
      v10 = a1[42];
      a1[71] = 4608;
      a1[42] = v10 | 0x2000;
      break;
    case 0xB:
      goto LABEL_11;
    case 0xC:
      v4 = a1[42];
      v5 = 8960;
      goto LABEL_24;
    case 0xD:
      v4 = a1[42];
      v5 = 13056;
      goto LABEL_24;
    case 0xE:
      if ( a1[64] >> 28 == 14 )
        v9 = a1[42] | 0x400;
      else
        v9 = a1[42] | 0x2000400;
      a1[42] = v9;
      a1[71] = 13568;
      break;
    case 0xF:
      a1[42] |= 0x4000000u;
      break;
    case 0x12:
      v4 = a1[42];
      v5 = 8448;
      goto LABEL_24;
    case 0x1B:
      v4 = a1[42];
      v5 = 12288;
      goto LABEL_24;
    case 0x1C:
      v4 = a1[42];
      v5 = 12544;
LABEL_24:
      a1[71] = v5;
      a1[42] = v4 | 0x400;
      break;
    case 0x1D:
    case 0x1E:
    case 0x1F:
    case 0x20:
    case 0x21:
    case 0x22:
    case 0x23:
    case 0x24:
    case 0x25:
    case 0x26:
      v11 = a1[42];
      a1[71] = ((unsigned __int16)(a2 & 0x3F0) >> 4) + 0x40000;
      a1[42] = v11 | 0x400;
      break;
    default:
      break;
  }
  if ( v3 == 4 )
  {
LABEL_11:
    result = 1;
    v7 = a1[42];
    v8 = 2304;
LABEL_12:
    a1[71] = v8;
    a1[42] = v7 | 0x400;
    return result;
  }
  if ( v3 == 6 )
  {
    result = 0;
    v7 = a1[42];
    v8 = 0x4000;
    goto LABEL_12;
  }
  return v3 == 5 || v3 == 3;
}

//----- (8002B394) --------------------------------------------------------
int __fastcall sub_8002B394(int a1, int a2, _DWORD *a3, unsigned int *a4, int a5, int a6)
{
  int v6; // $gp
  int v8; // $v0
  int v9; // $t0
  int v10; // $v1
  int *v11; // $a3

  v8 = a3[1];
  v9 = v8 + *(_DWORD *)(v6 + 328);
  v10 = *(_DWORD *)(a2 + 4) - v8;
  v11 = (int *)(a4 + 1032);
  if ( v10 > 0 )
    v9 += v10;
  if ( !a5 )
    _break(7u, 0);
  a4[1032] = *a3 + -38400 / a5 + 3200;
  v11[1] = a3[1] - 19200;
  v11[2] = a3[2] + -38400 / a5 + 3200;
  v11[3] = *a3 + 38400 / a5 - 3200;
  v11[4] = a3[1] + *(_DWORD *)(*(_DWORD *)(a1 + 8) + 64);
  v11[5] = a3[2] + 38400 / a5 - 3200;
  return sub_8003BD18(a1, a4, (int)(a4 + 1026), v11, v9, a6, -999999999, (int (__fastcall *)(_DWORD))sub_8002B1CC);
}
// 8002B40C: conditional instruction was optimized away because %arg_10.4!=0
// 8002B3A8: variable 'v6' is possibly undefined

//----- (8002B4E8) --------------------------------------------------------
int __fastcall sub_8002B4E8(_DWORD *a1, int a2, _DWORD *a3, _DWORD *a4)
{
  int v7; // $fp
  int v8; // $v1
  int v9; // $a0
  int v10; // $s7
  int v11; // $s3
  _DWORD *v12; // $s1
  int *v13; // $t0
  int v14; // $v0
  _DWORD *v15; // $s2
  _DWORD *v16; // $s0
  int v17; // $a0
  int v18; // $a1
  int v19; // $a0
  _DWORD *v20; // $a3
  _DWORD *v21; // [sp+18h] [-18h]
  int v22; // [sp+20h] [-10h]
  int *v23; // [sp+28h] [-8h]

  if ( !dword_80068EF4 )
    return -999999999;
  v7 = -999999999;
  v22 = -999999999;
  v8 = a3[1];
  v9 = *(_DWORD *)(a2 + 4) - v8;
  v10 = v8 + 62500;
  if ( v9 > 0 )
    v10 += v9;
  a4[1032] = *a3 - 19200;
  a4[1033] = a3[1];
  a4[1034] = a3[2] - 19200;
  a4[1035] = *a3 + 19200;
  a4[1036] = a3[1] + *(_DWORD *)(a1[2] + 64);
  a4[1037] = a3[2] + 19200;
  v11 = 0;
  a4[1044] += 16;
  v12 = 0;
  if ( dword_80068EF4 > 0 )
  {
    v13 = dword_80068E98;
    v14 = 0;
    do
    {
      v15 = (_DWORD *)v13[v14 + 228];
      v16 = (_DWORD *)v15[1];
      v17 = -999999999;
      if ( (v16[43] & 0x400000) != 1 )
        v17 = v10;
      if ( (v16[43] & 0x200) != 0 )
        v21 = v16 + 39;
      else
        v21 = 0;
      v23 = v13;
      v18 = sub_8002B9A4(v15, a4 + 1032, 1, 1, v7, v17, v21);
      v13 = v23;
      if ( v18 == -999999999 )
        goto LABEL_29;
      if ( (v16[43] & 0x20000) != 0
        && (((a1[64] & 0x10) == 0 && a1[66] != 5
          || (*(_DWORD *)(*(_DWORD *)(v16[3] + 16) + 4) != 768 || (v16[44] & 0x412) != 0) && (v16[64] & 0x20) == 0)
         && (a1[64] & 0x4000) == 0
         || (v16[64] & 0x4000) != 0) )
      {
        v19 = a1[64];
        if ( (v19 & 0x280000) != 0x80000 || (v16[44] & 0x80000) != 0 )
        {
LABEL_27:
          v22 = v18 + 1;
          v16[42] |= 0x4000u;
          v7 = v18;
          *(_DWORD *)(a1[2] + 72) = v16;
          goto LABEL_28;
        }
        if ( (v19 & 8) != 0 )
        {
          if ( (v16[64] & 0x4000000) != 0 )
            goto LABEL_27;
        }
        else if ( (v16[64] & 0x80) != 0 )
        {
          goto LABEL_27;
        }
      }
LABEL_28:
      v12 = v15;
      a4[1044] += 4096;
LABEL_29:
      v14 = ++v11;
    }
    while ( v11 < v23[23] );
  }
  if ( v12 )
  {
    v20 = 0;
    if ( (*v12 & 7) == 0 )
      v20 = v12 + 2;
    sub_8001B328(a1, a4 + 1032, (_DWORD *)v12[1], v20);
  }
  return v22;
}
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002B838) --------------------------------------------------------
int __fastcall sub_8002B838(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v4; // $s5
  int v5; // $s2
  int *v6; // $s4
  _DWORD *v7; // $s0
  _DWORD *v8; // $s3
  _DWORD *v9; // $a3

  v4 = a3 + 1032;
  if ( dword_80068EF4 )
  {
    a3[1032] = *a2 + *(_DWORD *)(a1[2] + 48);
    a3[1033] = a2[1];
    a3[1034] = a2[2] + *(_DWORD *)(a1[2] + 56);
    a3[1035] = *a2 + *(_DWORD *)(a1[2] + 60);
    a3[1036] = a2[1] + *(_DWORD *)(a1[2] + 64);
    a3[1037] = a2[2] + *(_DWORD *)(a1[2] + 68);
    v5 = 0;
    if ( dword_80068EF4 > 0 )
    {
      v6 = dword_80068E98;
      do
      {
        v7 = (_DWORD *)v6[228];
        v8 = (_DWORD *)v7[1];
        if ( sub_8003191C(v4, v7 + 2) )
        {
          v9 = 0;
          if ( (*v7 & 7) == 0 )
            v9 = v7 + 2;
          sub_8001B328(a1, v4, v8, v9);
        }
        ++v5;
        ++v6;
      }
      while ( v5 < dword_80068EF4 );
    }
  }
  return 0;
}
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002B9A4) --------------------------------------------------------
int __fastcall sub_8002B9A4(_DWORD *a1, _DWORD *a2, int a3, int a4, int a5, int a6, _DWORD *a7)
{
  int v8; // $v1
  int v11; // $a0
  BOOL v12; // $v0
  BOOL v13; // $v0
  int v14; // $s2
  int v15; // $v0
  int *v16; // $a2
  int *v17; // $s0
  int v18; // $t6
  int v19; // $t5
  _DWORD *v20; // $t4
  int v21; // $v0
  int *v22; // $s0
  int v23; // $v0
  int v24; // $v0
  int v25; // $t0
  int v26; // $t2
  int *v27; // $t1
  int **v28; // $t3
  int v29; // $s3
  int v30; // $s4
  int *v31; // $a1
  int v32; // $v0
  int v33; // $v0
  int v34; // $v1
  BOOL v35; // $v0
  int v36; // $t2
  int *v37; // $a1
  int *v38; // $a2
  int **v39; // $a3
  int *v40; // $t1
  int v41; // $s1
  int v42; // $v0
  int v43; // $v0
  bool v44; // dc
  int v45; // $v0
  int v46; // $t0
  int v47; // $a3
  int v48; // $s2
  int **v49; // $a0
  int v50; // $a2
  int *v51; // $a1
  int v52; // $v0
  int *v53; // $a3
  int *v54; // $a0
  int v55; // $v0
  int v56[11]; // [sp+18h] [-E0h] BYREF
  int v57; // [sp+44h] [-B4h]
  int v58; // [sp+48h] [-B0h]
  int v59; // [sp+4Ch] [-ACh]
  int v60; // [sp+50h] [-A8h]
  int v61; // [sp+54h] [-A4h]
  int v62; // [sp+58h] [-A0h]
  int v63; // [sp+5Ch] [-9Ch]
  int v64; // [sp+60h] [-98h]
  int v65; // [sp+64h] [-94h]
  int v66; // [sp+68h] [-90h]
  int v67; // [sp+6Ch] [-8Ch]
  int v68; // [sp+70h] [-88h]
  int v69; // [sp+74h] [-84h]
  int *v70; // [sp+78h] [-80h] BYREF
  int *v71; // [sp+7Ch] [-7Ch] BYREF
  int *v72; // [sp+80h] [-78h]
  int *v73; // [sp+84h] [-74h]
  int v74; // [sp+88h] [-70h] BYREF
  char v75; // [sp+8Ch] [-6Ch] BYREF
  _BYTE v76[32]; // [sp+B8h] [-40h] BYREF
  int v77; // [sp+D8h] [-20h] BYREF
  int v78; // [sp+DCh] [-1Ch]
  int *v79; // [sp+E0h] [-18h]
  _DWORD *v80; // [sp+E8h] [-10h]
  int v81; // [sp+ECh] [-Ch]
  int v82; // [sp+F0h] [-8h]

  v8 = *a1 & 7;
  if ( !v8 )
  {
    v11 = 0;
    if ( (*(_DWORD *)(MEMORY[8] + 76) & 1) != 0 )
      v11 = *(_DWORD *)(a1[1] + 296);
    if ( a4 && (a1[6] < a2[1] || a2[4] < a1[3]) )
      return -999999999;
    if ( a3 )
    {
      if ( a5 != -999999999 && a1[6] < a5 )
        return -999999999;
      if ( a6 != -999999999 )
      {
        v12 = a6 < a1[6];
        goto LABEL_18;
      }
    }
    else
    {
      if ( a5 != -999999999 && a5 < a1[3] )
        return -999999999;
      if ( a6 != -999999999 )
      {
        v12 = a1[3] < a6;
LABEL_18:
        if ( v12 )
          return -999999999;
      }
    }
    if ( a2[3] - v11 >= a1[2] && a1[5] >= *a2 + v11 && a2[5] - v11 >= a1[4] && a1[7] >= a2[2] + v11 )
    {
      if ( a3 )
        return a1[6];
      else
        return a1[3];
    }
    return -999999999;
  }
  if ( v8 != 1 )
    return -999999999;
  if ( a4 && (a1[15] < a2[1] || a2[4] < a1[12]) )
    return -999999999;
  if ( a3 )
  {
    if ( a5 != -999999999 && a1[15] < a5 )
      return -999999999;
    if ( a6 != -999999999 )
    {
      v13 = a6 < a1[12];
      goto LABEL_38;
    }
  }
  else
  {
    if ( a5 != -999999999 && a5 < a1[12] )
      return -999999999;
    if ( a6 != -999999999 )
    {
      v13 = a1[15] < a6;
LABEL_38:
      if ( v13 )
        return -999999999;
    }
  }
  if ( a2[3] < a1[11] || a1[14] < *a2 || a2[5] < a1[13] || a1[16] < a2[2] )
    return -999999999;
  v14 = 0;
  v61 = a1[2];
  v58 = v61;
  v56[3] = v61;
  v56[0] = v61;
  v67 = a1[5];
  v64 = v67;
  v56[9] = v67;
  v56[6] = v67;
  v68 = a1[3];
  v59 = v68;
  v56[10] = v68;
  v56[1] = v68;
  v15 = a1[6];
  v79 = (int *)v76;
  v65 = v15;
  v62 = v15;
  v56[7] = v15;
  v56[4] = v15;
  v57 = a1[4];
  v56[8] = v57;
  v56[5] = v57;
  v56[2] = v57;
  v69 = a1[7];
  v66 = v69;
  v63 = v69;
  v60 = v69;
  v16 = *(int **)(a1[1] + 8);
  v80 = a7;
  v81 = a5;
  v82 = a6;
  sub_8003F520((int)v56, v56, v16, a1 + 8, 8, 7);
  v17 = dword_8005C824;
  v18 = v82;
  v19 = v81;
  v20 = v80;
  while ( 1 )
  {
    v21 = *v17;
    v22 = v17 + 1;
    v70 = &v56[3 * v21];
    v23 = *v22++;
    v71 = &v56[3 * v23];
    v24 = *v22++;
    v72 = &v56[3 * v24];
    v73 = &v56[3 * *v22];
    v17 = v22 + 1;
    v25 = ((v71[2] - v70[2]) >> 7) * ((*v72 - *v70) >> 7) - ((*v71 - *v70) >> 7) * ((v72[2] - v70[2]) >> 7);
    if ( !a3 )
      break;
    v26 = 0;
    if ( v25 < 0 )
    {
      v27 = (int *)v76;
      goto LABEL_49;
    }
LABEL_81:
    if ( ++v14 >= 6 )
      return -999999999;
  }
  v26 = 0;
  if ( v25 <= 0 )
    goto LABEL_81;
  v27 = (int *)v76;
LABEL_49:
  v28 = &v70;
  v29 = (*v70 + *v71 + *v72 + *v73) >> 2;
  v30 = (v70[2] + v71[2] + v72[2] + v73[2]) >> 2;
  do
  {
    v31 = *v28;
    v32 = **v28++;
    *v27 = (v32 - v29) >> 7;
    ++v26;
    v27[1] = (v31[2] - v30) >> 7;
    v27 += 2;
  }
  while ( v26 < 4 );
  v77 = (((*a2 + a2[3]) >> 1) - v29) >> 7;
  v33 = a2[2];
  v34 = a2[5];
  v80 = v20;
  v81 = v19;
  v82 = v18;
  v78 = (((v33 + v34) >> 1) - v30) >> 7;
  v35 = sub_8003116C(&v77, v79);
  v20 = v80;
  v19 = v81;
  v18 = v82;
  v36 = 0;
  if ( !v35 )
    goto LABEL_81;
  v37 = &v74;
  v38 = (int *)&v75;
  v39 = &v70;
  v40 = v79;
  v41 = (v70[1] + v71[1] + v72[1] + v73[1]) >> 2;
  do
  {
    ++v36;
    *v37 = *v40;
    v37 += 3;
    v38[1] = v40[1];
    v40 += 2;
    v42 = (*v39++)[1];
    *v38 = (v42 - v41) >> 7;
    v38 += 3;
  }
  while ( v36 < 4 );
  v80 = v20;
  v81 = v19;
  v82 = v18;
  v43 = sub_80030F88(v77, v78, &v74);
  v20 = v80;
  v19 = v81;
  v18 = v82;
  v44 = v43 == -999999999;
  v45 = v43 << 7;
  if ( v44 )
    goto LABEL_81;
  v46 = v45 + v41;
  if ( a4 && (a2[4] < v46 || v46 < a2[1]) )
    return -999999999;
  if ( !a3 )
  {
    if ( (v81 == -999999999 || v81 >= v46) && (v82 == -999999999 || v46 >= v82) )
      return v46;
    return -999999999;
  }
  if ( v81 != -999999999 && v46 < v81 || v82 != -999999999 && v82 < v46 )
    return -999999999;
  v47 = 0;
  if ( !v80 )
    return v46;
  v48 = 1;
  v49 = &v71;
  v50 = v70[1];
  do
  {
    if ( (*v49)[1] < v50 )
    {
      v50 = (*v49)[1];
      v47 = v48;
    }
    ++v48;
    ++v49;
  }
  while ( v48 < 4 );
  v80[1] = v50 - v41;
  v51 = (&v70)[v47];
  v52 = ((_BYTE)v47 - 1) & 3;
  v53 = (&v70)[((_BYTE)v47 + 1) & 3];
  v54 = (&v70)[v52];
  if ( v53[1] == v50 )
  {
    if ( v54[1] == v50 )
    {
      *v20 = 0;
      v20[2] = 0;
      return v46;
    }
    *v20 = ((*v51 + *v53) >> 1) - v29;
    v55 = (v51[2] + v53[2]) >> 1;
  }
  else if ( v54[1] == v50 )
  {
    *v20 = ((*v51 + *v54) >> 1) - v29;
    v55 = (v51[2] + v54[2]) >> 1;
  }
  else
  {
    *v20 = *v51 - v29;
    v55 = v51[2];
  }
  v20[2] = v55 - v30;
  return v46;
}
// 8005C824: using guessed type int dword_8005C824[11];
// 80060A90: using guessed type int dword_80060A90;

//----- (8002C230) --------------------------------------------------------
int __fastcall sub_8002C230(_DWORD *a1, int a2, _DWORD *a3, unsigned int *a4, int *a5)
{
  _DWORD *v8; // $s4
  int v10; // $fp
  int v11; // $s5
  BOOL v12; // $v0
  int v13; // $a0
  int v14; // $s1
  int v15; // $s0
  int v16; // $v0
  int v17; // $gp
  int v18; // $v1
  int v19; // $s5
  int v20; // $s1
  int v21; // $v0
  int v22; // $v1
  int v23; // $v1
  int v24; // $v1
  char v26[4]; // [sp+18h] [-28h] BYREF
  int v27; // [sp+1Ch] [-24h]
  int v28; // [sp+20h] [-20h]

  a4[1032] = *a3 - 38400;
  v8 = a4 + 1032;
  a4[1033] = a3[1];
  a4[1034] = a3[2] - 38400;
  a4[1035] = *a3 + 38400;
  v10 = 0;
  a4[1036] = a3[1] + *(_DWORD *)(a1[2] + 64);
  a4[1037] = a3[2] + 38400;
  v11 = 262145;
  if ( !a4[1024] || (v12 = sub_800319B8(a4 + 1032, a4 + 1026), v13 = (int)a1, !v12) )
  {
    sub_8002A7A8(a3, (int)a1, a4);
    v13 = (int)a1;
  }
  sub_8002B394(v13, a2, a3, a4, 8, (int)v26);
  v14 = v27;
  v15 = v28;
  if ( a1[64] >> 28 == 2 )
  {
    v14 = -999999999;
    v15 = -999999999;
  }
  if ( v15 == -999999999 )
    a4[1041] = 0;
  else
    a4[1041] = v15;
  if ( v14 == -999999999 )
    a4[1042] = 0;
  else
    a4[1042] = v14;
  v16 = sub_8002B4E8(a1, a2, a3, a4);
  if ( v16 == -999999999 )
  {
    a4[1043] = 0;
  }
  else if ( v15 == -999999999 || v16 >= v15 )
  {
    v15 = v16;
    a4[1043] = v16;
    v18 = a1[22];
    v19 = 1;
    if ( v18 )
    {
      if ( (*(_DWORD *)(v18 + 172) & 0x400000) != 0 )
        v10 = 102400;
      if ( (unsigned int)(a1[55] - a1[68]) >= 4 )
        v19 = 16385;
    }
    v11 = v19 | 0x200000;
  }
  if ( v15 == -999999999 && v14 == -999999999 || (int)a1[34] > 0 )
  {
    if ( (int)a1[34] > 0 )
      a1[42] &= 0xFFDBBFFE;
    a4[1038] = 0;
    return -999999999;
  }
  else
  {
    v21 = v15;
    if ( v15 == -999999999 )
    {
      v21 = v14;
      v11 = 1;
    }
    a4[1038] = v21;
    v20 = v21 + 1;
    if ( v15 == -999999999 )
      v22 = a1[25];
    else
      v22 = a1[25] + *(_DWORD *)(v17 + 328) + v10;
    *a5 = v22;
    if ( v22 >= v20 )
    {
      if ( v20 < a3[1] )
      {
        v20 = a3[1];
      }
      else if ( (v11 & 0x200000) != 0 )
      {
        v23 = *(_DWORD *)(a1[2] + 72);
        if ( v23 )
          *(_DWORD *)(v23 + 168) |= 0x4000u;
      }
      v8[1] = v20;
    }
    else
    {
      v20 = *(_DWORD *)(a2 + 4);
      v8[1] = v20;
    }
    v8[4] = v20 + *(_DWORD *)(a1[2] + 64);
    a3[1] = v20;
    if ( !a4[1024] || !sub_800319B8(v8, a4 + 1026) )
      sub_8002A7A8(a3, (int)a1, a4);
    v24 = a1[34];
    if ( v24 < 0 && (v11 & 1) != 0 )
    {
      a1[69] = v24;
      a1[34] = 0;
    }
    a1[42] |= v11;
    a1[68] = dword_80068EEC;
  }
  return v20;
}
// 8002C4BC: variable 'v17' is possibly undefined
// 80068EEC: using guessed type int dword_80068EEC;

//----- (8002C604) --------------------------------------------------------
int __fastcall sub_8002C604(_DWORD *a1, int *a2, unsigned int *a3, int *a4, int a5)
{
  unsigned int *v7; // $t2
  _DWORD *v8; // $fp
  int *v9; // $s3
  int v10; // $v0
  int v11; // $v1
  int v12; // $a1
  int v13; // $v1
  int v14; // $a0
  int v15; // $s1
  int *v16; // $s2
  _DWORD *v17; // $a0
  _DWORD *v18; // $s0
  int v19; // $v0
  int v20; // $s0
  int result; // $v0
  int v22; // [sp+20h] [-20h] BYREF
  int v23; // [sp+24h] [-1Ch]
  int v24; // [sp+28h] [-18h]
  int v25; // [sp+30h] [-10h] BYREF
  int v26; // [sp+34h] [-Ch]
  unsigned int *v27; // [sp+38h] [-8h]

  v7 = a3;
  v8 = 0;
  v26 = -999999999;
  v9 = (int *)(a3 + 1032);
  if ( a1[64] >> 28 == 2 )
  {
    a3[1032] = *a2 - 19200;
    a3[1033] = a2[1] - *(_DWORD *)(a1[2] + 64) / 4;
    a3[1034] = a2[2] - 19200;
    a3[1035] = *a2 + 19200;
    a3[1036] = a2[1] + 2 * *(_DWORD *)(a1[2] + 64);
  }
  else
  {
    a3[1032] = *a2 - 19200;
    if ( a5 )
    {
      v10 = a2[1] + *(_DWORD *)(a1[2] + 64) - *(_DWORD *)(a1[2] + 64) / 8;
    }
    else
    {
      v11 = *(_DWORD *)(a1[2] + 64);
      v12 = a2[1] + v11;
      v13 = v11 / 2;
      v14 = *(_DWORD *)(a1[2] + 64) / 4;
      if ( v13 > 102400 )
        v13 = 102400;
      v10 = v12 - v13;
      if ( v13 < v14 )
        v10 = v12 - v14;
    }
    a3[1033] = v10;
    a3[1034] = a2[2] - 19200;
    a3[1035] = *a2 + 19200;
    a3[1036] = a2[1] + *(_DWORD *)(a1[2] + 64);
  }
  a3[1037] = a2[2] + 19200;
  v15 = 0;
  if ( dword_80068EF4 > 0 )
  {
    v16 = dword_80068E98;
    do
    {
      v17 = (_DWORD *)v16[228];
      v18 = (_DWORD *)v17[1];
      if ( (v18[43] & 0x8000000) != 0 && (v18[42] & 0x4000) == 0 )
      {
        v27 = v7;
        v19 = sub_8002B9A4(v17, v9, 0, 1, v26, -999999999, 0);
        v7 = v27;
        if ( v19 != -999999999 )
        {
          v26 = v19;
          v8 = v18;
        }
      }
      ++v15;
      ++v16;
    }
    while ( v15 < dword_80068EF4 );
  }
  *v9 = *a2 - 9600;
  v9[2] = a2[2] - 9600;
  v9[3] = *a2 + 9600;
  v9[5] = a2[2] + 9600;
  v9[4] = a2[1] + 5 * *(_DWORD *)(a1[2] + 64) / 4;
  *a4 = 0x7FFFFFFF;
  v20 = sub_8003C04C((int)a1, v7, (int)(v7 + 1026), v9, a4);
  if ( (*(_DWORD *)(*(_DWORD *)(a1[6] + 16) + 732) & 0x20000) != 0 )
  {
    v22 = *a2;
    v23 = v9[4];
    v24 = a2[2];
    if ( sub_80028D8C(dword_80065D5C, &v22) >= -254
      && (*(_DWORD *)(*(_DWORD *)(a1[6] + 20) + 4) + *(_DWORD *)(*(_DWORD *)(a1[6] + 20) + 16)) << 8 < v23 )
    {
      v20 = (*(_DWORD *)(*(_DWORD *)(a1[6] + 20) + 4) + *(_DWORD *)(*(_DWORD *)(a1[6] + 20) + 16)) << 8;
    }
  }
  if ( v20 != -999999999 )
    a1[42] |= 0x80u;
  if ( v26 != -999999999 && (v20 == -999999999 || v26 < v20) )
  {
    v8[42] |= 0x80u;
    a1[42] |= 0x80u;
    sub_8001B328(a1, 0, v8, 0);
    if ( (int)a1[34] >= 0 || (int)v8[34] < 0 )
    {
      v25 = 25600;
      sub_8001DB38((int)a1, (int)v8, 5888, 1, &v25);
    }
    if ( (a1[64] & 0x80000) == 0 )
      return v26;
  }
  if ( a1[64] >> 28 == 2 )
    return v20;
  result = -999999999;
  if ( a2[1] + *(_DWORD *)(a1[2] + 64) >= v20 )
    return v20;
  return result;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002CAE4) --------------------------------------------------------
void __fastcall sub_8002CAE4(_DWORD *a1, int a2, int *a3, unsigned int *a4)
{
  BOOL v8; // $a1
  _DWORD *v9; // $v1
  int v10; // $a3
  int v11; // $v0
  int v12; // $a2
  int v13; // $v1
  int v14; // $a1
  int v15; // $a0
  int v16; // $a1
  int v17; // $a1
  BOOL v18; // $v0
  int v19; // $a0
  int v20; // $v1
  int v21; // $a0
  int v22; // $a1
  int v23; // [sp+18h] [-8h] BYREF
  int v24; // [sp+1Ch] [-4h] BYREF

  v8 = 0;
  if ( (a1[42] & 0x100000) != 0 )
  {
    v9 = (_DWORD *)a1[2];
    if ( (v9[19] & 0x100000) != 0
      && (v9[20] & 0x100000) != 0
      && (v9[21] & 0x100000) != 0
      && (v9[22] & 0x100000) != 0
      && (v9[23] & 0x100000) != 0
      && (v9[24] & 0x100000) != 0
      && (v9[25] & 0x100000) != 0 )
    {
      v8 = (v9[26] & 0x100000) != 0;
    }
  }
  v10 = sub_8002C604(a1, a3, a4, &v23, v8);
  if ( v10 == -999999999 )
  {
    a4[1039] = 0;
    a4[1040] = 0;
  }
  else
  {
    v11 = v23;
    a4[1039] = v10;
    a4[1040] = v11;
  }
  if ( v10 == -999999999 )
    goto LABEL_30;
  v12 = a3[1];
  v13 = v23;
  v14 = *(_DWORD *)(a1[2] + 64);
  if ( v10 < v23 )
    v13 = v10;
  if ( v13 - 1 >= v12 + v14 || (a1[42] & 1) != 0 )
  {
LABEL_30:
    if ( a1[64] >> 28 == 2 )
    {
      if ( v10 == -999999999 )
      {
        a3[1] = *(_DWORD *)(a2 + 4);
      }
      else
      {
        v21 = *(_DWORD *)(a2 + 4);
        v22 = *(_DWORD *)(a1[2] + 64);
        v24 = 0;
        a3[1] = sub_8001FD08(v21, v10 - v22 - 1, 20000);
        sub_8001DB38(0, (int)a1, 13056, 1, &v24);
      }
    }
  }
  else
  {
    v15 = v10 - v14 - 1;
    v16 = a3[1];
    if ( a1[64] >> 28 == 2 )
    {
      if ( v15 < v12 )
        v16 = v15;
      a3[1] = sub_8001FD08(*(_DWORD *)(a2 + 4), v16, 20000);
    }
    else
    {
      v17 = *(_DWORD *)(a2 + 4);
      v18 = v17 < v15;
      if ( v17 >= v12 )
      {
        v17 = a3[1];
        v18 = v12 < v15;
      }
      if ( v18 )
        v17 = v15;
      a3[1] = v17;
      v19 = *(_DWORD *)(a1[2] + 64);
      if ( v23 < a3[1] + v19 )
        a3[1] = v23 - v19 - 1;
    }
    v20 = a1[34];
    a1[42] |= 0x80u;
    if ( v20 > 0 )
      a1[34] = 0;
  }
}

//----- (8002CD8C) --------------------------------------------------------
int __fastcall sub_8002CD8C(_DWORD *a1, int *a2)
{
  int v4; // $v1
  int v5; // $a1
  int v6; // $s1
  int v7; // $a0
  int v8; // $v1
  int v9; // $v0
  int v11; // [sp+18h] [-8h] BYREF

  v4 = sub_80028D8C(dword_80065D5C, a2);
  if ( v4 < -254 )
  {
    a1[6] = v4;
  }
  else
  {
    v5 = a1[6];
    v6 = *(_DWORD *)(v5 + 20);
    if ( a2[1] < (*(_DWORD *)(v6 + 4) << 8) - *(_DWORD *)(a1[2] + 52) )
    {
      v7 = 1;
      if ( (*(_DWORD *)(*(_DWORD *)(v5 + 16) + 732) & 2) != 0 && a1[66] != 2 )
      {
        v11 = 25600;
        sub_8001DB38(0, (int)a1, 2304, 1, &v11);
        v7 = 0;
      }
      if ( v7 )
      {
        a2[1] = (*(_DWORD *)(v6 + 4) << 8) - *(_DWORD *)(a1[2] + 52);
        v8 = a1[34];
        v9 = a1[42];
        a1[34] = 0;
        a1[42] = v9 | 1;
        a1[69] = v8;
        a1[68] = dword_80068EEC;
      }
    }
  }
  return -255;
}
// 80065D5C: using guessed type int dword_80065D5C;
// 80068EEC: using guessed type int dword_80068EEC;

//----- (8002CEA8) --------------------------------------------------------
BOOL __fastcall sub_8002CEA8(_DWORD *a1, unsigned int *a2, int *a3, int *a4, _DWORD *a5)
{
  int v8; // $a0
  _DWORD *v9; // $v1
  int v10; // $v0
  int v11; // $a0
  int *v12; // $a3
  int *v13; // $a2
  int *v14; // $a1
  int v15; // $v1
  int v16; // $v0
  int v17; // $v0
  int v18; // $a0
  int v19; // $v1
  unsigned int v20; // $s0
  unsigned int v21; // $s1
  int v22; // $a0
  int v23; // $v0
  _DWORD *v24; // $a0
  int v25; // $a0
  int *v27; // $v1
  int v28; // $v0
  BOOL result; // $v0
  int v30[2]; // [sp+20h] [-40h] BYREF
  int v31; // [sp+28h] [-38h]
  _BYTE v32[16]; // [sp+30h] [-30h] BYREF
  int v33; // [sp+40h] [-20h]
  int v34; // [sp+48h] [-18h]
  int v35; // [sp+50h] [-10h] BYREF
  unsigned int v36; // [sp+54h] [-Ch] BYREF
  unsigned int v37; // [sp+58h] [-8h] BYREF

  v8 = 0;
  v9 = v32;
  do
  {
    v10 = *a4++;
    ++v8;
    *v9++ = v10;
  }
  while ( v8 < 3 );
  v11 = 0;
  v12 = v30;
  v13 = (int *)v32;
  v14 = a3;
  do
  {
    v15 = *v13++;
    v16 = *v14++;
    ++v11;
    *v12++ = v16 + v15;
  }
  while ( v11 < 3 );
  sub_8002C230(a1, (int)a3, v30, a2, &v35);
  sub_8002EC2C(a3, v30, a1, (int)a2);
  v17 = v30[0] - *a3;
  v18 = 4 * v17;
  if ( (v17 & 0x20000000) != 0 )
    v18 += 0x1FFF;
  v19 = 4 * (v31 - a3[2]);
  v20 = (v18 >> 13) + 16;
  if ( ((v31 - a3[2]) & 0x20000000) != 0 )
    v19 += 0x1FFF;
  v21 = (v19 >> 13) + 16;
  if ( sub_8002F0F8(a3, v20, v21, &v36, &v37, a1, 0) )
  {
    v33 = ((int)((v36 - 16) << 13) >> 2) + *a3;
    v22 = a3[2];
    v30[0] = v33;
    v23 = ((int)((v37 - 16) << 13) >> 2) + v22;
    v34 = v23;
  }
  else
  {
    v30[0] = *a3;
    v23 = a3[2];
  }
  v31 = v23;
  ++a2[1044];
  if ( v20 != 16 || (v24 = a1, v21 != 16) )
  {
    if ( v20 != v36 || (v24 = a1, v21 != v37) )
    {
      a1[42] |= 0x100u;
      v24 = a1;
    }
  }
  sub_8002CAE4(v24, (int)a3, v30, a2);
  sub_8002CD8C(a1, v30);
  v25 = 0;
  v27 = v30;
  do
  {
    v28 = *v27++;
    ++v25;
    *a5 = v28;
    result = v25 < 3;
    ++a5;
  }
  while ( v25 < 3 );
  return result;
}

//----- (8002D0E8) --------------------------------------------------------
int *__fastcall sub_8002D0E8(int a1, int a2, int a3)
{
  _DWORD *v3; // $s4
  int v5; // $s3
  int v6; // $s5
  _BYTE *v7; // $v0
  int v8; // $s1
  int *result; // $v0
  int *v10; // $s0
  unsigned int v11; // $a0
  int v12; // $v1
  int v13; // $v1
  int v14; // $v1
  _DWORD *v15; // $v0
  int v16; // $t2
  int v17; // $t3
  int v18; // $t4
  int v19; // $t2
  int v20; // $v0
  int v21; // $s1
  int v22; // $a1
  int *v23; // $v0
  int v24; // $a3
  int v25; // $t0
  int v26; // $t1
  int v27; // $v0
  int v28; // $v1
  int v29; // $v1
  int v30; // $v0
  int v31; // $v0
  int v32; // $v1
  int v33; // $v0
  int v34; // [sp+18h] [-48h] BYREF
  int v35; // [sp+1Ch] [-44h]
  int v36; // [sp+20h] [-40h]
  int v37[4]; // [sp+28h] [-38h] BYREF
  int v38; // [sp+38h] [-28h]
  int v39; // [sp+3Ch] [-24h]
  int v40; // [sp+40h] [-20h]
  int v41; // [sp+44h] [-1Ch]
  int v42; // [sp+48h] [-18h]
  int v43; // [sp+4Ch] [-14h]
  int v44; // [sp+50h] [-10h]
  int v45; // [sp+54h] [-Ch]
  int v46; // [sp+58h] [-8h]

  v5 = a3;
  if ( a3 == -2 && **(_BYTE **)(a1 + 232) == 1 )
    v5 = 0;
  v6 = 0;
  if ( v5 < 0 )
    goto LABEL_7;
  v7 = *(_BYTE **)(a1 + 232);
  v8 = 0;
  if ( v7 )
  {
    if ( *v7 != 1 )
    {
LABEL_7:
      v8 = 0;
      goto LABEL_11;
    }
    v6 = *(_DWORD *)(*(_DWORD *)(a1 + 8) + 32);
    if ( (unsigned int)v5 >= *(_DWORD *)(v6 + 20) )
      return 0;
    v3 = (_DWORD *)(v6 + 40 * v5 + 28);
    v8 = *v3 & 7;
  }
LABEL_11:
  if ( dword_80068EF4 >= 72 || (dword_80068EF0 - (int)&unk_80069348) >> 2 >= 576 )
    sub_8002D85C();
  v10 = (int *)dword_80068EF0;
  if ( v8 )
  {
    v11 = dword_80068EF0 + 68;
    if ( v8 == 1 )
      goto LABEL_18;
    v8 = 0;
  }
  v11 = dword_80068EF0 + 32;
LABEL_18:
  if ( v11 >= (unsigned int)&unk_80069C48 )
    return 0;
  dword_80068EF0 = v11;
  dword_80068E98[dword_80068EF4++ + 228] = (int)v10;
  v10[1] = a1;
  *v10 = v8;
  if ( !v6 )
  {
    v12 = *(_DWORD *)(a1 + 120);
    if ( v12 < 0 )
      v12 = -v12;
    v10[2] = *(_DWORD *)(a1 + 96) - ((200 * v12) >> 4);
    v13 = *(_DWORD *)(a1 + 120);
    if ( v13 < 0 )
      v13 = -v13;
    v10[5] = *(_DWORD *)(a1 + 96) + ((200 * v13) >> 4);
    v10[3] = *(_DWORD *)(a1 + 100) - ((200 * *(_DWORD *)(a1 + 124)) >> 4);
    v10[6] = *(_DWORD *)(a1 + 100) + ((200 * *(_DWORD *)(a1 + 124)) >> 4);
    v10[4] = *(_DWORD *)(a1 + 104) - ((200 * *(_DWORD *)(a1 + 128)) >> 4);
    v14 = *(_DWORD *)(a1 + 104) + ((200 * *(_DWORD *)(a1 + 128)) >> 4);
    goto LABEL_51;
  }
  if ( v8 )
  {
    v15 = (_DWORD *)(v6 + 40 * v5);
    v16 = v15[12];
    v17 = v15[13];
    v18 = v15[14];
    v10[2] = v15[11];
    v10[3] = v16;
    v10[4] = v17;
    v10[5] = v18;
    v19 = v15[16];
    v10[6] = v15[15];
    v10[7] = v19;
    v10[8] = *(_DWORD *)(a1 + 96);
    v10[9] = *(_DWORD *)(a1 + 100);
    v10[10] = *(_DWORD *)(a1 + 104);
    sub_8003148C(v10 + 11, v10 + 2, *(__int16 **)(a1 + 8), v10 + 8);
    return v10;
  }
  v20 = *(_DWORD *)(a1 + 112);
  v21 = v20 & 0xFFF;
  if ( (v20 & 0xFFF) != 0 || v20 || *(_DWORD *)(a1 + 108) || *(_DWORD *)(a1 + 120) != 4096 )
  {
    v37[0] = v3[1];
    v37[1] = v3[2];
    v37[2] = v3[3];
    sub_8001FFF0(v37, (_DWORD *)(a1 + 96), a1 + 108, (int *)(a1 + 120), 0, &v34);
  }
  else
  {
    v34 = *(_DWORD *)(a1 + 96) + v3[1];
    v35 = *(_DWORD *)(a1 + 100) + v3[2];
    v36 = *(_DWORD *)(a1 + 104) + v3[3];
  }
  v22 = *(_DWORD *)(a1 + 120);
  v23 = (int *)(v6 + 40 * v5 + 28);
  if ( v22 < 0 )
    v22 = -v22;
  v44 = v22;
  v45 = *(_DWORD *)(a1 + 124);
  v46 = *(_DWORD *)(a1 + 128);
  v24 = ((v23[4] >> 8) * v22) >> 4;
  v38 = v24;
  v39 = ((v23[5] >> 8) * v45) >> 4;
  v25 = ((v23[6] >> 8) * v46) >> 4;
  v40 = v25;
  v41 = ((v23[7] >> 8) * v22) >> 4;
  v42 = ((v23[8] >> 8) * v45) >> 4;
  v26 = (v23[9] >> 8) * v46;
  v43 = v26 >> 4;
  if ( (unsigned int)(v21 - 512) < 0xC01 )
  {
    if ( v21 >= 1536 )
    {
      if ( v21 >= 2560 )
      {
        v10[2] = v34 - (v26 >> 4);
        v10[5] = v34 - v40;
        v10[3] = v35 + v39;
        v10[6] = v35 + v42;
        v10[4] = v36 + v38;
        v27 = v36 + v41;
      }
      else
      {
        v10[2] = v34 + v24;
        v10[5] = v34 + v41;
        v10[3] = v35 + v39;
        v10[6] = v35 + v42;
        v10[4] = v36 - v43;
        v27 = v36 - v40;
      }
    }
    else
    {
      v10[2] = v34 + v25;
      v10[5] = v34 + v43;
      v10[3] = v35 + v39;
      v10[6] = v35 + v42;
      v10[4] = v36 - v41;
      v27 = v36 - v38;
    }
  }
  else
  {
    v10[2] = v34 + v24;
    v10[3] = v35 + v39;
    v10[4] = v36 + v40;
    v10[5] = v34 + v41;
    v10[6] = v35 + v42;
    v27 = v36 + v43;
  }
  v10[7] = v27;
  v28 = MEMORY[0x100] >> 28;
  if ( MEMORY[0x100] >> 28 == 11 )
  {
LABEL_48:
    v29 = v10[4];
    v10[2] -= 30000;
    v30 = v10[5];
    v10[4] = v29 - 30000;
    v31 = v30 + 30000;
    v14 = v10[7] + 30000;
LABEL_50:
    v10[5] = v31;
LABEL_51:
    v10[7] = v14;
    return v10;
  }
  if ( MEMORY[0x100] >> 28 < 0xCu )
  {
    result = v10;
    if ( v28 != 9 )
      return result;
    goto LABEL_48;
  }
  result = v10;
  if ( v28 == 14 )
  {
    v32 = v10[4];
    v10[2] -= 100000;
    v33 = v10[5];
    v10[4] = v32 - 100000;
    v31 = v33 + 100000;
    v14 = v10[7] + 100000;
    goto LABEL_50;
  }
  return result;
}
// 8002D378: conditional instruction was optimized away because $s1.4==1
// 8002D438: variable 'v3' is possibly undefined
// 80060A90: using guessed type int dword_80060A90;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF0: using guessed type int dword_80068EF0;
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002D85C) --------------------------------------------------------
int sub_8002D85C()
{
  int result; // $v0
  int v1; // $a0
  int v2; // $v1

  result = dword_80068EF4 - 1;
  if ( dword_80068EF4 )
  {
    --dword_80068EF4;
    v1 = *(_DWORD *)dword_80068E98[result + 228] & 7;
    if ( v1 )
    {
      result = -2147024896;
      if ( v1 != 1 )
        return result;
      v2 = dword_80068EF0 - 68;
    }
    else
    {
      v2 = dword_80068EF0 - 32;
    }
    result = -2147024896;
    dword_80068EF0 = v2;
  }
  return result;
}
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF0: using guessed type int dword_80068EF0;
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002D8C8) --------------------------------------------------------
int *sub_8002D8C8()
{
  int *result; // $v0

  result = dword_80068E98;
  dword_80068EF0 = (int)&unk_80069348;
  dword_80068EF4 = 0;
  return result;
}
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF0: using guessed type int dword_80068EF0;
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002D8E0) --------------------------------------------------------
int sub_8002D8E0()
{
  _DWORD *v0; // $gp
  int v1; // $t0
  int v2; // $a3
  int *v3; // $a2
  int v4; // $v0

  v1 = 0;
  v2 = 528483200;
  v3 = dword_8005C884;
  v0[153] = 528482560;
  v0[152] = 528482688;
  v0[154] = 528483200;
  do
  {
    v4 = *v3++;
    ++v1;
    *(_DWORD *)v2 = v4;
    v2 += 4;
  }
  while ( v1 < 32 );
  return -255;
}
// 8002D90C: variable 'v0' is possibly undefined
// 8005C884: using guessed type int dword_8005C884[32];

//----- (8002D93C) --------------------------------------------------------
int sub_8002D93C()
{
  return -255;
}

//----- (8002D944) --------------------------------------------------------
int __fastcall sub_8002D944(int a1, int a2, int a3)
{
  int v3; // $v0
  int result; // $v0
  int v5; // $v0

  v3 = a1;
  if ( a1 < 0 )
    v3 = -a1;
  result = v3 < 32;
  if ( result )
  {
    v5 = a2;
    if ( a2 < 0 )
      v5 = -a2;
    result = v5 < 32;
    if ( result )
      return sub_8003BBF0(a1, a2, a3);
  }
  return result;
}

//----- (8002D990) --------------------------------------------------------
int __fastcall sub_8002D990(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // $gp
  int v6; // $a2
  int v7; // $t0
  int result; // $v0
  int v9; // $a0
  int v10; // $a1
  int v11; // $a3
  _DWORD *v12; // $v1
  int i; // $t0

  v6 = a3 + 16;
  v7 = -1;
  if ( v6 < 32 )
  {
    result = 32;
    if ( v6 <= 0 )
      return result;
    v7 = -1 << (32 - v6);
  }
  v9 = a1 + 15;
  result = v9 < 32;
  if ( v9 < 32 )
  {
    result = 0x80000000;
    if ( v9 >= 0 )
    {
      result = ~((int)0x80000000 >> v9);
      v7 &= result;
    }
    v10 = a2 + 16;
    if ( v7 )
    {
      if ( v10 < 0 )
        v10 = 0;
      v11 = a4 + 16;
      if ( v11 >= 33 )
        v11 = 32;
      result = 4 * v10;
      if ( v10 < 32 )
      {
        v12 = (_DWORD *)(*(_DWORD *)(v5 + 612) + result);
        if ( a5 )
        {
          for ( result = v10 < v11; v10 < v11; ++v12 )
          {
            ++v10;
            *v12 |= v7;
            result = v10 < v11;
          }
        }
        else
        {
          result = v10 < v11;
          for ( i = ~v7; v10 < v11; ++v12 )
          {
            ++v10;
            *v12 &= i;
            result = v10 < v11;
          }
        }
      }
    }
  }
  return result;
}
// 8002DA08: variable 'v5' is possibly undefined

//----- (8002DA74) --------------------------------------------------------
int __fastcall sub_8002DA74(_DWORD *a1, _DWORD *a2, int *a3, int a4)
{
  int result; // $v0
  int v7; // $a1
  int v8; // $v1
  int v9; // $a0
  int v10; // $t0
  int v11; // $gp
  int *v12; // $a2
  int v13; // $a3
  int v14; // $s7
  int v15; // $t3
  int v16; // $fp
  int i; // $t5
  int v18; // $v1
  int v19; // $v1
  int v20; // $v0
  int v21; // $a3
  int v22; // $a1
  int v23; // $v0
  int v24; // $a2
  int v25; // $v0
  int v26; // $a0
  int v27; // $v1
  int v28; // $t3
  bool v29; // dc
  int v30; // $fp
  int v31; // $t3
  int v32; // $s7
  int v33; // $t5
  _DWORD *v34; // $s1
  int j; // $a3
  int v36; // $a3
  _DWORD *v37; // $a2
  int v38; // $a0
  int v39; // $v0
  int v40; // $v1
  int v41; // $a1
  int v42; // $v0
  int v43; // $s0
  _DWORD *v44; // $a2
  int v45; // $v1
  int v46; // $v0
  int v47; // $s2
  int v48; // $v1
  int v49; // $v0
  int v50; // $s4
  int v51; // $s6
  int v52; // $v1
  int v53; // $v1
  int v54; // $a0
  int v55; // $v1
  char *v56; // $s1
  int v57; // $v1
  int v58; // $v1
  BOOL v59; // $v0
  int v60; // $v1
  int v61; // $a0
  int v62; // $t1
  int v63; // $t0
  int v64; // $t2
  int m; // $s3
  int v66; // $v0
  char *v67; // $s1
  int v68; // $v1
  int v69; // $s5
  int v70; // $a0
  int v71; // $t4
  _BYTE *v72; // $s4
  int v73; // $v1
  int v74; // $v1
  int v75; // $t0
  int v76; // $t2
  int k; // $s3
  int v78; // $v0
  int v79; // $s5
  _BYTE *v80; // $s1
  _BYTE *v81; // $s4
  BOOL v82; // $v0
  int v83; // $v1
  int v84; // $a0
  int v85; // $a3
  char *v86; // $s1
  _DWORD *v87; // $a1
  int v88; // $fp
  char *v89; // $s1
  int v90; // $s7
  BOOL v91; // $v0
  int v92[11]; // [sp+18h] [-168h] BYREF
  int v93; // [sp+44h] [-13Ch]
  int v94; // [sp+48h] [-138h]
  int v95; // [sp+4Ch] [-134h]
  int v96; // [sp+50h] [-130h]
  int v97; // [sp+54h] [-12Ch]
  int v98; // [sp+58h] [-128h]
  int v99; // [sp+5Ch] [-124h]
  int v100; // [sp+60h] [-120h]
  int v101; // [sp+64h] [-11Ch]
  int v102; // [sp+68h] [-118h]
  int v103; // [sp+6Ch] [-114h]
  int v104; // [sp+70h] [-110h]
  int v105; // [sp+74h] [-10Ch]
  _DWORD v106[2]; // [sp+78h] [-108h] BYREF
  int v107; // [sp+80h] [-100h]
  char v108; // [sp+84h] [-FCh] BYREF
  _BYTE v109[64]; // [sp+108h] [-78h] BYREF
  int v110; // [sp+148h] [-38h]
  int v111; // [sp+14Ch] [-34h]
  int v112; // [sp+150h] [-30h]
  int v113; // [sp+154h] [-2Ch]
  _BYTE *v114; // [sp+158h] [-28h]
  _DWORD *v115; // [sp+160h] [-20h]
  int v116; // [sp+164h] [-1Ch]
  int v117; // [sp+168h] [-18h]
  int v118; // [sp+16Ch] [-14h]
  int v119; // [sp+170h] [-10h]
  int v120; // [sp+174h] [-Ch]
  int v121; // [sp+178h] [-8h]
  int v122; // [sp+17Ch] [-4h]

  result = sub_8003191C(a2, a1 + 11);
  if ( result )
  {
    v97 = a1[2];
    v94 = v97;
    v92[3] = v97;
    v92[0] = v97;
    v103 = a1[5];
    v100 = v103;
    v92[9] = v103;
    v92[6] = v103;
    v104 = a1[3];
    v95 = v104;
    v92[10] = v104;
    v92[1] = v104;
    v101 = a1[6];
    v98 = v101;
    v92[7] = v101;
    v92[4] = v101;
    v93 = a1[4];
    v92[8] = v93;
    v92[5] = v93;
    v92[2] = v93;
    v105 = a1[7];
    v102 = v105;
    v99 = v105;
    v96 = v105;
    sub_8003F520((int)v92, v92, *(int **)(a1[1] + 8), a1 + 8, 8, 7);
    v110 = a2[4];
    v7 = a2[1];
    v8 = a1[15];
    v111 = (v110 + v7) >> 1;
    if ( v8 < v110 )
      v110 = v8;
    v9 = a1[12];
    if ( v7 < v9 )
      v7 = a1[12];
    if ( v8 < v111 )
      v111 = v8;
    if ( v111 < v9 )
      v111 = v9;
    v112 = v7;
    v114 = v109;
    while ( 1 )
    {
      v10 = sub_80030AD8(v112, (int)v92, v106);
      result = 2 * v10;
      if ( v10 < 3 )
        goto LABEL_184;
      v12 = (int *)&v108;
      v13 = result - 2;
      v14 = v106[0];
      v15 = v107;
      v16 = v106[0];
      for ( i = v107; v13 >= 0; v12 += 3 )
      {
        if ( *v12 < v16 )
          v16 = *v12;
        if ( v14 < *v12 )
          v14 = *v12;
        v18 = v12[2];
        if ( v18 < v15 )
          v15 = v12[2];
        if ( i < v18 )
          i = v12[2];
        --v13;
      }
      v19 = *a3;
      v20 = 4 * (v14 - *a3);
      if ( ((v14 - *a3) & 0x20000000) != 0 )
        v20 += 0x1FFF;
      v21 = v20 >> 13;
      v22 = a3[2];
      v23 = 4 * (i - v22);
      if ( ((i - v22) & 0x20000000) != 0 )
        v23 += 0x1FFF;
      v24 = v23 >> 13;
      v25 = 4 * (v16 - v19);
      if ( ((v16 - v19) & 0x20000000) != 0 )
        v25 += 0x1FFF;
      v26 = v25 >> 13;
      result = 4 * (v15 - v22);
      if ( ((v15 - v22) & 0x20000000) != 0 )
        result += 0x1FFF;
      v27 = result >> 13;
      v28 = (result >> 13) + 16;
      if ( a4 )
      {
        result = v24 + 32;
        if ( v21 + 32 < 0 )
          goto LABEL_184;
        v29 = result < 0;
        result = v26 < 32;
        if ( v29 )
          goto LABEL_184;
        result = v27 < 32;
        if ( v26 >= 32 )
          goto LABEL_184;
        v30 = -16;
        if ( v27 >= 32 )
          goto LABEL_184;
        v31 = -16;
        v32 = 47;
      }
      else
      {
        if ( v21 + 16 < 0 )
          goto LABEL_184;
        result = v26 + 16 < 32;
        if ( v24 + 16 < 0 )
          goto LABEL_184;
        result = v28 < 32;
        if ( v26 + 16 >= 32 )
          goto LABEL_184;
        v32 = 31;
        if ( v28 >= 32 )
          goto LABEL_184;
        v31 = 0;
        v30 = 0;
      }
      v33 = v32;
      v34 = v109;
      for ( j = 15; j >= 0; --j )
        *v34++ = -31326687;
      v36 = v10 - 1;
      v37 = v106;
      if ( v10 - 1 >= 0 )
      {
        while ( 1 )
        {
          v38 = *a3;
          v39 = 4 * (*v37 - *a3);
          v40 = v39 >> 13;
          if ( ((*v37 - *a3) & 0x20000000) != 0 )
            v40 = (v39 + 0x1FFF) >> 13;
          v41 = a3[2];
          v42 = 4 * (v37[2] - v41);
          v43 = v40 + 16;
          if ( ((v37[2] - v41) & 0x20000000) != 0 )
            v42 += 0x1FFF;
          v44 = v37 + 3;
          v45 = v42 >> 13;
          v46 = 4 * (*v44 - v38);
          v47 = v45 + 16;
          if ( ((*v44 - v38) & 0x20000000) != 0 )
            v46 += 0x1FFF;
          v48 = v46 >> 13;
          v49 = 4 * (v44[2] - v41);
          v50 = v48 + 16;
          if ( ((v44[2] - v41) & 0x20000000) != 0 )
            v49 += 0x1FFF;
          v51 = (v49 >> 13) + 16;
          v37 = v44 + 3;
          if ( v51 < v47 )
          {
            v52 = v47;
            v47 = (v49 >> 13) + 16;
            v51 = v52;
            v53 = v43;
            v43 = v50;
            v50 = v53;
          }
          if ( v33 < v47 )
            goto LABEL_170;
          v54 = v51 - v47;
          if ( v51 < v31 )
            goto LABEL_170;
          v55 = v50 - v43;
          if ( v54 )
            break;
          if ( (unsigned int)v47 < 0x20 )
          {
            v56 = &v114[2 * v47];
            v57 = v43;
            if ( v43 < -1 )
              v57 = -1;
            if ( v57 >= 33 )
              v57 = 32;
            if ( v57 < *v56 )
              *v56 = v57;
            if ( v56[1] < v57 )
              v56[1] = v57;
            v58 = v50;
            v59 = v50 < 33;
            if ( v50 < -1 )
            {
              v58 = -1;
              v59 = 1;
            }
            if ( !v59 )
              v58 = 32;
            if ( v58 < *v56 )
              *v56 = v58;
            if ( v56[1] < v58 )
              v56[1] = v58;
          }
          if ( a4 )
          {
            v60 = v43;
            if ( v50 < v43 )
            {
              v43 = v50;
              v50 = v60;
            }
            if ( v32 >= v43 && v50 >= v30 )
            {
              if ( v43 < v30 )
                v43 = v30;
              v61 = v43 - 16;
              if ( v32 < v50 )
                v50 = v32;
              do
              {
                v115 = v37;
                v116 = v36;
                v120 = v31;
                v122 = v33;
                sub_8002D944(v61, v47 - 16, (int)v37);
                v43 += 8;
                v37 = v115;
                v36 = v116;
                v31 = v120;
                v33 = v122;
                v61 = v43 - 16;
              }
              while ( v50 >= v43 );
              v36 = v116 - 1;
              if ( v43 != v50 )
              {
                sub_8002D944(v50 - 16, v47 - 16, (int)v115);
                v37 = v115;
                v31 = v120;
                v33 = v122;
                v36 = v116 - 1;
              }
              goto LABEL_171;
            }
          }
LABEL_170:
          --v36;
LABEL_171:
          if ( v36 < 0 )
            goto LABEL_172;
        }
        v62 = 1;
        if ( v55 < 0 )
        {
          v55 = v43 - v50;
          v62 = -1;
        }
        if ( v33 < v51 )
          v51 = v33;
        v63 = 2 * v54;
        if ( v54 >= v55 )
        {
          v75 = 2 * v55;
          v76 = 2 * (v55 - v54);
          for ( k = 2 * v55 - v54; v47 < v31; ++v47 )
          {
            if ( k > 0 )
            {
              k += v76;
              v43 += v62;
            }
            else
            {
              k += v75;
            }
          }
          v78 = v47;
          if ( v47 < 0 )
            v78 = 0;
          v79 = 0;
          v70 = 12345;
          v80 = &v114[2 * v78];
          v81 = v80 + 1;
          v82 = (unsigned int)v47 < 0x20;
          do
          {
            if ( v82 )
            {
              v83 = v43;
              if ( v43 < -1 )
                v83 = -1;
              if ( v83 >= 33 )
                v83 = 32;
              if ( v83 < (char)*v80 )
                *v80 = v83;
              if ( (char)*v81 < v83 )
                *v81 = v83;
              v81 += 2;
              v80 += 2;
            }
            if ( a4 && v43 >= v30 && v32 >= v43 )
            {
              if ( --v79 > 0 )
              {
                v70 = v43;
                v113 = v47;
              }
              else
              {
                v79 = 8;
                v115 = v37;
                v116 = v36;
                v117 = v75;
                v118 = v62;
                v119 = v76;
                v120 = v31;
                v122 = v33;
                sub_8002D944(v43 - 16, v47 - 16, (int)v37);
                v37 = v115;
                v36 = v116;
                v75 = v117;
                v62 = v118;
                v76 = v119;
                v31 = v120;
                v33 = v122;
                v70 = 12345;
              }
            }
            if ( k > 0 )
            {
              k += v76;
              v43 += v62;
            }
            else
            {
              k += v75;
            }
            v82 = (unsigned int)++v47 < 0x20;
          }
          while ( v51 >= v47 );
        }
        else
        {
          v64 = 2 * (v54 - v55);
          for ( m = v63 - v55; v47 < v31; v43 += v62 )
          {
            if ( m > 0 )
            {
              m += v64;
              ++v47;
            }
            else
            {
              m += v63;
            }
          }
          v66 = v47;
          if ( v47 < 0 )
            v66 = 0;
          v67 = &v114[2 * v66];
          if ( (unsigned int)v47 >= 0x20 )
          {
LABEL_107:
            v69 = 0;
          }
          else
          {
            v68 = v43;
            if ( v43 < -1 )
              v68 = -1;
            if ( v68 >= 33 )
              v68 = 32;
            if ( v68 < *v67 )
              *v67 = v68;
            v69 = 0;
            if ( v67[1] < v68 )
            {
              v67[1] = v68;
              goto LABEL_107;
            }
          }
          v70 = 12345;
          v71 = v50 + v62;
          v72 = v67 + 1;
          while ( 1 )
          {
            while ( 1 )
            {
              if ( a4 && v43 >= v30 && v32 >= v43 )
              {
                if ( --v69 > 0 )
                {
                  v70 = v43;
                  v113 = v47;
                }
                else
                {
                  v69 = 8;
                  v115 = v37;
                  v116 = v36;
                  v117 = v63;
                  v118 = v62;
                  v119 = v64;
                  v120 = v31;
                  v121 = v71;
                  v122 = v33;
                  sub_8002D944(v43 - 16, v47 - 16, (int)v37);
                  v37 = v115;
                  v36 = v116;
                  v63 = v117;
                  v62 = v118;
                  v64 = v119;
                  v31 = v120;
                  v71 = v121;
                  v33 = v122;
                  v70 = 12345;
                }
              }
              if ( m > 0 )
                break;
              v43 += v62;
              m += v63;
              if ( v43 == v71 )
                goto LABEL_167;
            }
            m += v64;
            if ( (unsigned int)v47 < 0x20 )
            {
              v73 = v43;
              if ( v43 < -1 )
                v73 = -1;
              if ( v73 >= 33 )
                v73 = 32;
              if ( v73 < *v67 )
                *v67 = v73;
              if ( (char)*v72 < v73 )
                *v72 = v73;
              v72 += 2;
              v67 += 2;
            }
            v43 += v62;
            if ( v43 == v71 )
              break;
            if ( v51 < ++v47 )
              break;
            if ( (unsigned int)v47 < 0x20 )
            {
              v74 = v43;
              if ( v43 < -1 )
                v74 = -1;
              if ( v74 >= 33 )
                v74 = 32;
              if ( v74 < *v67 )
                *v67 = v74;
              if ( (char)*v72 < v74 )
                *v72 = v74;
            }
          }
        }
LABEL_167:
        if ( a4 )
        {
          v29 = v70 == 12345;
          v84 = v70 - 16;
          if ( !v29 )
          {
            v115 = v37;
            v116 = v36;
            v120 = v31;
            v122 = v33;
            sub_8002D944(v84, v113 - 16, (int)v37);
            v33 = v122;
            v31 = v120;
            v36 = v116;
            v37 = v115;
          }
        }
        goto LABEL_170;
      }
LABEL_172:
      v85 = 31;
      v86 = v109;
      v87 = *(_DWORD **)(v11 + 612);
      do
      {
        v88 = *v86;
        v89 = v86 + 1;
        v90 = *v89;
        result = v90 < -1;
        v86 = v89 + 1;
        if ( v90 >= -1 )
        {
          if ( v88 < 0 && v90 >= 0 )
            v88 = 0;
          v91 = (unsigned int)v88 < 0x20;
          if ( v90 >= 32 )
          {
            v91 = (unsigned int)v88 < 0x20;
            if ( v88 < 32 )
              v90 = 31;
          }
          v29 = !v91;
          result = (unsigned int)v90 < 0x20;
          if ( !v29 )
          {
            result = 0xFFFFFFFF >> v88;
            if ( (unsigned int)v90 < 0x20 )
            {
              result &= -1 << (31 - v90);
              *v87 |= result;
            }
          }
        }
        --v85;
        ++v87;
      }
      while ( v85 >= 0 );
LABEL_184:
      if ( v112 == v110 )
        return result;
      if ( v112 == v111 )
        v112 = v110;
      else
        v112 = v111;
    }
  }
  return result;
}
// 8002E400: variable 'v11' is possibly undefined

//----- (8002E4F0) --------------------------------------------------------
int __fastcall sub_8002E4F0(int *a1, _DWORD *a2, _DWORD *a3, int a4, int a5)
{
  int v5; // $gp
  int result; // $v0
  int v7; // $t2
  int v8; // $v0
  int v9; // $v1
  int v10; // $v0
  bool v11; // dc
  int v12; // $v0
  int v13; // $a2
  int v14; // $t0
  int v15; // $a1
  int v16; // $t1
  int v17; // $v1
  int v18; // $a0
  int v19; // $a0
  int v20; // $a0
  int v21; // $v0
  _DWORD *v22; // $s5
  int v23; // $s0
  int v24; // $fp
  _DWORD *v25; // $s7
  _DWORD *v26; // $t2
  int v27; // $a3
  int v28; // $a1
  int v29; // $a0
  int v30; // $v1
  int v31; // $s1
  int v32; // $a2
  int v33; // $s6
  int v34; // $v0
  int v35; // $s3
  int v36; // $s4
  int v37; // $a3
  int v38; // $s0
  int v39; // $s2
  int v40; // $a2
  BOOL v41; // $v0
  int v42; // $a0
  int v43; // $s1
  int v44; // $a0
  int v45; // $s0
  int v46; // $a0
  int v47; // $a0
  int v48; // $v0
  _DWORD *v49; // $a3
  int *v51; // $v1
  _DWORD v52[6]; // [sp+18h] [-68h] BYREF
  int v53; // [sp+30h] [-50h] BYREF
  int v54; // [sp+34h] [-4Ch]
  int v55; // [sp+38h] [-48h]
  int v56; // [sp+3Ch] [-44h]
  int v57; // [sp+40h] [-40h]
  int v58; // [sp+44h] [-3Ch]
  int v59; // [sp+48h] [-38h]
  int v60; // [sp+4Ch] [-34h]
  int v61; // [sp+50h] [-30h]
  int v62; // [sp+54h] [-2Ch]
  int v63; // [sp+58h] [-28h]
  int v64; // [sp+5Ch] [-24h]
  int v65; // [sp+60h] [-20h]
  int v66; // [sp+64h] [-1Ch]
  int v67; // [sp+68h] [-18h]
  int v68; // [sp+6Ch] [-14h]
  int v69; // [sp+70h] [-10h]
  unsigned int v70; // [sp+74h] [-Ch]
  unsigned int v71; // [sp+78h] [-8h]
  int v72; // [sp+7Ch] [-4h]

  v66 = ((unsigned __int8)(*(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) >> 20) ^ 1) & 1;
  result = dword_80068EF4;
  v67 = *a1;
  v7 = a1[2];
  v68 = v7;
  if ( dword_80068EF4 )
  {
    v8 = 4 * (a2[2] - v7);
    v69 = a3[22];
    v9 = v8 / 0x2000 + 16;
    v10 = 4 * (*a2 - v67);
    v11 = ((*a2 - v67) & 0x20000000) == 0;
    v71 = v9;
    if ( !v11 )
      v10 += 0x1FFF;
    v70 = (v10 >> 13) + 16;
    if ( v70 >= 0x20 || v71 >= 0x20 )
    {
      v70 = 0;
      v71 = 0;
      v72 = 0;
    }
    else
    {
      v12 = *(_DWORD *)(4 * v71 + *(_DWORD *)(v5 + 612));
      v70 = 0x80000000 >> v70;
      v72 = v12 & v70;
    }
    v13 = *a1 + *(_DWORD *)(a3[2] + 48);
    v52[0] = v13;
    v14 = a1[1] + *(_DWORD *)(a3[2] + 52);
    v52[1] = v14;
    v15 = a1[2] + *(_DWORD *)(a3[2] + 56);
    v52[2] = v15;
    v52[3] = *a1 + *(_DWORD *)(a3[2] + 60);
    v16 = a1[1] + *(_DWORD *)(a3[2] + 64);
    v52[4] = v16;
    v17 = a1[2] + *(_DWORD *)(a3[2] + 68);
    v52[5] = v17;
    v18 = *a1 - 32700;
    if ( v13 < v18 )
      v18 = v13;
    v53 = v18 - 25600;
    v54 = v14;
    v19 = a1[2] - 32700;
    if ( v15 < v19 )
      v19 = v15;
    v55 = v19 - 25600;
    v20 = *a1 + 32700;
    if ( v20 < v17 )
      v20 = v17;
    v56 = v20 + 25600;
    v57 = v16;
    v21 = a1[2] + 58300;
    if ( a1[2] + 32700 < v17 )
      v21 = v17 + 25600;
    v58 = v21;
    *(_DWORD *)(a4 + 4176) += 256;
    v65 = 0;
    if ( dword_80068EF4 > 0 )
    {
      do
      {
        v22 = (_DWORD *)dword_80068E98[v65 + 228];
        v23 = v22[1];
        v24 = *v22 & 7;
        v25 = v22 + 11;
        if ( !v24 )
          v25 = v22 + 2;
        if ( v23 == v69 && a5 && v54 >= v25[4] || !sub_8003191C(&v53, v25) )
          continue;
        if ( !v66 || (*(_DWORD *)(v23 + 172) & 0x10000) == 0 )
          goto LABEL_68;
        v26 = a3;
        if ( (a3[64] & 0x10) != 0 || a3[66] == 5 )
        {
          if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v23 + 12) + 16) + 4) == 768 && (*(_DWORD *)(v23 + 176) & 0x412) == 0
            || (*(_DWORD *)(v23 + 256) & 0x20) != 0 )
          {
LABEL_32:
            if ( (*(_DWORD *)(v23 + 256) & 0x4000) == 0 )
              goto LABEL_68;
            goto LABEL_33;
          }
          v26 = a3;
        }
        if ( (v26[64] & 0x4000) != 0 )
          goto LABEL_32;
LABEL_33:
        if ( (*(_DWORD *)(v23 + 168) & 0x4000) == 0 && (*(_WORD *)(v23 + 182) != 14 || v54 < v25[1]) )
        {
          *(_DWORD *)(4 * v71 + *(_DWORD *)(v5 + 612)) &= ~v70;
          if ( v24 )
          {
            if ( v24 == 1 )
              sub_8002DA74(v22, &v53, a1, a5);
          }
          else
          {
            v59 = v22[2] + *(_DWORD *)(v23 + 296);
            v60 = v22[3];
            v27 = v22[4] + *(_DWORD *)(v23 + 296);
            v61 = v27;
            v28 = v22[5] - *(_DWORD *)(v23 + 296);
            v62 = v28;
            v63 = v22[6];
            v29 = 4 * (v59 - v67);
            v30 = v22[7] - *(_DWORD *)(v23 + 296);
            v64 = v30;
            if ( ((v59 - v67) & 0x20000000) != 0 )
              v29 += 0x1FFF;
            v31 = v29 >> 13;
            v32 = 4 * (v28 - v67);
            v33 = v29 >> 13;
            if ( ((v28 - v67) & 0x20000000) != 0 )
              v32 += 0x1FFF;
            v34 = 4 * (v27 - v68);
            v35 = v32 >> 13;
            if ( ((v27 - v68) & 0x20000000) != 0 )
              v34 += 0x1FFF;
            v36 = v34 >> 13;
            v37 = 4 * (v30 - v68);
            v38 = v34 >> 13;
            if ( ((v30 - v68) & 0x20000000) != 0 )
              v37 += 0x1FFF;
            v39 = v37 >> 13;
            sub_8002D990(v29 >> 13, v36, v32 >> 13, v37 >> 13, 1);
            if ( !a5 )
              goto LABEL_68;
            v41 = v36 < v39;
            if ( v31 < v35 )
            {
              v42 = v31;
              do
              {
                sub_8002D944(v42, v36, v40);
                v31 += 8;
                v42 = v31;
              }
              while ( v31 < v35 );
              v41 = v36 < v39;
            }
            v43 = v35;
            if ( v41 )
            {
              v44 = v35;
              do
              {
                sub_8002D944(v44, v38, v40);
                v38 += 8;
                v44 = v35;
              }
              while ( v38 < v39 );
            }
            v45 = v39;
            if ( v33 < v35 )
            {
              v46 = v35;
              do
              {
                sub_8002D944(v46, v39, v40);
                v43 -= 8;
                v46 = v43;
              }
              while ( v33 < v43 );
            }
            if ( v36 < v39 )
            {
              v47 = v33;
              do
              {
                sub_8002D944(v47, v45, v40);
                v45 -= 8;
                v47 = v33;
              }
              while ( v36 < v45 );
            }
          }
          if ( a5 )
          {
            v48 = *(_DWORD *)(4 * v71 + *(_DWORD *)(v5 + 612)) & v70;
            v72 |= v48;
            if ( v48 )
            {
              v49 = 0;
              if ( !v24 )
                v49 = v25;
              sub_8001B328(a3, v52, (_DWORD *)v22[1], v49);
            }
          }
        }
LABEL_68:
        if ( !v24 && a5 )
        {
          if ( sub_8003191C(v52, v22 + 2) )
            sub_8001B328(a3, v52, (_DWORD *)v22[1], v22 + 2);
        }
      }
      while ( ++v65 < dword_80068EF4 );
    }
    v51 = (int *)(4 * v71 + *(_DWORD *)(v5 + 612));
    result = *v51 | v72;
    *v51 = result;
  }
  return result;
}
// 8002E5E8: variable 'v5' is possibly undefined
// 8002EA6C: variable 'v40' is possibly undefined
// 80065D5C: using guessed type int dword_80065D5C;
// 80068E98: using guessed type int dword_80068E98[];
// 80068EF4: using guessed type int dword_80068EF4;

//----- (8002EC2C) --------------------------------------------------------
int __fastcall sub_8002EC2C(int *a1, _DWORD *a2, _DWORD *a3, int a4)
{
  _DWORD *v4; // $gp
  int v9; // $v1
  _DWORD *v10; // $v0
  int v11; // $v1
  _DWORD *v12; // $v0
  int v13; // $a2
  int v14; // $a2

  if ( (*(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) & 0x100000) == 0 )
  {
    v9 = 31;
    v10 = (_DWORD *)(v4[153] + 124);
    do
    {
      *v10 = 0;
      --v9;
      --v10;
    }
    while ( v9 >= 0 );
    v11 = 127;
    v12 = (_DWORD *)(v4[152] + 508);
    do
    {
      *v12 = 0;
      --v11;
      --v12;
    }
    while ( v11 >= 0 );
    v13 = a3[44];
    v14 = (unsigned int)(a3[66] - 2) >= 3 ? v13 & 2 : 2;
    sub_8003B874(
      (unsigned int *)a4,
      (int *)(a4 + 4104),
      v14,
      (int (__fastcall *)(_DWORD))(a3[25] + v4[82]),
      a3[25] + 12800,
      a1[1] + *(_DWORD *)(a3[2] + 64),
      *a1,
      a1[2]);
    if ( (dword_80068F1C & 0x4000000) != 0
      && (dword_80067A28 & 0x20000) != 0
      && ((dword_80067A28 & 0x40000) == 0 || (a3[64] & 0x2000000) != 0) )
    {
      sub_8002F678(a1);
    }
  }
  return sub_8002E4F0(a1, a2, a3, a4, 1);
}
// 8002EC74: variable 'v4' is possibly undefined
// 80065D5C: using guessed type int dword_80065D5C;
// 80067A28: using guessed type int dword_80067A28;
// 80068F1C: using guessed type int dword_80068F1C;

//----- (8002EDA8) --------------------------------------------------------
int __fastcall sub_8002EDA8(unsigned int a1, unsigned int a2)
{
  int v2; // $gp
  int result; // $v0

  if ( a1 >= 0x20 )
    return 0;
  if ( a2 >= 0x20 )
    return 0;
  result = 1;
  if ( (*(_DWORD *)(4 * a2 + *(_DWORD *)(v2 + 612)) & (0x80000000 >> a1)) != 0 )
    return 0;
  return result;
}
// 8002EDC0: variable 'v2' is possibly undefined

//----- (8002EDF0) --------------------------------------------------------
int __fastcall sub_8002EDF0(int a1, int a2, _DWORD *a3)
{
  unsigned __int16 v3; // $s1
  unsigned __int16 v4; // $s5
  unsigned __int16 v5; // $s6
  unsigned __int16 v6; // $s7
  int v9; // $s0
  int v10; // $s3
  int v11; // $v0
  _WORD *v12; // $a3
  unsigned int v13; // $v0
  bool v14; // dc
  unsigned int v15; // $v0
  int v16; // $v0
  _WORD *v17; // $a3
  int v18; // $v0
  unsigned int v19; // $v0
  int v20; // $v1
  unsigned int v21; // $a2
  int v22; // $v0
  unsigned int v23; // $a1
  int v24; // $v0
  int v25; // $v0
  int v26; // $a0
  int v27; // $a2
  int v28; // $a0
  int v29; // $a1
  int v30; // $a2
  int v31; // $v0
  int v32; // $a1
  int v34; // [sp+18h] [-28h]
  int v35; // [sp+20h] [-20h]
  int v36; // [sp+24h] [-1Ch]
  int v37; // [sp+28h] [-18h]
  int v38; // [sp+2Ch] [-14h]
  int v39; // [sp+30h] [-10h]
  int v40; // [sp+34h] [-Ch]
  int v41; // [sp+38h] [-8h]

  v9 = 0;
  v10 = 0;
  if ( dword_80068E44 > 0 )
  {
    v11 = 0;
    while ( 1 )
    {
      v12 = (_WORD *)((char *)&unk_80067E40 + v11);
      v13 = *(unsigned __int16 *)((char *)&unk_80067E40 + v11);
      v14 = v13 != 0;
      v15 = v13 >> 2;
      if ( !v14 )
      {
        ++v9;
        v39 = (unsigned __int16)v12[1] << 8;
        v40 = (unsigned __int16)v12[2] << 8;
        v16 = (unsigned __int16)v12[3];
        v17 = (_WORD *)((char *)&unk_80067E40 + 8 * v9);
        v41 = v16 << 8;
        v6 = v17[1];
        v5 = v17[2];
        v4 = v17[3];
        goto LABEL_42;
      }
      v18 = v15 | 1;
      v14 = v18 == 0;
      v19 = v18 & 0xE;
      if ( v14 )
        v20 = 0;
      else
        v20 = (v19 >> 1) + 1;
      if ( v20 == 5 || !v20 )
        goto LABEL_42;
      if ( !a2 )
        break;
      v21 = v5;
      if ( a2 == 1 )
      {
        if ( v20 == 2 || v20 == 6 )
          goto LABEL_42;
LABEL_18:
        v21 = v5;
      }
LABEL_19:
      if ( v21 >= v3 )
        v22 = v40 >> v3;
      else
        v22 = v40 >> v21;
      v37 = dword_80068E4C + 16 * (__int16)v12[2] - a3[1] + v22;
      if ( a2 )
      {
        v23 = v6;
        if ( a2 != 1 || v37 >= 0 )
          goto LABEL_29;
      }
      else if ( dword_80068E4C + 16 * (__int16)v12[2] - a3[1] < 25601 )
      {
        v23 = v6;
        if ( v37 >= -102400 )
        {
LABEL_29:
          v34 = dword_80068E48 + 16 * (__int16)v12[1] - *a3;
          v35 = dword_80068E50 + 16 * (__int16)v12[3] - a3[2];
          v3 = *v12 & 7;
          v24 = v39 >> v23;
          if ( v23 >= v3 )
            v24 = v39 >> v3;
          v36 = dword_80068E48 + 16 * (__int16)v12[1] - *a3 + v24;
          v25 = v41 >> v4;
          if ( v4 >= (*v12 & 7u) )
            v25 = v41 >> v3;
          v38 = v35 + v25;
          v26 = 4 * v34;
          if ( (v34 & 0x20000000) != 0 )
            v26 += 0x1FFF;
          v27 = 4 * v36;
          v28 = v26 >> 13;
          if ( (v36 & 0x20000000) != 0 )
            v27 += 0x1FFF;
          v29 = 4 * v35;
          v30 = v27 >> 13;
          if ( (v35 & 0x20000000) != 0 )
            v29 += 0x1FFF;
          v31 = 4 * v38;
          v32 = v29 >> 13;
          if ( (v38 & 0x20000000) != 0 )
            v31 += 0x1FFF;
          sub_8002D990(v28, v32, v30, v31 >> 13, a1);
          ++v10;
        }
      }
LABEL_42:
      ++v9;
      v11 = 8 * v9;
      if ( v9 >= dword_80068E44 )
        return v10;
    }
    if ( v20 != 2 )
    {
      v21 = v5;
      if ( v20 != 6 )
        goto LABEL_42;
      goto LABEL_19;
    }
    goto LABEL_18;
  }
  return v10;
}
// 8002EEDC: variable 'v5' is possibly undefined
// 8002EF34: variable 'v3' is possibly undefined
// 8002EF4C: variable 'v40' is possibly undefined
// 8002EF68: variable 'v6' is possibly undefined
// 8002F004: variable 'v39' is possibly undefined
// 8002F02C: variable 'v41' is possibly undefined
// 8002F02C: variable 'v4' is possibly undefined
// 80068E44: using guessed type int dword_80068E44;
// 80068E48: using guessed type int dword_80068E48;
// 80068E4C: using guessed type int dword_80068E4C;
// 80068E50: using guessed type int dword_80068E50;

//----- (8002F0F8) --------------------------------------------------------
int __fastcall sub_8002F0F8(
        int *a1,
        unsigned int a2,
        unsigned int a3,
        unsigned int *a4,
        unsigned int *a5,
        _DWORD *a6,
        int a7)
{
  int *v9; // $s6
  int v10; // $s5
  int result; // $v0
  int v12; // $s3
  int v13; // $s4
  unsigned int v14; // $s0
  unsigned int v15; // $s2
  unsigned int v16; // $s1
  int v17; // $gp
  BOOL v18; // $v0
  int v19; // $v0
  int v20; // $v1
  int v21; // $s5
  _DWORD *v22; // $v1
  _DWORD *v23; // $t0
  int v24; // $v0

  while ( 1 )
  {
LABEL_1:
    v9 = dword_8005C074;
    if ( sub_8002EDA8(a2, a3) || (v10 = 0, (*(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) & 0x100000) != 0) )
    {
      *a4 = a2;
      result = a7 + 2;
      *a5 = a3;
      return result;
    }
    do
    {
      v12 = *(char *)v9;
      v13 = *((char *)v9 + 1);
      v9 = (int *)((char *)v9 + 2);
      v14 = a2 + v12;
      v15 = a3 + v13;
      if ( sub_8002EDA8(a2 + v12, a3 + v13) )
        goto LABEL_29;
      v16 = a3 - v13;
      if ( sub_8002EDA8(a2 + v12, a3 - v13) )
        goto LABEL_30;
      v14 = a2 - v12;
      if ( sub_8002EDA8(a2 - v12, v15) )
      {
LABEL_29:
        *a4 = v14;
        result = a7 + 2;
        *a5 = v15;
        return result;
      }
      if ( sub_8002EDA8(a2 - v12, v16) )
        goto LABEL_30;
      if ( v12 != v13 )
      {
        v14 = a2 + v13;
        v15 = a3 + v12;
        if ( sub_8002EDA8(a2 + v13, a3 + v12) )
          goto LABEL_29;
        v16 = a3 - v12;
        if ( sub_8002EDA8(a2 + v13, a3 - v12) )
          goto LABEL_30;
        v14 = a2 - v13;
        if ( sub_8002EDA8(a2 - v13, v15) )
          goto LABEL_29;
        if ( sub_8002EDA8(a2 - v13, v16) )
        {
LABEL_30:
          *a4 = v14;
          result = a7 + 2;
          *a5 = v16;
          return result;
        }
      }
      ++v10;
    }
    while ( v10 < 152 );
    if ( a2 != 16 || (v18 = a7 < 256, a3 != 16) )
    {
      v19 = a6[22];
      if ( !v19 || (v20 = *(unsigned __int16 *)(v19 + 182), v18 = a7 < 256, v20 != 34) )
      {
        v21 = 0;
        v22 = *(_DWORD **)(v17 + 612);
        do
        {
          ++v21;
          if ( *v22 != -1 )
          {
            a2 = 16;
            a3 = 16;
            ++a7;
            goto LABEL_1;
          }
          ++v22;
        }
        while ( v21 < 32 );
        v18 = a7 < 256;
      }
    }
    if ( !v18 )
      break;
    v23 = a6;
    v24 = a6[22];
    if ( v24 && *(_WORD *)(v24 + 182) == 34 )
      goto LABEL_32;
    a6[42] |= 0x8000u;
    if ( sub_8002EDF0(0, 0, a1) )
    {
      sub_8002EDF0(1, 1, a1);
      sub_8002E4F0(a1, a1, a6, (int)&unk_80067E40, 0);
    }
    a7 = 256;
  }
  v23 = a6;
LABEL_32:
  v23[42] |= 0x100000u;
  *a4 = 16;
  result = 0;
  *a5 = 16;
  return result;
}
// 8002F2E0: variable 'v17' is possibly undefined
// 8005C074: using guessed type int dword_8005C074[76];
// 80065D5C: using guessed type int dword_80065D5C;

//----- (8002F4DC) --------------------------------------------------------
int __fastcall sub_8002F4DC(_DWORD *a1, _DWORD *a2, int a3, int a4, int a5, int a6)
{
  int v7; // $s1
  int v9; // $s0
  int v11; // $s7
  int v12; // $s2
  int v13; // $v0
  int v14; // $s0
  int v15; // $s0
  int v16; // $s1
  int v17; // $lo
  int v18; // $s7
  int v19; // $v1
  int result; // $v0

  v7 = (a4 - a3) >> 8;
  v9 = (a6 - a5) >> 8;
  v11 = (a2[2] - a5) >> 8;
  v12 = (*a2 - a3) >> 8;
  v13 = sub_8003D9DC(v7 * v7 + v9 * v9);
  v14 = v9 << 12;
  if ( !v13 )
    _break(7u, 0);
  if ( v13 == -1 && v14 == 0x80000000 )
    _break(6u, 0);
  v15 = v14 / v13;
  v16 = v7 << 12;
  v17 = v16 / v13;
  if ( v13 == -1 && v16 == 0x80000000 )
    _break(6u, 0);
  v18 = (v11 * v15 - v12 * v17) >> 12;
  *a1 = a3 - ((v18 * v17) >> 16);
  v19 = a2[1];
  result = ((v18 * v15) >> 16) + a5;
  a1[2] = result;
  a1[1] = v19;
  return result;
}
// 8002F594: conditional instruction was optimized away because $v0.4!=0

//----- (8002F678) --------------------------------------------------------
BOOL __fastcall sub_8002F678(int *a1)
{
  int v1; // $s2
  _DWORD *v2; // $t2
  int v3; // $s5
  int v4; // $v0
  int v5; // $lo
  _DWORD *v6; // $a1
  int v7; // $a2
  int v8; // $a3
  int v9; // $t1
  int v10; // $s4
  int v11; // $a0
  BOOL result; // $v0
  int v13; // $v1
  int v14; // $a1
  int v15; // $v0
  int v16; // $a0
  int v17; // $v1
  int v18; // $a1
  int v19; // $fp
  unsigned int v20; // $s3
  int v21; // $a2
  int v22; // $a3
  int v23; // $t0
  int v24; // $v0
  int v25; // $a0
  int v26; // $s0
  int v27; // $s1
  int v28; // $v0
  int v29; // $s0
  int v30; // $s2
  int v31; // $s7
  int v32; // $s6
  int v33; // $v0
  int v34; // $a0
  int v35; // $a2
  char v36[8]; // [sp+10h] [-28h] BYREF
  int v37; // [sp+18h] [-20h] BYREF
  int v38; // [sp+1Ch] [-1Ch]
  unsigned int *v39; // [sp+20h] [-18h]
  int v40; // [sp+24h] [-14h]
  int v41; // [sp+28h] [-10h]
  int v42; // [sp+30h] [-8h]
  _DWORD *v43; // [sp+34h] [-4h]

  strcpy(v36, "vcm?X");
  memset(&v36[6], 0, 2);
  v1 = 1;
  v36[3] = sub_80012224(dword_80061034);
  v37 = sub_800120AC((unsigned __int8 *)v36);
  v2 = *(_DWORD **)(sub_800142B4((unsigned int *)&v37, 1, 0) + 16);
  v3 = v2[3];
  v4 = (a1[2] - v2[2]) >> 8;
  v5 = v4 / v3;
  if ( v3 == -1 && v4 == 0x80000000 )
    _break(6u, 0);
  v6 = v2 + 7;
  v7 = (*a1 - *v2) >> 8;
  v8 = v5 - 1;
  v9 = v5 + 1;
  v10 = v5 - 1;
  do
  {
    if ( v9 >= v10 )
    {
      v11 = 3 * v10;
      while ( 1 )
      {
        if ( v3 == -1 && v7 == 0x80000000 )
          _break(6u, 0);
        ++v10;
        if ( (v6[v11] & 0x1FFFu) + 3 < v7 / v3 )
          break;
        v11 += 3;
        if ( v9 < v10 )
          goto LABEL_13;
      }
      ++v6;
    }
LABEL_13:
    --v1;
    v10 = v5 - 1;
  }
  while ( v1 >= 0 );
  result = v9 < v8;
  if ( v9 >= v8 )
  {
    v38 = v3 / 2;
    v39 = &v6[3 * v8];
    v40 = v8 * v3 + v3;
    v41 = v8 * v3;
    while ( 1 )
    {
      v13 = v2[2];
      v14 = a1[2];
      v15 = (v41 << 8) + v13 - v14;
      v16 = 4 * v15;
      if ( (v15 & 0x20000000) != 0 )
        v16 += 0x1FFF;
      v17 = 4 * ((v40 << 8) + v13 - v14);
      v18 = (v16 >> 13) + 16;
      v19 = v17 / 0x2000 + 16;
      v20 = *v39;
      v21 = HIWORD(*v39);
      if ( *v39 != -1 )
      {
        v22 = *v2;
        v23 = *a1;
        v24 = (((((v20 >> 30) & 1) + (v21 & 0x1FFF)) * v3) << 8) + *v2 - *a1;
        v25 = 4 * v24;
        if ( (v24 & 0x20000000) != 0 )
          v25 += 0x1FFF;
        v26 = (__PAIR64__(*v39 & 0x1FFF, *v39 & 0xC000) - 1) >> 32;
        v27 = (v25 >> 13) + 16;
        v28 = 4 * (((v26 * v3 + v38) << 8) + v22 - v23);
        if ( ((((v26 * v3 + v38) << 8) + v22 - v23) & 0x20000000) != 0 )
          v28 += 0x1FFF;
        v29 = (v28 >> 13) + 16;
        v30 = v18;
        if ( v19 >= v18 )
          break;
      }
LABEL_36:
      result = v9 < ++v10;
      v39 += 3;
      v40 += v3;
      v41 += v3;
      if ( v9 < v10 )
        return result;
    }
    v31 = v21 & 0x4000;
    v32 = v21 & 0x8000;
    while ( 1 )
    {
      if ( v31 )
      {
        --v27;
      }
      else
      {
        v33 = v20 & 0x4000;
        if ( v32 )
          goto LABEL_30;
        ++v27;
      }
      v33 = v20 & 0x4000;
LABEL_30:
      if ( v33 )
      {
        --v29;
LABEL_34:
        v34 = v27;
        goto LABEL_35;
      }
      v34 = v27;
      if ( (v20 & 0x8000) == 0 )
      {
        ++v29;
        goto LABEL_34;
      }
LABEL_35:
      v42 = v9;
      v43 = v2;
      sub_8002D944(v34, v30, v21);
      sub_8002D944(v29, v30++, v35);
      v9 = v42;
      v2 = v43;
      if ( v19 < v30 )
        goto LABEL_36;
    }
  }
  return result;
}
// 8002F730: conditional instruction was optimized away because $s5.4!=0
// 8002F790: conditional instruction was optimized away because $s5.4!=0
// 8002F990: variable 'v21' is possibly undefined
// 8002F99C: variable 'v35' is possibly undefined
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 80061034: using guessed type int dword_80061034;

//----- (8002FA1C) --------------------------------------------------------
_UNKNOWN **sub_8002FA1C()
{
  _UNKNOWN **result; // $v0

  dword_80068FFC = 0;
  dword_80069024 = 0;
  dword_80069088 = 0;
  dword_8006908C = 0;
  dword_800690BC = 0;
  dword_800690B8 = 0;
  sub_80015798();
  dword_80068F28 = 0;
  dword_80068F14 = sub_8001A42C(dword_80068EA8, 4, 0, 0, 0, 0);
  dword_80068F10 = sub_8001A42C(dword_80068EA8, 4, 1, 0, 0, 0);
  dword_80068F30 = sub_8001A42C(dword_80068EA8, 4, 5, 0, 0, 0);
  dword_80068F6C = sub_8001A42C(dword_80068EA8, 4, 22, 0, 0, 0);
  sub_800142B4((unsigned int *)(dword_80061044 + 16), 0, 1);
  sub_800142B4((unsigned int *)(dword_80061044 + 36), 0, 1);
  sub_800142B4((unsigned int *)(dword_80061044 + 132), 0, 1);
  sub_800142B4((unsigned int *)(dword_80061044 + 152), 0, 1);
  sub_800142B4((unsigned int *)(dword_80061044 + 28), 0, 1);
  sub_800142B4((unsigned int *)(dword_80061044 + 32), 0, 1);
  sub_800142B4((unsigned int *)(dword_80061044 + 52), 0, 1);
  sub_8002FDC4(1);
  result = &off_8005D120;
  MEMORY[0x1F80005C] = &off_8005D120;
  return result;
}
// 8005D120: using guessed type _UNKNOWN *off_8005D120;
// 80060ABC: using guessed type int dword_80060ABC;
// 80061044: using guessed type int dword_80061044;
// 80068EA8: using guessed type _DWORD dword_80068EA8[4];
// 80068F10: using guessed type int dword_80068F10;
// 80068F14: using guessed type int dword_80068F14;
// 80068F28: using guessed type int dword_80068F28;
// 80068F30: using guessed type int dword_80068F30;
// 80068F6C: using guessed type int dword_80068F6C;
// 80068FFC: using guessed type int dword_80068FFC;
// 80069024: using guessed type int dword_80069024;
// 80069088: using guessed type int dword_80069088;
// 8006908C: using guessed type int dword_8006908C;
// 800690B8: using guessed type int dword_800690B8;
// 800690BC: using guessed type int dword_800690BC;

//----- (8002FBD0) --------------------------------------------------------
int sub_8002FBD0()
{
  dword_80068F48 = 99;
  dword_80068F40 = 7;
  dword_80068F44 = -1;
  dword_80069008 = 0;
  dword_800690AC = 0;
  dword_80069074 = 42;
  dword_80069078 = 0;
  dword_80069170 = 0;
  dword_800691EC = 0;
  dword_800691F4 = -1;
  dword_80069154 = 0;
  memset(&unk_8006B0E8, 0, 720);
  dword_80068F3C = 0;
  return sub_8002FCA0(1);
}
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 80068F3C: using guessed type int dword_80068F3C;
// 80068F40: using guessed type int dword_80068F40;
// 80068F44: using guessed type int dword_80068F44;
// 80068F48: using guessed type int dword_80068F48;
// 80069008: using guessed type int dword_80069008;
// 80069074: using guessed type int dword_80069074;
// 80069078: using guessed type int dword_80069078;
// 800690AC: using guessed type int dword_800690AC;
// 80069154: using guessed type int dword_80069154;
// 80069170: using guessed type int dword_80069170;
// 800691EC: using guessed type int dword_800691EC;
// 800691F4: using guessed type int dword_800691F4;

//----- (8002FC50) --------------------------------------------------------
int *sub_8002FC50()
{
  int *result; // $v0

  result = dword_80068E98;
  dword_80068F80 = 256;
  dword_80068F84 = 192;
  dword_80068F74 = 1024;
  dword_80069158 = 128;
  dword_8006915C = 128;
  dword_80068F78 = 0;
  dword_80068F7C = 0;
  dword_80068F4C = 0;
  dword_80069160 = 0;
  dword_80069164 = 0;
  dword_80069168 = 255;
  dword_8006916C = 255;
  return result;
}
// 80068E98: using guessed type int dword_80068E98[];
// 80068F4C: using guessed type int dword_80068F4C;
// 80068F74: using guessed type int dword_80068F74;
// 80068F78: using guessed type int dword_80068F78;
// 80068F7C: using guessed type int dword_80068F7C;
// 80068F80: using guessed type int dword_80068F80;
// 80068F84: using guessed type int dword_80068F84;
// 80069158: using guessed type int dword_80069158;
// 8006915C: using guessed type int dword_8006915C;
// 80069160: using guessed type int dword_80069160;
// 80069164: using guessed type int dword_80069164;
// 80069168: using guessed type int dword_80069168;
// 8006916C: using guessed type int dword_8006916C;

//----- (8002FCA0) --------------------------------------------------------
int __fastcall sub_8002FCA0(int a1)
{
  if ( a1 )
  {
    sub_8002FC50();
    dword_80068F48 = 99;
    dword_8006905C = 99;
    dword_80069104 = 0;
    dword_800690A8 = 0;
    dword_80068F0C = 0;
    dword_80068F88 = 0;
    dword_800690C8 = 0;
    dword_80068F5C = 0;
    dword_80068F60 = 0;
    dword_80068F64 = 0;
    dword_80068F68 = 0;
    dword_80068FB0 = 0;
    dword_80068FB4 = 0;
    Crystal_ID_Mask = 0;
    Crystal_ID_Mask_2 = 0;
    dword_800691B4 = 0;
    dword_800691B8 = 0;
    dword_800691BC = 0;
    dword_800691C0 = 0;
    dword_80069150 = 0;
    PowerUps_ID_Mask = 0;
    dword_80068FD8 = 0;
    dword_80068FDC = 0;
    dword_80068FB8 = 0;
    dword_80068FBC = 0;
    dword_800691C4 = 0;
    dword_800691C8 = 0;
    dword_800691CC = 0;
    dword_800691D0 = 0;
    dword_8006900C = -1;
    dword_80069060 = 0;
    dword_80068F58 = dword_80068F74;
    dword_80068F20 = 0;
    dword_80068FF4 = 0;
    dword_80068FF8 = 0;
    dword_80069010 = 0;
    dword_80069014 = 0;
    dword_8006913C = -1;
    dword_80069140 = 0;
    if ( a1 != 2 )
      memset(dword_8006C2D8, 0, sizeof(dword_8006C2D8));
    dword_800690DC = 0;
    dword_800690E0 = 0;
    dword_800690E4 = 0;
    dword_80068F54 = 0;
  }
  return memset(&word_8006AEE8, 0, 512);
}
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 80068F0C: using guessed type int dword_80068F0C;
// 80068F20: using guessed type int dword_80068F20;
// 80068F48: using guessed type int dword_80068F48;
// 80068F54: using guessed type int dword_80068F54;
// 80068F58: using guessed type int dword_80068F58;
// 80068F5C: using guessed type int dword_80068F5C;
// 80068F60: using guessed type int dword_80068F60;
// 80068F64: using guessed type int dword_80068F64;
// 80068F68: using guessed type int dword_80068F68;
// 80068F74: using guessed type int dword_80068F74;
// 80068F88: using guessed type int dword_80068F88;
// 80068FB0: using guessed type int dword_80068FB0;
// 80068FB4: using guessed type int dword_80068FB4;
// 80068FB8: using guessed type int dword_80068FB8;
// 80068FBC: using guessed type int dword_80068FBC;
// 80068FD8: using guessed type int dword_80068FD8;
// 80068FDC: using guessed type int dword_80068FDC;
// 80068FF4: using guessed type int dword_80068FF4;
// 80068FF8: using guessed type int dword_80068FF8;
// 8006900C: using guessed type int dword_8006900C;
// 80069010: using guessed type int dword_80069010;
// 80069014: using guessed type int dword_80069014;
// 8006905C: using guessed type int dword_8006905C;
// 80069060: using guessed type int dword_80069060;
// 800690A8: using guessed type int dword_800690A8;
// 800690C8: using guessed type int dword_800690C8;
// 800690DC: using guessed type int dword_800690DC;
// 800690E0: using guessed type int dword_800690E0;
// 800690E4: using guessed type int dword_800690E4;
// 80069104: using guessed type int dword_80069104;
// 8006912C: using guessed type int Crystal_ID_Mask;
// 80069130: using guessed type int Crystal_ID_Mask_2;
// 8006913C: using guessed type int dword_8006913C;
// 80069140: using guessed type int dword_80069140;
// 80069150: using guessed type int dword_80069150;
// 80069178: using guessed type int PowerUps_ID_Mask;
// 800691B4: using guessed type int dword_800691B4;
// 800691B8: using guessed type int dword_800691B8;
// 800691BC: using guessed type int dword_800691BC;
// 800691C0: using guessed type int dword_800691C0;
// 800691C4: using guessed type int dword_800691C4;
// 800691C8: using guessed type int dword_800691C8;
// 800691CC: using guessed type int dword_800691CC;
// 800691D0: using guessed type int dword_800691D0;
// 8006AEE8: using guessed type __int16 word_8006AEE8;
// 8006C2D8: using guessed type _DWORD dword_8006C2D8[128];

//----- (8002FDC4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8002FDC4(int a1)
{
  int result; // $v0
  int v2; // $v1
  int i; // $v1

  dword_8006901C = 0;
  dword_80068FF0 = 0;
  if ( dword_8006909C != 2 )
    dword_80069028 = 0;
  dword_80069020 = 1;
  dword_800690F0 = 0;
  dword_80069118 = 0;
  dword_800691AC = 0;
  if ( a1 )
  {
    dword_8006900C = -1;
    dword_80069124 = 0;
    dword_80069128 = 0;
    dword_80068F0C = 0;
    dword_80068F88 = 0;
    dword_80068F38 = 0;
    dword_800690C8 = 0;
    dword_800690A8 = 0;
    dword_80069140 = (dword_8006C2D8[2 * *(_DWORD *)(dword_80061044 + 8)] & 0xF) << 8;
    dword_8006913C = 0;
    dword_800691A0 = 0;
    dword_8006907C = 0;
    dword_800690B0 = 0;
    dword_800690C4 = 0;
    dword_800691E0 = 0;
  }
  sub_8002AA94(0, 0, 0);
  dword_80068E40 = 0;
  dword_800690A4 = 32;
  if ( dword_80068F3C != 1536 )
    dword_800690A0 = 288;
  dword_80060920 = 0;
  result = -2147090432;
  if ( (dword_80068F1C & 0x20000001) != 0 )
  {
    result = -2147090432;
    if ( (dword_80067A28 & 0x1000000) != 0 )
    {
      v2 = *(_DWORD *)(dword_80061044 + 8);
      result = 28;
      if ( v2 != 14 )
      {
        result = (int)&unk_800677AC;
        if ( v2 != 28 )
        {
          for ( i = 63; i >= 0; --i )
          {
            *(_DWORD *)(result + 320) = 0;
            result -= 4;
          }
          result = -2147090432;
          dword_800677E8 = 0;
        }
      }
    }
  }
  return result;
}
// 8002FEC4: write access to const memory at 80060920 has been detected
// 80060920: using guessed type int dword_80060920;
// 80061044: using guessed type int dword_80061044;
// 800677E8: using guessed type int dword_800677E8;
// 80067A28: using guessed type int dword_80067A28;
// 80068E40: using guessed type int dword_80068E40;
// 80068F0C: using guessed type int dword_80068F0C;
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F38: using guessed type int dword_80068F38;
// 80068F3C: using guessed type int dword_80068F3C;
// 80068F88: using guessed type int dword_80068F88;
// 80068FF0: using guessed type int dword_80068FF0;
// 8006900C: using guessed type int dword_8006900C;
// 8006901C: using guessed type int dword_8006901C;
// 80069020: using guessed type int dword_80069020;
// 80069028: using guessed type int dword_80069028;
// 8006907C: using guessed type int dword_8006907C;
// 8006909C: using guessed type int dword_8006909C;
// 800690A0: using guessed type int dword_800690A0;
// 800690A4: using guessed type int dword_800690A4;
// 800690A8: using guessed type int dword_800690A8;
// 800690B0: using guessed type int dword_800690B0;
// 800690C4: using guessed type int dword_800690C4;
// 800690C8: using guessed type int dword_800690C8;
// 800690F0: using guessed type int dword_800690F0;
// 80069118: using guessed type int dword_80069118;
// 80069124: using guessed type int dword_80069124;
// 80069128: using guessed type int dword_80069128;
// 8006913C: using guessed type int dword_8006913C;
// 80069140: using guessed type int dword_80069140;
// 800691A0: using guessed type int dword_800691A0;
// 800691AC: using guessed type int dword_800691AC;
// 800691E0: using guessed type int dword_800691E0;
// 8006C2D8: using guessed type _DWORD dword_8006C2D8[128];

//----- (8002FF3C) --------------------------------------------------------
int __fastcall sub_8002FF3C(int a1, _DWORD *a2, int a3, int a4)
{
  int result; // $v0
  BOOL v9; // $s4
  _DWORD *v10; // $a0
  int i; // $v1
  int v12; // $t2
  int v13; // $t3
  int v14; // $t4
  int v15; // $t2
  int v16; // $t3
  int v17; // $t2
  int v18; // $t3
  int v19; // $a1
  unsigned int v20; // $a2
  int *v21; // $t0
  _DWORD *v22; // $a3
  _DWORD *v23; // $a1
  int v24; // $a0
  int v25; // $v1
  unsigned int v26; // $a2
  int *v27; // $v1
  _DWORD *v28; // $a1
  int v29; // $v0

  result = *(_DWORD *)(*(_DWORD *)(dword_80065D5C + 16) + 732) & 0x2000;
  if ( !result )
  {
    v9 = a2 == dword_80066A44;
    if ( !a4 )
    {
      sub_8001DB38(a1, 0, 17408, 0, 0);
      if ( a3 )
      {
        dword_80068F88 = 0;
        dword_80068FF0 = 0;
      }
      else
      {
        dword_80068F88 += 256;
      }
      v10 = a2;
      a2[13] = a3;
      for ( i = 96; i != 128; i += 16 )
      {
        v12 = *(_DWORD *)(i + 4);
        v13 = *(_DWORD *)(i + 8);
        v14 = *(_DWORD *)(i + 12);
        *v10 = *(_DWORD *)i;
        v10[1] = v12;
        v10[2] = v13;
        v10[3] = v14;
        v10 += 4;
      }
      *v10 = MEMORY[0x80];
      if ( (unsigned int)*(unsigned __int8 *)(a1 + 288) - 6 >= 2 )
      {
        v15 = *(_DWORD *)(a1 + 100);
        v16 = *(_DWORD *)(a1 + 104);
        *a2 = *(_DWORD *)(a1 + 96);
        a2[1] = v15;
        a2[2] = v16;
      }
      if ( dword_8006900C > 0 )
      {
        v17 = dword_80069094;
        v18 = dword_80069098;
        *a2 = dword_80069090;
        a2[1] = v17;
        a2[2] = v18;
      }
      a2[3] = 0;
      a2[4] = 0;
      a2[5] = 0;
      a2[9] = *(_DWORD *)(dword_80065D5C + 4);
      a2[11] = dword_80065D70;
      a2[12] = *(_DWORD *)(dword_80061044 + 8);
      a2[10] = sub_80032DF8(dword_80065D64, 371, 0, 0, 0, 2, 0);
      if ( dword_8006900C < -1 || !*(_DWORD *)(a1 + 240) || v9 )
      {
        a2[14] = -1;
      }
      else
      {
        v19 = sub_80032DF8(*(_DWORD *)(a1 + 240), 648, 0, 0, 0, 2, 0);
        a2[14] = v19;
        if ( v19 )
        {
          dword_80069140 = ((dword_8006C2D8[2 * a2[12] + v19 / 8] >> (4 * (v19 % 8))) & 0xF) << 8;
          dword_8006913C = a2[14];
        }
      }
      sub_80014650((int)(a2 + 787));
    }
    if ( a4 == 2 )
    {
      v20 = 0;
      v21 = dword_8006B688;
      v22 = a2 + 795;
      v23 = a2;
      a2[786] += dword_80068FF0;
      do
      {
        v24 = *v21++;
        v25 = v22[18];
        ++v22;
        ++v20;
        v23[18] |= ~v25 & v24;
        ++v23;
      }
      while ( v20 < 0x300 );
    }
    else
    {
      a2[786] = dword_80068FF0;
      a2[15] = dword_800691A0;
    }
    result = -2147024896;
    if ( a4 != 2 )
    {
      v26 = 0;
      v27 = dword_8006B688;
      v28 = a2;
      do
      {
        v29 = *v27++;
        ++v26;
        v28[18] = v29;
        result = v26 < 0x300;
        ++v28;
      }
      while ( v26 < 0x300 );
    }
  }
  return result;
}
// 80060A90: using guessed type int dword_80060A90;
// 80061044: using guessed type int dword_80061044;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D64: using guessed type int dword_80065D64;
// 80065D70: using guessed type int dword_80065D70;
// 80066A44: using guessed type _DWORD dword_80066A44[795];
// 80068F88: using guessed type int dword_80068F88;
// 80068FF0: using guessed type int dword_80068FF0;
// 8006900C: using guessed type int dword_8006900C;
// 80069090: using guessed type int dword_80069090;
// 80069094: using guessed type int dword_80069094;
// 80069098: using guessed type int dword_80069098;
// 8006913C: using guessed type int dword_8006913C;
// 80069140: using guessed type int dword_80069140;
// 800691A0: using guessed type int dword_800691A0;
// 8006B688: using guessed type _DWORD dword_8006B688[784];
// 8006C2D8: using guessed type _DWORD dword_8006C2D8[128];

//----- (800302AC) --------------------------------------------------------
int *__fastcall sub_800302AC(int a1, int a2, int a3, int a4)
{
  _DWORD *v6; // $a1
  int v7; // $a0
  int *result; // $v0

  if ( a2 < 0 || a3 )
  {
    result = dword_80068E98;
    dword_80069140 = 0;
    dword_8006913C = 0;
  }
  else
  {
    v6 = &dword_8006C2D8[2 * a1 + (a2 >> 3)];
    v7 = 4 * (a2 - 8 * (a2 >> 3));
    if ( ((*v6 >> v7) & 0xF) != 0xF && !a4 )
      *v6 += 1 << v7;
    result = (int *)(((dword_8006C2D8[2 * a1 + a2 / 8] >> (4 * (a2 % 8))) & 0xF) << 8);
    dword_80069140 = (int)result;
    if ( (int)result < 0 )
      dword_80069140 = 0;
    dword_8006913C = a2;
  }
  return result;
}
// 80068E98: using guessed type int dword_80068E98[];
// 8006913C: using guessed type int dword_8006913C;
// 80069140: using guessed type int dword_80069140;
// 8006C2D8: using guessed type _DWORD dword_8006C2D8[128];

//----- (80030388) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_80030388(_DWORD *a1)
{
  BOOL v2; // $s5
  int v3; // $s1
  int v4; // $s3
  int v5; // $s2
  int v6; // $v0
  unsigned int v7; // $s1
  _DWORD *v8; // $a0
  _DWORD *v9; // $v1
  int v10; // $v0
  int v11; // $s1
  _DWORD *v12; // $v1
  int v13; // $a2
  char v14; // $a3
  _DWORD *v15; // $v1
  int v16; // $v0
  int v17; // $t1
  int v18; // $t2
  int v19; // $t3
  int *result; // $v0
  unsigned int v21[2]; // [sp+18h] [-8h] BYREF

  v2 = a1 == dword_80066A44;
  sub_800302AC(a1[12], a1[14], v2, dword_800691AC);
  sub_8001E34C(0, 4864, 0, 0, 0);
  if ( dword_80065D5C )
  {
    v3 = 0;
    sub_8001AC74();
    sub_8001AE64(dword_80065D5C, -1);
    v4 = *(_DWORD *)(dword_80065D5C + 16);
    dword_80065D60 = -1;
    if ( *(int *)(v4 + 400) > 0 )
    {
      v5 = 404;
      do
      {
        if ( sub_8001440C((unsigned int *)(v4 + v5), 0) )
        {
          v6 = sub_800142B4((unsigned int *)(v4 + v5), 1, 0);
          sub_8002157C(v6);
        }
        ++v3;
        v5 += 4;
      }
      while ( v3 < *(_DWORD *)(v4 + 400) );
    }
    sub_80014788((int)(a1 + 787));
    sub_800165F8((_DWORD *)dword_80061A84);
  }
  v7 = 0;
  dword_80065D5C = 0;
  dword_80065D64 = 0;
  SetGeomScreen(dword_80065D54);
  sub_80026038();
  v8 = dword_8006B688;
  v9 = a1;
  do
  {
    v10 = v9[18];
    ++v9;
    ++v7;
    *v8++ = v10;
  }
  while ( v7 < 0x300 );
  v11 = 0;
  if ( !v2 && dword_8006900C > 0 )
  {
    dword_8006B688[(unsigned int)dword_8006900C >> 8] &= ~2u;
    dword_8006B688[(unsigned int)dword_8006900C >> 8] |= 8u;
    v11 = 0;
  }
  v12 = dword_8006B688;
  do
  {
    ++v11;
    *v12++ &= ~1u;
  }
  while ( v11 < 768 );
  sub_80020F04(*(_DWORD *)(dword_80061044 + 8));
  v21[0] = a1[9];
  v13 = sub_800142B4(v21, 1, 1);
  v14 = 26;
  if ( !v2 )
    v14 = 27;
  sub_800215E8(v13, *(_DWORD *)(v13 + 4 * (3 * a1[10] + *(_DWORD *)(*(_DWORD *)(v13 + 16) + 388)) + 16), a1[11], v14);
  sub_8001440C(v21, 1);
  sub_8001A42C(dword_80068ED0, 0, 0, 0, 0, 1);
  v15 = a1;
  v16 = 96;
  do
  {
    v17 = v15[1];
    v18 = v15[2];
    v19 = v15[3];
    *(_DWORD *)v16 = *v15;
    *(_DWORD *)(v16 + 4) = v17;
    *(_DWORD *)(v16 + 8) = v18;
    *(_DWORD *)(v16 + 12) = v19;
    v15 += 4;
    v16 += 16;
  }
  while ( v15 != a1 + 8 );
  *(_DWORD *)v16 = *v15;
  MEMORY[0x18] = dword_80065D5C;
  MEMORY[0x110] = 0;
  MEMORY[0x84] = 0;
  MEMORY[0x88] = 0;
  MEMORY[0x8C] = 0;
  MEMORY[0x104] = 0;
  MEMORY[0x94] = MEMORY[0x70];
  if ( MEMORY[0x58] )
  {
    *(_DWORD *)(MEMORY[0x58] + 88) = 0;
    MEMORY[0x58] = 0;
  }
  dword_80069034 = 0;
  dword_80068F00 = 0;
  dword_80060AB4 = 0;
  dword_80068F08 = 201457663;
  if ( v2 )
  {
    if ( !dword_80068F0C )
      dword_80068F0C = 256;
  }
  else
  {
    dword_80068F0C += 256;
    if ( a1[13] )
      dword_800690A8 = 0;
    else
      dword_800690A8 += 256;
  }
  sub_8002FDC4(0);
  result = dword_80068E98;
  dword_80068FF0 = a1[786];
  dword_800691A0 = a1[15];
  return result;
}
// 800306D8: write access to const memory at 80060AB4 has been detected
// 8004F724: using guessed type int __fastcall SetGeomScreen(_DWORD);
// 80060A90: using guessed type int dword_80060A90;
// 80060AB4: using guessed type int dword_80060AB4;
// 80061044: using guessed type int dword_80061044;
// 80061A84: using guessed type int dword_80061A84;
// 80065D54: using guessed type int dword_80065D54;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D60: using guessed type int dword_80065D60;
// 80065D64: using guessed type int dword_80065D64;
// 80066A44: using guessed type _DWORD dword_80066A44[795];
// 80068E98: using guessed type int dword_80068E98[];
// 80068ED0: using guessed type _DWORD dword_80068ED0[2];
// 80068F00: using guessed type int dword_80068F00;
// 80068F08: using guessed type int dword_80068F08;
// 80068F0C: using guessed type int dword_80068F0C;
// 80068FF0: using guessed type int dword_80068FF0;
// 8006900C: using guessed type int dword_8006900C;
// 80069034: using guessed type int dword_80069034;
// 800690A8: using guessed type int dword_800690A8;
// 800691A0: using guessed type int dword_800691A0;
// 800691AC: using guessed type int dword_800691AC;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (80030780) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80030780()
{
  int result; // $v0

  result = -2147024896;
  dword_80060A88 = 0;
  dword_8006909C = 0;
  return result;
}
// 80030784: write access to const memory at 80060A88 has been detected
// 80060A88: using guessed type int dword_80060A88;
// 8006909C: using guessed type int dword_8006909C;

//----- (80030794) --------------------------------------------------------
void nullsub_8()
{
  ;
}

//----- (8003079C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *Demo_Routine()
{
  int *result; // $v0

  dword_80060A2C = 12345;
  result = dword_80068E98;
  dword_80060A30 = 765634;
  dword_80068F0C = 256;
  PowerUps_ID_Mask = 31;
  dword_800690A8 = 0;
  dword_80068F88 = 0;
  dword_80068F78 = 0;
  dword_8006913C = -1;
  dword_80069140 = 0;
  return result;
}
// 800307A8: write access to const memory at 80060A2C has been detected
// 800307B8: write access to const memory at 80060A30 has been detected
// 80060A2C: using guessed type int dword_80060A2C;
// 80060A30: using guessed type int dword_80060A30;
// 80068E98: using guessed type int dword_80068E98[];
// 80068F0C: using guessed type int dword_80068F0C;
// 80068F78: using guessed type int dword_80068F78;
// 80068F88: using guessed type int dword_80068F88;
// 800690A8: using guessed type int dword_800690A8;
// 8006913C: using guessed type int dword_8006913C;
// 80069140: using guessed type int dword_80069140;
// 80069178: using guessed type int PowerUps_ID_Mask;

//----- (800307EC) --------------------------------------------------------
void nullsub_9()
{
  ;
}

//----- (800307F4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *sub_800307F4()
{
  int v0; // $a1
  _DWORD *v1; // $v0
  int v2; // $a3
  int v3; // $t0
  int v4; // $t1
  int v5; // $a3

  dword_8006909C = 2;
  dword_80060A60 = 3228;
  sub_80032154(MEMORY[4]);
  v0 = MEMORY[0xC];
  *(_DWORD *)(dword_80061A80 + 16) = MEMORY[0xC7C];
  v1 = (_DWORD *)MEMORY[8];
  dword_80069034 = v0;
  v2 = MEMORY[0xC84];
  v3 = MEMORY[0xC88];
  v4 = MEMORY[0xC8C];
  *(_DWORD *)(MEMORY[8] + 48) = MEMORY[0xC80];
  v1[13] = v2;
  v1[14] = v3;
  v1[15] = v4;
  v5 = MEMORY[0xC94];
  v1[16] = MEMORY[0xC90];
  v1[17] = v5;
  dword_8006900C = -1;
  sub_80030388((_DWORD *)0x10);
  return Demo_Routine();
}
// 80030820: write access to const memory at 80060A60 has been detected
// 80060A60: using guessed type int dword_80060A60;
// 80060A88: using guessed type int dword_80060A88;
// 80060A90: using guessed type int dword_80060A90;
// 80061A80: using guessed type int dword_80061A80;
// 8006900C: using guessed type int dword_8006900C;
// 80069034: using guessed type int dword_80069034;
// 8006909C: using guessed type int dword_8006909C;

//----- (800308B8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int *__fastcall sub_800308B8(unsigned int *a1)
{
  int v2; // $v0
  int v3; // $v1
  _DWORD v5[2]; // [sp+18h] [-8h] BYREF

  dword_80061054 = 0;
  v2 = sub_800142B4(a1, 1, 1);
  *a1 = 1670788223;
  v3 = *(_DWORD *)(v2 + 16);
  v5[1] = 25600;
  v5[0] = 0;
  dword_80060A88 = v3;
  sub_8001A42C(dword_80068EA8, 4, 8, 2, v5, 1);
  return sub_800307F4();
}
// 80030918: write access to const memory at 80060A88 has been detected
// 80060A88: using guessed type int dword_80060A88;
// 80061054: using guessed type int dword_80061054;
// 80068EA8: using guessed type _DWORD dword_80068EA8[4];

//----- (80030940) --------------------------------------------------------
int __fastcall sub_80030940(int *a1)
{
  int v2; // $s0
  int result; // $v0
  char v4[8]; // [sp+10h] [-8h] BYREF

  v2 = sub_800122E4((int)&dword_80061030, 19);
  strcpy(v4, "pb??B");
  memset(&v4[6], 0, 2);
  if ( v2 )
  {
    v4[2] = sub_80032160(v2) + 48;
    v4[3] = sub_80012224(dword_80061034);
    *a1 = sub_800120AC((unsigned __int8 *)v4);
    dword_80061054 = -1;
    result = 3;
    dword_8006909C = 3;
  }
  else
  {
    *a1 = 1670788223;
    result = -2147024896;
    dword_80068F3C = 0;
  }
  return result;
}
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);
// 80060ABC: using guessed type int dword_80060ABC;
// 80061030: using guessed type _DWORD dword_80061030;
// 80061034: using guessed type int dword_80061034;
// 80061054: using guessed type int dword_80061054;
// 80068F3C: using guessed type int dword_80068F3C;
// 8006909C: using guessed type int dword_8006909C;

//----- (80030A34) --------------------------------------------------------
int __fastcall sub_80030A34(int *a1, int a2, __int16 a3, __int16 a4)
{
  int v7; // $s0
  int v8; // $s0
  int result; // $v0

  v7 = a2 >> 8;
  a1[1] = ((a2 >> 8) * sub_8003C2F0(a3)) >> 4;
  v8 = (v7 * sub_8003C364(a3)) >> 12;
  *a1 = (v8 * sub_8003C2F0(a4)) >> 4;
  result = (v8 * sub_8003C364(a4)) >> 4;
  a1[2] = result;
  return result;
}

//----- (80030AD8) --------------------------------------------------------
int __fastcall sub_80030AD8(int a1, int a2, _DWORD *a3)
{
  _DWORD *v3; // $t4
  int v4; // $t9
  int *v5; // $t3
  int v6; // $v1
  int *v7; // $t3
  int v8; // $t6
  int v9; // $t7
  _DWORD *v10; // $t5
  int v11; // $v1
  _DWORD *v12; // $t1
  int v13; // $v1
  int v14; // $v1
  _DWORD *v15; // $t2
  int v16; // $t0
  int v17; // $a3
  int v18; // $v1
  int v19; // $lo
  int v20; // $a3
  int v21; // $v1
  int v22; // $v0
  int v23; // $v1
  int v24; // $lo
  int v25; // $t7
  int v26; // $t9
  int *v27; // $t3
  int v28; // $t8
  int v29; // $v1
  int *v30; // $t3
  _DWORD *v31; // $a3
  _DWORD *v32; // $t0
  int v33; // $t6
  int *v34; // $t5
  _DWORD **v35; // $t2
  int v36; // $v1
  int v37; // $v1
  int v38; // $v1
  int v39; // $v1
  _DWORD *v40; // $t4
  _DWORD *v41; // $t1
  int v42; // $v0
  _DWORD *v43; // $a2
  int v44; // $v0
  char v45; // $v0
  bool v46; // dc
  int v47; // $v0
  _BYTE *v48; // $v1
  int v49; // $s5
  int v50; // $s6
  _DWORD *v51; // $a2
  int v52; // $s5
  int v53; // $s6
  int v54; // $s5
  int v55; // $s6
  int v56; // $s5
  int v57; // $s6
  int v58; // $v0
  int v59; // $s5
  int v60; // $s6
  _DWORD *v62; // [sp+0h] [-B0h] BYREF
  int v63; // [sp+4h] [-ACh]
  int v64; // [sp+8h] [-A8h]
  int v65; // [sp+Ch] [-A4h]
  _BYTE v66[144]; // [sp+10h] [-A0h] BYREF
  _DWORD v67[4]; // [sp+A0h] [-10h] BYREF

  v3 = v66;
  v4 = 0;
  v5 = dword_8005C824;
  do
  {
    v6 = *v5;
    v7 = v5 + 1;
    v8 = 0;
    v9 = 1;
    v10 = v3 + 1;
    v62 = (_DWORD *)(a2 + 12 * v6);
    v11 = *v7++;
    v12 = v62;
    v63 = a2 + 12 * v11;
    v13 = *v7++;
    v64 = a2 + 12 * v13;
    v14 = *v7;
    v5 = v7 + 1;
    v65 = a2 + 12 * v14;
    do
    {
      *v10 = 0;
      v15 = (&v62)[v9];
      v16 = v12[1];
      v17 = v15[1];
      if ( v17 < v16 )
      {
        if ( v17 < a1 && a1 < v16 )
        {
          v23 = (a1 - v17) << 8;
          v24 = v23 / (v16 - v17);
          if ( v16 == v17 )
            _break(7u, 0);
          if ( v16 - v17 == -1 && v23 == 0x80000000 )
            _break(6u, 0);
          v20 = v23 / (v16 - v17);
          *v3 = (((*v12 - *v15) * v24) >> 8) + *v15;
          v21 = v15[2];
          v22 = v12[2] - v21;
          goto LABEL_20;
        }
      }
      else if ( v16 < a1 && a1 < v17 )
      {
        v18 = (a1 - v16) << 8;
        v19 = v18 / (v17 - v16);
        if ( v17 == v16 )
          _break(7u, 0);
        if ( v17 - v16 == -1 && v18 == 0x80000000 )
          _break(6u, 0);
        v20 = v18 / (v17 - v16);
        *v3 = (((*v15 - *v12) * v19) >> 8) + *v12;
        v21 = v12[2];
        v22 = v15[2] - v21;
LABEL_20:
        *v10 = 1;
        v10[1] = ((v22 * v20) >> 8) + v21;
      }
      v10 += 3;
      v3 += 3;
      ++v9;
      ++v8;
      v12 = v15;
    }
    while ( v8 < 3 );
    ++v4;
    v25 = 0;
  }
  while ( v4 < 4 );
  v26 = 0;
  v27 = dword_8005C824;
  v28 = 0;
  memset(v67, 0, 12);
  do
  {
    v29 = *v27;
    v30 = v27 + 1;
    v31 = 0;
    v32 = 0;
    v33 = 0;
    v34 = &dword_8005C904[v28];
    v35 = &v62;
    v62 = (_DWORD *)(a2 + 12 * v29);
    v36 = *v30++;
    v63 = a2 + 12 * v36;
    v37 = *v30++;
    v64 = a2 + 12 * v37;
    v38 = *v30;
    v27 = v30 + 1;
    v65 = a2 + 12 * v38;
    while ( 1 )
    {
      v39 = 12 * *(char *)v34;
      v40 = &v66[v39];
      v41 = *v35;
      v34 = (int *)((char *)v34 + 1);
      if ( *(_DWORD *)&v66[v39 + 4] != 1 )
        break;
      if ( v31 )
      {
        *a3 = *v31;
        v42 = v31[2];
        a3[1] = a1;
        a3[2] = v42;
        v43 = a3 + 3;
        *v43 = *v40;
        v44 = v40[2];
        ++v25;
        v43[1] = a1;
        v43[2] = v44;
        goto LABEL_41;
      }
      v31 = &v66[v39];
LABEL_36:
      ++v33;
      ++v35;
      if ( v33 >= 4 )
      {
        if ( !v31 )
        {
          if ( v32 )
          {
            v54 = v32[1];
            v55 = v32[2];
            *a3 = *v32;
            a3[1] = v54;
            a3[2] = v55;
            v56 = v32[1];
            v57 = v32[2];
            a3[3] = *v32;
            a3[4] = v56;
            a3[5] = v57;
            return 1;
          }
          goto LABEL_42;
        }
        *a3 = *v31;
        v58 = v31[2];
        ++v25;
        a3[1] = a1;
        a3[2] = v58;
        v43 = a3 + 3;
        v59 = v32[1];
        v60 = v32[2];
        *v43 = *v32;
        v43[1] = v59;
        v43[2] = v60;
LABEL_41:
        a3 = v43 + 3;
        goto LABEL_42;
      }
    }
    if ( v41[1] != a1 )
      goto LABEL_36;
    v45 = v33 - 1;
    if ( !v32 )
    {
      v32 = *v35;
      goto LABEL_36;
    }
    v46 = (&v62)[v45 & 3][1] != a1;
    v47 = (v45 & 3) + v28 * 4;
    if ( !v46 )
    {
      v48 = (char *)v67 + *((char *)dword_8005C904 + v47);
      if ( *v48 )
        goto LABEL_42;
      *v48 = 1;
    }
    v49 = v32[1];
    v50 = v32[2];
    *a3 = *v32;
    a3[1] = v49;
    a3[2] = v50;
    v51 = a3 + 3;
    v52 = v41[1];
    v53 = v41[2];
    *v51 = *v41;
    v51[1] = v52;
    v51[2] = v53;
    a3 = v51 + 3;
    ++v25;
LABEL_42:
    ++v26;
    ++v28;
  }
  while ( v26 < 6 );
  return v25;
}
// 8005C824: using guessed type int dword_8005C824[11];
// 8005C904: using guessed type int dword_8005C904[6];

//----- (80030F88) --------------------------------------------------------
int __fastcall sub_80030F88(int a1, int a2, _DWORD *a3)
{
  int v3; // $t3
  _DWORD *v4; // $t5
  _DWORD *v5; // $t6
  int v6; // $t7
  int v8; // $t4
  _DWORD *v9; // $t2
  int v10; // $a0
  _DWORD *v11; // $t1
  int v12; // $v0
  int v13; // $v1
  int v14; // $t0
  int v15; // $a3
  bool v16; // dc
  int v17; // $a1
  int v18; // $v0
  int v19; // $lo
  int v20; // $a1
  int v21; // $a3
  int v22; // $t3
  int v23; // $lo
  int v24; // $a2
  int v25; // $a1
  int v26; // $v0

  v8 = 0;
  v9 = a3;
  v10 = 0;
  while ( 1 )
  {
    v11 = &a3[3 * (((_BYTE)v10 + 1) & 3)];
    v12 = v11[2];
    v13 = v9[2];
    v14 = a2 - v13;
    v15 = v12 - a2;
    if ( a2 - v13 > 0 )
      goto LABEL_5;
    if ( v15 <= 0 )
      break;
    if ( v14 >= 0 )
    {
LABEL_5:
      if ( v15 >= 0 )
        break;
    }
LABEL_24:
    ++v10;
    v9 = v11;
    if ( v10 >= 4 )
      return -999999999;
  }
  v16 = v8 != 0;
  v8 = 1;
  if ( !v16 )
  {
    v3 = a2 - v13;
    v6 = v12 - a2;
    v5 = v9;
    v4 = &a3[3 * (((_BYTE)v10 + 1) & 3)];
    goto LABEL_24;
  }
  v17 = v3 + v6;
  v18 = v3 << 12;
  if ( !(v3 + v6) )
    v17 = 1;
  v19 = v18 / v17;
  if ( v17 == -1 && v18 == 0x80000000 )
    _break(6u, 0);
  v20 = v14 + v15;
  v21 = ((v19 * (*v4 - *v5)) >> 12) + *v5;
  v22 = ((v19 * (v4[1] - v5[1])) >> 12) + v5[1];
  if ( !v20 )
    v20 = 1;
  v23 = (v14 << 12) / v20;
  if ( v20 == -1 && v14 << 12 == 0x80000000 )
    _break(6u, 0);
  v24 = v23 * (*v11 - *v9);
  v25 = (v24 >> 12) + *v9 - v21;
  if ( (v24 >> 12) + *v9 == v21 )
    v25 = 1;
  v26 = (a1 - v21) << 12;
  if ( v25 == -1 && v26 == 0x80000000 )
    _break(6u, 0);
  return ((v26 / v25 * (((v23 * (v11[1] - v9[1])) >> 12) + v9[1] - v22)) >> 12) + v22;
}
// 80031010: conditional instruction was optimized away because $a1.4!=0
// 8003108C: conditional instruction was optimized away because $a1.4!=0
// 8003110C: conditional instruction was optimized away because $a1.4!=0
// 80030FFC: variable 'v3' is possibly undefined
// 80030FFC: variable 'v6' is possibly undefined
// 80031038: variable 'v4' is possibly undefined
// 8003103C: variable 'v5' is possibly undefined

//----- (8003116C) --------------------------------------------------------
BOOL __fastcall sub_8003116C(int *a1, int *a2)
{
  int v2; // $t2
  int *v3; // $t1
  int v4; // $a3
  int v5; // $t0
  int v6; // $t3
  int v7; // $t4
  int v8; // $a2
  int v9; // $t5
  int v10; // $a0
  BOOL result; // $v0
  bool v12; // dc
  int v13; // $t0
  int *v14; // $a3
  int v15; // $t2
  int v16; // $t4
  int v17; // $a2
  int v18; // $v0
  int v19; // $t3
  int v20; // $t1
  int v21; // $v1
  int v22; // $a2
  int v23; // $v1
  int v24; // $a2
  int v25; // $t2
  int *v26; // $a3
  char *v27; // $a1
  int v28; // $a0
  int *v29; // $a3
  BOOL v30; // $v0
  int *v31; // $v1
  int v32; // $a2
  int v33; // [sp+0h] [-20h] BYREF
  char v34; // [sp+4h] [-1Ch] BYREF

  v2 = 1;
  v3 = a2 + 2;
  v4 = *a2;
  v5 = a2[1];
  v6 = *a2;
  v7 = v5;
  do
  {
    if ( *v3 < v6 )
      v6 = *v3;
    if ( v4 < *v3 )
      v4 = *v3;
    v8 = v3[1];
    if ( v8 < v7 )
      v7 = v3[1];
    if ( v5 < v8 )
      v5 = v3[1];
    ++v2;
    v3 += 2;
  }
  while ( v2 < 4 );
  v9 = *a1;
  v10 = a1[1];
  result = 0;
  if ( v9 < v6 )
    return result;
  result = 0;
  if ( v4 < v9 )
    return result;
  result = 0;
  if ( v10 < v7 )
    return result;
  result = 0;
  if ( v5 < v10 )
    return result;
  result = 1;
  if ( v6 == v4 )
    return result;
  v12 = v7 == v5;
  v13 = 0;
  if ( v12 )
    return result;
  v14 = &v33;
  v15 = 0;
  v16 = *a2;
  v17 = a2[1];
  do
  {
    v18 = 2 * (((_BYTE)v15 + 1) & 3);
    v19 = a2[v18];
    v20 = a2[v18 + 1];
    if ( v17 == v10 )
    {
      if ( v20 == v17 )
      {
        *v14++ = v19;
        ++v13;
      }
      *v14 = v16;
      goto LABEL_42;
    }
    if ( v20 == v10 )
    {
      *v14 = v19;
      goto LABEL_42;
    }
    if ( v17 >= v20 )
    {
      if ( v10 >= v20 && v17 >= v10 )
      {
        v23 = (v10 - v20) << 12;
        if ( v17 == v20 )
          _break(7u, 0);
        if ( v17 - v20 == -1 && v23 == 0x80000000 )
          _break(6u, 0);
        v22 = ((v23 / (v17 - v20) * (v16 - v19)) >> 12) + v19;
LABEL_41:
        *v14 = v22;
LABEL_42:
        ++v14;
        ++v13;
      }
    }
    else if ( v20 >= v10 && v10 >= v17 )
    {
      v21 = (v10 - v17) << 12;
      if ( v20 == v17 )
        _break(7u, 0);
      if ( v20 - v17 == -1 && v21 == 0x80000000 )
        _break(6u, 0);
      v22 = ((v21 / (v20 - v17) * (v19 - v16)) >> 12) + v16;
      goto LABEL_41;
    }
    ++v15;
    v16 = v19;
    v17 = v20;
  }
  while ( v15 < 4 );
  v24 = 0;
  do
  {
    v25 = v13 - 1;
    v26 = &v33;
    if ( v13 - 1 > 0 )
    {
      v27 = &v34;
      do
      {
        v28 = *v26;
        if ( *(_DWORD *)v27 < *v26 )
        {
          v24 = 1;
          *v26 = *(_DWORD *)v27;
          *(_DWORD *)v27 = v28;
        }
        v27 += 4;
        --v25;
        ++v26;
      }
      while ( v25 > 0 );
    }
    v12 = v24 != 0;
    v24 = 0;
  }
  while ( v12 );
  v29 = &v33;
  if ( v13 < 2 )
  {
LABEL_54:
    v30 = v13 < 3;
  }
  else
  {
    while ( 1 )
    {
      v30 = v13 < 3;
      if ( v29[1] != v33 )
        break;
      --v13;
      ++v29;
      if ( v13 < 2 )
        goto LABEL_54;
    }
  }
  if ( !v30 )
  {
    v31 = &v29[v13 - 2];
    v32 = v31[1];
    do
    {
      if ( *v31 != v32 )
        break;
      --v13;
      --v31;
    }
    while ( v13 >= 3 );
  }
  if ( v13 == 1 )
    return v9 == *v29;
  while ( 1 )
  {
    if ( v9 >= *v29 )
    {
      result = 1;
      if ( v29[1] >= v9 )
        break;
    }
    v13 -= 2;
    v29 += 2;
    if ( v13 <= 0 )
      return 0;
  }
  return result;
}

//----- (8003148C) --------------------------------------------------------
int __fastcall sub_8003148C(_DWORD *a1, _DWORD *a2, __int16 *a3, _DWORD *a4)
{
  int v8; // $v1
  int v9; // $a1
  int v10; // $a0
  int v11; // $t0
  int v12; // $t0
  int v13; // $t0
  int v14; // $a0
  int v15; // $t0
  int v16; // $t0
  int v17; // $t0
  int v18; // $a0
  int v19; // $t0
  int v20; // $t0
  int v21; // $t0
  int v22; // $a0
  int v23; // $a0
  int v24; // $v1
  int result; // $v0
  int v26; // [sp+10h] [-50h] BYREF
  int v27; // [sp+14h] [-4Ch]
  int v28; // [sp+18h] [-48h]
  int v29; // [sp+20h] [-40h] BYREF
  int v30; // [sp+24h] [-3Ch]
  int v31; // [sp+28h] [-38h]
  int v32; // [sp+30h] [-30h]
  int v33; // [sp+34h] [-2Ch]
  int v34; // [sp+38h] [-28h]
  int v35; // [sp+40h] [-20h]
  int v36; // [sp+44h] [-1Ch]
  int v37; // [sp+48h] [-18h]
  int v38; // [sp+50h] [-10h]
  int v39; // [sp+54h] [-Ch]
  int v40; // [sp+58h] [-8h]

  v29 = (*a2 + a2[3]) >> 1;
  v30 = (a2[1] + a2[4]) >> 1;
  v8 = (a2[2] + a2[5]) >> 1;
  v29 /= 16;
  v30 /= 16;
  v31 = v8 / 16;
  sub_80018DD4(&v29, a3, &v26);
  v26 *= 16;
  v27 *= 16;
  v28 *= 16;
  v9 = v26 + *a4;
  v26 = v9;
  v27 += a4[1];
  v28 += a4[2];
  v10 = (a2[3] - *a2) >> 2;
  v11 = v10 * *a3;
  v32 = v11 >> 12;
  if ( v11 >> 12 < 0 )
    v32 = -(v11 >> 12);
  v12 = v10 * a3[3];
  v33 = v12 >> 12;
  if ( v12 >> 12 < 0 )
    v33 = -(v12 >> 12);
  v13 = v10 * a3[6];
  v34 = v13 >> 12;
  if ( v13 >> 12 < 0 )
    v34 = -(v13 >> 12);
  v14 = (a2[4] - a2[1]) >> 2;
  v15 = v14 * a3[1];
  v35 = v15 >> 12;
  if ( v15 >> 12 < 0 )
    v35 = -(v15 >> 12);
  v16 = v14 * a3[4];
  v36 = v16 >> 12;
  if ( v16 >> 12 < 0 )
    v36 = -(v16 >> 12);
  v17 = v14 * a3[7];
  v37 = v17 >> 12;
  if ( v17 >> 12 < 0 )
    v37 = -(v17 >> 12);
  v18 = (a2[5] - a2[2]) >> 2;
  v19 = v18 * a3[2];
  v38 = v19 >> 12;
  if ( v19 >> 12 < 0 )
    v38 = -(v19 >> 12);
  v20 = v18 * a3[5];
  v39 = v20 >> 12;
  if ( v20 >> 12 < 0 )
    v39 = -(v20 >> 12);
  v21 = v18 * a3[8];
  v40 = v21 >> 12;
  if ( v21 >> 12 < 0 )
    v40 = -(v21 >> 12);
  v22 = 2 * (v32 + v35 + v38);
  a1[3] = v9 + v22;
  *a1 = v26 - v22;
  v23 = 2 * (v33 + v36 + v39);
  a1[4] = v27 + v23;
  a1[1] = v27 - v23;
  v24 = v34 + v37 + v40;
  a1[5] = v28 + 2 * v24;
  result = v28 - 2 * v24;
  a1[2] = result;
  return result;
}

//----- (800317C0) --------------------------------------------------------
BOOL __fastcall sub_800317C0(_DWORD *a1, int *a2)
{
  int v2; // $a3
  BOOL result; // $v0
  int v4; // $a2
  int v5; // $t0
  int v6; // $t1
  int v7; // $a1

  v2 = *a2;
  result = 0;
  if ( *a2 >= *a1 << 8 )
  {
    v4 = a1[1];
    v5 = a2[1];
    result = 0;
    if ( v5 >= v4 << 8 )
    {
      v6 = a1[2];
      v7 = a2[2];
      result = 0;
      if ( v7 >= v6 << 8 )
      {
        result = 0;
        if ( v2 < (*a1 + a1[3]) << 8 )
        {
          result = 0;
          if ( v5 < (v4 + a1[4]) << 8 )
            return v7 < (v6 + a1[5]) << 8;
        }
      }
    }
  }
  return result;
}

//----- (80031868) --------------------------------------------------------
BOOL __fastcall sub_80031868(int a1, int *a2)
{
  return sub_800317C0(*(_DWORD **)(a1 + 20), a2);
}

//----- (8003188C) --------------------------------------------------------
BOOL __fastcall sub_8003188C(int *a1, int *a2)
{
  int v2; // $a2
  BOOL result; // $v0
  int v4; // $v1
  int v5; // $a0

  v2 = *a1;
  result = 0;
  if ( *a1 >= *a2 )
  {
    v4 = a1[1];
    result = 0;
    if ( v4 >= a2[1] )
    {
      v5 = a1[2];
      result = 0;
      if ( v5 >= a2[2] )
      {
        result = 0;
        if ( v2 < a2[3] )
        {
          result = 0;
          if ( v4 < a2[4] )
            return v5 < a2[5];
        }
      }
    }
  }
  return result;
}

//----- (8003191C) --------------------------------------------------------
BOOL __fastcall sub_8003191C(_DWORD *a1, _DWORD *a2)
{
  BOOL result; // $v0

  result = 0;
  if ( a2[4] >= a1[1] )
  {
    result = 0;
    if ( a2[1] < a1[4] )
    {
      result = 0;
      if ( *a2 < a1[3] )
      {
        result = 0;
        if ( a2[2] < a1[5] )
        {
          result = 0;
          if ( a2[3] >= *a1 )
            return a2[5] >= a1[2];
        }
      }
    }
  }
  return result;
}

//----- (800319B8) --------------------------------------------------------
BOOL __fastcall sub_800319B8(_DWORD *a1, _DWORD *a2)
{
  BOOL result; // $v0

  result = 0;
  if ( *a1 >= *a2 )
  {
    result = 0;
    if ( a1[1] >= a2[1] )
    {
      result = 0;
      if ( a1[2] >= a2[2] )
      {
        result = 0;
        if ( a1[3] < a2[3] )
        {
          result = 0;
          if ( a1[4] < a2[4] )
            return a1[5] < a2[5];
        }
      }
    }
  }
  return result;
}

//----- (80031A54) --------------------------------------------------------
int __fastcall sub_80031A54(_DWORD *a1, _DWORD *a2)
{
  int v2; // $a3
  int v3; // $v1
  int v4; // $v0
  int v5; // $a2
  int v6; // $a0
  int v7; // $a1
  int v8; // $v1

  v2 = *a1 - *a2;
  if ( v2 < 0 )
    v2 = *a2 - *a1;
  v3 = a1[1];
  v4 = a2[1];
  v5 = v3 - v4;
  if ( v3 - v4 < 0 )
    v5 = v4 - v3;
  v6 = a1[2];
  v7 = a2[2];
  v8 = v6 - v7;
  if ( v6 - v7 < 0 )
    v8 = v7 - v6;
  if ( v2 >= v5 && v2 >= v8 )
    return v2 + (v5 + v8) / 4;
  if ( v5 < v2 || v5 < v8 )
    return v8 + (v5 + v2) / 4;
  return v5 + (v2 + v8) / 4;
}

//----- (80031B50) --------------------------------------------------------
int __fastcall sub_80031B50(_DWORD *a1, _DWORD *a2)
{
  int v2; // $a2
  int v3; // $a0
  int v4; // $a1
  int v5; // $v1
  BOOL v6; // $v0

  v2 = *a1 - *a2;
  if ( v2 < 0 )
    v2 = *a2 - *a1;
  v3 = a1[2];
  v4 = a2[2];
  v5 = v3 - v4;
  v6 = v2 < v3 - v4;
  if ( v3 - v4 < 0 )
  {
    v5 = v4 - v3;
    v6 = v2 < v4 - v3;
  }
  if ( v6 )
    return v5 + v2 / 4;
  else
    return v2 + v5 / 4;
}

//----- (80031BD0) --------------------------------------------------------
int __fastcall sub_80031BD0(int a1, _DWORD *a2, _DWORD *a3, int a4, int a5, int a6)
{
  int v6; // $v1
  int v7; // $v1
  int v8; // $v1

  v6 = *a2 - *a3;
  if ( a4 >= v6 && v6 >= -a4 )
  {
    v7 = a2[1] - a3[1];
    if ( a5 >= v7 && v7 >= -a5 )
    {
      v8 = a2[2] - a3[2];
      if ( a6 >= v8 && v8 >= -a6 )
        return 0;
    }
  }
  if ( a1 )
    *(_DWORD *)(a1 + 168) |= 0x8000u;
  return 1;
}

//----- (80031C74) --------------------------------------------------------
int __fastcall sub_80031C74(_DWORD *a1, _DWORD *a2)
{
  int v2; // $v0
  int v4; // [sp+14h] [-Ch]

  v4 = (a1[1] - a2[1]) >> 8;
  v2 = (a1[2] - a2[2]) >> 8;
  return sub_8003D9DC(((*a1 - *a2) >> 8) * ((*a1 - *a2) >> 8) + v4 * v4 + v2 * v2) << 8;
}

//----- (80031CF0) --------------------------------------------------------
int __fastcall sub_80031CF0(_DWORD *a1, _DWORD *a2)
{
  int v2; // $v0

  v2 = (a1[2] - a2[2]) >> 8;
  return sub_8003D9DC(((*a1 - *a2) >> 8) * ((*a1 - *a2) >> 8) + v2 * v2) << 8;
}

//----- (80031D4C) --------------------------------------------------------
int __fastcall sub_80031D4C(_DWORD *a1, _DWORD *a2)
{
  int v2; // $v0

  v2 = (a1[2] - a2[2]) >> 16;
  return sub_8003D9DC(((*a1 - *a2) >> 16) * ((*a1 - *a2) >> 16) + v2 * v2) << 16;
}

//----- (80031DA8) --------------------------------------------------------
int __fastcall sub_80031DA8(_DWORD *a1, _DWORD *a2)
{
  return sub_8004F794(*a2 - *a1, a2[2] - a1[2]) & 0xFFF;
}

//----- (80031DDC) --------------------------------------------------------
int __fastcall sub_80031DDC(_DWORD *a1, _DWORD *a2)
{
  return sub_8004F794(*a2 - *a1, a2[1] - a1[1]) & 0xFFF;
}

//----- (80031E10) --------------------------------------------------------
int __fastcall sub_80031E10(int a1, int a2, int a3)
{
  return (a1 + ((a3 * ((a2 - a1) << 20 >> 20)) >> 8)) & 0xFFF;
}

//----- (80031E34) --------------------------------------------------------
int __fastcall sub_80031E34(int a1, int a2, int a3, int a4)
{
  int v4; // $a1
  int v5; // $lo

  v4 = (a2 - a1) << 20 >> 20;
  if ( v4 > 0 && a4 < v4 || (v5 = a3 * v4, v4 < 0) && (a4 = -a4, v4 < a4) )
    v5 = a3 * a4;
  return ((_WORD)a1 + (unsigned __int16)(v5 >> 8)) & 0xFFF;
}

//----- (80031E84) --------------------------------------------------------
int __fastcall sub_80031E84(int *a1, _DWORD *a2, __int16 a3)
{
  int v6; // $s4
  int v7; // $s2
  int v8; // $s1
  int v9; // $v1
  int v10; // $v1
  unsigned int v11; // $v0
  int v12; // $s1
  int v13; // $s0
  int v14; // $s0
  int result; // $v0

  v6 = -*a2;
  v7 = -a2[2];
  v8 = sub_8004F794(v6, v7) & 0xFFF;
  v9 = v8 - (a3 & 0xFFF);
  if ( v9 < 2049 )
  {
    v11 = v9 + 1024;
    if ( v9 >= -2048 )
      goto LABEL_6;
    v10 = v9 + 4096;
  }
  else
  {
    v10 = v9 - 4096;
  }
  v11 = v10 + 1024;
LABEL_6:
  a1[1] = v8;
  if ( v11 >= 0x801 )
  {
    result = -1024;
  }
  else
  {
    v12 = -v8;
    v13 = sub_8003C364(v12);
    v14 = (((v7 >> 8) * v13) >> 4) - (((v6 >> 8) * sub_8003C2F0(v12)) >> 4);
    sub_8003C2F0(v12);
    sub_8003C364(v12);
    result = sub_8004F794(a2[1], v14) & 0xFFF;
  }
  *a1 = result;
  a1[2] = 0;
  return result;
}

//----- (80031F9C) --------------------------------------------------------
int __fastcall sub_80031F9C(int a1, int a2)
{
  return (a1 + ((a2 - a1) << 20 >> 21)) & 0xFFF;
}

//----- (80031FB4) --------------------------------------------------------
BOOL __fastcall sub_80031FB4(_DWORD *a1, _DWORD *a2)
{
  BOOL result; // $v0
  int v3; // $a3
  int v4; // $t0

  result = 0;
  if ( *a2 << 8 < a1[3] )
  {
    v3 = a2[1];
    result = 0;
    if ( v3 << 8 < a1[4] )
    {
      v4 = a2[2];
      result = 0;
      if ( v4 << 8 < a1[5] )
      {
        result = 0;
        if ( (*a2 + a2[3]) << 8 >= *a1 )
        {
          result = 0;
          if ( (v3 + a2[4]) << 8 >= a1[1] )
            return (v4 + a2[5]) << 8 >= a1[2];
        }
      }
    }
  }
  return result;
}

//----- (8003205C) --------------------------------------------------------
void nullsub_10()
{
  ;
}

//----- (80032144) --------------------------------------------------------
int sub_80032144()
{
  int v0; // $gp
  int result; // $v0

  result = 12345;
  *(_DWORD *)(v0 + 348) = 12345;
  return result;
}
// 80032148: variable 'v0' is possibly undefined

//----- (80032154) --------------------------------------------------------
void __fastcall sub_80032154(int a1)
{
  int v1; // $gp

  *(_DWORD *)(v1 + 348) = a1;
}
// 80032154: variable 'v1' is possibly undefined

//----- (80032160) --------------------------------------------------------
int __fastcall sub_80032160(int a1)
{
  int v1; // $gp
  unsigned int v3; // $a1
  signed int v4; // $v1

  if ( !a1 )
    return 0;
  v3 = 1103515245 * *(_DWORD *)(v1 + 352) + 12345;
  *(_DWORD *)(v1 + 352) = v3;
  v4 = v3 / 0xF % 0x7FFFFFF;
  if ( a1 == -1 && v4 == 0x80000000 )
    _break(6u, 0);
  return v4 % a1;
}
// 800321D4: conditional instruction was optimized away because $a2.4!=0
// 80032174: variable 'v1' is possibly undefined

//----- (80032250) --------------------------------------------------------
int __fastcall sub_80032250(int a1, int a2)
{
  int result; // $v0

  result = a1 - a2;
  if ( a1 - a2 < 0 )
    return a2 - a1;
  return result;
}

//----- (80032268) --------------------------------------------------------
BOOL __fastcall sub_80032268(int a1, int a2, int a3)
{
  char v6[8]; // [sp+10h] [-8h] BYREF

  sub_80045E68(a2, v6);
  sub_80045A1C(2u, v6, 0);
  sub_80047E40(a1, a3);
  return sub_80047F44() == 0;
}
// 80045E68: using guessed type int __fastcall sub_80045E68(_DWORD, _DWORD);

//----- (800322D0) --------------------------------------------------------
int sub_800322D0()
{
  unsigned int v0; // $s3
  unsigned __int8 *v1; // $s0
  int v2; // $s2
  char *v3; // $v0
  int v4; // $s1
  int v5; // $s2
  int v6; // $v0
  int v7; // $a1
  unsigned __int8 *v8; // $s0
  int v9; // $s1
  int v10; // $v0
  int v11; // $a1
  unsigned int *v12; // $a0
  unsigned int v13; // $v0
  int v14; // $v1
  char v16[6]; // [sp+10h] [-40h] BYREF
  unsigned __int8 v17; // [sp+16h] [-3Ah]
  unsigned __int8 v18; // [sp+17h] [-39h]
  char v19; // [sp+1Bh] [-35h]
  _BYTE v20[12]; // [sp+30h] [-20h]
  char v21; // [sp+3Ch] [-14h] BYREF
  int v22; // [sp+40h] [-10h]
  int v23; // [sp+44h] [-Ch]
  int v24; // [sp+48h] [-8h]

  v0 = sub_800112F8();
  if ( sub_80032268(1, 16, v0) && !strncmp(v0 + 1, "CD001", 5) )
  {
    printf("rfs\n");
    v22 = *(_DWORD *)(v0 + 140);
    v1 = (unsigned __int8 *)v0;
    if ( sub_80032268(1, v22, v0) )
    {
      v2 = 3;
      v3 = &v21;
      do
      {
        *(_DWORD *)v3 = -1;
        --v2;
        v3 -= 4;
      }
      while ( v2 >= 0 );
      v4 = 0;
      if ( v0 < v0 + 2048 )
      {
        do
        {
          if ( !*v1 )
            break;
          memcpy(v16, v1 + 8, *v1);
          v16[*v1] = 0;
          v23 = *(_DWORD *)(v1 + 2);
          if ( strlen(v16) == 2 && (v16[0] == 83 || v16[0] == 115) )
            *(_DWORD *)&v20[4 * (unsigned __int8)v16[1] - 192] = v23;
          ++v4;
          v1 += *v1 + (*v1 & 1) + 8;
          if ( v4 >= 128 )
            break;
        }
        while ( (unsigned int)v1 < v0 + 2048 );
      }
      v5 = 0;
      v6 = 0;
      while ( 1 )
      {
        v7 = *(_DWORD *)&v20[v6];
        if ( v7 != -1 && !sub_80032268(1, v7, v0) )
          break;
        v8 = (unsigned __int8 *)v0;
        v9 = 0;
        if ( v0 < v0 + 2048 )
        {
          do
          {
            if ( !*v8 )
              break;
            v22 = *(_DWORD *)(v8 + 2);
            v24 = *(_DWORD *)(v8 + 10);
            if ( v9 )
            {
              if ( v9 == 1 )
              {
                strcpy(v16, "..");
              }
              else
              {
                memcpy(v16, v8 + 33, v8[32]);
                v16[v8[32]] = 0;
              }
            }
            else
            {
              strcpy(v16, ".");
            }
            if ( v16[0] == 83 || v16[0] == 115 )
            {
              if ( v18 < 0x41u )
                v10 = 16 * v17 - 816;
              else
                v10 = 16 * v17 - 823;
              v11 = v10 + v18;
              if ( v19 == 68 || v19 == 100 )
              {
                v12 = &dword_8006C4D8[3 * v11];
                v13 = v12[1];
                v14 = v24;
                *v12 = *v12 & 0xFF800000 | v22 & 0x7FFFFF;
                v12[1] = v13 & 0xFFFE0000 | v14 & 0x1FFFF;
              }
              else
              {
                dword_8006C4D8[3 * v11 + 2] = dword_8006C4D8[3 * v11 + 2] & 0xFF000000 | v22 & 0xFFFFFF;
              }
            }
            if ( !strncmp(v16, "WARP", 4) )
            {
              dword_8006C7B4 = dword_8006C7B4 & 0xFF800000 | v22 & 0x7FFFFF;
              dword_8006C7B8 = dword_8006C7B8 & 0xFFFE0000 | v24 & 0x1FFFF;
            }
            ++v9;
            v8 += *v8;
            if ( v9 >= 64 )
              break;
          }
          while ( (unsigned int)v8 < v0 + 2048 );
        }
        ++v5;
        v6 = 4 * v5;
        if ( v5 >= 4 )
        {
          sub_8001152C(v0);
          return 1;
        }
      }
    }
  }
  sub_8001152C(v0);
  return 0;
}
// 800480A0: using guessed type int __fastcall strncmp(_DWORD, _DWORD, _DWORD);
// 800480C0: using guessed type int __fastcall strlen(_DWORD);
// 800480F0: using guessed type int __fastcall memcpy(_DWORD, _DWORD, _DWORD);
// 80048110: using guessed type int printf(const char *, ...);
// 8006C4D8: using guessed type _DWORD dword_8006C4D8[183];
// 8006C7B4: using guessed type int dword_8006C7B4;
// 8006C7B8: using guessed type int dword_8006C7B8;

//----- (80032710) --------------------------------------------------------
unsigned __int8 *__fastcall sub_80032710(
        int a1,
        int a2,
        int a3,
        int a4,
        _DWORD *a5,
        int a6,
        unsigned __int8 *a7,
        int a8,
        _DWORD *a9)
{
  int v9; // $t6
  int v10; // $t0
  int v11; // $t3
  int v12; // $t0
  int v13; // $t1
  int i; // $v1
  __int16 *v15; // $t5
  int v16; // $v0
  bool v17; // dc
  BOOL v18; // $v0
  int v19; // $v1
  int v20; // $a0
  unsigned __int16 *v21; // $t3
  unsigned __int16 *v22; // $t4
  __int16 *v23; // $t2
  char *v24; // $t2
  int v25; // $t1
  unsigned __int8 *result; // $v0
  int v27; // $a1
  int v28; // $t0
  int v29; // $t1
  int v30; // $v1
  __int16 *v31; // $a0
  int v32; // $a1
  int v33; // $v0
  int v34; // $v1
  int v35; // $a0
  int v36; // $v1
  _BYTE *v37; // $a3
  __int16 *v38; // $v0
  int v39; // $v1
  int v40; // $t4
  int v41; // $a0
  unsigned __int8 *v42; // $a2
  int v43; // $t4
  int v44; // $t0
  int v45; // $a1
  int v46; // $a0
  int v47; // $v0
  int v48; // $v1
  int v49; // $a1
  int v50; // $a0
  int v51; // $v0
  int v52; // $v1
  int v53; // $a1
  int v54; // $a0
  int v55; // $lo
  int v56; // $v1
  int v57; // $a1
  __int16 *v58; // $t3
  __int16 *v59; // $t1
  _WORD *v60; // $t0
  int v61; // $a0
  int v62; // $lo
  int v63; // $v1
  int v64; // $a1
  _DWORD *v65; // $t3
  int *v66; // $t1
  _DWORD *v67; // $t0
  int v68; // $a0
  int v69; // $lo
  int v70; // $v1
  int v71; // $v0
  int v72; // $a0
  char v73; // $v0
  int v74; // $v1
  int v75; // $v1
  int v76; // $a0
  int v77; // $v1

  while ( 1 )
  {
    v10 = *(__int16 *)(a1 + 12);
    v11 = a1 + 12;
    if ( v10 > 0 )
      break;
LABEL_97:
    a1 = *(_DWORD *)(a1 + 8);
    if ( !a1 )
      return 0;
  }
  v12 = v10 - 1;
  v13 = 0;
  for ( i = v12 >> 1; ; i = (v13 + v12) >> 1 )
  {
    v15 = (__int16 *)(a1 + 16 + 8 * i);
    v16 = *v15;
    v17 = a2 == v16;
    v18 = v16 < a2;
    if ( v17 )
      break;
    if ( v18 )
      v13 = i + 1;
    else
      v12 = i - 1;
    if ( v12 < v13 )
      goto LABEL_97;
  }
  if ( a9 )
    *a9 = v15;
  v19 = *(unsigned __int16 *)(a1 + 18 + 8 * i);
  v20 = (unsigned __int16)v15[3];
  v21 = (unsigned __int16 *)(v11 + v19);
  if ( (v15[2] & 0x40) != 0 )
  {
    v22 = &v21[v20];
  }
  else
  {
    v22 = v21 + 1;
    v9 = *v21;
    v21 = 0;
  }
  if ( (v15[2] & 0x20) != 0 )
  {
    v23 = (__int16 *)&v22[v20];
  }
  else
  {
    v23 = (__int16 *)v22;
    v22 = 0;
  }
  v24 = (char *)(((unsigned int)v23 + 3) & 0xFFFFFFFC);
  if ( a6 == 2 )
  {
    v25 = a3;
    if ( a3 >= v20 )
      return 0;
    goto LABEL_83;
  }
  result = 0;
  if ( !v22 )
    return result;
  v27 = a3 >> 8;
  result = 0;
  if ( a3 >> 8 < (__int16)*v22 )
    return result;
  v28 = (unsigned __int16)v15[3] - 1;
  v29 = 0;
  if ( v27 < (__int16)v22[v28] )
  {
    while ( 1 )
    {
      while ( 1 )
      {
        v30 = (v29 + v28) >> 1;
        v31 = (__int16 *)&v22[v30];
        if ( v27 >= *v31 )
          break;
        v28 = (v29 + v28) >> 1;
      }
      v25 = (v29 + v28) >> 1;
      if ( v27 < v31[1] )
        break;
      v29 = v30 + 1;
    }
  }
  else
  {
    v25 = (unsigned __int16)v15[3] - 1;
  }
  if ( !a6 )
  {
LABEL_83:
    if ( v21 )
      v9 = v21[v25];
    if ( a4 < v9 )
    {
      if ( a5 )
        *a5 = v9;
      v75 = a4;
      if ( v25 > 0 )
      {
        v76 = 0;
        if ( v21 )
        {
          v77 = 0;
          do
          {
            ++v76;
            v77 += *v21++;
          }
          while ( v76 < v25 );
          v75 = v77 + a4;
        }
        else
        {
          v75 = v9 * v25 + a4;
        }
      }
      if ( v75 )
        v24 += v75 * *((unsigned __int8 *)v15 + 5);
      return (unsigned __int8 *)v24;
    }
    return 0;
  }
  if ( a6 == 1 )
  {
    result = 0;
    if ( (__int16)v22[v25] != v27 )
      return result;
    goto LABEL_83;
  }
  if ( v21 )
    v9 = v21[v25];
  v32 = a8;
  v33 = a4 + a8;
  if ( !a8 )
  {
    v32 = v9;
    v33 = a4 + v9;
  }
  if ( v9 < v33 )
    return 0;
  if ( a5 )
    *a5 = v9;
  v34 = a4;
  if ( v25 > 0 )
  {
    v35 = 0;
    if ( v21 )
    {
      v36 = 0;
      do
      {
        ++v35;
        v36 += *v21++;
      }
      while ( v35 < v25 );
      v34 = v36 + a4;
    }
    else
    {
      v34 = v9 * v25 + a4;
    }
  }
  if ( v34 )
    v24 += v34 * *((unsigned __int8 *)v15 + 5);
  v37 = a7;
  if ( v25 == (unsigned __int16)v15[3] - 1
    || v21 && v9 != v21[1]
    || (v38 = (__int16 *)&v22[v25],
        v39 = *v38,
        v40 = (v38[1] << 8) - (v39 << 8),
        v41 = a3 - (v39 << 8),
        v17 = a3 == v39 << 8,
        v42 = (unsigned __int8 *)&v24[v9 * *((unsigned __int8 *)v15 + 5)],
        v17) )
  {
    v71 = v32 * *((unsigned __int8 *)v15 + 5);
    v72 = v71 - 1;
    if ( v71 )
    {
      do
      {
        v73 = *v24++;
        v74 = v72--;
        *v37++ = v73;
      }
      while ( v74 );
    }
    return a7;
  }
  else
  {
    if ( !v40 )
      _break(7u, 0);
    if ( v40 == -1 && v41 << 8 == 0x80000000 )
      _break(6u, 0);
    v43 = (v41 << 8) / v40;
    v44 = v15[2] & 0x1F;
    switch ( v15[2] & 0x1F )
    {
      case 1:
      case 0x11:
        v17 = v32 == 0;
        v45 = v32 - 1;
        if ( v17 )
          return a7;
        do
        {
          if ( v44 == 1 )
          {
            v46 = (unsigned __int8)*v24;
            v47 = *v42 - v46;
          }
          else
          {
            v46 = *v24;
            v47 = (char)*v42 - v46;
          }
          ++v24;
          ++v42;
          v48 = v45--;
          *v37++ = ((((v47 * v43) >> 7) + 1) >> 1) + v46;
        }
        while ( v48 );
        result = a7;
        break;
      case 2:
      case 0x12:
        v17 = v32 == 0;
        v49 = v32 - 1;
        if ( v17 )
          return a7;
        do
        {
          if ( v44 == 2 )
          {
            v50 = *(unsigned __int16 *)v24;
            v51 = *(unsigned __int16 *)v42 - v50;
          }
          else
          {
            v50 = *(__int16 *)v24;
            v51 = *(__int16 *)v42 - v50;
          }
          v24 += 2;
          v42 += 2;
          v52 = v49--;
          *(_WORD *)v37 = ((((v51 * v43) >> 7) + 1) >> 1) + v50;
          v37 += 2;
        }
        while ( v52 );
        result = a7;
        break;
      case 3:
      case 4:
      case 5:
      case 0x13:
        v17 = v32 == 0;
        v53 = v32 - 1;
        if ( v17 )
          return a7;
        do
        {
          v54 = *(_DWORD *)v24;
          v55 = (*(_DWORD *)v42 - *(_DWORD *)v24) * v43;
          v24 += 4;
          v42 += 4;
          v56 = v53--;
          *(_DWORD *)v37 = (((v55 >> 7) + 1) >> 1) + v54;
          v37 += 4;
        }
        while ( v56 );
        result = a7;
        break;
      case 6:
        v17 = v32 == 0;
        v57 = v32 - 1;
        if ( v17 )
          return a7;
        v58 = (__int16 *)(v42 + 4);
        v59 = (__int16 *)(v24 + 4);
        v60 = a7 + 4;
        do
        {
          *(_WORD *)v37 = (((((*(__int16 *)v42 - *(__int16 *)v24) * v43) >> 7) + 1) >> 1) + *(_WORD *)v24;
          *(v60 - 1) = (((((*(v58 - 1) - *(v59 - 1)) * v43) >> 7) + 1) >> 1) + *(v59 - 1);
          v61 = *v59;
          v62 = (*v58 - v61) * v43;
          v24 += 6;
          v42 += 6;
          v63 = v57--;
          v37 += 6;
          v59 += 3;
          v58 += 3;
          *v60 = (((v62 >> 7) + 1) >> 1) + v61;
          v60 += 3;
        }
        while ( v63 );
        result = a7;
        break;
      case 7:
        v17 = v32 == 0;
        v64 = v32 - 1;
        if ( v17 )
          return a7;
        v65 = v42 + 8;
        v66 = (int *)(v24 + 8);
        v67 = a7 + 8;
        do
        {
          *(_DWORD *)v37 = (((((*(_DWORD *)v42 - *(_DWORD *)v24) * v43) >> 7) + 1) >> 1) + *(_DWORD *)v24;
          *(v67 - 1) = (((((*(v65 - 1) - *(v66 - 1)) * v43) >> 7) + 1) >> 1) + *(v66 - 1);
          v68 = *v66;
          v69 = (*v65 - *v66) * v43;
          v24 += 12;
          v42 += 12;
          v70 = v64--;
          v37 += 12;
          v66 += 3;
          v65 += 3;
          *v67 = (((v69 >> 7) + 1) >> 1) + v68;
          v67 += 3;
        }
        while ( v70 );
        result = a7;
        break;
      default:
        return a7;
    }
  }
  return result;
}
// 800328F4: variable 'v9' is possibly undefined

//----- (80032DF8) --------------------------------------------------------
int __fastcall sub_80032DF8(int a1, int a2, int a3, int a4, _DWORD *a5, int a6, int a7)
{
  unsigned __int8 *v7; // $v0
  int v9; // $v1
  unsigned __int8 v10[16]; // [sp+28h] [-18h] BYREF
  int v11; // [sp+38h] [-8h] BYREF

  v7 = sub_80032710(a1, a2, a3, a4, a5, a6, v10, 1, &v11);
  if ( !v7 )
    return a7;
  v9 = *(_BYTE *)(v11 + 4) & 0x1F;
  if ( v9 == 2 )
    return *(unsigned __int16 *)v7;
  if ( (*(_BYTE *)(v11 + 4) & 0x1Fu) >= 3 )
  {
    if ( v9 == 17 )
      return (char)*v7;
    if ( v9 == 18 )
      return *(__int16 *)v7;
  }
  else if ( v9 == 1 )
  {
    return *v7;
  }
  return *(_DWORD *)v7;
}

//----- (80032EDC) --------------------------------------------------------
int __fastcall sub_80032EDC(int a1, int a2, int a3, int a4)
{
  bool v4; // dc
  int result; // $v0
  unsigned __int8 v6[16]; // [sp+28h] [-18h] BYREF
  int v7; // [sp+38h] [-8h] BYREF

  v4 = sub_80032710(a1, a2, a3, 0, &v7, a4, v6, 1, 0) == 0;
  result = 0;
  if ( !v4 )
    return v7;
  return result;
}

//----- (80032F28) --------------------------------------------------------
void sub_80032F28()
{
  ;
}

//----- (80032F30) --------------------------------------------------------
void sub_80032F30()
{
  ;
}

//----- (80032F38) --------------------------------------------------------
void sub_80032F38()
{
  ;
}

//----- (80032F40) --------------------------------------------------------
void sub_80032F40()
{
  ;
}

//----- (80032F48) --------------------------------------------------------
void sub_80032F48()
{
  ;
}

//----- (80032F50) --------------------------------------------------------
void sub_80032F50()
{
  ;
}

//----- (80032F58) --------------------------------------------------------
void sub_80032F58()
{
  ;
}

//----- (80032F60) --------------------------------------------------------
void sub_80032F60()
{
  ;
}

//----- (80032F68) --------------------------------------------------------
void sub_80032F68()
{
  ;
}

//----- (80032F70) --------------------------------------------------------
void sub_80032F70()
{
  ;
}

//----- (80032F78) --------------------------------------------------------
void sub_80032F78()
{
  ;
}

//----- (80032F80) --------------------------------------------------------
void sub_80032F80()
{
  ;
}

//----- (80032F88) --------------------------------------------------------
void sub_80032F88()
{
  ;
}

//----- (80032F90) --------------------------------------------------------
void sub_80032F90()
{
  ;
}

//----- (80032F98) --------------------------------------------------------
void sub_80032F98()
{
  ;
}

//----- (80032FA0) --------------------------------------------------------
void sub_80032FA0()
{
  ;
}

//----- (80032FA8) --------------------------------------------------------
void sub_80032FA8()
{
  ;
}

//----- (80032FB0) --------------------------------------------------------
void sub_80032FB0()
{
  ;
}

//----- (80032FB8) --------------------------------------------------------
void sub_80032FB8()
{
  ;
}

//----- (80032FC0) --------------------------------------------------------
void sub_80032FC0()
{
  ;
}

//----- (80032FC8) --------------------------------------------------------
int __fastcall sub_80032FC8(__int16 a1)
{
  int v2; // [sp+10h] [-28h] BYREF
  __int16 v3; // [sp+14h] [-24h]
  __int16 v4; // [sp+16h] [-22h]

  v2 = 3;
  v3 = 129 * a1;
  v4 = 129 * a1;
  return SpuSetCommonAttr(&v2);
}
// 80051A74: using guessed type int __fastcall SpuSetCommonAttr(_DWORD);

//----- (80033000) --------------------------------------------------------
int sub_80033000()
{
  int result; // $v0

  switch ( *(_DWORD *)(dword_80061044 + 8) )
  {
    case 5:
    case 0xA:
    case 0xD:
    case 0xE:
    case 0x11:
    case 0x13:
    case 0x14:
    case 0x15:
    case 0x17:
    case 0x19:
    case 0x1C:
    case 0x1F:
    case 0x20:
    case 0x21:
    case 0x25:
    case 0x27:
      result = 6;
      break;
    default:
      result = 5;
      break;
  }
  return result;
}
// 80061044: using guessed type int dword_80061044;

//----- (80033050) --------------------------------------------------------
int sub_80033050()
{
  unsigned int v0; // $v1
  int result; // $v0

  dword_8006CF80 = 1;
  byte_8006CF90 = 1;
  byte_8006CF91 = 0x80;
  word_8006CF92 = 0x3FFF;
  dword_8006CF88 = 1670788223;
  word_8006CF96 = 4096;
  word_8006CF94 = 0;
  dword_8006CF8C = 0;
  dword_8006CF98 = 0;
  dword_8006CF9C = 0;
  dword_8006CFA0 = 0;
  dword_8006CF78 &= 0xFFFFFE00;
  v0 = dword_8006CF78 & 0xFFFFE1FF | ((sub_80033000() & 0xF) << 9) | 0x2000;
  result = -16385;
  dword_8006CF78 = v0 & 0xFFF83FFF;
  return result;
}
// 8006CF78: using guessed type int dword_8006CF78;
// 8006CF80: using guessed type int dword_8006CF80;
// 8006CF88: using guessed type int dword_8006CF88;
// 8006CF8C: using guessed type int dword_8006CF8C;
// 8006CF90: using guessed type char byte_8006CF90;
// 8006CF91: using guessed type char byte_8006CF91;
// 8006CF92: using guessed type __int16 word_8006CF92;
// 8006CF94: using guessed type __int16 word_8006CF94;
// 8006CF96: using guessed type __int16 word_8006CF96;
// 8006CF98: using guessed type int dword_8006CF98;
// 8006CF9C: using guessed type int dword_8006CF9C;
// 8006CFA0: using guessed type int dword_8006CFA0;

//----- (8003314C) --------------------------------------------------------
void nullsub_11()
{
  ;
}

//----- (80033154) --------------------------------------------------------
void nullsub_12()
{
  ;
}

//----- (8003315C) --------------------------------------------------------
int sub_8003315C()
{
  int v0; // $gp
  int v1; // $a0
  _DWORD *v2; // $v1
  int v3; // $gp
  int result; // $v0
  int v5; // $gp
  int v6; // [sp+10h] [-28h] BYREF
  __int16 v7; // [sp+14h] [-24h]
  __int16 v8; // [sp+16h] [-22h]

  v1 = 0;
  *(_DWORD *)(v0 + 396) = 1;
  v2 = &unk_8006C7D8;
  do
  {
    ++v1;
    v2[1] &= ~8u;
    v2 += 20;
  }
  while ( v1 < 24 );
  sub_800533C8();
  sub_8005697C((int)&unk_8006CFF8, 1, 2);
  SpuInitMalloc(0, dword_80060B10);
  v6 = 3;
  v7 = 0x3FFF;
  v8 = 0x3FFF;
  SpuSetCommonAttr(&v6);
  SpuSetTransferMode(0);
  sub_80033050();
  sub_80033280((unsigned int)(4194048 * dword_80068F80) >> 16);
  *(_DWORD *)(v3 + 646) = 0x3FFF;
  result = sub_80032FC8(127);
  *(_DWORD *)(v5 + 656) = 0;
  return result;
}
// 8003316C: variable 'v0' is possibly undefined
// 80033214: variable 'v3' is possibly undefined
// 8003322C: variable 'v5' is possibly undefined
// 8004F9B4: using guessed type int __fastcall SpuInitMalloc(_DWORD, _DWORD);
// 80051994: using guessed type int __fastcall SpuSetTransferMode(_DWORD);
// 80051A74: using guessed type int __fastcall SpuSetCommonAttr(_DWORD);
// 80060B10: using guessed type int dword_80060B10[3];
// 80068F80: using guessed type int dword_80068F80;

//----- (80033238) --------------------------------------------------------
int sub_80033238()
{
  int v0; // $gp
  int result; // $v0
  int v2; // $gp
  _DWORD v3[2]; // [sp+10h] [-18h] BYREF
  __int16 v4; // [sp+18h] [-10h]
  __int16 v5; // [sp+1Ah] [-Eh]

  result = *(_DWORD *)(v0 + 396);
  if ( result )
  {
    v3[0] = 7;
    v3[1] = 0;
    v4 = 0;
    v5 = 0;
    SpuSetReverbModeParam(v3);
    result = SpuSetReverb(0);
    *(_DWORD *)(v2 + 396) = 0;
  }
  return result;
}
// 80033238: variable 'v0' is possibly undefined
// 8003326C: variable 'v2' is possibly undefined
// 80050554: using guessed type int __fastcall SpuSetReverb(_DWORD);
// 800508C4: using guessed type int __fastcall SpuSetReverbModeParam(_DWORD);

//----- (80033280) --------------------------------------------------------
void __fastcall sub_80033280(__int16 a1)
{
  int v1; // $gp

  *(_WORD *)(v1 + 632) = a1;
}
// 80033280: variable 'v1' is possibly undefined

//----- (8003328C) --------------------------------------------------------
int *__fastcall sub_8003328C(_DWORD *a1, int *a2, int a3)
{
  int v3; // $s0
  int v4; // $s5
  int v5; // $s7
  int v8; // $v1
  char v9; // $v1
  int v10; // $s3
  int v11; // $s4
  int v12; // $s1
  int v13; // $gp
  int v14; // $a0
  int v15; // $v1
  BOOL v16; // $v0
  __int16 v17; // $a0
  __int16 v18; // $v1
  int *result; // $v0

  if ( a1 )
    v8 = (*a1 >> 9) & 0xF;
  else
    LOBYTE(v8) = 5;
  v9 = v8 + 6;
  v10 = *a2 >> v9;
  v11 = (a2[2] - 307200) >> v9;
  v12 = sub_8003AE90(v10, v11);
  if ( v12 <= 0x7FFF )
  {
    *(_WORD *)(v13 + 628) = a3;
LABEL_18:
    *(_WORD *)(v13 + 630) = a3;
    goto LABEL_19;
  }
  v5 = sub_8004F794(v11, v10);
  v4 = sub_8003C364(v5) + 4096;
  v3 = (a3 << 15) / v12;
  v14 = v3;
  if ( dword_80068F7C )
  {
    v15 = (a3 << 15) / v12;
  }
  else
  {
    v15 = (v3 + v3 * (0x2000 - v4)) >> 11;
    v14 = (v3 + v3 * v4) >> 11;
  }
  v16 = v14 < a3;
  if ( v15 >= a3 )
  {
    *(_WORD *)(v13 + 628) = a3;
  }
  else if ( v15 < 0 )
  {
    *(_WORD *)(v13 + 628) = 0;
    v16 = v14 < a3;
  }
  else
  {
    *(_WORD *)(v13 + 628) = v15;
  }
  if ( !v16 )
    goto LABEL_18;
  if ( v14 < 0 )
    *(_WORD *)(v13 + 630) = 0;
  else
    *(_WORD *)(v13 + 630) = v14;
LABEL_19:
  if ( ((*a1 >> 14) & 1) != 0 )
    printf(
      "x:%d y:%d z:%d dist2:%d\ndir:%d cos:%d vol:%d svol:%d   %d/%d\n",
      v10,
      v11,
      0,
      v12,
      v5,
      v4,
      a3,
      v3,
      *(__int16 *)(v13 + 628),
      *(__int16 *)(v13 + 630));
  v17 = *(_WORD *)(v13 + 628);
  if ( v17 >= 0x4000 )
    v17 = 0x3FFF;
  v18 = *(_WORD *)(v13 + 630);
  *(_WORD *)(v13 + 628) = v17;
  if ( v18 >= 0x4000 )
    v18 = 0x3FFF;
  result = dword_80060AEC;
  *(_WORD *)(v13 + 630) = v18;
  return result;
}
// 80033350: conditional instruction was optimized away because $s1.4>=8000
// 80033360: conditional instruction was optimized away because $s1.4>=8000
// 8003331C: variable 'v13' is possibly undefined
// 8003345C: variable 'v5' is possibly undefined
// 8003345C: variable 'v4' is possibly undefined
// 8003345C: variable 'v3' is possibly undefined
// 80048110: using guessed type int printf(const char *, ...);
// 80060AEC: using guessed type int dword_80060AEC[9];
// 80068F7C: using guessed type int dword_80068F7C;

//----- (800334D0) --------------------------------------------------------
BOOL __fastcall sub_800334D0(int a1)
{
  int v1; // $gp
  int v3; // $s1
  int *v4; // $s2
  BOOL result; // $v0
  _BYTE *v6; // $s0
  int v7; // $a0
  int v8; // $a3
  int v9; // [sp+10h] [-8h] BYREF

  if ( a1 )
  {
    v3 = *(_DWORD *)(v1 + 652);
    v4 = (int *)((char *)&unk_8006C7D8 + 80 * v3);
    result = v3 < 24;
    if ( v3 < 24 )
    {
      v6 = (char *)v4 + 29;
      do
      {
        if ( ((*(_DWORD *)(v6 - 25) >> 3) & 1) != 0 && *(_DWORD *)(v6 - 17) == a1 )
        {
          v9 = 0;
          v7 = *v4;
          v8 = *(_DWORD *)(v6 - 17);
          *(_DWORD *)(v1 + 392) = 60;
          sub_80033C54(v7, 0x40000000, &v9, v8);
          *(_DWORD *)(v6 - 17) = 0;
          *v6 = 0;
        }
        ++v3;
        v6 += 80;
        result = v3 < 24;
        v4 += 20;
      }
      while ( v3 < 24 );
    }
  }
  return result;
}
// 800334F4: variable 'v1' is possibly undefined

//----- (8003359C) --------------------------------------------------------
int sub_8003359C()
{
  int v0; // $gp
  int v1; // $s4
  int v2; // $s3
  int v3; // $s2
  char *v4; // $a0
  int v5; // $v1
  int result; // $v0
  int v7; // $s0
  char *v8; // $s1
  int v9; // $v1
  int v10; // $a0
  BOOL v11; // $v0
  bool v12; // dc
  int v13; // [sp+10h] [-40h] BYREF
  __int16 v14; // [sp+18h] [-38h]
  __int16 v15; // [sp+1Ah] [-36h]

  v1 = 0x3FFF;
  v2 = 255;
  v3 = *(_DWORD *)(v0 + 652);
  if ( v3 < 24 )
  {
    v4 = (char *)&unk_8006C7D8 + 80 * v3 + 4;
    do
    {
      v5 = (unsigned __int8)v4[25];
      if ( v2 < v5 )
        v5 = v2;
      v2 = v5;
      if ( ((*(_DWORD *)v4 >> 3) & 1) == 0 )
        return v3;
      ++v3;
      v4 += 80;
    }
    while ( v3 < 24 );
  }
  result = -1;
  if ( (unsigned __int8)byte_8006CF91 < v2 )
    return result;
  v7 = *(_DWORD *)(v0 + 652);
  v8 = (char *)&unk_8006C7D8 + 80 * v7;
  v3 = -1;
  if ( v7 < 24 )
  {
    while ( (unsigned __int8)v8[29] != v2 )
    {
LABEL_22:
      ++v7;
      v8 += 80;
      if ( v7 >= 24 )
        goto LABEL_23;
    }
    v13 = 1 << v7;
    SpuGetVoiceAttr(&v13);
    v9 = v15;
    v10 = v14;
    if ( v14 < 0 )
      v10 = -v14;
    if ( v15 < 0 )
    {
      if ( -v15 >= v10 )
      {
        v9 = v15;
        goto LABEL_18;
      }
    }
    else if ( v15 >= v10 )
    {
LABEL_18:
      v11 = v9 < v1;
      if ( v9 < 0 )
      {
        v9 = -v9;
        v11 = v9 < v1;
      }
      if ( v11 )
      {
        v3 = v7;
        v1 = v9;
      }
      goto LABEL_22;
    }
    v9 = v14;
    goto LABEL_18;
  }
LABEL_23:
  result = v3;
  if ( v2 == (unsigned __int8)byte_8006CF91 )
  {
    if ( v1 < 2048 )
      return v3;
    v12 = sub_80032160(100) >= 50;
    result = -1;
    if ( !v12 )
      return v3;
  }
  return result;
}
// 800335B8: variable 'v0' is possibly undefined
// 80052844: using guessed type int __fastcall SpuGetVoiceAttr(_DWORD);
// 8006CF91: using guessed type char byte_8006CF91;

//----- (80033760) --------------------------------------------------------
unsigned int __fastcall sub_80033760(unsigned int *a1, unsigned int *a2)
{
  int v4; // $a0
  int *v5; // $v0
  unsigned int v6; // $v1
  int v7; // $a1
  unsigned int v8; // $v0
  int v9; // $v1
  int v10; // $a0
  unsigned int result; // $v0

  v4 = *a2;
  if ( (*a2 & 1) == 0 )
    v4 = *(_DWORD *)(v4 + 4);
  v5 = sub_80015414(v4);
  *a1 &= 0xFFFC7FFF;
  v6 = *a2;
  a1[5] = (unsigned int)v5;
  a1[3] = v6;
  if ( v5 )
  {
    v7 = 0;
    v8 = *a1 & 0xFFFC7FFF | 0x10000;
    v9 = 0x40000;
LABEL_11:
    *a1 = v8 | v9;
    return v7;
  }
  v10 = sub_800142B4(a2, 0, 1);
  if ( !v10 )
  {
    v7 = 0;
LABEL_10:
    v9 = 294912;
    v8 = *a1 & 0xFFFC7FFF;
    goto LABEL_11;
  }
  result = -14;
  if ( v10 >= -254 )
    return result;
  v7 = 0;
  if ( (v10 & 0xC0000002) != 0xC0000002 )
    goto LABEL_10;
  return (v10 & 0x3FFFFFFDu) >> 2;
}
// 800337FC: conditional instruction was optimized away because $a0.4<-FE

//----- (80033864) --------------------------------------------------------
int __fastcall sub_80033864(int a1, unsigned int *a2, int a3)
{
  int v6; // $s2
  int v7; // $gp
  char *v8; // $s0
  unsigned int v9; // $s3
  int *v10; // $a0
  int *v11; // $v1
  int v12; // $t1
  int v13; // $t2
  int v14; // $t3
  int v15; // $lo
  int v16; // $t1
  int v17; // $t2
  int v18; // $v0
  int v19; // $a0
  int v20; // $v0
  int *v21; // $v0
  int v22; // $t1
  int v23; // $t2
  int v24; // $t1
  int v25; // $t2
  int v26; // $gp
  unsigned int v27; // $v1
  int v28; // $a0
  __int16 v29; // $v0
  int v30; // $gp
  int v31; // $v1
  int v32; // $a0
  int result; // $v0
  _DWORD v34[2]; // [sp+10h] [-50h] BYREF
  int v35; // [sp+18h] [-48h]
  __int16 v36; // [sp+24h] [-3Ch]
  unsigned int v37; // [sp+2Ch] [-34h]
  int v38; // [sp+34h] [-2Ch]
  int v39; // [sp+38h] [-28h]
  int v40; // [sp+3Ch] [-24h]
  __int16 v41; // [sp+40h] [-20h]
  __int16 v42; // [sp+42h] [-1Eh]
  __int16 v43; // [sp+44h] [-1Ch]
  __int16 v44; // [sp+46h] [-1Ah]
  __int16 v45; // [sp+48h] [-18h]
  _DWORD v46[4]; // [sp+50h] [-10h] BYREF

  if ( !dword_80068F80 || (dword_80068F1C & 0x1000) == 0 && (*(_DWORD *)(a1 + 256) & 0x40000) == 0 )
    goto LABEL_33;
  v6 = sub_8003359C();
  if ( v6 <= 0 )
    goto LABEL_33;
  v8 = (char *)&unk_8006C7D8 + 80 * v6;
  if ( ((unsigned __int8)a2 & 1) == 0 )
  {
    v9 = sub_80033760((unsigned int *)&dword_8006CF78, a2);
    if ( v9 != -14 )
    {
      if ( (((unsigned int)dword_8006CF78 >> 15) & 7) != 0 )
        dword_8006CF78 |= 0x40000u;
      goto LABEL_10;
    }
LABEL_33:
    sub_80033050();
    return -99;
  }
  v9 = (unsigned int)a2 & 0xFFFFFFFE;
LABEL_10:
  v10 = (int *)(v8 + 4);
  v11 = &dword_8006CF78;
  do
  {
    v12 = v11[1];
    v13 = v11[2];
    v14 = v11[3];
    *v10 = *v11;
    v10[1] = v12;
    v10[2] = v13;
    v10[3] = v14;
    v11 += 4;
    v10 += 4;
  }
  while ( v11 != (int *)&unk_8006CFB8 );
  v15 = a3 * *(__int16 *)(v7 + 632);
  v16 = v11[1];
  v17 = v11[2];
  *v10 = *v11;
  v10[1] = v16;
  v10[2] = v17;
  v18 = (*((_DWORD *)v8 + 1) >> 6) & 1;
  *((_WORD *)v8 + 15) = v15 >> 14;
  if ( v18 )
  {
    v19 = *((_DWORD *)v8 + 16);
    v20 = *((__int16 *)v8 + 30) - (__int16)(v15 >> 14);
    if ( v19 == -1 && v20 == 0x80000000 )
      _break(6u, 0);
    *((_DWORD *)v8 + 17) = v20 / v19;
  }
  v21 = (int *)*((_DWORD *)v8 + 3);
  if ( v21 == (int *)1 )
  {
    *((_DWORD *)v8 + 3) = a1;
    v21 = (int *)*((_DWORD *)v8 + 3);
  }
  if ( v21 )
  {
    v22 = v21[25];
    v23 = v21[26];
    *((_DWORD *)v8 + 12) = v21[24];
    *((_DWORD *)v8 + 13) = v22;
    *((_DWORD *)v8 + 14) = v23;
    sub_800202CC(v21 + 24, v46);
    v24 = v46[1];
    v25 = v46[2];
    *((_DWORD *)v8 + 9) = v46[0];
    *((_DWORD *)v8 + 10) = v24;
    *((_DWORD *)v8 + 11) = v25;
  }
  sub_80033050();
  *((_DWORD *)v8 + 1) = *((_DWORD *)v8 + 1) & 0xFE07FFFF | ((v6 & 0x3F) << 19);
  v34[1] = 65427;
  v34[0] = 1 << v6;
  if ( (unsigned int)*(unsigned __int8 *)(*((_DWORD *)v8 + 3) + 288) - 6 >= 2
    && (v27 = *((_DWORD *)v8 + 1), ((v27 >> 9) & 0xF) != 0) )
  {
    if ( ((v27 >> 14) & 1) != 0 )
      printf("vol %d*%d = %d\n", a3, *(__int16 *)(v26 + 632), *((__int16 *)v8 + 15));
    v35 = *sub_8003328C((_DWORD *)v8 + 1, (int *)v8 + 9, *((__int16 *)v8 + 15));
  }
  else
  {
    v28 = *((__int16 *)v8 + 15);
    v29 = 0x3FFF;
    if ( v28 < 0x3FFF )
    {
      v29 = *((_WORD *)v8 + 15);
      if ( v28 < 0 )
        v29 = 0;
    }
    HIWORD(v35) = v29;
    LOWORD(v35) = v29;
    *((_DWORD *)v8 + 1) &= 0xFFFFE1FF;
  }
  v36 = *((unsigned __int16 *)v8 + 17) * dword_800690B4 / 4096;
  v38 = 1;
  v39 = 1;
  v40 = 3;
  v37 = v9;
  v41 = 0;
  v42 = 0;
  v43 = 0;
  v44 = 0;
  v45 = 15;
  SpuSetVoiceAttr(v34);
  SpuSetReverbVoice((*((_DWORD *)v8 + 1) >> 13) & 1, v34[0]);
  if ( (*((_DWORD *)v8 + 1) & 0x40010) == 0 )
    SpuSetKey(1, v34[0]);
  v31 = *((_DWORD *)v8 + 1);
  v32 = *(_DWORD *)(v30 + 624) + 1;
  *(_DWORD *)v8 = v32;
  result = v32;
  *(_DWORD *)(v30 + 624) = v32;
  *((_DWORD *)v8 + 1) = v31 | 8;
  return result;
}
// 800339E4: conditional instruction was optimized away because $a0.4!=0
// 80033988: variable 'v7' is possibly undefined
// 80033B30: variable 'v26' is possibly undefined
// 80033C00: variable 'v30' is possibly undefined
// 80048110: using guessed type int printf(const char *, ...);
// 80051274: using guessed type int __fastcall SpuSetReverbVoice(_DWORD, _DWORD);
// 80051714: using guessed type int __fastcall SpuSetKey(_DWORD, _DWORD);
// 80051F54: using guessed type int __fastcall SpuSetVoiceAttr(_DWORD);
// 80068F1C: using guessed type int dword_80068F1C;
// 80068F80: using guessed type int dword_80068F80;
// 800690B4: using guessed type int dword_800690B4;
// 8006CF78: using guessed type int dword_8006CF78;

//----- (80033C54) --------------------------------------------------------
int __fastcall sub_80033C54(int a1, int a2, _DWORD *a3, int a4)
{
  int v4; // $t0
  int v5; // $t1
  int v6; // $gp
  int result; // $v0
  int v12; // $s3
  _DWORD *v13; // $s5
  int v14; // $s7
  unsigned int *v15; // $s4
  int *v16; // $s0
  int v17; // kr04_4
  unsigned int v18; // $lo
  int v19; // $a0
  int v20; // $v0
  unsigned __int16 v21; // $v0
  int v22; // $v1
  int v23; // $a0
  int v24; // $v0
  int v25; // $t1
  int v26; // $t2
  int v27; // $t2
  int v28; // $t2
  unsigned int v29; // $t1
  unsigned int v30; // $t2
  int v31; // $a0
  int *v32; // $a0
  int v33; // $v1
  unsigned int v34; // $a0
  int v35; // $v0
  int v36; // $v0
  unsigned int v37; // $v1
  int v38; // $v0
  int v39; // [sp+10h] [-90h] BYREF
  int v40; // [sp+14h] [-8Ch]
  int v41; // [sp+18h] [-88h]
  __int16 v42; // [sp+24h] [-7Ch]
  int v43[8]; // [sp+78h] [-28h] BYREF
  int v44; // [sp+98h] [-8h]

  if ( (dword_80068F1C & 0x1000) == 0 )
  {
    result = 0;
    if ( (*(_DWORD *)(a4 + 256) & 0x40000) == 0 )
      return result;
  }
  result = 0;
  if ( a1 < -98 )
    return result;
  v12 = *(_DWORD *)(v6 + 652);
  v13 = (_DWORD *)((char *)&unk_8006C7D8 + 80 * v12);
  if ( v12 < 24 )
  {
    v14 = a2 & 0xFFFFFFF;
    v44 = v4;
    v15 = v13 + 4;
    do
    {
      if ( a1 && a1 != -2 )
      {
        if ( a1 == -1 )
        {
          if ( *(v15 - 1) != a4 )
            goto LABEL_70;
        }
        else if ( *v13 != a1 )
        {
          goto LABEL_70;
        }
      }
      v16 = v13 + 1;
      if ( a1 )
      {
        if ( (((unsigned int)*v16 >> 3) & 1) == 0 )
          goto LABEL_70;
      }
      else
      {
        v16 = &dword_8006CF78;
      }
      if ( a2 < 0 )
        *v16 |= 1u;
      if ( (a2 & 0x40000000) != 0 )
        *v16 |= 2u;
      if ( (a2 & 0x20000000) != 0 )
        *v16 |= 4u;
      v17 = v5;
      v40 = 0;
      v5 = v44;
      switch ( v14 )
      {
        case 0:
          if ( (((unsigned int)*v16 >> 2) & 1) != 0 )
          {
            v18 = *a3 * *(__int16 *)(v6 + 632);
            v19 = *(_DWORD *)(v6 + 392);
            v16[15] = v19;
            *((_WORD *)v16 + 28) = v18 >> 14;
            if ( a1 )
            {
              v20 = *((__int16 *)v16 + 28) - *((__int16 *)v16 + 13);
              if ( v19 == -1 && v20 == 0x80000000 )
                _break(6u, 0);
              v16[16] = v20 / v19;
            }
            *v16 |= 0x40u;
          }
          else
          {
            *((_WORD *)v16 + 13) = (unsigned int)(*a3 * *(__int16 *)(v6 + 632)) >> 14;
            if ( a1 )
            {
              v40 |= 3u;
              v5 = *sub_8003328C(v16, v16 + 8, *((__int16 *)v16 + 13));
              v41 = v5;
            }
          }
          goto LABEL_67;
        case 1:
          if ( (((unsigned int)*v16 >> 2) & 1) != 0 )
          {
            v21 = *(_WORD *)a3;
            *((_WORD *)v16 + 29) = *(_WORD *)a3;
            v22 = *(_DWORD *)(v6 + 392);
            v23 = v21 - *((unsigned __int16 *)v16 + 15);
            if ( v22 == -1 && v23 == 0x80000000 )
              _break(6u, 0);
            v24 = *v16;
            v16[17] = v22;
            *v16 = v24 | 0x80;
            v16[18] = v23 / v22;
          }
          else
          {
            *((_WORD *)v16 + 15) = *(_WORD *)a3;
            if ( a1 )
            {
              v40 = 16;
              v42 = *((unsigned __int16 *)v16 + 15) * dword_800690B4 / 4096;
            }
          }
          goto LABEL_67;
        case 2:
          v25 = a3[1];
          v26 = a3[2];
          v43[0] = *a3;
          v43[1] = v25;
          v43[2] = v26;
          sub_800202CC(v43, a3);
          goto LABEL_42;
        case 3:
LABEL_42:
          v5 = a3[1];
          v27 = a3[2];
          v43[4] = *a3;
          v43[5] = v5;
          v43[6] = v27;
          if ( (((unsigned int)*v16 >> 2) & 1) == 0 )
          {
            v5 = a3[1];
            v28 = a3[2];
            v16[8] = *a3;
            v16[9] = v5;
            v16[10] = v28;
            if ( a1 )
            {
              v29 = a3[1];
              v30 = a3[2];
              v15[5] = *a3;
              v15[6] = v29;
              v15[7] = v30;
              v40 = 3;
              v41 = *sub_8003328C(v16, v16 + 8, *((__int16 *)v16 + 13));
            }
          }
          goto LABEL_67;
        case 4:
          *((_BYTE *)v16 + 24) = *(_BYTE *)a3;
          goto LABEL_67;
        case 5:
          v16[2] = *a3;
          goto LABEL_67;
        case 6:
          v35 = *a3;
          *(_DWORD *)(v6 + 392) = *a3;
          if ( !v35 )
            *(_DWORD *)(v6 + 392) = 1;
          goto LABEL_67;
        case 7:
          v36 = *v16 | 0x10;
          *((_WORD *)v16 + 14) = *(_WORD *)a3;
          *v16 = v36;
          goto LABEL_67;
        case 8:
          if ( *a3 == 1 )
          {
            *v16 = *v16 & 0xFFFFE1FF | ((sub_80033000() & 0xF) << 9);
          }
          else
          {
            v37 = *v16 & 0xFFFFE1FF;
            v38 = (*a3 & 0xF) << 9;
LABEL_65:
            *v16 = v37 | v38;
          }
          goto LABEL_67;
        case 10:
          v37 = *v16 & 0xFFFFBFFF;
          v38 = (*a3 << 6) & 0x4000;
          goto LABEL_65;
        case 11:
          v37 = *v16 & 0xFFFFDFFF;
          v38 = (32 * *a3) & 0x2000;
          goto LABEL_65;
        case 12:
          *((_BYTE *)v16 + 25) = *(_BYTE *)a3;
          goto LABEL_67;
        case 13:
          if ( !a3 )
            return v16[4] != 0x6396347F;
          v16[4] = *a3;
LABEL_67:
          if ( v40 )
          {
            v39 = 1 << v12;
            SpuSetVoiceAttr(&v39);
          }
          result = 0;
          if ( a1 >= 0 )
            return result;
          break;
        case 14:
          if ( *a3 == 256 )
            return (*v16 & 0x40010) == 0;
          v31 = sub_800142B4(v15, 1, 0);
          result = 0;
          if ( v31 >= -254 )
            return result;
          result = 0;
          if ( *(int *)(v31 + 12) < 2 )
            return result;
          v32 = *(int **)(v31 + 20);
          v33 = *(_DWORD *)(v16[2] + 220) - *(_DWORD *)(v16[2] + 224) + 2;
          result = 0;
          if ( v33 < 0 )
            return result;
          if ( v33 >= *v32 )
            return 0;
          v34 = *((unsigned __int8 *)v32 + v33 / 2 + 4);
          result = v34 & 0xF;
          if ( (v33 & 1) != 0 )
            return v34 >> 4;
          return result;
        default:
          v5 = v17;
          goto LABEL_67;
      }
LABEL_70:
      ++v12;
      v15 += 20;
      v13 += 20;
    }
    while ( v12 < 24 );
  }
  result = -1;
  if ( a1 < 0 )
    return 0;
  return result;
}
// 80033D50: conditional instruction was optimized away because $s2.4!=FFFFFFFF
// 80033E74: conditional instruction was optimized away because $a0.4!=0
// 80033F48: conditional instruction was optimized away because $v1.4!=0
// 80033CE8: variable 'v6' is possibly undefined
// 80033D1C: variable 'v4' is possibly undefined
// 80033DF8: variable 'v5' is possibly undefined
// 80051F54: using guessed type int __fastcall SpuSetVoiceAttr(_DWORD);
// 80068F1C: using guessed type int dword_80068F1C;
// 800690B4: using guessed type int dword_800690B4;
// 8006CF78: using guessed type int dword_8006CF78;

//----- (800342B8) --------------------------------------------------------
unsigned int __fastcall sub_800342B8(int a1)
{
  int v2; // $a0
  unsigned int result; // $v0

  SpuSetKey(0, 1 << (*(_DWORD *)(a1 + 4) >> 19));
  v2 = *(_DWORD *)(a1 + 24);
  result = *(_DWORD *)(a1 + 4) & 0xFFFFFFF7;
  *(_DWORD *)(a1 + 4) = result;
  if ( v2 )
    return sub_80013E64(v2);
  return result;
}
// 80051714: using guessed type int __fastcall SpuSetKey(_DWORD, _DWORD);

//----- (80034310) --------------------------------------------------------
BOOL sub_80034310()
{
  int v0; // $gp
  int v1; // $v1
  int v2; // $fp
  int v3; // $v1
  int v4; // $v1
  __int16 v5; // $v1
  int v6; // $gp
  int v7; // $s2
  char *v8; // $s4
  BOOL result; // $v0
  unsigned __int8 *v10; // $s1
  int *v11; // $s7
  unsigned int *v12; // $s6
  _BYTE *v13; // $s5
  int v14; // $v1
  int v15; // $a0
  int v16; // $s0
  int *v17; // $v0
  int *v18; // $a1
  unsigned __int16 v19; // $v0
  int *v20; // $v0
  int *v21; // $v1
  unsigned int v22; // $v1
  int v23; // $v1
  int v24; // $v0
  unsigned int v25; // $v1
  int v26; // $a0
  unsigned int v27; // $v0
  int v28; // $v1
  int v29; // $a0
  __int16 v30; // $v0
  int v31; // $v1
  int *v32; // $v0
  int v33; // $t0
  int v34; // $t1
  int v35; // $t0
  int v36; // $t1
  int v37; // [sp+50h] [-80h] BYREF
  int v38; // [sp+54h] [-7Ch]
  int v39; // [sp+58h] [-78h]
  __int16 v40; // [sp+64h] [-6Ch]
  unsigned int v41; // [sp+6Ch] [-64h]
  int v42; // [sp+90h] [-40h] BYREF
  int v43; // [sp+94h] [-3Ch]
  int v44; // [sp+98h] [-38h]
  unsigned int v45; // [sp+ACh] [-24h]

  v1 = dword_80068F80;
  v2 = 0;
  if ( dword_80068F80 != *(_DWORD *)(v0 + 416) )
  {
    *(_DWORD *)(v0 + 416) = dword_80068F80;
    sub_80033280((unsigned int)(4194048 * v1) >> 16);
  }
  v3 = dword_80068F84;
  if ( dword_80068F84 != *(_DWORD *)(v0 + 412) )
  {
    *(_DWORD *)(v0 + 412) = dword_80068F84;
    sub_80034B00((4194048 * v3) >> 16);
  }
  if ( dword_80065D5C )
    sub_80035078((unsigned int *)(*(_DWORD *)(dword_80065D5C + 16) + 740));
  v4 = *(__int16 *)(v0 + 648);
  if ( *(_WORD *)(v0 + 648) )
  {
    if ( v4 < 0 )
    {
      if ( *(__int16 *)(v0 + 646) < -v4 )
      {
        *(_WORD *)(v0 + 646) = 0;
        *(_WORD *)(v0 + 648) = 0;
      }
      v4 = *(__int16 *)(v0 + 648);
    }
    if ( v4 > 0 && 0x3FFF - *(__int16 *)(v0 + 646) < v4 )
      *(_DWORD *)(v0 + 646) = 0x3FFF;
    v5 = *(_WORD *)(v0 + 646) + *(_WORD *)(v0 + 648);
    *(_WORD *)(v0 + 646) = v5;
    sub_80032FC8(v5 >> 7);
  }
  SpuGetAllKeysStatus(&unk_8006CF58);
  v7 = *(_DWORD *)(v6 + 652);
  v8 = (char *)&unk_8006C7D8 + 80 * v7;
  result = v7 < 24;
  if ( v7 < 24 )
  {
    v10 = (unsigned __int8 *)(v8 + 4);
    v11 = (int *)(v8 + 36);
    v12 = (unsigned int *)(v8 + 16);
    v13 = (char *)&unk_8006CF58 + v7;
    while ( ((*(_DWORD *)v10 >> 3) & 1) == 0 )
    {
LABEL_77:
      ++v13;
      ++v7;
      v10 += 80;
      v11 += 20;
      v12 += 20;
      result = v7 < 24;
      v8 += 80;
      if ( v7 >= 24 )
        return result;
    }
LABEL_19:
    v14 = (*(_DWORD *)v10 >> 15) & 7;
    if ( v14 != 2 )
    {
      if ( ((*(_DWORD *)v10 >> 15) & 7u) >= 3 )
      {
        if ( v14 != 3 )
          goto LABEL_40;
        v41 = *(_DWORD *)(*((_DWORD *)v10 + 5) + 28);
        goto LABEL_37;
      }
      if ( v14 != 1 || !sub_8001440C(v12, 0) )
        goto LABEL_40;
      v15 = sub_800142B4(v12, 1, 0);
      if ( (v15 & 0xC0000002) == 0xC0000002 )
      {
        v41 = (v15 & 0x3FFFFFFDu) >> 2;
        goto LABEL_37;
      }
      *(_DWORD *)v10 = *(_DWORD *)v10 & 0xFFFC7FFF | 0x10000;
    }
    v16 = sub_800142B4(v12, 1, 0);
    v17 = sub_80015414(*(_DWORD *)(v16 + 4));
    v18 = v17;
    if ( !v17 )
    {
      v21 = sub_8001418C(v16);
      if ( (unsigned int)*((unsigned __int16 *)v21 + 2) - 20 < 2 && *((_WORD *)v21 + 3) == 1 )
      {
        *((_WORD *)v21 + 2) = 10;
        v21[6] = *(_DWORD *)(v16 + 4);
        ++dword_80061A58;
      }
      while ( 1 )
      {
LABEL_40:
        v23 = *(_DWORD *)v10;
        if ( ((*(_DWORD *)v10 >> 18) & 1) != 0 )
          goto LABEL_77;
        if ( ((*(_DWORD *)v10 >> 4) & 1) != 0 )
        {
          v24 = *((unsigned __int16 *)v10 + 14) - 1;
          *((_WORD *)v10 + 14) = v24;
          if ( v24 << 16 )
            goto LABEL_77;
          *(_DWORD *)v10 = v23 & 0xFFFFFFEF;
          SpuSetKey(1, 1 << v7);
          *v13 = 1;
        }
        if ( *v13 != 3 )
          goto LABEL_53;
        v25 = v10[24];
        if ( v25 >= 2 )
          break;
        if ( *((_DWORD *)v10 + 4) == 1670788223 )
        {
          sub_800342B8((int)v8);
          goto LABEL_73;
        }
        v26 = *((_DWORD *)v10 + 5);
        if ( v26 )
          sub_80013E64(v26);
        v27 = sub_80033760((unsigned int *)v10, (unsigned int *)v8 + 5);
        *((_DWORD *)v10 + 4) = 1670788223;
        if ( !v27 )
          goto LABEL_19;
        v45 = v27;
        v43 = 128;
        v42 = 1 << v7;
        SpuSetVoiceAttr(&v42);
        SpuSetKey(1, 1 << v7);
        *v13 = 1;
      }
      v10[24] = v25 - 1;
      SpuSetKey(1, 1 << v7);
      *v13 = 1;
LABEL_53:
      v38 = 0;
      if ( ((*(_DWORD *)v10 >> 6) & 1) != 0 )
      {
        v28 = *((_DWORD *)v10 + 15) - 1;
        *((_WORD *)v10 + 13) += *((_WORD *)v10 + 32);
        *((_DWORD *)v10 + 15) = v28;
        if ( v28 <= 0 )
          *(_DWORD *)v10 &= ~0x40u;
        else
          v2 = 1;
        v38 |= 3u;
        if ( (unsigned int)*(unsigned __int8 *)(*((_DWORD *)v10 + 2) + 288) - 6 >= 2 )
        {
          v39 = *sub_8003328C(v10, v11, *((__int16 *)v10 + 13));
        }
        else
        {
          v29 = *((__int16 *)v10 + 13);
          v30 = 0x3FFF;
          if ( v29 < 0x3FFF )
          {
            v30 = *((_WORD *)v10 + 13);
            if ( v29 < 0 )
              v30 = 0;
          }
          HIWORD(v39) = v30;
          LOWORD(v39) = v30;
        }
      }
      if ( *v10 >> 7 )
      {
        v31 = *((_DWORD *)v10 + 17) - 1;
        *((_WORD *)v10 + 15) += *((_WORD *)v10 + 36);
        *((_DWORD *)v10 + 17) = v31;
        if ( v31 <= 0 )
          *(_DWORD *)v10 &= ~0x80u;
        else
          v2 = 1;
        v38 |= 0x10u;
        v40 = *((unsigned __int16 *)v10 + 15) * dword_800690B4 / 4096;
      }
      if ( ((*(_DWORD *)v10 >> 9) & 0xF) != 0 )
      {
        v32 = (int *)*((_DWORD *)v10 + 2);
        if ( v32 )
        {
          v33 = v32[25];
          v34 = v32[26];
          *((_DWORD *)v10 + 11) = v32[24];
          *((_DWORD *)v10 + 12) = v33;
          *((_DWORD *)v10 + 13) = v34;
          sub_800202CC(v32 + 24, &v42);
          v35 = v43;
          v36 = v44;
          *((_DWORD *)v10 + 8) = v42;
          *((_DWORD *)v10 + 9) = v35;
          *((_DWORD *)v10 + 10) = v36;
          v38 |= 3u;
          v39 = *sub_8003328C(v10, v11, *((__int16 *)v10 + 13));
        }
      }
      if ( v38 )
      {
        v37 = 1 << v7;
        SpuSetVoiceAttr(&v37);
      }
LABEL_73:
      if ( (*(_DWORD *)v10 & 1) != 0 || !v2 && ((*(_DWORD *)v10 >> 1) & 1) != 0 )
        sub_800342B8((int)v8);
      goto LABEL_77;
    }
    v19 = *((_WORD *)v17 + 2) - 20;
    if ( *((_WORD *)v18 + 2) == 1 )
    {
      *((_WORD *)v18 + 2) = 20;
    }
    else if ( v19 >= 2u )
    {
      goto LABEL_40;
    }
    v41 = v18[7];
    ++*((_BYTE *)v18 + 15);
    *((_DWORD *)v10 + 5) = v18;
    v20 = sub_8001418C(v16);
    sub_80013E64((int)v20);
LABEL_37:
    v38 = 128;
    v37 = 1 << v7;
    SpuSetVoiceAttr(&v37);
    v22 = *(_DWORD *)v10 & 0xFFF87FFF;
    *(_DWORD *)v10 = v22;
    if ( ((v22 >> 4) & 1) == 0 || !*((_WORD *)v10 + 14) )
    {
      *(_DWORD *)v10 = v22 | 0x10;
      *((_WORD *)v10 + 14) = 1;
    }
    goto LABEL_40;
  }
  return result;
}
// 80034348: variable 'v0' is possibly undefined
// 8003450C: variable 'v6' is possibly undefined
// 80051714: using guessed type int __fastcall SpuSetKey(_DWORD, _DWORD);
// 80051EC8: using guessed type int __fastcall SpuGetAllKeysStatus(_DWORD);
// 80051F54: using guessed type int __fastcall SpuSetVoiceAttr(_DWORD);
// 80061A58: using guessed type int dword_80061A58;
// 80065D5C: using guessed type int dword_80065D5C;
// 80068F80: using guessed type int dword_80068F80;
// 80068F84: using guessed type int dword_80068F84;
// 800690B4: using guessed type int dword_800690B4;

//----- (80034B00) --------------------------------------------------------
int __fastcall sub_80034B00(int a1)
{
  int v1; // $gp
  int v2; // $v1
  int result; // $v0
  int v4; // $s0
  int v5; // $s2
  __int16 *v6; // $s1
  __int16 v7; // $a1

  v2 = *(_DWORD *)(v1 + 672);
  result = 3;
  *(_WORD *)(v1 + 634) = a1;
  v4 = 0;
  if ( v2 == 3 )
  {
    result = a1 << 16;
    if ( *(__int16 *)(v1 + 644) > 0 )
    {
      v5 = (__int16)a1 >> 7;
      v6 = &word_8006CFC8;
      do
      {
        v7 = *v6;
        v6 += 10;
        sub_80056DAC(*(_WORD *)(v1 + 678), v7, v5, v5);
        result = ++v4 < *(__int16 *)(v1 + 644);
      }
      while ( v4 < *(__int16 *)(v1 + 644) );
    }
  }
  return result;
}
// 80034B04: variable 'v1' is possibly undefined
// 8006CFC8: using guessed type __int16 word_8006CFC8;

//----- (80034B8C) --------------------------------------------------------
int sub_80034B8C()
{
  int v0; // $gp
  int v1; // $gp

  *(_DWORD *)(v0 + 400) = 1;
  sub_80056B54(1);
  sub_80034B00((4194048 * dword_80068F84) >> 16);
  *(_DWORD *)(v1 + 640) = 1670788223;
  *(_DWORD *)(v1 + 672) = 0;
  *(_WORD *)(v1 + 678) = -1;
  *(_WORD *)(v1 + 676) = -1;
  *(_DWORD *)(v1 + 652) = 16;
  return sub_8005AA38(*(_BYTE *)(v1 + 652));
}
// 80034BA0: variable 'v0' is possibly undefined
// 80034BD4: variable 'v1' is possibly undefined
// 80068F84: using guessed type int dword_80068F84;

//----- (80034C0C) --------------------------------------------------------
int sub_80034C0C()
{
  int v0; // $gp
  int result; // $v0

  result = -496;
  *(_WORD *)(v0 + 648) = -496;
  return result;
}
// 80034C10: variable 'v0' is possibly undefined

//----- (80034C1C) --------------------------------------------------------
int __fastcall sub_80034C1C(int a1)
{
  int v1; // $gp
  int result; // $v0
  int v3; // $a0
  int v4; // $gp

  result = *(__int16 *)(v1 + 644) < 2;
  if ( *(__int16 *)(v1 + 644) >= 2 )
  {
    result = 3;
    v3 = a1 >> 8;
    if ( *(_DWORD *)(v1 + 672) == 3 )
    {
      if ( v3 == 3 )
      {
        if ( dword_80068F84 || dword_80068F80 )
          *(_DWORD *)(v1 + 656) = 0x3FFF;
        else
          *(_DWORD *)(v1 + 656) = 0;
        sub_800352FC(&word_8006CFC8, 2, 0);
        sub_800352FC(&word_8006CFDC, 0, 1);
      }
      else
      {
        sub_800352FC(&word_8006CFDC, 1, 0);
        sub_800352FC(&word_8006CFC8, 3, 0);
        *(_DWORD *)(v4 + 656) = 0;
      }
      return sub_80056DAC(*(_WORD *)(v4 + 678), word_8006CFDC, *(_WORD *)(v4 + 656), *(_WORD *)(v4 + 656));
    }
  }
  return result;
}
// 80034C1C: variable 'v1' is possibly undefined
// 80034C84: variable 'v4' is possibly undefined
// 80068F80: using guessed type int dword_80068F80;
// 80068F84: using guessed type int dword_80068F84;
// 8006CFC8: using guessed type __int16 word_8006CFC8;
// 8006CFDC: using guessed type __int16 word_8006CFDC;

//----- (80034D14) --------------------------------------------------------
int __fastcall sub_80034D14(unsigned int *a1)
{
  int v1; // $gp
  BOOL v3; // $s6
  int result; // $v0
  int v5; // $v1
  int v6; // $v0
  int v7; // $gp
  int v8; // $s2
  int v9; // $s0
  int v10; // $s1
  int v11; // $a0
  int v12; // $v0
  unsigned int *v13; // $a0
  int v14; // $s2
  int v15; // $gp
  int v16; // $s0
  int v17; // $s1
  int v18; // $a0
  int v19; // $v0
  unsigned int *v20; // $a0
  bool v21; // dc
  int v22; // $s0
  __int16 v23; // $v1
  int v24; // $v0
  __int16 v25; // $v0
  int v26; // $gp
  __int16 v27; // $v0
  int v28; // $gp
  __int16 v29; // $v0
  __int16 *v30; // $gp
  int v31; // $s0
  __int16 *v32; // $s1
  int v33; // $gp
  unsigned int v34; // [sp+10h] [-8h] BYREF

  v3 = *(__int16 *)(v1 + 676) == -1;
  if ( *(_DWORD *)(v1 + 656) )
    return -1;
  if ( *(_DWORD *)(v1 + 672) == 1 )
  {
    v5 = *(_DWORD *)(v1 + 420);
    *(_DWORD *)(v1 + 420) = v5 + 1;
    result = 0;
    if ( v5 < 3 )
      return result;
    v6 = *(_DWORD *)(v1 + 640);
    *(_DWORD *)(v1 + 420) = 0;
    if ( v6 != 1670788223 )
    {
      sub_80052DD4(*(_WORD *)(v1 + 678));
      v34 = *(_DWORD *)(v7 + 640);
      sub_8001440C(&v34, 1);
    }
    if ( *a1 == 1670788223 )
    {
      *(_DWORD *)(v1 + 640) = *a1;
      return 0;
    }
    v8 = sub_800142B4(a1, 1, 1);
    v9 = 0;
    v10 = 8;
    *(_DWORD *)(v1 + 640) = *(_DWORD *)(v8 + 4);
    do
    {
      v11 = *(_DWORD *)(v8 + 16);
      v12 = *(_DWORD *)(4 * v9 + v11 + 8);
      v13 = (unsigned int *)(v11 + v10);
      if ( v12 != 1670788223 )
        sub_800142B4(v13, 0, 1);
      ++v9;
      v10 += 4;
    }
    while ( v9 < 7 );
  }
  if ( *a1 == 1670788223 )
  {
    *(_DWORD *)(v1 + 640) = 1670788223;
    *(_DWORD *)(v1 + 672) = 0;
    return 0;
  }
  else
  {
    *(_DWORD *)(v1 + 672) = 2;
    v14 = sub_800142B4(a1, 1, 0);
    v16 = 0;
    v17 = 8;
    *(_DWORD *)(v15 + 408) = 0;
    while ( 1 )
    {
      v18 = *(_DWORD *)(v14 + 16);
      v19 = *(_DWORD *)(4 * v16 + v18 + 8);
      v20 = (unsigned int *)(v18 + v17);
      if ( v19 != 1670788223 )
      {
        v21 = sub_8001440C(v20, 0) == 0;
        result = 0;
        if ( v21 )
          break;
      }
      ++v16;
      v17 += 4;
      if ( v16 >= 7 )
      {
        v22 = *(__int16 *)(v15 + 676);
        v23 = **(_WORD **)(v14 + 16);
        *(_DWORD *)(v15 + 672) = 3;
        *(_WORD *)(v15 + 644) = v23;
        if ( v22 == -1 )
        {
          v24 = sub_800142B4((unsigned int *)(*(_DWORD *)(v14 + 16) + 4), 1, 1);
          v25 = sub_8005AF3C(*(_DWORD *)(v24 + 20), -1, dword_80061A60);
          *(_WORD *)(v26 + 676) = v25;
          if ( v25 == -1 )
            exit(-1);
          v27 = SsVabFakeBody(v25);
          *(_WORD *)(v28 + 676) = v27;
          if ( v27 == -1 )
            exit(-1);
          sub_80055480();
        }
        v29 = sub_80053418(*(_DWORD *)(v14 + 24), *(__int16 *)(v15 + 676), *(_WORD *)(v15 + 644));
        v30[339] = v29;
        if ( v29 == -1 )
          exit(-1);
        v31 = 0;
        if ( v30[322] > 0 )
        {
          v32 = &word_8006CFC8;
          do
          {
            if ( v3 )
            {
              sub_80035224((int)v32, (v30[317] >> 7) | (v30[317] >> 7 << 16), v31);
            }
            else
            {
              sub_80035224((int)v32, 0, v31);
              sub_80052F60(*(_WORD *)(v33 + 678), *v32, *(__int16 *)(v33 + 634) >> 7, 30);
            }
            v32 += 10;
            ++v31;
          }
          while ( v31 < v30[322] );
        }
        sub_800352FC(&word_8006CFC8, 0, 0);
        return 0;
      }
    }
  }
  return result;
}
// 80034D14: variable 'v1' is possibly undefined
// 80034DB0: variable 'v7' is possibly undefined
// 80034E8C: variable 'v15' is possibly undefined
// 80034F14: variable 'v26' is possibly undefined
// 80034F38: variable 'v28' is possibly undefined
// 80034F70: variable 'v30' is possibly undefined
// 80034FEC: variable 'v33' is possibly undefined
// 80048040: using guessed type void __fastcall __noreturn exit(_DWORD);
// 8005AE6C: using guessed type int __fastcall SsVabFakeBody(_DWORD);
// 80061A60: using guessed type int dword_80061A60;
// 8006CFC8: using guessed type __int16 word_8006CFC8;

//----- (8003505C) --------------------------------------------------------
int sub_8003505C()
{
  int v0; // $gp
  int result; // $v0

  result = 1;
  if ( !*(_DWORD *)(v0 + 672) )
    *(_DWORD *)(v0 + 672) = 1;
  return result;
}
// 8003505C: variable 'v0' is possibly undefined

//----- (80035078) --------------------------------------------------------
void __fastcall sub_80035078(unsigned int *a1)
{
  int v1; // $gp
  int v2; // $v1
  int v4; // $v0
  int v5; // $v1
  unsigned int v6; // $a0
  int v7; // $gp

  v2 = *(_DWORD *)(v1 + 672);
  if ( !v2 )
    return;
  if ( v2 == 4 )
  {
    v4 = *(unsigned __int16 *)(v1 + 404) - 1;
    if ( !*(_WORD *)(v1 + 404) || (*(_WORD *)(v1 + 404) = v4, !(v4 << 16)) )
      *(_DWORD *)(v1 + 672) = 1;
  }
  v5 = *(_DWORD *)(v1 + 672);
  if ( v5 == 3 )
  {
    v6 = *a1;
    if ( (*a1 & 1) != 0 )
    {
      if ( *(_DWORD *)(v1 + 640) == v6 )
        goto LABEL_16;
    }
    else if ( *(_DWORD *)(v1 + 640) == *(_DWORD *)(v6 + 4) )
    {
LABEL_15:
      v5 = *(_DWORD *)(v1 + 672);
      goto LABEL_16;
    }
    if ( !*(_DWORD *)(v1 + 656) && *(__int16 *)(v1 + 676) != -1 && !*(_DWORD *)(v1 + 408) )
    {
      sub_800531E8(*(_WORD *)(v1 + 678), word_8006CFC8, *(__int16 *)(v1 + 634) >> 7, 30);
      *(_WORD *)(v7 + 404) = 30;
      *(_DWORD *)(v7 + 408) = a1;
      *(_DWORD *)(v7 + 672) = 4;
      return;
    }
    goto LABEL_15;
  }
LABEL_16:
  if ( v5 > 0 )
  {
    if ( v5 < 3 )
    {
      sub_80034D14(a1);
    }
    else if ( v5 == 3 )
    {
      if ( dword_80068F7C )
        sub_8005AA14();
      else
        sub_8005AA28();
    }
  }
}
// 80035078: variable 'v1' is possibly undefined
// 80035164: variable 'v7' is possibly undefined
// 80068F7C: using guessed type int dword_80068F7C;
// 8006CFC8: using guessed type __int16 word_8006CFC8;

//----- (800351EC) --------------------------------------------------------
int sub_800351EC()
{
  int v0; // $gp
  int result; // $v0
  int v2; // $gp

  result = *(_DWORD *)(v0 + 400);
  if ( result )
  {
    sub_8003529C(*(_WORD *)(v0 + 678), 1);
    result = sub_8005321C();
    *(_DWORD *)(v2 + 400) = 0;
  }
  return result;
}
// 800351EC: variable 'v0' is possibly undefined
// 80035210: variable 'v2' is possibly undefined

//----- (80035224) --------------------------------------------------------
int __fastcall sub_80035224(int a1, int a2, int a3)
{
  __int16 *v3; // $gp
  int v5; // $v0
  __int16 v6; // $v0
  __int16 v7; // $a0
  int v8; // $a1
  __int16 v9; // $a2
  __int16 v10; // $a3

  if ( v3[322] < 2 )
  {
    v5 = a2 >> 16;
    goto LABEL_5;
  }
  v5 = a2 >> 16;
  if ( a3 != 1 )
  {
LABEL_5:
    *(_WORD *)(a1 + 16) = v5;
    *(_WORD *)(a1 + 18) = a2;
    goto LABEL_6;
  }
  v6 = v3[328];
  *(_WORD *)(a1 + 18) = v6;
  *(_WORD *)(a1 + 16) = v6;
LABEL_6:
  v7 = v3[339];
  v8 = a3 << 16;
  *(_WORD *)a1 = a3;
  v9 = *(_WORD *)(a1 + 16);
  v10 = *(_WORD *)(a1 + 18);
  *(_DWORD *)(a1 + 4) = -1;
  return sub_80056DAC(v7, SHIWORD(v8), v9, v10);
}
// 80035228: variable 'v3' is possibly undefined

//----- (8003529C) --------------------------------------------------------
int __fastcall sub_8003529C(__int16 a1, int a2)
{
  int v2; // $gp
  int result; // $v0

  if ( a1 != -1 )
    result = sub_80052DD4(a1);
  if ( a2 )
  {
    if ( *(__int16 *)(v2 + 676) != -1 )
      return SsVabClose();
  }
  return result;
}
// 800352D0: variable 'v2' is possibly undefined
// 8005AA68: using guessed type int SsVabClose(void);

//----- (800352FC) --------------------------------------------------------
int __fastcall sub_800352FC(__int16 *a1, int a2, int a3)
{
  int v3; // $gp
  __int16 v5; // $a0
  __int16 v6; // $a1
  int result; // $v0
  int v8; // $a0
  int v9; // $a1
  int v10; // $a0
  int v11; // $a1
  int v12; // $a0
  int v13; // $a1
  int v14; // $s0
  int v15; // $v1

  if ( a1 )
  {
    switch ( a2 )
    {
      case 0:
        v5 = *(_WORD *)(v3 + 678);
        v6 = *a1;
        *((_DWORD *)a1 + 1) = 1;
        result = sub_80054FD4(v5, v6, 1, a3);
        break;
      case 1:
        v8 = *(__int16 *)(v3 + 678);
        v9 = *a1;
        *((_DWORD *)a1 + 1) = 2;
        result = sub_80056950(v8, v9, a3, a3);
        break;
      case 2:
        v10 = *(__int16 *)(v3 + 678);
        v11 = *a1;
        *((_DWORD *)a1 + 1) = 0;
        result = sub_80054F70(v10, v11, a3, a3);
        break;
      case 3:
        v12 = *(__int16 *)(v3 + 678);
        v13 = *a1;
        *((_DWORD *)a1 + 1) = 1;
        result = SsSepReplay(v12, v13, a3, a3);
        break;
      case 4:
        v14 = 0;
        v15 = *(__int16 *)(v3 + 644);
        result = a3 >> 16;
        a1[8] = HIWORD(a3);
        a1[9] = a3;
        if ( v15 > 0 )
        {
          do
          {
            ++v14;
            sub_80056DAC(*(_WORD *)(v3 + 678), *a1, a1[8], a1[9]);
            result = v14 < *(__int16 *)(v3 + 644);
          }
          while ( v14 < *(__int16 *)(v3 + 644) );
        }
        break;
      default:
        return result;
    }
  }
  return result;
}
// 8003534C: variable 'v3' is possibly undefined
// 80054F70: using guessed type int __fastcall sub_80054F70(_DWORD, _DWORD, _DWORD, _DWORD);
// 800550D0: using guessed type int __fastcall SsSepReplay(_DWORD, _DWORD, _DWORD, _DWORD);
// 80056950: using guessed type int __fastcall sub_80056950(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (80035410) --------------------------------------------------------
int __fastcall sub_80035410(_DWORD *a1, unsigned int a2)
{
  int v2; // $gp
  int v3; // $v1
  int result; // $v0
  BOOL v5; // $v1
  BOOL v6; // $v1
  int v7; // $v1

  if ( (a2 & 0x800) != 0 )
  {
    if ( (a2 & 0x400) != 0 )
    {
      v3 = *(_DWORD *)((char *)a1 + ((a2 >> 4) & 0x1C) + 64);
      if ( v3 )
        return v3 + 4 * (a2 & 0x3F) + 64;
      return 0;
    }
    if ( (a2 & 0x200) != 0 )
    {
      if ( (a2 & 0x100) != 0 )
      {
        if ( (a2 & 0x80) != 0 )
        {
          result = 3056;
          if ( a2 == 3040 )
            return 0;
          if ( a2 == 3056 )
            return 1;
        }
        else
        {
          return a1[49] + ((int)(a2 << 25) >> 23);
        }
      }
      else
      {
        v5 = *(_DWORD *)(v2 + 424) == 0;
        result = 4 * v5 + 528482368;
        *(_DWORD *)(v2 + 424) = v5;
        *(_DWORD *)(4 * v5 + 0x1F800040) = 16 * (char)a2;
      }
    }
    else
    {
      v6 = *(_DWORD *)(v2 + 424) == 0;
      result = 4 * v6 + 528482368;
      *(_DWORD *)(v2 + 424) = v6;
      *(_DWORD *)(4 * v6 + 0x1F800040) = (int)(a2 << 23) >> 15;
    }
  }
  else
  {
    v7 = a2 & 0x3FF;
    if ( (a2 & 0x400) != 0 )
      return *(_DWORD *)(a1[5] + 24) + 4 * v7;
    else
      return *(_DWORD *)(a1[4] + 24) + 4 * v7;
  }
  return result;
}
// 800354A8: variable 'v2' is possibly undefined

//----- (80035538) --------------------------------------------------------
int __fastcall sub_80035538(_DWORD *a1, unsigned int a2, int a3)
{
  int v3; // $gp
  int v4; // $v1
  int v5; // $v1
  int result; // $v0
  int v7; // $v1
  BOOL v8; // $v1
  BOOL v9; // $v1
  int v10; // $v1

  if ( (a2 & 0x800) == 0 )
  {
    v10 = a2 & 0x3FF;
    if ( (a2 & 0x400) != 0 )
      return *(_DWORD *)(a1[5] + 24) + 4 * v10;
    else
      return *(_DWORD *)(a1[4] + 24) + 4 * v10;
  }
  if ( (a2 & 0x400) != 0 )
  {
    v4 = a2 & 0x1FF;
    if ( (a2 & 0x200) != 0 )
    {
      if ( v4 != 31 )
        return (int)&a1[v4 + 16];
      if ( a3 )
      {
        v5 = a1[47];
        a1[47] = v5 + 4;
      }
      else
      {
        v5 = a1[47] - 4;
        a1[47] = v5;
      }
      return v5;
    }
    v7 = *(_DWORD *)((char *)a1 + ((a2 >> 4) & 0x1C) + 64);
    if ( v7 )
      return v7 + 4 * (a2 & 0x3F) + 64;
    return 0;
  }
  if ( (a2 & 0x200) == 0 )
  {
    v9 = *(_DWORD *)(v3 + 432) == 0;
    result = 4 * v9 + *(_DWORD *)(v3 + 428);
    *(_DWORD *)(v3 + 432) = v9;
    *(_DWORD *)result = (int)(a2 << 23) >> 15;
    return result;
  }
  if ( (a2 & 0x100) == 0 )
  {
    v8 = *(_DWORD *)(v3 + 432) == 0;
    result = 4 * v8 + *(_DWORD *)(v3 + 428);
    *(_DWORD *)(v3 + 432) = v8;
    *(_DWORD *)result = 16 * (char)a2;
    return result;
  }
  if ( (a2 & 0x80) == 0 )
    return a1[49] + ((int)(a2 << 25) >> 23);
  result = 3056;
  if ( a2 == 3040 )
    return 0;
  if ( a2 == 3056 )
    return 1;
  return result;
}
// 80035628: variable 'v3' is possibly undefined

//----- (800356B8) --------------------------------------------------------
BOOL __fastcall sub_800356B8(unsigned int a1, int a2)
{
  int v4; // $v1
  int v5; // $a2
  int v6; // $v0
  int v8; // $a1
  unsigned int v9; // $v1
  int v10; // $a0
  int v11; // $a2
  int *v12; // $v1
  int *v13; // $v1
  int v14; // $a1

  v4 = (a1 >> 12) & 3;
  v5 = 1;
  if ( v4 == 2 )
  {
    v6 = dword_80065BC8[20 * a2 + 11] & 0xFFF;
    goto LABEL_9;
  }
  if ( ((a1 >> 12) & 3) != 3 )
  {
    if ( v4 != 1 )
      goto LABEL_11;
    v6 = dword_80065BC8[20 * a2 + 10] & 0xFFF;
LABEL_9:
    v5 = v6 & a1;
    goto LABEL_11;
  }
  if ( v4 == 3 )
    v5 = a1 & 0xFFF & (dword_80065BC8[20 * a2 + 10] | dword_80065BC8[20 * a2 + 13]);
LABEL_11:
  if ( !v5 )
    return (a1 & 0x100000) != 0;
  v8 = HIWORD(a1) & 0xF;
  v9 = (unsigned __int16)a1 >> 14;
  if ( v9 == 2 )
  {
    if ( v8 != 9 )
    {
      if ( (HIWORD(a1) & 0xF) >= 9u )
      {
        switch ( v8 )
        {
          case 10:
            v11 = dword_80065BC8[20 * a2 + 11] & 0x2000;
            goto LABEL_45;
          case 11:
            v11 = dword_80065BC8[20 * a2 + 11] & 0x4000;
            goto LABEL_45;
          case 12:
            v11 = dword_80065BC8[20 * a2 + 11] & 0x8000;
            goto LABEL_45;
        }
      }
      v11 = v8 == *(int *)((char *)dword_8005BF00 + ((dword_80065BC8[20 * a2 + 11] & 0xF000u) >> 8));
      goto LABEL_45;
    }
    v11 = dword_80065BC8[20 * a2 + 11] & 0x1000;
LABEL_45:
    v10 = v11;
    goto LABEL_46;
  }
  if ( v9 < 3 )
  {
    v10 = v5;
    if ( v9 != 1 )
      goto LABEL_46;
    if ( v8 == 9 )
    {
      v11 = dword_80065BC8[20 * a2 + 10] & 0x1000;
    }
    else
    {
      if ( (HIWORD(a1) & 0xF) < 9u )
        goto LABEL_29;
      switch ( v8 )
      {
        case 10:
          v11 = dword_80065BC8[20 * a2 + 10] & 0x2000;
          break;
        case 11:
          v11 = dword_80065BC8[20 * a2 + 10] & 0x4000;
          break;
        case 12:
          v11 = dword_80065BC8[20 * a2 + 10] & 0x8000;
          break;
        default:
LABEL_29:
          v12 = &dword_80065BC8[20 * a2];
          v11 = 0;
          if ( v8 == *(int *)((char *)dword_8005BF00 + ((v12[11] & 0xF000u) >> 8)) )
            v11 = v8 != *(int *)((char *)dword_8005BF00 + ((v12[12] & 0xF000u) >> 8));
          goto LABEL_45;
      }
    }
    goto LABEL_45;
  }
  v10 = v5;
  if ( v9 < 5 )
  {
    v13 = &dword_80065BC8[20 * a2];
    v14 = HIWORD(a1) & 0xF;
    if ( v14 == *(int *)((char *)dword_8005BF00 + ((v13[11] & 0xF000u) >> 8))
      || (v10 = 0, v14 == *(int *)((char *)dword_8005BF00 + ((v13[12] & 0xF000u) >> 8))) )
    {
      v11 = 1;
      goto LABEL_45;
    }
  }
LABEL_46:
  if ( (a1 & 0x100000) != 0 )
    return v10 == 0;
  return v10;
}
// 800356FC: conditional instruction was optimized away because $v1.4<2u
// 8005BF00: using guessed type int dword_8005BF00[2];
// 80065BC8: using guessed type int dword_80065BC8[];

//----- (80035ABC) --------------------------------------------------------
void nullsub_13()
{
  ;
}

//----- (80035AC4) --------------------------------------------------------
int __fastcall sub_80035AC4(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s1
  unsigned int v4; // $a2
  int *v5; // $v0
  int v6; // $s2
  unsigned int *v7; // $v0
  unsigned int v8; // $a1
  int *v9; // $s1
  int v10; // $v1
  int result; // $v0

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (int *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (int *)sub_80035410(a1, v4);
  }
  v6 = *v5;
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      v7 = (unsigned int *)(a1[47] - 4);
      a1[47] = v7;
    }
    else
    {
      v7 = &a1[(v3 & 0x1FF) + 16];
    }
  }
  else
  {
    v7 = (unsigned int *)sub_80035410(a1, v3 & 0xFFF);
  }
  v8 = *v7;
  v9 = (int *)a1[47];
  v10 = a1[60];
  a1[47] = v9 + 1;
  if ( v10 )
  {
    result = sub_80032DF8(a1[60], v8 >> 8, v6, 0, 0, 0, 0);
    *v9 = result;
  }
  else
  {
    result = 0;
    *v9 = 0;
  }
  return result;
}

//----- (80035BE0) --------------------------------------------------------
int __fastcall sub_80035BE0(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s0
  unsigned int v4; // $a2
  unsigned int *v5; // $v0
  unsigned int v6; // $s2
  int result; // $v0
  int *v8; // $s0

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (unsigned int *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (unsigned int *)sub_80035410(a1, v4);
  }
  v6 = *v5;
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      result = a1[47] + 4;
      v8 = (int *)a1[47];
      a1[47] = result;
    }
    else
    {
      result = 4 * (v3 & 0x1FF) + 64;
      v8 = (_DWORD *)((char *)a1 + result);
    }
  }
  else
  {
    result = sub_80035410(a1, v3 & 0xFFF);
    v8 = (int *)result;
  }
  if ( v8 )
  {
    if ( a1[60] )
    {
      result = sub_80032DF8(a1[60], v6 >> 8, 0, 0, 0, 2, 0);
      *v8 = result;
    }
    else
    {
      result = 0;
      *v8 = 0;
    }
  }
  return result;
}

//----- (80035D08) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
void __fastcall sub_80035D08(int a1, unsigned int a2)
{
  unsigned int v4; // $a0
  int *v5; // $s1
  int v6; // $a3
  int *v7; // $a0
  int *v8; // $a1
  int v9; // $v0
  int *v10; // $v1
  int v11; // $v0
  int v12; // $v0
  int v13; // $v0
  int v14; // $v0
  int *v15; // $v0
  int v16; // $s2
  int v17; // $s4
  int v18; // $s5
  int v19; // $a0
  int v20; // $s0
  int v21; // $v0
  int v22; // kr00_4
  int v23; // $a0
  int v24; // $v0
  int v25; // $v1
  int v26; // $v1
  int v27; // $v0
  int *v28; // $a0
  int v29; // $v0
  int v30; // $v0
  _DWORD *v31; // $a0
  int v32; // $a0
  int v33; // $a1
  int v34; // $v0
  int v35; // $s2
  _DWORD *v36; // $s0
  _DWORD *v37; // $a0
  int v38; // $v1
  int *v39; // $v0
  int *v40; // $v0
  int v41; // $v1
  int v42; // $a0
  int *v43; // $a0
  int v44; // $v0
  int v45; // $v1
  BOOL v46; // $v0
  int v47; // $v1
  _DWORD *v48; // $s0
  int v49; // $v0
  int v50; // $v0
  int v51; // $v1
  int v52; // $a0
  unsigned __int8 *v53; // $v1
  int v54; // $s1
  unsigned __int8 *v55; // $s2
  int v56; // $a0
  _DWORD *v57; // $s0
  int v58; // $a1
  int v59; // $v0
  int v60; // $a0
  int *v61; // $v0
  BOOL v62; // $v0
  BOOL *v63; // $v1
  int v64; // [sp+28h] [-28h] BYREF
  _DWORD v65[2]; // [sp+30h] [-20h] BYREF
  int v66; // [sp+38h] [-18h]
  int v67; // [sp+3Ch] [-14h]
  int v68; // [sp+40h] [-10h]
  int v69; // [sp+48h] [-8h] BYREF
  int v70; // [sp+4Ch] [-4h] BYREF

  v4 = a2 & 0xFFF;
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (int *)(*(_DWORD *)(a1 + 188) - 4);
      *(_DWORD *)(a1 + 188) = v5;
    }
    else
    {
      v5 = (int *)(a1 + 4 * (a2 & 0x1FF) + 64);
    }
  }
  else
  {
    v5 = (int *)sub_80035410((_DWORD *)a1, v4);
  }
  v6 = (int)(a2 << 12) >> 27;
  switch ( (a2 >> 20) & 0xF )
  {
    case 1u:
    case 6u:
      v7 = v5;
      if ( ((a2 >> 20) & 0xF) != 6 )
        v7 = (int *)(a1 + 96);
      if ( (v6 & 8) != 0 )
        v8 = dword_8005C1A4;
      else
        v8 = (int *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 96);
      switch ( v6 & 7 )
      {
        case 0:
        case 4:
          v9 = sub_80031A54(v7, v8);
          v10 = *(int **)(a1 + 188);
          *v10 = v9;
          goto LABEL_122;
        case 1:
          v11 = sub_80031C74(v7, v8);
          v10 = *(int **)(a1 + 188);
          *v10 = v11;
          goto LABEL_122;
        case 2:
        case 6:
          v12 = sub_80031B50(v7, v8);
          v10 = *(int **)(a1 + 188);
          *v10 = v12;
          goto LABEL_122;
        case 3:
          v13 = sub_80031CF0(v7, v8);
          v10 = *(int **)(a1 + 188);
          *v10 = v13;
          goto LABEL_122;
        case 7:
          v14 = sub_80031D4C(v7, v8);
          v10 = *(int **)(a1 + 188);
          *v10 = v14;
          goto LABEL_122;
        default:
          return;
      }
      return;
    case 2u:
      if ( (unsigned int)*(unsigned __int8 *)(a1 + 288) - 6 < 2 )
      {
        v30 = sub_80031DDC((_DWORD *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 96), v5);
        v10 = *(int **)(a1 + 188);
        *v10 = v30;
      }
      else
      {
        if ( (v6 & 1) != 0 )
          v28 = dword_8005C1A4;
        else
          v28 = (int *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 96);
        v29 = sub_80031DA8(v28, v5);
        v10 = *(int **)(a1 + 188);
        *v10 = v29;
      }
LABEL_122:
      *(_DWORD *)(a1 + 188) = v10 + 1;
      return;
    case 3u:
      v31 = *(_DWORD **)(a1 + 188);
      *v31 = *(_DWORD *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 4 * ((unsigned int)*v5 >> 8) + 64);
      *(_DWORD *)(a1 + 188) = v31 + 1;
      return;
    case 4u:
      v32 = *(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64);
      v33 = *(_DWORD *)(a1 + 188);
      v34 = 4 * ((unsigned int)*v5 >> 8);
      *(_DWORD *)(a1 + 188) = v33 - 4;
      *(_DWORD *)(v32 + v34 + 64) = *(_DWORD *)(v33 - 4);
      return;
    case 5u:
      v15 = (int *)(*(_DWORD *)(a1 + 188) - 4);
      *(_DWORD *)(a1 + 188) = v15;
      v16 = *v15 >> 8;
      v17 = *v5 >> 8;
      v18 = v5[2] >> 8;
      if ( (v6 & 1) != 0 )
      {
        v19 = sub_8003D9DC(v17 * v17 + v18 * v18);
      }
      else
      {
        v20 = v5[1] >> 8;
        v21 = sub_8003D9DC(v17 * v17 + v20 * v20 + v18 * v18);
        v19 = v21;
        if ( v21 )
        {
          if ( v21 == -1 && v20 * v16 == 0x80000000 )
            _break(6u, 0);
          v5[1] = (v20 * v16 / v21) << 8;
        }
        else
        {
          v5[1] = 0;
        }
      }
      if ( v16 >= 17 )
      {
        v22 = v19;
        v23 = v19 / 16;
        if ( v22 / 16 )
        {
          v24 = v17 * v16 / 16;
          if ( !v23 )
            _break(7u, 0);
          if ( v23 == -1 && v24 == 0x80000000 )
            _break(6u, 0);
          *v5 = (v24 / v23) << 8;
          if ( v23 == -1 && v18 * v16 / 16 == 0x80000000 )
            _break(6u, 0);
          v5[2] = (v18 * v16 / 16 / v23) << 8;
          return;
        }
LABEL_38:
        v5[2] = 0;
        *v5 = 0;
        return;
      }
      if ( !v19 )
        goto LABEL_38;
      v25 = *v5 * v16;
      if ( v19 == -1 && v25 == 0x80000000 )
        _break(6u, 0);
      v26 = v25 / v19;
      v27 = v5[2];
      if ( v19 == -1 && v27 * v16 == 0x80000000 )
        _break(6u, 0);
      *v5 = v26;
      v5[2] = v27 * v16 / v19;
      return;
    case 7u:
      if ( v5 )
      {
        if ( !*v5 )
          goto LABEL_149;
        v35 = 3;
        if ( (dword_8006B688[(unsigned int)*v5 >> 8] & 1) == 0 )
          goto LABEL_149;
        v36 = dword_80068EB8;
        v37 = dword_80068EB8;
        do
        {
          v36 += 2;
          ++v35;
          v38 = sub_80019844(v37, (int (__fastcall *)(_DWORD *, int))sub_80019AAC, *v5);
          if ( v38 )
            break;
          v37 = v36;
        }
        while ( v35 < 5 );
        v39 = *(int **)(a1 + 188);
        *v39 = v38;
        goto LABEL_150;
      }
      return;
    case 8u:
      if ( v5 )
      {
        if ( v6 )
        {
          v40 = &dword_8006B688[(unsigned int)*v5 >> 8];
          v41 = *v40;
          v42 = -3;
LABEL_75:
          *v40 = v41 & v42;
        }
        else
        {
          dword_8006B688[(unsigned int)*v5 >> 8] |= 2u;
        }
      }
      return;
    case 9u:
      if ( v5 )
      {
        v45 = sub_80028D8C(dword_80065D5C, v5);
        v46 = v45 < -254;
      }
      else
      {
        v45 = dword_80065D5C;
        v46 = dword_80065D5C < -254;
      }
      if ( v46 )
        *(_DWORD *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 24) = v45;
      return;
    case 0xAu:
      if ( v5 )
      {
        switch ( v6 )
        {
          case 0:
            v40 = &dword_8006B688[(unsigned int)*v5 >> 8];
            v41 = *v40;
            v42 = -5;
            goto LABEL_75;
          case 1:
            dword_8006B688[(unsigned int)*v5 >> 8] |= 4u;
            return;
          case 2:
            goto LABEL_70;
          case 3:
            goto LABEL_72;
          case 4:
            sub_80021008(*v5);
LABEL_70:
            v40 = &dword_8006B688[(unsigned int)*v5 >> 8];
            v41 = *v40;
            v42 = -9;
            goto LABEL_75;
          case 5:
            sub_80020F68(*v5);
LABEL_72:
            dword_8006B688[(unsigned int)*v5 >> 8] |= 8u;
            return;
          case 8:
            v40 = &dword_8006B688[(unsigned int)*v5 >> 8];
            v41 = *v40;
            v42 = -2;
            goto LABEL_75;
          case 9:
            dword_8006B688[(unsigned int)*v5 >> 8] |= 1u;
            return;
          default:
            return;
        }
      }
      return;
    case 0xBu:
      if ( v6 == 2 )
      {
        v43 = *(int **)(a1 + 188);
        *(_DWORD *)(a1 + 188) = v43 + 1;
        if ( v5 )
        {
          v44 = dword_8006B688[(unsigned int)*v5 >> 8] & 4;
          goto LABEL_89;
        }
      }
      else if ( v6 >= 3 )
      {
        if ( v6 != 3 )
          return;
        v43 = *(int **)(a1 + 188);
        *(_DWORD *)(a1 + 188) = v43 + 1;
        if ( v5 )
        {
          v44 = dword_8006B688[(unsigned int)*v5 >> 8] & 8;
          goto LABEL_89;
        }
      }
      else
      {
        if ( v6 != 1 )
          return;
        v43 = *(int **)(a1 + 188);
        *(_DWORD *)(a1 + 188) = v43 + 1;
        if ( v5 )
        {
          v44 = ((unsigned __int8)(dword_8006B688[(unsigned int)*v5 >> 8] >> 1) ^ 1) & 1;
          goto LABEL_89;
        }
      }
      v44 = 0;
LABEL_89:
      *v43 = v44;
      return;
    case 0xCu:
      switch ( (a2 >> 15) & 0x1F )
      {
        case 0u:
          sub_8002FF3C(a1, &dword_80065DD8[795 * *((unsigned __int8 *)v5 + 1)], 0, *((unsigned __int16 *)v5 + 1));
          return;
        case 1u:
          sub_80030388(&dword_80065DD8[795 * ((unsigned int)*v5 >> 8)]);
          return;
        case 2u:
          v47 = (a2 >> 12) & 7;
          if ( v47 )
          {
            if ( v47 == 1 )
              sub_8001962C(a1, (_DWORD *)*v5);
          }
          else
          {
            sub_8001962C(a1, (_DWORD *)&unk_80068EA0 + 2 * ((unsigned int)*v5 >> 8));
          }
          return;
        case 3u:
          nullsub_12();
          return;
        case 4u:
          *(_DWORD *)(*v5 + 24) = dword_80065D60;
          return;
        case 5u:
          sub_80034C0C();
          return;
        case 6u:
          sub_80034C1C(*v5);
          return;
        case 7u:
          sub_8001AAC8();
          return;
        case 8u:
          v48 = (_DWORD *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 96);
          v49 = sub_80031CF0(v48, v5);
          v50 = sub_8004F794(v48[1] - v5[1], v49);
          v10 = *(int **)(a1 + 188);
          *v10 = v50;
          goto LABEL_122;
        case 9u:
          dword_80060AC0 = (unsigned int)*v5 >> 8;
          return;
        case 0xAu:
          sub_80012F7C((unsigned int)*v5 >> 8);
          return;
        case 0xBu:
          v51 = (a2 >> 12) & 7;
          if ( v51 )
          {
            if ( v51 == 1 )
              sub_8002FCA0(0);
          }
          else
          {
            sub_8002FCA0(1);
          }
          return;
        case 0xCu:
          *v5 = 0;
          return;
        case 0xDu:
          dword_8003AE8C = *v5;
          return;
        case 0xEu:
          *(_DWORD *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 20) = *v5;
          return;
        case 0xFu:
          v10 = *(int **)(a1 + 188);
          *v10 = *(_DWORD *)(*v5 + 20);
          goto LABEL_122;
        case 0x10u:
          *(_DWORD *)(*(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64) + 16) = *v5;
          return;
        case 0x11u:
          v10 = *(int **)(a1 + 188);
          *v10 = *(_DWORD *)(*v5 + 16);
          goto LABEL_122;
        case 0x12u:
          v70 = 1;
          v53 = sub_80032710(*(_DWORD *)(a1 + 240), 647, 0, 0, &v69, 2, 0, 0, 0);
          if ( !v53 )
            return;
          v54 = 0;
          if ( v69 <= 0 )
            return;
          v55 = v53;
          break;
        case 0x14u:
          v52 = 0;
          if ( !byte_80065BCC[0] )
          {
            v52 = byte_80065BCD;
            if ( byte_80065BCD == 83 || byte_80065BCD == 115 )
            {
              if ( v5 )
              {
                *v5 = (unsigned __int8)byte_80065BD2;
                v5[1] = (unsigned __int8)byte_80065BD3;
              }
            }
          }
          v39 = *(int **)(a1 + 188);
          *v39 = v52;
          goto LABEL_150;
        case 0x15u:
          sub_8001B0BC(a1, (int *)(a1 + 120));
          sub_8001B630(a1, &v64);
          return;
        case 0x16u:
          ((void (*)(void))unk_80072194)();
          return;
        case 0x17u:
          sub_800302AC(*(_DWORD *)(dword_80061044 + 8), dword_8006913C, 0, dword_800691AC);
          return;
        default:
          return;
      }
      break;
    case 0xDu:
      v65[0] = (a2 >> 15) & 0x1F;
      v59 = *(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64);
      v67 = 0x7FFFFFFF;
      v66 = 0;
      v65[1] = v59;
      v68 = *v5;
      sub_80019844(dword_80068EC0, (int (__fastcall *)(_DWORD *, int))sub_80019ACC, (int)v65);
      if ( ((a2 >> 15) & 0x17) != 0 )
        sub_80019844(dword_80068EB8, (int (__fastcall *)(_DWORD *, int))sub_80019ACC, (int)v65);
      if ( !v66 )
        goto LABEL_149;
      v39 = *(int **)(a1 + 188);
      *v39 = v66;
      goto LABEL_150;
    case 0xEu:
      v60 = *(_DWORD *)(a1 + ((a2 >> 10) & 0x1C) + 64);
      if ( (v60 & 0xFF800003) == 0x80000000 && (v61 = sub_8002D0E8(v60, 0, -2)) != 0 )
      {
        v62 = sub_8003188C(v5, v61 + 2);
        v63 = *(BOOL **)(a1 + 188);
        *v63 = v62;
        *(_DWORD *)(a1 + 188) = v63 + 1;
        sub_8002D85C();
      }
      else
      {
LABEL_149:
        v39 = *(int **)(a1 + 188);
        *v39 = 0;
LABEL_150:
        *(_DWORD *)(a1 + 188) = v39 + 1;
      }
      return;
    case 0xFu:
      *(_DWORD *)(a1 + 212) = sub_80017CA8(a1, (a2 >> 15) & 0x1F, *v5);
      return;
    default:
      return;
  }
  while ( 1 )
  {
    v56 = *(__int16 *)v55;
    v57 = &dword_8006B688[v56];
    if ( (*v57 & 1) == 0 )
      break;
    v58 = sub_8001ABF8(v56 << 8);
    if ( !v58 )
      goto LABEL_137;
    sub_8001DB38(a1, v58, 768, 1, &v70);
    v55 += 2;
LABEL_138:
    if ( ++v54 >= v69 )
      return;
  }
  if ( (*v57 & 2) == 0 )
  {
    sub_8001DB38(a1, 0, 18432, 0, 0);
    *v57 |= 2u;
  }
LABEL_137:
  v55 += 2;
  goto LABEL_138;
}
// 80036794: write access to const memory at 80060AC0 has been detected
// 8003680C: write access to const memory at 8003AE8C has been detected
// 80036010: conditional instruction was optimized away because $a0.4!=0
// 8003605C: conditional instruction was optimized away because $s2.4<11
// 80036110: conditional instruction was optimized away because $a0.4!=0
// 80036154: conditional instruction was optimized away because $a0.4!=0
// 8003AE8C: using guessed type int dword_8003AE8C;
// 8005C1A4: using guessed type int dword_8005C1A4[3];
// 80060A90: using guessed type int dword_80060A90;
// 80060AC0: using guessed type int dword_80060AC0;
// 80061044: using guessed type int dword_80061044;
// 80065BCD: using guessed type char byte_80065BCD;
// 80065BD2: using guessed type char byte_80065BD2;
// 80065BD3: using guessed type char byte_80065BD3;
// 80065D5C: using guessed type int dword_80065D5C;
// 80065D60: using guessed type int dword_80065D60;
// 80065DD8: using guessed type _DWORD dword_80065DD8[9];
// 80068EB8: using guessed type _DWORD dword_80068EB8[2];
// 80068EC0: using guessed type _DWORD dword_80068EC0[4];
// 8006913C: using guessed type int dword_8006913C;
// 800691AC: using guessed type int dword_800691AC;
// 8006B688: using guessed type _DWORD dword_8006B688[784];

//----- (80036B88) --------------------------------------------------------
int __fastcall sub_80036B88(int a1, unsigned int a2)
{
  int *v4; // $s2
  unsigned int v5; // $a0
  int *v6; // $s0
  int result; // $v0
  int v8; // $t2
  int v9; // $t3
  int v10; // $t2
  int v11; // $t3
  int *v12; // $v0
  int *v13; // $v0
  _DWORD *v14; // $s3
  int v15; // $s0
  int v16; // $s1
  _DWORD *v17; // $s4
  int v18; // $v1
  _DWORD *v19; // $a1
  __int16 *v20; // $s3
  __int16 *v21; // $s1
  unsigned __int8 *v22; // $a2
  int *v23; // $s7
  int v24; // $a1
  int v25; // $a3
  int v26; // $t0
  unsigned __int8 *v27; // $a2
  int v28; // $a1
  int v29; // $v1
  int v30; // $a0
  int v31; // $v0
  int v32; // $v1
  _DWORD *v33; // $s1
  int v34; // $a2
  int v35; // $a1
  int v36; // $a1
  int v37; // $v0
  int v38; // $lo
  int v39; // $a0
  int v40; // [sp+18h] [-50h] BYREF
  int v41; // [sp+1Ch] [-4Ch]
  int v42; // [sp+20h] [-48h]
  int v43; // [sp+28h] [-40h] BYREF
  int v44; // [sp+2Ch] [-3Ch]
  int v45; // [sp+30h] [-38h]
  int v46; // [sp+38h] [-30h]
  int v47; // [sp+3Ch] [-2Ch]
  int v48; // [sp+40h] [-28h]
  _BYTE v49[32]; // [sp+48h] [-20h] BYREF

  v4 = (int *)(a1 + 12 * ((a2 >> 12) & 7) + 96);
  v5 = a2 & 0xFFF;
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v5 == 3615 )
    {
      v6 = (int *)(*(_DWORD *)(a1 + 188) - 4);
      *(_DWORD *)(a1 + 188) = v6;
    }
    else
    {
      v6 = (int *)(a1 + 4 * (a2 & 0x1FF) + 64);
    }
  }
  else
  {
    v6 = (int *)sub_80035410((_DWORD *)a1, v5);
  }
  result = -2147418112;
  switch ( (a2 >> 18) & 7 )
  {
    case 0u:
      if ( v6 )
      {
        result = *(_DWORD *)(a1 + 240);
        if ( result )
        {
          v8 = v4[1];
          v9 = v4[2];
          v40 = *v4;
          v41 = v8;
          v42 = v9;
          sub_80020670((_DWORD *)a1, *v6, &v40);
          v10 = v41;
          v11 = v42;
          *v4 = v40;
          v4[1] = v10;
          v4[2] = v11;
          result = v4[1];
          *(_DWORD *)(a1 + 252) = result;
        }
      }
      break;
    case 1u:
      v33 = (_DWORD *)(a1 + 12 * ((a2 >> 15) & 7) + 96);
      result = sub_800203A4(v4, v33);
      if ( *v6 )
      {
        result = v33[2];
        v34 = result >> 8;
        if ( result >> 8 )
        {
          v35 = 280 * *v6;
          if ( v34 == -1 && v35 == 0x80000000 )
            _break(6u, 0);
          v36 = v35 / v34;
          v37 = v6[1];
          if ( v34 == -1 && 280 * v37 == 0x80000000 )
            _break(6u, 0);
          v38 = 280 * v37 / v34;
          v39 = v6[2];
          if ( v34 == -1 && 280 * v39 == 0x80000000 )
            _break(6u, 0);
          result = 280 * v39 / v34;
          *v6 = v36;
          v6[1] = v38;
          v6[2] = result;
        }
      }
      break;
    case 2u:
      *v4 = ((sub_8003C2F0(*(_WORD *)(a1 + 148) & 0xFFF) >> 4) * *v6) >> 8;
      if ( (unsigned int)*(unsigned __int8 *)(a1 + 288) - 6 < 2 )
        v4[1] = ((sub_8003C364(*(_WORD *)(a1 + 148) & 0xFFF) >> 4) * *v6) >> 8;
      else
        v4[2] = ((sub_8003C364(*(_WORD *)(a1 + 148) & 0xFFF) >> 4) * *v6) >> 8;
      result = *v6;
      *(_DWORD *)(a1 + 260) = *v6;
      break;
    case 3u:
    case 6u:
      v17 = *(_DWORD **)(a1 + ((a2 >> 19) & 0x1C) + 64);
      result = v17[58];
      if ( result )
      {
        v18 = *(unsigned __int8 *)result;
        result = 1;
        if ( v18 == 1 )
        {
          v19 = (_DWORD *)v17[2];
          v20 = (__int16 *)v19[8];
          v21 = (__int16 *)v19[9];
          v22 = (unsigned __int8 *)&v20[20 * *((_DWORD *)v20 + 5) + 14] + 3 * ((unsigned int)*v6 >> 8);
          v23 = *(int **)(v19[10] + 16);
          v24 = (*v20 + 32 * *v22) << 8;
          v43 = v24;
          v25 = (v20[1] + 32 * v22[2]) << 8;
          v44 = v25;
          v26 = (*((_DWORD *)v20 + 1) + 32 * v22[1]) << 8;
          v45 = v26;
          if ( v20 != v21 )
          {
            v27 = (unsigned __int8 *)&v21[20 * *((_DWORD *)v21 + 5) + 14] + 3 * ((unsigned int)*v6 >> 8);
            v43 = v24 + ((*v21 + 32 * *v27) << 8);
            v44 = v25 + ((v21[1] + 32 * v27[2]) << 8);
            v28 = v27[1];
            v29 = *((_DWORD *)v21 + 1);
            v43 >>= 1;
            v44 >>= 1;
            v45 = (v26 + ((v29 + 32 * v28) << 8)) >> 1;
          }
          if ( ((a2 >> 18) & 7) == 3 )
          {
            memset(v49, 0, 12);
            result = sub_8001FFF0(&v43, v17 + 24, (int)v49, v23, 0, v4);
          }
          else
          {
            sub_800200C8(v17, 0, &v43, v4);
            v30 = (*v23 * v17[30]) >> 12;
            v46 = v30;
            v47 = (v23[1] * v17[31]) >> 12;
            v48 = (v23[2] * v17[32]) >> 12;
            if ( v20 == v21 )
            {
              *v4 += (v20[4] * v30) >> 4;
              v4[1] += (v20[5] * v47) >> 4;
              v31 = v4[2];
              v32 = (*((_DWORD *)v20 + 3) * v48) >> 4;
            }
            else
            {
              *v4 += ((v20[4] + v21[4]) * v30) >> 5;
              v4[1] += ((v20[5] + v21[5]) * v47) >> 5;
              v31 = v4[2];
              v32 = ((*((_DWORD *)v20 + 3) + *((_DWORD *)v21 + 3)) * v48) >> 5;
            }
            result = v31 + v32;
            v4[2] = result;
          }
        }
      }
      break;
    case 4u:
    case 5u:
      v45 = *v6;
      v12 = (int *)(*(_DWORD *)(a1 + 188) - 4);
      *(_DWORD *)(a1 + 188) = v12;
      v44 = *v12;
      v13 = (int *)(*(_DWORD *)(a1 + 188) - 4);
      *(_DWORD *)(a1 + 188) = v13;
      v43 = *v13;
      v14 = (_DWORD *)(a1 + 12 * ((a2 >> 15) & 7) + 96);
      if ( ((a2 >> 18) & 7) == 4 )
      {
        v15 = *(_DWORD *)(a1 + ((a2 >> 19) & 0x1C) + 64);
        v16 = ((v45 >> 2) * sub_8003C364(-*(_WORD *)(v15 + 108))) >> 12;
        v14[1] = (((v45 >> 2) * sub_8003C2F0(-*(_WORD *)(v15 + 108))) >> 10) + *(_DWORD *)(v15 + 100);
        *v14 = ((v16 * sub_8003C2F0(*(_DWORD *)(v15 + 112))) >> 10) + *(_DWORD *)(v15 + 96);
        result = ((v16 * sub_8003C364(*(_DWORD *)(v15 + 112))) >> 10) + *(_DWORD *)(v15 + 104);
        v14[2] = result;
      }
      else
      {
        result = sub_8001FFF0(&v43, v4, a1 + 144, 0, 0, (_DWORD *)(a1 + 12 * ((a2 >> 15) & 7) + 96));
      }
      break;
    case 7u:
      result = sub_800202CC(v4, (_DWORD *)(a1 + 12 * ((a2 >> 15) & 7) + 96));
      break;
    default:
      return result;
  }
  return result;
}
// 8003722C: conditional instruction was optimized away because $a2.4!=0
// 80037274: conditional instruction was optimized away because $a2.4!=0
// 80048100: using guessed type int __fastcall memset(_DWORD, _DWORD, _DWORD);

//----- (80037300) --------------------------------------------------------
void __fastcall sub_80037300(_DWORD *a1, unsigned int a2)
{
  int *v4; // $s2
  int v5; // $t1
  int v6; // $t2
  int v7; // $t1
  int v8; // $t2
  int v9; // $v0
  unsigned int v10; // $a1
  _DWORD *v11; // $v1
  int v12; // $t1
  int v13; // $t2
  _DWORD *v14; // $v0
  int v15; // $t1
  int v16; // $t2
  int v17; // $t1
  int v18; // $t2
  int v19; // $t1
  int v20; // $t2
  int v21; // $a0
  unsigned int v22; // $a1
  _DWORD *v23; // $v1
  int v24; // $t1
  int v25; // $t2
  _DWORD *v26; // $v0
  int v27; // $t1
  int v28; // $t2
  int v29; // $v1
  int v30; // $a0
  int v31; // $t1
  int v32; // $t2
  int v33; // $v0
  char v34; // $a2
  unsigned int v35; // $a1
  _DWORD *v36; // $v1
  int v37; // $t1
  int v38; // $t2
  _DWORD *v39; // $v0
  int v40; // $t1
  int v41; // $t2
  int v42; // [sp+10h] [-60h] BYREF
  int v43; // [sp+14h] [-5Ch]
  int v44; // [sp+18h] [-58h]
  int v45; // [sp+20h] [-50h] BYREF
  int v46; // [sp+24h] [-4Ch]
  int v47; // [sp+28h] [-48h]
  int v48[4]; // [sp+30h] [-40h] BYREF
  int v49; // [sp+40h] [-30h] BYREF
  int v50; // [sp+44h] [-2Ch]
  int v51; // [sp+48h] [-28h]
  int v52; // [sp+50h] [-20h] BYREF
  int v53; // [sp+54h] [-1Ch]
  int v54; // [sp+58h] [-18h]
  int v55; // [sp+60h] [-10h]
  int v56; // [sp+64h] [-Ch]
  int v57; // [sp+68h] [-8h]

  v4 = &a1[3 * ((a2 >> 12) & 7) + 24];
  sub_80035538(a1, a2 & 0xFFF, 0);
  switch ( (a2 >> 18) & 7 )
  {
    case 0u:
      v5 = a1[25];
      v6 = a1[26];
      v42 = a1[24];
      v43 = v5;
      v44 = v6;
      v7 = v4[1];
      v8 = v4[2];
      v45 = *v4;
      v46 = v7;
      v47 = v8;
      v43 += *(_DWORD *)(a1[2] + 64) / 2;
      v9 = sub_800296F8(&v42, &v45);
      v10 = a2 & 0xFFF;
      a1[53] = v9;
      if ( v10 != 3040 )
      {
        if ( (a2 & 0xE00) == 0xE00 )
        {
          if ( v10 == 3615 )
          {
            v11 = (_DWORD *)a1[47];
            a1[47] = v11 + 1;
          }
          else
          {
            v11 = &a1[(a2 & 0x1FF) + 16];
          }
        }
        else
        {
          v11 = (_DWORD *)sub_80035410(a1, v10);
        }
        v12 = v46;
        v13 = v47;
        *v11 = v45;
        v11[1] = v12;
        v11[2] = v13;
      }
      v14 = &a1[3 * ((a2 >> 15) & 7)];
      v15 = v43;
      v16 = v44;
      v14[24] = v42;
      v14[25] = v15;
      v14[26] = v16;
      break;
    case 1u:
      v17 = a1[25];
      v18 = a1[26];
      v48[0] = a1[24];
      v48[1] = v17;
      v48[2] = v18;
      v19 = a1[25];
      v20 = a1[26];
      v49 = a1[24];
      v50 = v19;
      v51 = v20;
      if ( !a1 || (v21 = (int)a1, !a1[17]) )
      {
        sub_80029E40((int)a1, v48);
        v21 = (int)a1;
      }
      a1[53] = sub_80029C1C(v21, &v49);
      v22 = a2 & 0xFFF;
      if ( v22 != 3040 )
      {
        if ( (a2 & 0xE00) == 0xE00 )
        {
          if ( v22 == 3615 )
          {
            v23 = (_DWORD *)a1[47];
            a1[47] = v23 + 1;
          }
          else
          {
            v23 = &a1[(a2 & 0x1FF) + 16];
          }
        }
        else
        {
          v23 = (_DWORD *)sub_80035410(a1, v22);
        }
        v24 = v53;
        v25 = v54;
        *v23 = v52;
        v23[1] = v24;
        v23[2] = v25;
      }
      v26 = &a1[3 * ((a2 >> 15) & 7)];
      v27 = v50;
      v28 = v51;
      v26[24] = v49;
      v26[25] = v27;
      v26[26] = v28;
      break;
    case 2u:
    case 3u:
    case 4u:
    case 5u:
      v29 = (a2 >> 18) & 7;
      v30 = 0;
      if ( v29 == 5 || v29 == 3 )
        v30 = 1;
      v31 = a1[25];
      v32 = a1[26];
      v52 = a1[24];
      v53 = v31;
      v54 = v32;
      v33 = a1[6];
      if ( !v33 )
        v33 = dword_80065D5C;
      if ( (*(_DWORD *)(*(_DWORD *)(v33 + 16) + 732) & 1) != 0 )
      {
        v34 = 2;
        if ( v30 )
          v34 = 6;
      }
      else
      {
        v34 = 1;
        if ( v30 )
          v34 = 5;
      }
      sub_8002A22C((int)a1, &v52, v34, (unsigned int)(v29 - 4) >= 2);
      v35 = a2 & 0xFFF;
      if ( v35 != 3040 )
      {
        if ( (a2 & 0xE00) == 0xE00 )
        {
          if ( v35 == 3615 )
          {
            v36 = (_DWORD *)a1[47];
            a1[47] = v36 + 1;
          }
          else
          {
            v36 = &a1[(a2 & 0x1FF) + 16];
          }
        }
        else
        {
          v36 = (_DWORD *)sub_80035410(a1, v35);
        }
        v37 = v56;
        v38 = v57;
        *v36 = v55;
        v36[1] = v37;
        v36[2] = v38;
      }
      v39 = &a1[3 * ((a2 >> 15) & 7)];
      v40 = v53;
      v41 = v54;
      v39[24] = v52;
      v39[25] = v40;
      v39[26] = v41;
      break;
    case 6u:
      sub_8002A728((int)a1);
      break;
    default:
      return;
  }
}
// 80060A90: using guessed type int dword_80060A90;
// 80065D5C: using guessed type int dword_80065D5C;

//----- (800376F8) --------------------------------------------------------
int __fastcall sub_800376F8(_DWORD *a1, unsigned int a2)
{
  int v4; // $s2
  int v5; // $s5
  int v6; // $s0
  int v7; // $s4
  BOOL v8; // $s6
  unsigned int v9; // $a1
  int v10; // $v1
  int result; // $v0

  v4 = a2 & 0x3F;
  v5 = (a2 >> 20) & 0xF;
  if ( (a2 & 0x3F) == 0 )
  {
    ++v5;
    v4 = *(_DWORD *)(a1[47] - 4 * v5);
  }
  v6 = 0;
  if ( v4 > 0 )
  {
    v7 = (a2 >> 20) & 0xF;
    v8 = HIBYTE(a2) == 0x46;
    v9 = a2 >> 12;
    do
    {
      v10 = sub_8001A42C(a1, (unsigned __int8)v9, (a2 >> 6) & 0x3F, v7, (_DWORD *)(a1[47] - 4 * v7), v8);
      if ( v10 >= -254 )
      {
        a1[53] = 0;
      }
      else
      {
        *(_DWORD *)(v10 + 80) = a1;
        a1[53] = v10;
      }
      ++v6;
      v9 = a2 >> 12;
    }
    while ( v6 < v4 );
  }
  result = a1[47] - 4 * v5;
  a1[47] = result;
  return result;
}

//----- (8003780C) --------------------------------------------------------
int __fastcall sub_8003780C(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s2
  unsigned int v4; // $a2
  __int16 *v5; // $s0
  unsigned int *v6; // $v0
  int result; // $v0

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (__int16 *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = (__int16 *)&a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (__int16 *)sub_80035410(a1, v4);
  }
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      v6 = (unsigned int *)(a1[47] - 4);
      a1[47] = v6;
    }
    else
    {
      v6 = &a1[(v3 & 0x1FF) + 16];
    }
  }
  else
  {
    v6 = (unsigned int *)sub_80035410(a1, v3 & 0xFFF);
  }
  result = sub_80033864((int)a1, v6, *v5);
  a1[75] = result;
  return result;
}

//----- (800378F8) --------------------------------------------------------
int __fastcall sub_800378F8(_DWORD *a1, unsigned int a2)
{
  unsigned int v4; // $a0
  _DWORD *v5; // $a2
  unsigned int v6; // $a1
  int v7; // $v1
  int v8; // $a0
  int *v9; // $v0
  int result; // $v0

  v4 = a2 & 0xFFF;
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (_DWORD *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (_DWORD *)sub_80035410(a1, v4);
  }
  v6 = (a2 >> 20) & 0xF;
  v7 = (a2 >> 12) & 0x3F;
  if ( v7 )
  {
    if ( v7 == 31 )
    {
      v9 = (int *)(a1[47] - 4);
      a1[47] = v9;
    }
    else
    {
      v9 = &a1[v7 + 16];
    }
    v8 = *v9;
  }
  else
  {
    v8 = 0;
  }
  if ( v6 == 15 )
    v6 = 0x80000000;
  if ( (a2 & 0x40000) != 0 )
    v6 |= 0x40000000u;
  if ( (a2 & 0x80000) != 0 )
    v6 |= 0x20000000u;
  result = sub_80033C54(v8, v6, v5, (int)a1);
  a1[53] = result;
  return result;
}

//----- (80037A00) --------------------------------------------------------
int __fastcall sub_80037A00(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s2
  unsigned int v4; // $a2
  int *v5; // $s1
  int *v6; // $v0

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (int *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (int *)sub_80035410(a1, v4);
  }
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      v6 = (int *)(a1[47] - 4);
      a1[47] = v6;
    }
    else
    {
      v6 = &a1[(v3 & 0x1FF) + 16];
    }
  }
  else
  {
    v6 = (int *)sub_80035410(a1, v3 & 0xFFF);
  }
  return sub_80027D6C(*v6, v5);
}

//----- (80037AE4) --------------------------------------------------------
int __fastcall sub_80037AE4(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s0
  int *v4; // $v0
  unsigned int v5; // $a1
  int v6; // $s0
  unsigned int *v7; // $a0
  int result; // $v0
  char v9; // $a1
  int *v10; // $v1
  unsigned int v11; // $s0

  v3 = a2;
  v4 = (int *)sub_80035538(a1, (a2 >> 12) & 0xFFF, 0);
  v5 = v3 & 0xFFF;
  v6 = *v4;
  v7 = (unsigned int *)sub_80035538(a1, v5, 0);
  result = -2147418112;
  switch ( v6 )
  {
    case 1:
      v9 = 0;
      goto LABEL_4;
    case 2:
      result = sub_8001440C(v7, 1);
      a1[53] = result;
      return result;
    case 3:
      result = sub_8001440C(v7, 0);
      v10 = (int *)a1[47];
      *v10 = result;
      goto LABEL_9;
    case 4:
      result = sub_800145A0();
      v10 = (int *)a1[47];
      *v10 = result;
      goto LABEL_9;
    case 5:
      v11 = *v7;
      result = sub_800148F8(a1[47] - 4 * *v7, *v7);
      v10 = (int *)(a1[47] - 4 * v11);
      a1[47] = v10;
      *v10 = result;
LABEL_9:
      a1[47] = v10 + 1;
      break;
    case 6:
      v9 = 1;
LABEL_4:
      result = sub_800142B4(v7, v9, 1);
      a1[53] = result;
      break;
    default:
      return result;
  }
  return result;
}

//----- (80037BEC) --------------------------------------------------------
void __fastcall sub_80037BEC(_DWORD *a1, unsigned int a2, char a3)
{
  int v5; // $a2
  int v6; // $a0
  _DWORD *v7; // $a3
  _DWORD *v8; // $v1
  int v9; // $a0
  int v10; // $v1
  int v11; // $v0
  int v12; // $v0
  _DWORD v13[16]; // [sp+10h] [-40h] BYREF

  v5 = (a2 >> 10) & 0xF;
  v6 = v5 - 1;
  if ( v5 - 1 >= 0 )
  {
    v7 = &v13[v6];
    do
    {
      v8 = (_DWORD *)(a1[47] - 4);
      a1[47] = v8;
      --v6;
      *v7-- = *v8;
    }
    while ( v6 >= 0 );
  }
  v9 = a1[44];
  v10 = *(_DWORD *)(16 * (a2 & 0x3FF) + *(_DWORD *)(a1[3] + 32));
  if ( (unsigned int)(a1[66] - 2) >= 3 )
    v11 = v9 & v10;
  else
    v11 = (v9 | 0x402) & v10;
  if ( !v11 )
  {
    sub_8001D2D4((int)a1, a2 & 0x3FF, v5, v13);
    if ( v12 >= -254 || (a3 & 2) == 0 )
      a1[47] -= 4;
  }
}
// 80037CA0: variable 'v12' is possibly undefined

//----- (80037CD8) --------------------------------------------------------
int __fastcall sub_80037CD8(_DWORD *a1, unsigned int a2, char a3)
{
  int v4; // $v1
  int *v5; // $a0
  int v6; // $v1
  int v7; // $v0
  int v8; // $a1
  int result; // $v0
  int v10; // $v1
  int v11; // $v0
  bool v12; // dc
  int v13; // $v0
  int v14; // $v0
  int v15; // $v0

  v4 = a1[3];
  v5 = (int *)a1[47];
  v6 = *(_DWORD *)(v4 + 36);
  a1[59] = (a2 & 0x7F) << 8;
  a1[58] = v6 + ((a2 >> 5) & 0x7FC);
  v7 = (HIWORD(a2) & 0x3F) << 24;
  v8 = (a2 >> 22) & 3;
  *v5 = v7 | dword_80068EEC;
  a1[47] = v5 + 1;
  if ( v8 == 1 )
  {
    v14 = a1[30];
    v12 = v14 <= 0;
    v15 = -v14;
    if ( !v12 )
      a1[30] = v15;
  }
  else if ( v8 )
  {
    result = -255;
    if ( v8 != 2 )
    {
      v10 = a3 & 4;
      goto LABEL_11;
    }
    a1[30] = -a1[30];
  }
  else
  {
    v11 = a1[30];
    v12 = v11 >= 0;
    v13 = -v11;
    if ( !v12 )
      a1[30] = v13;
  }
  result = -255;
  v10 = a3 & 4;
LABEL_11:
  if ( !v10 )
    return 0;
  return result;
}
// 80068EEC: using guessed type int dword_80068EEC;

//----- (80037DAC) --------------------------------------------------------
int __fastcall sub_80037DAC(_DWORD *a1, unsigned int a2, char a3)
{
  unsigned int v6; // $a0
  _DWORD *v7; // $v0
  int *v8; // $a0
  int v9; // $v1
  int result; // $v0
  int v11; // $v1
  int v12; // $v0
  bool v13; // dc
  int v14; // $v0
  int v15; // $v0
  int v16; // $v0

  v6 = a2 & 0xFFF;
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v6 == 3615 )
    {
      v7 = (_DWORD *)(a1[47] - 4);
      a1[47] = v7;
    }
    else
    {
      v7 = &a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v7 = (_DWORD *)sub_80035410(a1, v6);
  }
  v8 = (int *)a1[47];
  a1[59] = *v7;
  *v8 = ((HIWORD(a2) & 0x3F) << 24) | dword_80068EEC;
  v9 = (a2 >> 22) & 3;
  a1[47] = v8 + 1;
  if ( v9 == 1 )
  {
    v15 = a1[30];
    v13 = v15 <= 0;
    v16 = -v15;
    if ( !v13 )
      a1[30] = v16;
  }
  else if ( v9 )
  {
    result = -255;
    if ( v9 != 2 )
    {
      v11 = a3 & 4;
      goto LABEL_16;
    }
    a1[30] = -a1[30];
  }
  else
  {
    v12 = a1[30];
    v13 = v12 >= 0;
    v14 = -v12;
    if ( !v13 )
      a1[30] = v14;
  }
  result = -255;
  v11 = a3 & 4;
LABEL_16:
  if ( !v11 )
    return 0;
  return result;
}
// 80068EEC: using guessed type int dword_80068EEC;

//----- (80037EDC) --------------------------------------------------------
int __fastcall sub_80037EDC(_DWORD *a1, unsigned int a2, char a3)
{
  char *v6; // $v0
  unsigned int v7; // $a0
  int v8; // $s2
  int *v9; // $a2
  _DWORD *v10; // $v0
  int v11; // $a3
  int v12; // $a0
  _DWORD *v13; // $a1
  int v14; // $v0
  int result; // $v0
  _DWORD v16[16]; // [sp+18h] [-40h] BYREF

  v6 = (char *)a1 + ((a2 >> 19) & 0x1C);
  v7 = a2 & 0xFFF;
  v8 = *((_DWORD *)v6 + 16);
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v7 == 3615 )
    {
      v9 = (int *)(a1[47] - 4);
      a1[47] = v9;
    }
    else
    {
      v9 = &a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v9 = (int *)sub_80035410(a1, v7);
  }
  a1[42] &= ~0x20000u;
  if ( ((a2 >> 12) & 0x3F) == 0x1F )
  {
    v10 = (_DWORD *)(a1[47] - 4);
    a1[47] = v10;
  }
  else
  {
    v10 = &a1[((a2 >> 12) & 0x3F) + 16];
  }
  if ( *v10 && v8 && v9 )
  {
    v11 = (a2 >> 18) & 7;
    v12 = 0;
    if ( ((a2 >> 18) & 7) != 0 )
    {
      v13 = v16;
      do
      {
        v14 = *(_DWORD *)(4 * (v12 - v11) + a1[47]);
        ++v12;
        *v13++ = v14;
      }
      while ( v12 < v11 );
    }
    sub_8001DB38((int)a1, v8, *v9, v11, v16);
  }
  else
  {
    a1[53] = 0;
  }
  if ( (a1[42] & 0x20000) != 0 )
  {
    result = -255;
    if ( (a3 & 2) != 0 )
      return result;
    a1[47] -= 4;
  }
  else
  {
    a1[47] -= HIWORD(a2) & 0x1C;
  }
  return 0;
}

//----- (8003808C) --------------------------------------------------------
int __fastcall sub_8003808C(_DWORD *a1, unsigned int a2, char a3)
{
  char *v6; // $v0
  unsigned int v7; // $a0
  _DWORD *v8; // $s2
  int *v9; // $a2
  _DWORD *v10; // $v0
  int v11; // $a3
  int v12; // $a0
  _DWORD *v13; // $a1
  int v14; // $v0
  int result; // $v0
  _BYTE v16[64]; // [sp+18h] [-40h] BYREF

  v6 = (char *)a1 + ((a2 >> 19) & 0x1C);
  v7 = a2 & 0xFFF;
  v8 = (_DWORD *)*((_DWORD *)v6 + 16);
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v7 == 3615 )
    {
      v9 = (int *)(a1[47] - 4);
      a1[47] = v9;
    }
    else
    {
      v9 = &a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v9 = (int *)sub_80035410(a1, v7);
  }
  a1[42] &= ~0x20000u;
  if ( ((a2 >> 12) & 0x3F) == 0x1F )
  {
    v10 = (_DWORD *)(a1[47] - 4);
    a1[47] = v10;
  }
  else
  {
    v10 = &a1[((a2 >> 12) & 0x3F) + 16];
  }
  if ( *v10 && v8 && v9 )
  {
    v11 = (a2 >> 18) & 7;
    v12 = 0;
    if ( ((a2 >> 18) & 7) != 0 )
    {
      v13 = v16;
      do
      {
        v14 = *(_DWORD *)(4 * (v12 - v11) + a1[47]);
        ++v12;
        *v13++ = v14;
      }
      while ( v12 < v11 );
    }
    sub_8001E3BC((int)a1, v8, *v9, (a2 >> 21) & 7, v11, (int)v16);
  }
  else
  {
    a1[53] = 0;
  }
  if ( (a1[42] & 0x20000) != 0 )
  {
    result = -255;
    if ( (a3 & 2) != 0 )
      return result;
    a1[47] -= 4;
  }
  else
  {
    a1[47] -= HIWORD(a2) & 0x1C;
  }
  return 0;
}

//----- (80038248) --------------------------------------------------------
int __fastcall sub_80038248(_DWORD *a1, unsigned int a2, char a3)
{
  unsigned int v6; // $a0
  int *v7; // $a1
  _DWORD *v8; // $v0
  int v9; // $a3
  int v10; // $a0
  _DWORD *v11; // $a2
  int v12; // $v0
  int result; // $v0
  _BYTE v14[64]; // [sp+18h] [-40h] BYREF

  v6 = a2 & 0xFFF;
  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( v6 == 3615 )
    {
      v7 = (int *)(a1[47] - 4);
      a1[47] = v7;
    }
    else
    {
      v7 = &a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v7 = (int *)sub_80035410(a1, v6);
  }
  a1[42] &= ~0x20000u;
  if ( ((a2 >> 12) & 0x3F) == 0x1F )
  {
    v8 = (_DWORD *)(a1[47] - 4);
    a1[47] = v8;
  }
  else
  {
    v8 = &a1[((a2 >> 12) & 0x3F) + 16];
  }
  if ( *v8 && v7 )
  {
    v9 = (a2 >> 18) & 7;
    v10 = 0;
    if ( ((a2 >> 18) & 7) != 0 )
    {
      v11 = v14;
      do
      {
        v12 = *(_DWORD *)(4 * (v10 - v9) + a1[47]);
        ++v10;
        *v11++ = v12;
      }
      while ( v10 < v9 );
    }
    sub_8001E34C((int)a1, *v7, (a2 >> 21) & 7, v9, (int)v14);
  }
  else
  {
    a1[53] = 0;
  }
  if ( (a1[42] & 0x20000) != 0 )
  {
    result = -255;
    if ( (a3 & 2) != 0 )
      return result;
    a1[47] -= 4;
  }
  else
  {
    a1[47] -= HIWORD(a2) & 0x1C;
  }
  return 0;
}

//----- (800383DC) --------------------------------------------------------
int __fastcall sub_800383DC(_DWORD *a1, unsigned int a2, int a3, int *a4)
{
  int v4; // $t0
  int v6; // $a1
  int v7; // $v1
  int result; // $v0
  int *v10; // $v0
  _DWORD *v11; // $v0
  int v12; // $a2
  int v13; // $v1
  int v14; // $a3
  int v15; // $a1
  int *v16; // $a2
  int *v17; // $v1

  v6 = (a2 >> 22) & 3;
  v7 = (a2 >> 20) & 3;
  MEMORY[0x1F800048] = a3;
  if ( (a3 & 8) == 0 )
    return -14;
  if ( v7 == 1 )
  {
    if ( ((a2 >> 14) & 0x3F) == 0x1F )
    {
      v10 = (int *)(a1[47] - 4);
      a1[47] = v10;
    }
    else
    {
      v10 = &a1[((a2 >> 14) & 0x3F) + 16];
    }
    v4 = *v10;
  }
  else if ( v7 )
  {
    if ( v7 == 2 )
    {
      if ( ((a2 >> 14) & 0x3F) == 0x1F )
      {
        v11 = (_DWORD *)(a1[47] - 4);
        a1[47] = v11;
      }
      else
      {
        v11 = &a1[((a2 >> 14) & 0x3F) + 16];
      }
      v4 = *v11 == 0;
    }
  }
  else
  {
    v4 = 1;
  }
  v12 = a3 | 0x20;
  if ( v4 )
  {
    a4[1] = HIBYTE(a2) != 0x3D;
    MEMORY[0x1F800048] = v12;
    if ( v6 == 1 )
    {
      v14 = (a2 >> 10) & 0xF;
      v15 = v14 - 1;
      if ( v14 - 1 >= 0 )
      {
        v16 = &a4[v14 - 1];
        do
        {
          v17 = (int *)(a1[47] - 4);
          a1[47] = v17;
          --v15;
          v16[3] = *v17;
          --v16;
        }
        while ( v15 >= 0 );
      }
      a4[2] = v14;
      v13 = sub_8001D5E8(a1, 0);
      if ( v13 < -254 )
      {
        *a4 = a2 & 0x3FF;
        return -255;
      }
    }
    else
    {
      result = 0;
      if ( v6 != 2 )
        return result;
      v13 = sub_8001D5E8(a1, 0);
      if ( v13 < -254 )
      {
        *a4 = 255;
        return -255;
      }
    }
    return v13;
  }
  result = 0;
  if ( !v6 )
  {
    a1[48] += (int)(a2 << 22) >> 20;
    a1[47] -= (a2 >> 8) & 0x3C;
    return 0;
  }
  return result;
}
// 800384B8: variable 'v4' is possibly undefined

//----- (800385C0) --------------------------------------------------------
int __fastcall sub_800385C0(_DWORD *a1, __int16 a2)
{
  int v3; // $v0
  int result; // $v0
  int *v5; // $v1

  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( (a2 & 0xFFF) == 0xE1F )
    {
      v3 = a1[47] - 4;
      a1[47] = v3;
    }
    else
    {
      v3 = (int)&a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v3 = sub_80035410(a1, a2 & 0xFFF);
  }
  result = ((int (__fastcall *)(int))unk_8006F280)(v3);
  v5 = (int *)a1[47];
  *v5 = result;
  a1[47] = v5 + 1;
  return result;
}

//----- (8003864C) --------------------------------------------------------
int __fastcall sub_8003864C(_DWORD *a1, __int16 a2)
{
  _DWORD *v2; // $v0

  if ( (a2 & 0xE00) == 0xE00 )
  {
    if ( (a2 & 0xFFF) == 0xE1F )
    {
      v2 = (_DWORD *)(a1[47] - 4);
      a1[47] = v2;
    }
    else
    {
      v2 = &a1[(a2 & 0x1FF) + 16];
    }
  }
  else
  {
    v2 = (_DWORD *)sub_80035410(a1, a2 & 0xFFF);
  }
  return ((int (__fastcall *)(_DWORD))unk_8006F514)(*v2);
}

//----- (800386BC) --------------------------------------------------------
int __fastcall sub_800386BC(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s2
  unsigned int v4; // $a2
  _DWORD *v5; // $s0
  _DWORD *v6; // $v0
  int result; // $v0

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (_DWORD *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (_DWORD *)sub_80035410(a1, v4);
  }
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      v6 = (_DWORD *)(a1[47] - 4);
      a1[47] = v6;
    }
    else
    {
      v6 = &a1[(v3 & 0x1FF) + 16];
    }
  }
  else
  {
    v6 = (_DWORD *)sub_80035410(a1, v3 & 0xFFF);
  }
  result = ((int (__fastcall *)(_DWORD, _DWORD))unk_8006ECF4)(*v6, *v5);
  a1[53] = result;
  return result;
}

//----- (800387A8) --------------------------------------------------------
int __fastcall sub_800387A8(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s2
  unsigned int v4; // $a2
  _DWORD *v5; // $s1
  _DWORD *v6; // $a2
  int v7; // $v1
  int v8; // $t0
  int v9; // $a1

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (_DWORD *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (_DWORD *)sub_80035410(a1, v4);
  }
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      v6 = (_DWORD *)(a1[47] - 4);
      a1[47] = v6;
    }
    else
    {
      v6 = &a1[(v3 & 0x1FF) + 16];
    }
  }
  else
  {
    v6 = (_DWORD *)sub_80035410(a1, v3 & 0xFFF);
  }
  v7 = a1[47];
  a1[47] = v7 - 4;
  v8 = *(_DWORD *)(a1[3] + 36);
  v9 = 4 * (*(_DWORD *)(v7 - 4) >> 8);
  a1[47] = v7 - 8;
  return ((int (__fastcall *)(_DWORD, int, _DWORD, _DWORD))unk_8006F21C)(*(_DWORD *)(v7 - 8), v8 + v9, *v6, *v5);
}

//----- (800388C8) --------------------------------------------------------
int __fastcall sub_800388C8(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s2
  unsigned int v4; // $a2
  int result; // $v0
  _DWORD *v6; // $v1

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
      a1[47] -= 4;
  }
  else
  {
    sub_80035410(a1, v4);
  }
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
      a1[47] -= 4;
  }
  else
  {
    sub_80035410(a1, v3 & 0xFFF);
  }
  sub_800450D4();
  v6 = (_DWORD *)a1[47];
  *v6 = result;
  a1[47] = v6 + 1;
  return result;
}
// 800389A4: variable 'result' is possibly undefined

//----- (800389C8) --------------------------------------------------------
int __fastcall sub_800389C8(_DWORD *a1, unsigned int a2)
{
  __int16 v3; // $s0
  unsigned int v4; // $a2
  _DWORD *v5; // $s3
  int *v6; // $s0
  int v7; // $s2
  int v8; // $v0
  int v9; // $s1
  int v10; // $v0
  int result; // $v0

  v3 = a2;
  v4 = (a2 >> 12) & 0xFFF;
  if ( ((a2 >> 12) & 0xE00) == 0xE00 )
  {
    if ( v4 == 3615 )
    {
      v5 = (_DWORD *)(a1[47] - 4);
      a1[47] = v5;
    }
    else
    {
      v5 = &a1[((a2 >> 12) & 0x1FF) + 16];
    }
  }
  else
  {
    v5 = (_DWORD *)sub_80035410(a1, v4);
  }
  if ( (v3 & 0xE00) == 0xE00 )
  {
    if ( (v3 & 0xFFF) == 0xE1F )
    {
      v6 = (int *)(a1[47] - 4);
      a1[47] = v6;
    }
    else
    {
      v6 = &a1[(v3 & 0x1FF) + 16];
    }
  }
  else
  {
    v6 = (int *)sub_80035410(a1, v3 & 0xFFF);
  }
  v7 = *v6 >> 8;
  if ( *v6 < 0 )
    v7 = -*v6 >> 8;
  v8 = v6[2];
  if ( v8 < 0 )
    v8 = -v8;
  v9 = v8 >> 8;
  v5[1] = sub_8004F794(*v6, v6[2]);
  v10 = sub_8003D9DC(v7 * v7 + v9 * v9);
  result = sub_8004F794(v6[1], v10 << 8);
  *v5 = 1024 - result;
  v5[2] = 0;
  return result;
}

//----- (80038B40) --------------------------------------------------------
int __fastcall sub_80038B40(int a1, int a2, int a3)
{
  int v3; // $s0
  int v4; // $s3
  int v5; // $s4
  int v6; // $s6
  int v7; // $s7
  int v8; // $fp
  int v9; // $a0
  bool v10; // dc
  int v11; // $a0
  unsigned int v12; // $a0
  int result; // $v0
  int v14; // $a0
  int v15; // $a0
  int v16; // $a0
  int v17; // $a0
  unsigned int v18; // $a0
  int v19; // $a0

  v9 = a1 << 20;
  v10 = v9 < 0;
  v11 = 2 * v9;
  if ( v10 )
  {
    v10 = v11 < 0;
    v14 = 2 * v11;
    if ( v10 )
    {
      v10 = v14 < 0;
      v18 = (unsigned int)v14 >> 20;
      if ( v10 )
      {
        if ( v18 == 2172 )
          return v6 - 4;
        else
          return v3 + v18 - 1984;
      }
      else
      {
        result = *(_DWORD *)(((v18 >> 6) & 0x1C) + v3 + 64);
        v19 = v18 & 0xFC;
        if ( result )
          result += v19 + 64;
      }
    }
    else
    {
      v10 = v14 < 0;
      v15 = 2 * v14;
      if ( v10 )
      {
        v10 = v15 < 0;
        v16 = 2 * v15;
        if ( v10 )
        {
          v10 = v16 < 0;
          v17 = 2 * v16;
          if ( v10 )
            return (v17 & 0x20000000) != 0;
          else
            return v7 + (v17 >> 23);
        }
        else
        {
          result = v8 + a3;
          *(_DWORD *)(v8 + a3) = v16 >> 20;
        }
      }
      else
      {
        result = v8 + a3;
        *(_DWORD *)(v8 + a3) = v15 >> 15;
      }
    }
  }
  else
  {
    v10 = v11 < 0;
    v12 = (unsigned int)v11 >> 19;
    if ( v10 )
      return v4 + (v12 & 0xFFC);
    else
      return v5 + (v12 & 0xFFC);
  }
  return result;
}
// 80038B5C: variable 'v5' is possibly undefined
// 80038B68: variable 'v4' is possibly undefined
// 80038B80: variable 'v8' is possibly undefined
// 80038BB4: variable 'v7' is possibly undefined
// 80038BE0: variable 'v3' is possibly undefined
// 80038C14: variable 'v6' is possibly undefined

//----- (80038C24) --------------------------------------------------------
int __fastcall sub_80038C24(int a1)
{
  int v1; // $s0
  int v2; // $s6
  int v3; // $s7
  bool v4; // dc
  int v5; // $a0
  int result; // $v0
  unsigned int v7; // $a0
  int v8; // $a0

  v4 = a1 < 0;
  v5 = 2 * a1;
  if ( !v4 )
    return v3 + ((8 * v5) >> 23);
  v4 = v5 < 0;
  v7 = (unsigned int)v5 >> 20;
  if ( v4 )
  {
    result = v2;
    if ( v7 != 2172 )
      return v1 + v7 - 1984;
  }
  else
  {
    result = *(_DWORD *)(((v7 >> 6) & 0x1C) + v1 + 64);
    v8 = v7 & 0xFC;
    if ( result )
      result += v8 + 64;
  }
  return result;
}
// 80038C38: variable 'v3' is possibly undefined
// 80038C54: variable 'v1' is possibly undefined
// 80038C7C: variable 'v2' is possibly undefined

//----- (80038C94) --------------------------------------------------------
int __fastcall sub_80038C94(int a1)
{
  int v1; // $s0
  int v2; // $s3
  int v3; // $s4
  int v4; // $s6
  int v5; // $s7
  int v6; // $a0
  bool v7; // dc
  int v8; // $a0
  unsigned int v9; // $a0
  int result; // $v0
  int v11; // $a0
  int v12; // $a0
  int v13; // $a0
  int v14; // $a0
  unsigned int v15; // $a0
  int v16; // $a0

  v6 = a1 << 20;
  v7 = v6 < 0;
  v8 = 2 * v6;
  if ( v7 )
  {
    v7 = v8 < 0;
    v11 = 2 * v8;
    if ( v7 )
    {
      v7 = v11 < 0;
      v15 = (unsigned int)v11 >> 20;
      if ( v7 )
      {
        if ( v15 == 2172 )
          return *(_DWORD *)(v4 - 4);
        else
          return *(_DWORD *)(v1 + v15 - 1984);
      }
      else
      {
        result = *(_DWORD *)(((v15 >> 6) & 0x1C) + v1 + 64);
        v16 = v15 & 0xFC;
        if ( result )
          return *(_DWORD *)(result + v16 + 64);
      }
    }
    else
    {
      v7 = v11 < 0;
      v12 = 2 * v11;
      if ( v7 )
      {
        v7 = v12 < 0;
        v13 = 2 * v12;
        if ( v7 )
        {
          v7 = v13 < 0;
          v14 = 2 * v13;
          if ( v7 )
            return (v14 & 0x20000000) != 0;
          else
            return *(_DWORD *)(v5 + (v14 >> 23));
        }
        else
        {
          return v13 >> 20;
        }
      }
      else
      {
        return v12 >> 15;
      }
    }
  }
  else
  {
    v7 = v8 < 0;
    v9 = (unsigned int)v8 >> 19;
    if ( v7 )
      return *(_DWORD *)(v2 + (v9 & 0xFFC));
    else
      return *(_DWORD *)(v3 + (v9 & 0xFFC));
  }
  return result;
}
// 80038CAC: variable 'v3' is possibly undefined
// 80038CC0: variable 'v2' is possibly undefined
// 80038D04: variable 'v5' is possibly undefined
// 80038D3C: variable 'v1' is possibly undefined
// 80038D6C: variable 'v4' is possibly undefined

//----- (80038D88) --------------------------------------------------------
int __fastcall sub_80038D88(int a1)
{
  int v1; // $s0
  int v2; // $s6

  if ( a1 == 31 )
    return v2 - 4;
  else
    return v1 + 4 * a1 + 64;
}
// 80038D9C: variable 'v2' is possibly undefined
// 80038DAC: variable 'v1' is possibly undefined

//----- (80038DB0) --------------------------------------------------------
int __fastcall sub_80038DB0(int a1)
{
  int v1; // $s0
  int v2; // $s6

  if ( a1 == 31 )
    return v2;
  else
    return v1 + 4 * a1 + 64;
}
// 80038DBC: variable 'v2' is possibly undefined
// 80038DD4: variable 'v1' is possibly undefined

//----- (80038E28) --------------------------------------------------------
void __fastcall sub_80038E28(int a1)
{
  int *v1; // $s5
  int v2; // $a1

  v1 = *(int **)(a1 + 192);
  v2 = *v1;
  *(_DWORD *)(a1 + 192) = v1 + 1;
  __asm { jr      $a3 }
}

//----- (800391F0) --------------------------------------------------------
void __fastcall sub_800391F0(int a1, unsigned int a2)
{
  _DWORD *v2; // $v0
  int v3; // $a1
  int v4; // $v1

  sub_80038B40(a2 >> 12, a2, 28);
  v2 = (_DWORD *)sub_80038C24(v3 << 21);
  *v2 = v4;
  JUMPOUT(0x80038E80);
}
// 80039208: control flows out of bounds to 80038E80
// 80039204: variable 'v3' is possibly undefined
// 8003920C: variable 'v4' is possibly undefined

//----- (80039494) --------------------------------------------------------
int __fastcall sub_80039494(int a1, unsigned int a2)
{
  int (__fastcall *v2)(int); // $at
  int v3; // $v0
  int v4; // $v1
  int v5; // $a3
  int v6; // $a0

  if ( ((a2 >> 12) & 0xFFF) != 0xBF0 )
    sub_80038C94(a2 >> 12);
  v3 = sub_80038C94(a2);
  if ( v4 - v3 >= 0 )
  {
    v6 = v4;
    if ( v4 - v3 - v5 > 0 )
      return v2(v3 + v5);
  }
  else
  {
    v6 = v4;
    if ( v4 - v3 + v5 < 0 )
      return v2(v3 - v5);
  }
  return v2(v6);
}
// 800394D8: variable 'a2' is possibly undefined
// 800394E0: variable 'v4' is possibly undefined
// 800394E8: variable 'v5' is possibly undefined
// 800394F4: variable 'v2' is possibly undefined

//----- (80039518) --------------------------------------------------------
void __fastcall sub_80039518(int a1, unsigned int a2)
{
  _DWORD *v2; // $s6
  int v3; // $a0

  sub_8003952C(a1, a2);
  *v2 = v3;
  JUMPOUT(0x80038E80);
}
// 80039524: control flows out of bounds to 80038E80
// 80039528: variable 'v3' is possibly undefined
// 80039528: variable 'v2' is possibly undefined

//----- (8003952C) --------------------------------------------------------
int __fastcall sub_8003952C(int a1, unsigned int a2)
{
  int v2; // $fp
  int (__fastcall *v3)(int); // $at
  int v4; // $v0
  int v5; // $v1
  int v6; // $a3
  int v7; // $lo
  int v8; // $a2
  int v9; // $a0
  int v10; // $a3

  if ( ((a2 >> 12) & 0xFFF) != 0xBF0 )
    sub_80038C94(a2 >> 12);
  v4 = sub_80038C94(a2);
  v7 = *(_DWORD *)(v2 + 84) * v6;
  v8 = ((v5 << 20) - (v4 << 20)) >> 20;
  v9 = v8;
  if ( v8 < 0 )
    v9 = -v8;
  v10 = v7 >> 10;
  if ( v9 - (v7 >> 10) <= 0 )
    return v3(v5);
  if ( v8 >= 0 )
    return v3(((_WORD)v4 + (_WORD)v10) & 0xFFF);
  return v3(((_WORD)v4 - (_WORD)v10) & 0xFFF);
}
// 80039564: variable 'a2' is possibly undefined
// 8003956C: variable 'v2' is possibly undefined
// 80039574: variable 'v6' is possibly undefined
// 80039578: variable 'v5' is possibly undefined
// 800395B0: variable 'v3' is possibly undefined

//----- (800395CC) --------------------------------------------------------
void __fastcall sub_800395CC(int a1, unsigned int a2)
{
  _DWORD *v2; // $s6
  int v3; // $a0

  sub_800395E0(a1, a2);
  *v2 = v3;
  JUMPOUT(0x80038E80);
}
// 800395D8: control flows out of bounds to 80038E80
// 800395DC: variable 'v3' is possibly undefined
// 800395DC: variable 'v2' is possibly undefined

//----- (800395E0) --------------------------------------------------------
int __fastcall sub_800395E0(int a1, unsigned int a2)
{
  int (__fastcall *v2)(int); // $at
  int *v3; // $v0
  int v4; // $v1
  int v5; // $a3
  int v6; // $a2
  int v7; // $a0
  int v8; // $a2
  int v9; // $a0

  if ( ((a2 >> 12) & 0xFFF) != 0xBF0 )
    sub_80038C94(a2 >> 12);
  v3 = (int *)sub_80038B40(a2, a2, 24);
  v6 = *v3;
  v7 = *v3 - v4;
  if ( v4 < 0 )
  {
    v8 = v6 - v5;
    if ( v7 - v5 <= 0 )
      v8 = -v4 - v5 - v5;
    v9 = v8;
    if ( v8 > 0 )
      v9 = -v8;
  }
  else
  {
    v8 = v6 + v5;
    if ( v7 + v5 >= 0 )
      v8 = 2 * v5 - v4;
    v9 = v8;
    if ( v8 < 0 )
    {
      *v3 = v8;
      return v2(-v8);
    }
  }
  *v3 = v8;
  return v2(v9);
}
// 8003961C: variable 'a2' is possibly undefined
// 8003962C: variable 'v4' is possibly undefined
// 80039638: variable 'v5' is possibly undefined
// 80039650: variable 'v2' is possibly undefined

//----- (80039684) --------------------------------------------------------
void __fastcall sub_80039684(int a1, unsigned int a2)
{
  int v2; // $s0
  _DWORD *v3; // $s6

  *v3 = *(__int16 *)(((a2 >> 14) & 0x7E) + *(_DWORD *)(((a2 >> 10) & 0x1C) + v2 + 64) + 32);
  JUMPOUT(0x80038E80);
}
// 800396A8: control flows out of bounds to 80038E80
// 8003968C: variable 'v2' is possibly undefined
// 800396AC: variable 'v3' is possibly undefined

//----- (800397CC) --------------------------------------------------------
void sub_800397CC()
{
  ;
}

//----- (80039828) --------------------------------------------------------
void __fastcall sub_80039828(int a1, unsigned int a2)
{
  int *v2; // $s6
  int v3; // $a1
  int *v4; // $v0
  int v5; // $v1

  sub_80038C94(a2 >> 12);
  v4 = (int *)sub_80038B40(v3, v3, 24);
  *v2 = sub_8004F794(*v4, v5);
  JUMPOUT(0x80038E80);
}
// 80039850: control flows out of bounds to 80038E80
// 80039838: variable 'v3' is possibly undefined
// 80039844: variable 'v5' is possibly undefined
// 80039854: variable 'v2' is possibly undefined
// 80061A84: using guessed type int dword_80061A84;
// 80065CB0: using guessed type int dword_80065CB0;
// 80065CB4: using guessed type int dword_80065CB4;
// 80065CB8: using guessed type int dword_80065CB8;
// 80065CBC: using guessed type int dword_80065CBC;
// 80065CC0: using guessed type int dword_80065CC0;
// 80065CC4: using guessed type int dword_80065CC4;
// 80065CC8: using guessed type int dword_80065CC8;
// 80065CCC: using guessed type int dword_80065CCC;

//----- (80039E3C) --------------------------------------------------------
int __fastcall sub_80039E3C(unsigned __int16 *a1, unsigned __int16 *a2, _WORD *a3)
{
  int v3; // $s0
  int v4; // $s1
  int v5; // $s2
  int v6; // $s3
  _WORD *v7; // $s4
  int v8; // $s5
  int v9; // $s6
  int v10; // $s7
  int v11; // $t8
  int v12; // $t9
  int v13; // $k0
  int v14; // $k1
  int v15; // $gp
  int v16; // $fp
  int (*v17)(void); // $ra
  int v18; // $v0
  int v19; // $t5
  unsigned __int16 *v20; // $fp
  __int16 *v21; // $t6
  int v22; // $gp
  _WORD *v23; // $s1
  int v24; // $at
  unsigned __int16 *v25; // $s0
  int v26; // $t3
  int v27; // $t1
  unsigned __int16 *v28; // $t7
  int v29; // $t2
  int v30; // $t0
  int v31; // $v1
  int v32; // $at
  int v33; // $at
  int v34; // $at
  __int16 v35; // $at
  unsigned __int16 *v36; // $t6
  unsigned __int16 *v37; // $t7
  int v38; // $at
  int v39; // $s3
  int v40; // $s4
  __int16 v41; // $at
  _WORD *v42; // $t9
  int v43; // $s3
  __int16 *v44; // $s4
  __int16 *v45; // $s3
  __int16 v46; // $a3
  unsigned __int16 v48; // [sp+0h] [+0h] BYREF
  __int16 v49; // [sp+2h] [+2h] BYREF
  int v50; // [sp+4h] [+4h] BYREF

  MEMORY[0x1F800000] = v3;
  MEMORY[0x1F800004] = v4;
  MEMORY[0x1F800008] = v5;
  MEMORY[0x1F80000C] = v6;
  MEMORY[0x1F800010] = v7;
  MEMORY[0x1F800014] = v8;
  MEMORY[0x1F800018] = v9;
  MEMORY[0x1F80001C] = v10;
  MEMORY[0x1F800020] = v11;
  MEMORY[0x1F800024] = v12;
  MEMORY[0x1F800028] = v13;
  MEMORY[0x1F80002C] = v14;
  MEMORY[0x1F800030] = v15;
  MEMORY[0x1F800034] = &v48;
  MEMORY[0x1F800038] = v16;
  MEMORY[0x1F80003C] = v17;
  v18 = 0;
  v19 = 0;
  v20 = &a1[a1[3] + 2];
  v21 = (__int16 *)(a2 + 2);
  v22 = *a2;
  v23 = a3 + 2;
  v24 = a1[4];
  v25 = a1 + 5;
  v26 = 0;
  if ( (int)(a1 + 5) >= (int)&v48 || (v27 = v24 & 0xFFF, v24 == 0xFFFF) )
    v27 = 16776960;
  else
    v26 = ((unsigned __int16)(v24 & 0xF000) >> 12) + 1;
  if ( v26 > 0 )
    v25 = a1 + 6;
  v28 = (unsigned __int16 *)&v49;
  v29 = 0;
  if ( (int)&v49 >= (int)v20 || (LOWORD(v10) = v48, v30 = v48 & 0xFFF, v48 == 0xFFFF) )
    v30 = 16776960;
  else
    v29 = ((unsigned __int16)(v48 & 0xF000) >> 12) + 1;
  if ( v29 > 0 )
  {
    LOWORD(v10) = v49;
    v28 = (unsigned __int16 *)&v50;
  }
  v31 = 0;
  do
  {
    if ( v31 < v22 && v26 > 0 && v27 - 1 == v31 )
    {
      --v26;
      ++v19;
      ++v31;
      ++v21;
      if ( v26 <= 0 )
      {
        v32 = *v25++;
        v26 = 0;
        if ( (int)v25 >= (int)&v48 || (v27 = v32 & 0xFFF, v32 == 0xFFFF) )
          v27 = 16776960;
        else
          v26 = ((unsigned __int16)(v32 & 0xF000) >> 12) + 1;
        if ( v26 > 0 )
          ++v25;
      }
      else
      {
        ++v25;
      }
    }
    else if ( v29 > 0 && v30 + v19 == v31 )
    {
      *v23++ = v10;
      ++v18;
      if ( --v29 <= 0 )
      {
        v33 = *v28++;
        v29 = 0;
        if ( (int)v28 >= (int)v20 || (LOWORD(v10) = v33, v30 = v33 & 0xFFF, v33 == 0xFFFF) )
          v30 = 16776960;
        else
          v29 = ((unsigned __int16)(v33 & 0xF000) >> 12) + 1;
        if ( v29 > 0 )
          LOWORD(v10) = *v28++;
      }
      else
      {
        LOWORD(v10) = *v28++;
      }
    }
    else if ( v31 < v22 )
    {
      v34 = v27 - v31 - 1;
      if ( v34 >= v30 + v19 - v31 )
        v34 = v30 + v19 - v31;
      if ( v34 >= v22 - v31 - 1 )
        v34 = v22 - v31 - 1;
      if ( v34 >= 2 )
        JUMPOUT(0x8003A660);
      v35 = *v21++;
      *v23++ = v35;
      ++v18;
      ++v31;
    }
  }
  while ( v31 < v22 || v29 > 0 || v26 > 0 );
  v36 = &a1[a1[3] + 2];
  v37 = &a1[*a1 + 2];
  while ( (int)v36 < (int)v37 )
  {
    v38 = *v36++;
    if ( v38 == 0xFFFF )
      break;
    if ( (v38 & 0x8000) != 0 )
    {
      v39 = (unsigned __int16)(v38 & 0x7800) >> 11;
      v40 = v38 & 0x7FF;
      goto LABEL_52;
    }
    if ( (v38 & 0x4000) != 0 )
    {
      v39 = (v38 & 0x1F) + 16;
      v40 = (int)v7 + ((unsigned __int16)(v38 & 0x3FE0) >> 5);
      goto LABEL_52;
    }
    if ( (v38 & 0x2000) != 0 )
    {
      v7 = &a3[(v38 & 0x7FF) + 2];
      *v7 ^= v38 & 0x1800;
    }
    else
    {
      v40 = v38 & 0xFFF;
      v41 = *v36++;
      v39 = v41 & 0xFFF;
LABEL_52:
      v42 = (_WORD *)v40;
      v43 = v39 + 1 + v40;
      v44 = &a3[v40 + 2];
      v45 = &a3[v43 + 2];
      v46 = *v45;
      *v45 = *v44;
      *v44 = v46;
      v7 = v42;
    }
  }
  *a3 = v18;
  return MEMORY[0x1F80003C]();
}
// 8003A0BC: control flows out of bounds to 8003A660
// 80039E3C: variable 'v3' is possibly undefined
// 80039E44: variable 'v4' is possibly undefined
// 80039E48: variable 'v5' is possibly undefined
// 80039E4C: variable 'v6' is possibly undefined
// 80039E50: variable 'v7' is possibly undefined
// 80039E54: variable 'v8' is possibly undefined
// 80039E58: variable 'v9' is possibly undefined
// 80039E5C: variable 'v10' is possibly undefined
// 80039E60: variable 'v11' is possibly undefined
// 80039E64: variable 'v12' is possibly undefined
// 80039E68: variable 'v13' is possibly undefined
// 80039E6C: variable 'v14' is possibly undefined
// 80039E70: variable 'v15' is possibly undefined
// 80039E78: variable 'v16' is possibly undefined
// 80039E7C: variable 'v17' is possibly undefined
// 1F80003C: using guessed type int (*)(void);

//----- (8003A234) --------------------------------------------------------
int __fastcall sub_8003A234(unsigned __int16 *a1, unsigned __int16 *a2, _WORD *a3)
{
  int v3; // $s0
  int v4; // $s1
  int v5; // $s2
  int v6; // $s3
  int v7; // $s4
  int v8; // $s5
  int v9; // $s6
  int v10; // $s7
  int v11; // $t8
  int v12; // $t9
  int v13; // $k0
  int v14; // $k1
  int v15; // $gp
  int v16; // $fp
  int (*v17)(void); // $ra
  unsigned __int16 *v18; // $t6
  unsigned __int16 *v19; // $t7
  int v20; // $at
  int v21; // $s3
  int v22; // $s4
  int v23; // $s4
  __int16 v24; // $at
  int v25; // $s3
  unsigned __int16 *v26; // $s4
  unsigned __int16 *v27; // $s3
  unsigned __int16 v28; // $a3
  int v29; // $v0
  int v30; // $t5
  int v31; // $t4
  unsigned __int16 *v32; // $fp
  unsigned __int16 *v33; // $t6
  int v34; // $gp
  _WORD *v35; // $s1
  int v36; // $at
  unsigned __int16 *v37; // $s0
  int v38; // $t3
  int v39; // $t1
  int v40; // $at
  unsigned __int16 *v41; // $t7
  int v42; // $t2
  int v43; // $t0
  int v44; // $v1
  int v45; // $at
  int v46; // $at
  int v47; // $at
  __int16 v48; // $at
  __int16 v50; // $s2
  int v51; // $s2
  unsigned int v52; // $t9
  int v53; // $s2
  int v54; // $t9
  int v55; // [sp+0h] [+0h] BYREF

  MEMORY[0x1F800000] = v3;
  MEMORY[0x1F800004] = v4;
  MEMORY[0x1F800008] = v5;
  MEMORY[0x1F80000C] = v6;
  MEMORY[0x1F800010] = v7;
  MEMORY[0x1F800014] = v8;
  MEMORY[0x1F800018] = v9;
  MEMORY[0x1F80001C] = v10;
  MEMORY[0x1F800020] = v11;
  MEMORY[0x1F800024] = v12;
  MEMORY[0x1F800028] = v13;
  MEMORY[0x1F80002C] = v14;
  MEMORY[0x1F800030] = v15;
  MEMORY[0x1F800034] = &v55;
  MEMORY[0x1F800038] = v16;
  MEMORY[0x1F80003C] = v17;
  v18 = &a1[*a1 + 1];
  v19 = &a1[a1[3] + 2];
  while ( (int)v18 >= (int)v19 )
  {
    v20 = *v18--;
    if ( v20 != 0xFFFF )
    {
      if ( (v20 & 0x8000) != 0 )
      {
        v21 = (unsigned __int16)(v20 & 0x7800) >> 11;
        v22 = v20 & 0x7FF;
        goto LABEL_13;
      }
      if ( (v20 & 0x4000) != 0 )
      {
        v23 = *v18 & 0x7FF;
        if ( (*v18 & 0xE000) == 0 )
          v23 = *(v18 - 1) & 0xFFF;
        v21 = (v20 & 0x1F) + 16;
        v22 = v23 + ((unsigned __int16)(v20 & 0x3FE0) >> 5);
LABEL_13:
        v25 = v21 + 1 + v22;
        v26 = &a2[v22 + 2];
        v27 = &a2[v25 + 2];
        v28 = *v27;
        *v27 = *v26;
        *v26 = v28;
      }
      else
      {
        if ( (v20 & 0x2000) == 0 )
        {
          v21 = v20 & 0xFFF;
          v24 = *v18--;
          v22 = v24 & 0xFFF;
          goto LABEL_13;
        }
        a2[(v20 & 0x7FF) + 2] ^= v20 & 0x1800;
      }
    }
  }
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v32 = &a1[a1[2] + 2];
  v33 = a2 + 2;
  v34 = *a2;
  v35 = a3 + 2;
  v36 = *v32;
  v37 = v32 + 1;
  v38 = 0;
  if ( (int)(v32 + 1) >= (int)&v55 || (v39 = v36 & 0xFFF, v36 == 0xFFFF) )
    v39 = 16776960;
  else
    v38 = ((unsigned __int16)(v36 & 0xF000) >> 12) + 1;
  if ( v38 > 0 )
    v37 = v32 + 2;
  v40 = a1[4];
  v41 = a1 + 5;
  v42 = 0;
  if ( (int)(a1 + 5) >= (int)v32 || (LOWORD(v10) = a1[4], v43 = v40 & 0xFFF, v40 == 0xFFFF) )
    v43 = 16776960;
  else
    v42 = ((unsigned __int16)(v40 & 0xF000) >> 12) + 1;
  if ( v42 > 0 )
  {
    LOWORD(v10) = *v41;
    v41 = a1 + 6;
  }
  v44 = 0;
  while ( 1 )
  {
    if ( v44 < v34 && v38 > 0 && v39 + v30 == v44 )
    {
      --v38;
      ++v30;
      ++v44;
      ++v33;
      if ( v38 <= 0 )
      {
        v45 = *v37++;
        v38 = 0;
        if ( (int)v37 >= (int)&v55 || (v39 = v45 & 0xFFF, v45 == 0xFFFF) )
          v39 = 16776960;
        else
          v38 = ((unsigned __int16)(v45 & 0xF000) >> 12) + 1;
        if ( v38 > 0 )
          ++v37;
      }
      else
      {
        ++v37;
      }
      goto LABEL_54;
    }
    if ( v42 > 0 && v43 + v30 - v31 - 1 == v44 )
    {
      *v35++ = v10;
      ++v29;
      --v42;
      ++v31;
      if ( v42 <= 0 )
      {
        v46 = *v41++;
        v42 = 0;
        if ( (int)v41 >= (int)v32 || (LOWORD(v10) = v46, v43 = v46 & 0xFFF, v46 == 0xFFFF) )
          v43 = 16776960;
        else
          v42 = ((unsigned __int16)(v46 & 0xF000) >> 12) + 1;
        if ( v42 > 0 )
          LOWORD(v10) = *v41++;
      }
      else
      {
        LOWORD(v10) = *v41++;
      }
      goto LABEL_54;
    }
    if ( v44 < v34 )
      break;
LABEL_54:
    if ( v44 >= v34 && v42 <= 0 && v38 <= 0 )
    {
      *a3 = v29;
      return MEMORY[0x1F80003C]();
    }
  }
  v47 = v39 + v30 - v44;
  if ( v47 >= v43 + v30 - v31 - 1 - v44 )
    v47 = v43 + v30 - v31 - 1 - v44;
  if ( v47 >= v34 - v44 - 1 )
    v47 = v34 - v44 - 1;
  if ( v47 < 2 )
  {
    v48 = *v33++;
    *v35++ = v48;
    ++v29;
    ++v44;
    goto LABEL_54;
  }
  if ( v47 >= 5 )
  {
    if ( ((unsigned __int8)v33 & 3) != 0 )
    {
      if ( ((unsigned __int8)v35 & 3) != 0 )
      {
        v50 = *v33++;
        *v35++ = v50;
        --v47;
        goto LABEL_61;
      }
      while ( (unsigned int)v47 >= 4 )
      {
        if ( (unsigned int)v47 < 5 )
          return ((int (*)(void))((char *)&loc_8003A828 - 10 * (v47 - (v47 & 3))))();
        v54 = *(_DWORD *)(v33 + 1);
        *((_DWORD *)v35 + 1) = *(__int64 *)(v33 + 1) >> 16;
        *(_DWORD *)v35 = (v54 << 16) | HIWORD(*(_DWORD *)(v33 - 1));
        v33 += 4;
        v35 += 4;
        v47 -= 4;
      }
    }
    else if ( ((unsigned __int8)v35 & 3) != 0 )
    {
      while ( (unsigned int)v47 >= 4 )
      {
        if ( (unsigned int)v47 < 5 )
          return ((int (*)(void))((char *)&loc_8003A78C - 10 * (v47 - (v47 & 3))))();
        v52 = *((_DWORD *)v33 + 1);
        *(_DWORD *)(v35 + 3) = ((unsigned __int16)v35[4] << 16) | HIWORD(v52);
        v53 = *(_DWORD *)v33;
        *(_DWORD *)(v35 + 1) = (v52 << 16) | HIWORD(*(_DWORD *)v33);
        *v35 = v53;
        v33 += 4;
        v35 += 4;
        v47 -= 4;
      }
    }
    else
    {
LABEL_61:
      while ( (unsigned int)v47 >= 4 )
      {
        if ( (unsigned int)v47 < 5 )
          return ((int (*)(void))((char *)&loc_8003A6F4 - 4 * (v47 - (v47 & 3))))();
        v51 = *(_DWORD *)v33;
        *((_DWORD *)v35 + 1) = *((_DWORD *)v33 + 1);
        *(_DWORD *)v35 = v51;
        v33 += 4;
        v35 += 4;
        v47 -= 4;
      }
    }
  }
  return ((int (*)(void))((char *)nullsub_4 + 32 * v47))();
}
// 8003A234: variable 'v3' is possibly undefined
// 8003A23C: variable 'v4' is possibly undefined
// 8003A240: variable 'v5' is possibly undefined
// 8003A244: variable 'v6' is possibly undefined
// 8003A248: variable 'v7' is possibly undefined
// 8003A24C: variable 'v8' is possibly undefined
// 8003A250: variable 'v9' is possibly undefined
// 8003A254: variable 'v10' is possibly undefined
// 8003A258: variable 'v11' is possibly undefined
// 8003A25C: variable 'v12' is possibly undefined
// 8003A260: variable 'v13' is possibly undefined
// 8003A264: variable 'v14' is possibly undefined
// 8003A268: variable 'v15' is possibly undefined
// 8003A270: variable 'v16' is possibly undefined
// 8003A274: variable 'v17' is possibly undefined
// 1F80003C: using guessed type int (*)(void);

//----- (8003A864) --------------------------------------------------------
void nullsub_4()
{
  ;
}

//----- (8003A928) --------------------------------------------------------
int __fastcall sub_8003A928(int a1, int a2, unsigned int a3)
{
  __int16 v3; // $at
  int v5; // $at
  int v6; // $at
  unsigned int v7; // $t2
  unsigned int v8; // $at
  unsigned int v9; // $t2
  int v10; // $at
  int v11; // $t2
  unsigned int v12; // $at
  unsigned int v13; // $t2

  if ( (int)a3 >= 5 )
  {
    if ( (a1 & 3) != 0 )
    {
      if ( (a2 & 3) != 0 )
      {
        v3 = *(_WORD *)a1;
        a1 += 2;
        *(_WORD *)a2 = v3;
        a2 += 2;
        --a3;
        goto LABEL_6;
      }
      while ( a3 >= 4 )
      {
        if ( a3 < 9 )
          return ((int (*)(void))((char *)&loc_8003AB48 - 10 * (a3 - (a3 & 3))))();
        v11 = *(_DWORD *)(a1 + 10);
        *(_DWORD *)(a2 + 12) = *(__int64 *)(a1 + 10) >> 16;
        v12 = *(_DWORD *)(a1 + 6);
        *(_DWORD *)(a2 + 8) = (v11 << 16) | HIWORD(v12);
        v13 = *(_DWORD *)(a1 + 2);
        *(_DWORD *)(a2 + 4) = (v12 << 16) | HIWORD(v13);
        *(_DWORD *)a2 = (v13 << 16) | HIWORD(*(_DWORD *)(a1 - 2));
        a1 += 16;
        a2 += 16;
        a3 -= 8;
      }
    }
    else if ( (a2 & 3) != 0 )
    {
      while ( a3 >= 4 )
      {
        if ( a3 < 9 )
          return ((int (*)(void))((char *)&loc_8003AA84 - 10 * (a3 - (a3 & 3))))();
        v7 = *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a2 + 14) = (*(unsigned __int16 *)(a2 + 16) << 16) | HIWORD(v7);
        v8 = *(_DWORD *)(a1 + 8);
        *(_DWORD *)(a2 + 10) = (v7 << 16) | HIWORD(v8);
        v9 = *(_DWORD *)(a1 + 4);
        *(_DWORD *)(a2 + 6) = (v8 << 16) | HIWORD(v9);
        v10 = *(_DWORD *)a1;
        *(_DWORD *)(a2 + 2) = (v9 << 16) | HIWORD(*(_DWORD *)a1);
        *(_WORD *)a2 = v10;
        a1 += 16;
        a2 += 16;
        a3 -= 8;
      }
    }
    else
    {
LABEL_6:
      while ( a3 >= 4 )
      {
        if ( a3 < 9 )
          return ((int (__fastcall *)(int, int))((char *)&loc_8003A9C4 - 4 * (a3 - (a3 & 3))))(a1, a2);
        v5 = *(_DWORD *)(a1 + 8);
        *(_DWORD *)(a2 + 12) = *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a2 + 8) = v5;
        v6 = *(_DWORD *)a1;
        *(_DWORD *)(a2 + 4) = *(_DWORD *)(a1 + 4);
        *(_DWORD *)a2 = v6;
        a1 += 16;
        a2 += 16;
        a3 -= 8;
      }
    }
  }
  return ((int (*)(void))((char *)nullsub_5 + 32 * a3))();
}

//----- (8003AB7C) --------------------------------------------------------
void nullsub_5()
{
  ;
}

//----- (8003AC44) --------------------------------------------------------
void __fastcall sub_8003AC44(unsigned int a1, unsigned int a2)
{
  int v2; // $at
  int i; // $a1
  int v4; // $at

  v2 = a1 & 0xFFFFFF;
  for ( i = (a2 >> 6) - 1; ; --i )
  {
    v4 = v2 + 4;
    *(_DWORD *)a1 = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 4) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 8) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 12) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 16) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 20) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 24) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 28) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 32) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 36) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 40) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 44) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 48) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 52) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 56) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 60) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 64) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 68) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 72) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 76) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 80) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 84) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 88) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 92) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 96) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 100) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 104) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 108) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 112) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 116) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 120) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 124) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 128) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 132) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 136) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 140) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 144) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 148) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 152) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 156) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 160) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 164) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 168) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 172) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 176) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 180) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 184) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 188) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 192) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 196) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 200) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 204) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 208) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 212) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 216) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 220) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 224) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 228) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 232) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 236) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 240) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 244) = v4;
    v4 += 4;
    *(_DWORD *)(a1 + 248) = v4;
    v2 = v4 + 4;
    *(_DWORD *)(a1 + 252) = v2;
    a1 += 256;
    if ( !i )
      break;
  }
  *(_DWORD *)(a1 - 4) = 0xFFFFFF;
}

//----- (8003AE70) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_8003AE70()
{
  int result; // $v0

  result = 1;
  dword_8003AE8C = 1;
  return result;
}
// 8003AE88: write access to const memory at 8003AE8C has been detected
// 8003AE8C: using guessed type int dword_8003AE8C;

//----- (8003AE90) --------------------------------------------------------
int __fastcall sub_8003AE90(int a1, int a2)
{
  if ( a1 < 0 )
    a1 = -a1;
  if ( a2 < 0 )
    a2 = -a2;
  return (a1 * (__int64)a1 + a2 * (__int64)a2) >> 1;
}

//----- (8003AEE8) --------------------------------------------------------
int __fastcall sub_8003AEE8(int a1, int a2, int a3)
{
  if ( a1 < 0 )
    a1 = -a1;
  if ( a2 < 0 )
    a2 = -a2;
  if ( a3 < 0 )
    a3 = -a3;
  return (a1 * (__int64)a1 + a2 * (__int64)a2 + a3 * (__int64)a3) >> 20;
}

//----- (8003AF78) --------------------------------------------------------
int __fastcall sub_8003AF78(int *a1, int *a2, _WORD *a3, int a4)
{
  int v4; // $s0
  int v5; // $s1
  int v6; // $s2
  int v7; // $s3
  int v8; // $s4
  int v9; // $s5
  int v10; // $s6
  int v11; // $s7
  int v12; // $t8
  int v13; // $t9
  int v14; // $k0
  int v15; // $k1
  int v16; // $gp
  int v17; // $fp
  int (*v18)(void); // $ra
  int v19; // $s6
  int v20; // $t0
  int v21; // $t1
  int v22; // $t5
  int v23; // $t6
  int v24; // $t7
  int v25; // $s0
  int v26; // $s1
  int v27; // $s2
  unsigned __int16 v28; // $v1
  int v29; // $s3
  int v30; // $s4
  int v31; // $s5
  _WORD *v32; // $a2
  int *v33; // $a2
  unsigned int v34; // $t5
  unsigned int v35; // $t6
  unsigned int v36; // $t7
  int v37; // $a3
  int v39; // [sp+0h] [+0h] BYREF

  MEMORY[0x1F800000] = v4;
  MEMORY[0x1F800004] = v5;
  MEMORY[0x1F800008] = v6;
  MEMORY[0x1F80000C] = v7;
  MEMORY[0x1F800010] = v8;
  MEMORY[0x1F800014] = v9;
  MEMORY[0x1F800018] = v10;
  MEMORY[0x1F80001C] = v11;
  MEMORY[0x1F800020] = v12;
  MEMORY[0x1F800024] = v13;
  MEMORY[0x1F800028] = v14;
  MEMORY[0x1F80002C] = v15;
  MEMORY[0x1F800030] = v16;
  MEMORY[0x1F800034] = &v39;
  MEMORY[0x1F800038] = v17;
  MEMORY[0x1F80003C] = v18;
  v19 = *a2;
  v20 = a2[1];
  v21 = a2[2];
  v22 = *a1;
  v23 = a1[1];
  v24 = a1[2];
  v25 = a1[3];
  v26 = a1[4];
  v27 = a1[5];
  v28 = *((_WORD *)a1 + 14);
  v29 = *((unsigned __int16 *)a1 + 15);
  v30 = *((unsigned __int16 *)a1 + 16);
  v31 = *((unsigned __int16 *)a1 + 17);
  *a3 = 0;
  a3[1] = v25;
  a3[2] = v26;
  a3[3] = v27;
  v32 = a3 + 4;
  *v32 = 0;
  v32[1] = v29;
  v32[2] = v30;
  v32[3] = v31;
  v33 = (int *)(v32 + 4);
  v34 = (v22 << 8) - v19;
  v35 = (v23 << 8) - v20;
  v36 = (v24 << 8) - v21;
  v37 = a4 + 2;
  if ( v28 )
  {
    if ( (v28 & 1) == 0 )
      return ((int (__fastcall *)(int *, char *, int *, int))((char *)&loc_8003B0FC
                                                            + 8 * ((v29 > 0) | (2 * (v30 > 0)) | (4 * (v31 > 0)))
                                                            - 8))(
               a1,
               (char *)a1 + v28,
               v33,
               v37);
    if ( v37 < 512 )
    {
      *v33 = (4 * v28) & 0xFFF8 | (v34 >> 4 << 16);
      v33[1] = (v36 >> 4 << 16) | (unsigned __int16)(v35 >> 4);
    }
  }
  return ((int (*)(void))loc_8003B150)();
}
// 8003AF78: variable 'v4' is possibly undefined
// 8003AF80: variable 'v5' is possibly undefined
// 8003AF84: variable 'v6' is possibly undefined
// 8003AF88: variable 'v7' is possibly undefined
// 8003AF8C: variable 'v8' is possibly undefined
// 8003AF90: variable 'v9' is possibly undefined
// 8003AF94: variable 'v10' is possibly undefined
// 8003AF98: variable 'v11' is possibly undefined
// 8003AF9C: variable 'v12' is possibly undefined
// 8003AFA0: variable 'v13' is possibly undefined
// 8003AFA4: variable 'v14' is possibly undefined
// 8003AFA8: variable 'v15' is possibly undefined
// 8003AFAC: variable 'v16' is possibly undefined
// 8003AFB4: variable 'v17' is possibly undefined
// 8003AFB8: variable 'v18' is possibly undefined
// 1F80003C: using guessed type int (*)(void);
// 8003B874: using guessed type int sub_8003B874(void);

//----- (8003B874) --------------------------------------------------------
int __fastcall sub_8003B874(
        unsigned int *a1,
        int *a2,
        int a3,
        int (__fastcall *a4)(_DWORD),
        int a5,
        int a6,
        int a7,
        int a8)
{
  int v8; // $s0
  int v9; // $s1
  int v10; // $s2
  int v11; // $s3
  unsigned int v12; // $s4
  unsigned int v13; // $s5
  unsigned int v14; // $s6
  int v15; // $s7
  int v16; // $t8
  int v17; // $t9
  int v18; // $k0
  int v19; // $k1
  int v20; // $gp
  int v21; // $fp
  int (*v22)(void); // $ra
  int v23; // $gp
  int v24; // $fp
  int v25; // $t3
  int v26; // $t5
  int v27; // $t4
  int v28; // $a1
  unsigned int v29; // $at
  unsigned int v30; // $v0
  int v31; // $t0
  int v32; // $t6
  int v33; // $t7
  int v34; // $s0
  unsigned int v35; // $at
  unsigned int v36; // $s1
  unsigned int v37; // $at
  int v38; // $s2
  unsigned int v39; // $at
  unsigned int v40; // $s3
  unsigned int v41; // $v1
  unsigned int v42; // $v0
  int v43; // $t6
  int v44; // $s1
  int v45; // $s0
  int v46; // $s3
  int v47; // $t7
  int v48; // $s2
  int v49; // $a2
  int v50; // $t6
  int v51; // $s0
  int v53; // [sp+0h] [+0h] BYREF

  MEMORY[0x1F800000] = v8;
  MEMORY[0x1F800004] = v9;
  MEMORY[0x1F800008] = v10;
  MEMORY[0x1F80000C] = v11;
  MEMORY[0x1F800010] = v12;
  MEMORY[0x1F800014] = v13;
  MEMORY[0x1F800018] = v14;
  MEMORY[0x1F80001C] = v15;
  MEMORY[0x1F800020] = v16;
  MEMORY[0x1F800024] = v17;
  MEMORY[0x1F800028] = v18;
  MEMORY[0x1F80002C] = v19;
  MEMORY[0x1F800030] = v20;
  MEMORY[0x1F800034] = &v53;
  MEMORY[0x1F800038] = v21;
  MEMORY[0x1F80003C] = v22;
  v23 = a5;
  v24 = a7;
  v25 = a8;
  v26 = a2[2];
  v27 = a2[1];
  v28 = *a2;
  while ( 1 )
  {
    v29 = *a1;
    v30 = a1[1];
    if ( (unsigned __int16)*a1 == 0xFFFF )
      return MEMORY[0x1F80003C]();
    if ( (unsigned __int16)*a1 )
    {
      v31 = *a1 & 7;
      v32 = v28 + ((int)(HIWORD(v29) << 16) >> 12);
      v33 = v27 + 16 * (__int16)v30;
      v34 = v26 + ((int)(HIWORD(v30) << 16) >> 12);
      v35 = v12 >> v15;
      if ( v15 >= v31 )
        v35 = v12 >> v31;
      v36 = v32 + v35;
      v37 = v13 >> v16;
      if ( v16 >= v31 )
        v37 = v13 >> v31;
      v38 = v33 + v37;
      v39 = v14 >> v17;
      if ( v17 >= v31 )
        v39 = v14 >> v31;
      v40 = v34 + v39;
      v41 = (((*a1 & 0xFFF8) >> 2) & 0xE) >> 1;
      v42 = (((*a1 & 0xFFF8) >> 2) & 0x3F0) >> 4;
      if ( v41 != 3 && v41 != 4 )
      {
        if ( v41 == 1 || v41 == 5 )
        {
          if ( (int)a4 >= v38 || v33 >= (int)&v53 )
            goto LABEL_53;
        }
        else if ( v41 == 6 )
        {
          if ( v33 >= (int)a4 || v23 >= v38 )
            goto LABEL_53;
        }
        else if ( v42 && v42 < 0x1B && !a3 || v23 >= v38 || v33 >= (int)&v53 )
        {
          goto LABEL_53;
        }
        MEMORY[0x1F8000E0] = a3;
        MEMORY[0x1F8000E4] = a4;
        v43 = (4 * (v32 - v24)) >> 13;
        v44 = (int)(4 * (v36 - v24)) >> 13;
        v45 = (4 * (v34 - v25)) >> 13;
        v46 = (int)(4 * (v40 - v25)) >> 13;
        v47 = v43;
        v48 = v45;
        v49 = -32;
        if ( v45 > -32 && v45 < 32 )
        {
          while ( 1 )
          {
            if ( v49 < v43 )
            {
              if ( v43 >= 32 || v43 >= v44 )
                break;
              sub_8003BBFC((int)a1, v28, v49, v45);
            }
            v43 += 8;
          }
        }
        v50 = v44;
        if ( v49 < v44 && v44 < 32 )
        {
          while ( 1 )
          {
            if ( v49 < v45 )
            {
              if ( v45 >= 32 || v45 >= v46 )
                break;
              sub_8003BBFC((int)a1, v28, v49, v45);
            }
            v45 += 8;
          }
        }
        v51 = v46;
        if ( v49 < v46 && v46 < 32 )
        {
          while ( 1 )
          {
            if ( v50 < 32 )
            {
              if ( v49 >= v50 || v47 >= v50 )
                break;
              sub_8003BBFC((int)a1, v28, v49, v46);
            }
            v50 -= 8;
          }
        }
        if ( v47 < 32 && v49 < v47 )
        {
          while ( 1 )
          {
            if ( v51 < 32 )
            {
              if ( v49 >= v51 || v48 >= v51 )
                break;
              sub_8003BBFC((int)a1, v28, v49, v51);
            }
            v51 -= 8;
          }
        }
        a3 = MEMORY[0x1F8000E0];
        a4 = MEMORY[0x1F8000E4];
      }
LABEL_53:
      a1 += 2;
    }
    else
    {
      v12 = HIWORD(v29) << 8;
      v13 = (unsigned __int16)a1[1] << 8;
      v14 = HIWORD(v30) << 8;
      v15 = HIWORD(a1[2]);
      v16 = (unsigned __int16)a1[3];
      v17 = HIWORD(a1[3]);
      a1 += 4;
    }
  }
}
// 8003B874: variable 'v8' is possibly undefined
// 8003B87C: variable 'v9' is possibly undefined
// 8003B880: variable 'v10' is possibly undefined
// 8003B884: variable 'v11' is possibly undefined
// 8003B888: variable 'v12' is possibly undefined
// 8003B88C: variable 'v13' is possibly undefined
// 8003B890: variable 'v14' is possibly undefined
// 8003B894: variable 'v15' is possibly undefined
// 8003B898: variable 'v16' is possibly undefined
// 8003B89C: variable 'v17' is possibly undefined
// 8003B8A0: variable 'v18' is possibly undefined
// 8003B8A4: variable 'v19' is possibly undefined
// 8003B8A8: variable 'v20' is possibly undefined
// 8003B8B0: variable 'v21' is possibly undefined
// 8003B8B4: variable 'v22' is possibly undefined
// 8003B95C: variable 'v28' is possibly undefined
// 8003B960: variable 'v27' is possibly undefined
// 8003B964: variable 'v26' is possibly undefined
// 8003B9F8: variable 'v23' is possibly undefined
// 8003BA6C: variable 'v25' is possibly undefined
// 8003BAA4: variable 'v49' is possibly undefined
// 8003BABC: variable 'a1' is possibly undefined
// 8003BAC8: variable 'v43' is possibly undefined
// 8003BB24: variable 'v50' is possibly undefined
// 8003BB34: variable 'v47' is possibly undefined
// 1F80003C: using guessed type int (*)(void);
// 1F8000E4: using guessed type int (__fastcall *)(_DWORD);

//----- (8003BBF0) --------------------------------------------------------
int __fastcall sub_8003BBF0(int a1, int a2, int a3)
{
  return sub_8003BBFC(a1, a2, a3, a2);
}

//----- (8003BBFC) --------------------------------------------------------
int __fastcall sub_8003BBFC(int a1, int a2, int a3, int a4)
{
  int v4; // $v1
  int v5; // $at
  int *v6; // $t0
  int v7; // $t1
  int result; // $v0
  int v9; // $t1
  int v10; // $t2
  int *v11; // $t0
  int i; // $v1
  int v13; // $at
  int v14; // $at

  v5 = a4 + 32;
  if ( v4 >= 0 )
  {
    v6 = (int *)(8 * v5 + 528482692);
    v7 = *(_DWORD *)(8 * v5 + 0x1F800184);
    result = 1 << v4;
  }
  else
  {
    v6 = (int *)(8 * v5 + 528482688);
    v7 = *(_DWORD *)(8 * v5 + 0x1F800180);
    result = 1 << (v4 + 32);
  }
  if ( (result & v7) == 0 )
  {
    *v6 = result | v7;
    v9 = 0;
    if ( a4 >= 0 )
    {
      v10 = 32 - a4;
    }
    else
    {
      v9 = -a4;
      v10 = 32;
    }
    if ( a4 < 0 )
      a4 = 0;
    result = 528482560;
    v11 = (int *)(4 * a4 + 528482560);
    if ( v4 >= 0 )
    {
      while ( 1 )
      {
        v14 = 4 * v9;
        if ( v9 >= v10 )
          break;
        ++v9;
        result = *v11;
        *v11++ |= *(_DWORD *)(v14 + 528483200) >> v4;
      }
    }
    else
    {
      for ( i = -v4; v9 < v10; ++v11 )
      {
        v13 = 4 * v9++;
        result = *v11;
        *v11 |= *(_DWORD *)(v13 + 528483200) << i;
      }
    }
  }
  return result;
}
// 8003BBFC: variable 'v4' is possibly undefined

//----- (8003BD18) --------------------------------------------------------
int __fastcall sub_8003BD18(
        int a1,
        unsigned int *a2,
        int a3,
        int *a4,
        int a5,
        int a6,
        int a7,
        int (__fastcall *a8)(_DWORD))
{
  int v8; // $s0
  int v9; // $s1
  int v10; // $s2
  int v11; // $s3
  unsigned int v12; // $s4
  unsigned int v13; // $s5
  unsigned int v14; // $s6
  int v15; // $s7
  int v16; // $t8
  int v17; // $t9
  int v18; // $k0
  int v19; // $k1
  int v20; // $gp
  int v21; // $fp
  int (*v22)(void); // $ra
  int v23; // $v1
  int v25; // $fp
  int v26; // $ra
  int v27; // $t6
  int v28; // $t7
  int v29; // $s0
  int v30; // $s1
  int v31; // $s2
  int v32; // $s3
  int v33; // $a3
  int v34; // $a2
  int v35; // $at
  int v36; // $t1
  unsigned int v37; // $a0
  unsigned int v38; // $v0
  unsigned int v39; // $a1
  unsigned int v40; // $t0
  int v41; // $gp
  char *v42; // $t3
  int v43; // $t4
  int v44; // $t5
  unsigned int v45; // $a0
  char *v46; // $t3
  unsigned int v47; // $a0
  int v48; // $t4
  unsigned int v49; // $a0
  int v50; // $t5
  unsigned int v51; // $a0
  bool v52; // dc
  BOOL v53; // $a0
  int v54; // $v0
  int v55; // $t2
  int v56; // $a0
  int v58; // [sp+0h] [+0h] BYREF

  MEMORY[0x1F800000] = v8;
  MEMORY[0x1F800004] = v9;
  MEMORY[0x1F800008] = v10;
  MEMORY[0x1F80000C] = v11;
  MEMORY[0x1F800010] = v12;
  MEMORY[0x1F800014] = v13;
  MEMORY[0x1F800018] = v14;
  MEMORY[0x1F80001C] = v15;
  MEMORY[0x1F800020] = v16;
  MEMORY[0x1F800024] = v17;
  MEMORY[0x1F800028] = v18;
  MEMORY[0x1F80002C] = v19;
  MEMORY[0x1F800030] = v20;
  MEMORY[0x1F800034] = &v58;
  MEMORY[0x1F800038] = v21;
  MEMORY[0x1F80003C] = v22;
  MEMORY[0x1F8000EC] = a1;
  v23 = a5;
  v25 = *(_DWORD *)(a3 + 4);
  v26 = *(_DWORD *)(a3 + 8);
  v27 = *a4;
  v28 = a4[1];
  v29 = a4[2];
  v30 = a4[3];
  v31 = a4[4];
  v32 = a4[5];
  MEMORY[0x1F8000E0] = a7;
  MEMORY[0x1F8000E4] = a8;
  MEMORY[0x1F8000E8] = a6;
  v33 = 0;
  v34 = 0;
  v35 = 0;
  v36 = 0;
  while ( 1 )
  {
    v37 = *a2;
    v38 = a2[1];
    if ( (unsigned __int16)*a2 == 0xFFFF )
      break;
    if ( (unsigned __int16)*a2 )
    {
      v39 = ((*a2 & 0xFFF8) >> 2) | 1;
      v40 = ((*a2 & 0xFFF8) >> 2) & 0xE;
      v41 = *a2 & 7;
      v42 = (char *)&v58 + ((int)(HIWORD(v37) << 16) >> 12);
      v43 = v25 + 16 * (__int16)v38;
      v44 = v26 + ((int)(HIWORD(v38) << 16) >> 12);
      if ( v30 >= (int)v42 && v31 >= v43 && v32 >= v44 )
      {
        v45 = v12 >> v15;
        if ( v15 >= v41 )
          v45 = v12 >> v41;
        v46 = &v42[v45];
        v47 = v13 >> v16;
        if ( v16 >= v41 )
          v47 = v13 >> v41;
        v48 = v43 + v47;
        v49 = v14 >> v17;
        if ( v17 >= v41 )
          v49 = v14 >> v41;
        v50 = v44 + v49;
        if ( (int)v46 >= v27 && v48 >= v28 && v50 >= v29 )
        {
          v51 = ((*a2 & 0xFFF8) >> 2) & 0x3F0;
          if ( (((*a2 & 0xFFF8) >> 2) & 0xE) < 4 )
          {
            v52 = v51 == 0;
            v53 = v51 < 0x300;
            if ( v52 || !v53 )
              goto LABEL_23;
          }
          MEMORY[0x1F8000F0] = v35;
          MEMORY[0x1F800070] = v23;
          MEMORY[0x1F800074] = v39;
          MEMORY[0x1F800078] = v34;
          MEMORY[0x1F80007C] = v33;
          MEMORY[0x1F800080] = v40;
          MEMORY[0x1F800084] = v36;
          MEMORY[0x1F800088] = a2;
          MEMORY[0x1F80008C] = v46;
          MEMORY[0x1F800090] = v48;
          MEMORY[0x1F800094] = v50;
          MEMORY[0x1F800098] = v27;
          MEMORY[0x1F80009C] = v28;
          MEMORY[0x1F8000A0] = v26;
          v54 = MEMORY[0x1F8000E4](MEMORY[0x1F8000EC]);
          v23 = MEMORY[0x1F800070];
          v34 = MEMORY[0x1F800078];
          v33 = MEMORY[0x1F80007C];
          v40 = MEMORY[0x1F800080];
          v36 = MEMORY[0x1F800084];
          a2 = (unsigned int *)MEMORY[0x1F800088];
          v48 = MEMORY[0x1F800090];
          v27 = MEMORY[0x1F800098];
          v28 = MEMORY[0x1F80009C];
          v26 = MEMORY[0x1F8000A0];
          v35 = MEMORY[0x1F8000F0];
          if ( !v54 )
          {
LABEL_23:
            if ( v23 >= v48 )
            {
              if ( v40 )
              {
                ++v36;
                v35 += v48;
              }
              else
              {
                ++v34;
                v33 += v48;
              }
            }
          }
        }
      }
      a2 += 2;
    }
    else
    {
      v12 = HIWORD(v37) << 8;
      v13 = (unsigned __int16)a2[1] << 8;
      v14 = HIWORD(v38) << 8;
      v15 = HIWORD(a2[2]);
      v16 = (unsigned __int16)a2[3];
      v17 = HIWORD(a2[3]);
      a2 += 4;
    }
  }
  v55 = MEMORY[0x1F8000E0];
  v56 = MEMORY[0x1F8000E8];
  *(_DWORD *)(MEMORY[0x1F8000E8] + 4) = MEMORY[0x1F8000E0];
  if ( v34 )
    *(_DWORD *)(v56 + 4) = v33 / v34;
  *(_DWORD *)(v56 + 8) = v55;
  if ( v36 )
    *(_DWORD *)(v56 + 8) = v35 / v36;
  return MEMORY[0x1F80003C]();
}
// 8003BD18: variable 'v8' is possibly undefined
// 8003BD20: variable 'v9' is possibly undefined
// 8003BD24: variable 'v10' is possibly undefined
// 8003BD28: variable 'v11' is possibly undefined
// 8003BD2C: variable 'v12' is possibly undefined
// 8003BD30: variable 'v13' is possibly undefined
// 8003BD34: variable 'v14' is possibly undefined
// 8003BD38: variable 'v15' is possibly undefined
// 8003BD3C: variable 'v16' is possibly undefined
// 8003BD40: variable 'v17' is possibly undefined
// 8003BD44: variable 'v18' is possibly undefined
// 8003BD48: variable 'v19' is possibly undefined
// 8003BD4C: variable 'v20' is possibly undefined
// 8003BD54: variable 'v21' is possibly undefined
// 8003BD58: variable 'v22' is possibly undefined
// 1F80003C: using guessed type int (*)(void);
// 1F8000E4: using guessed type int (__fastcall *)(_DWORD);

//----- (8003C04C) --------------------------------------------------------
int __fastcall sub_8003C04C(int a1, unsigned int *a2, int a3, int *a4, int *a5)
{
  int v5; // $s0
  int v6; // $s1
  int v7; // $s2
  int v8; // $s3
  unsigned int v9; // $s4
  unsigned int v10; // $s5
  unsigned int v11; // $s6
  int v12; // $s7
  int v13; // $t8
  int v14; // $t9
  int v15; // $k0
  int v16; // $k1
  int v17; // $gp
  int v18; // $fp
  int (*v19)(void); // $ra
  int v20; // $fp
  int v21; // $ra
  int v22; // $t0
  int v23; // $t6
  int v24; // $t7
  int v25; // $s0
  int v26; // $s1
  int v27; // $s2
  int v28; // $s3
  int v29; // $a3
  int v30; // $a2
  int v31; // $t2
  unsigned int v32; // $at
  unsigned int v33; // $v0
  unsigned int v34; // $t1
  int v35; // $gp
  char *v36; // $t3
  int v37; // $t4
  int v38; // $t5
  int v39; // $v0
  unsigned int v40; // $at
  char *v41; // $t3
  unsigned int v42; // $at
  signed int v43; // $t4
  unsigned int v44; // $at
  int v45; // $t5
  int v47; // [sp+0h] [+0h] BYREF

  MEMORY[0x1F800000] = v5;
  MEMORY[0x1F800004] = v6;
  MEMORY[0x1F800008] = v7;
  MEMORY[0x1F80000C] = v8;
  MEMORY[0x1F800010] = v9;
  MEMORY[0x1F800014] = v10;
  MEMORY[0x1F800018] = v11;
  MEMORY[0x1F80001C] = v12;
  MEMORY[0x1F800020] = v13;
  MEMORY[0x1F800024] = v14;
  MEMORY[0x1F800028] = v15;
  MEMORY[0x1F80002C] = v16;
  MEMORY[0x1F800030] = v17;
  MEMORY[0x1F800034] = &v47;
  MEMORY[0x1F800038] = v18;
  MEMORY[0x1F80003C] = v19;
  v20 = *(_DWORD *)(a3 + 4);
  v21 = *(_DWORD *)(a3 + 8);
  v22 = *a5;
  v23 = *a4;
  v24 = a4[1];
  v25 = a4[2];
  v26 = a4[3];
  v27 = a4[4];
  v28 = a4[5];
  v29 = 0;
  v30 = 0;
  v31 = 0x7FFFFFFF;
  while ( 1 )
  {
    v32 = *a2;
    v33 = a2[1];
    if ( (unsigned __int16)*a2 == 0xFFFF )
      break;
    if ( (unsigned __int16)*a2 )
    {
      v34 = ((*a2 & 0xFFF8) >> 2) & 0xE;
      if ( ((1 << v34) & 0x1405) != 0 )
      {
        v35 = *a2 & 7;
        v36 = (char *)&v47 + ((int)(HIWORD(v32) << 16) >> 12);
        v37 = v20 + 16 * (__int16)v33;
        v38 = v21 + ((int)(HIWORD(v33) << 16) >> 12);
        v39 = v37;
        if ( v26 >= (int)v36 && v27 >= v37 && v28 >= v38 )
        {
          v40 = v9 >> v12;
          if ( v12 >= v35 )
            v40 = v9 >> v35;
          v41 = &v36[v40];
          v42 = v10 >> v13;
          if ( v13 >= v35 )
            v42 = v10 >> v35;
          v43 = v37 + v42;
          v44 = v11 >> v14;
          if ( v14 >= v35 )
            v44 = v11 >> v35;
          v45 = v38 + v44;
          if ( (int)v41 >= v23 && v43 >= v24 && v45 >= v25 )
          {
            ++v30;
            v29 += v39;
            if ( v39 < v31 )
            {
              v31 = v39;
              if ( v34 == 12 && v39 < v22 )
                v22 = v39;
            }
          }
        }
      }
      a2 += 2;
    }
    else
    {
      v9 = HIWORD(v32) << 8;
      v10 = (unsigned __int16)a2[1] << 8;
      v11 = HIWORD(v33) << 8;
      v12 = HIWORD(a2[2]);
      v13 = (unsigned __int16)a2[3];
      v14 = HIWORD(a2[3]);
      a2 += 4;
    }
  }
  *a5 = v22;
  return MEMORY[0x1F80003C]();
}
// 8003C04C: variable 'v5' is possibly undefined
// 8003C054: variable 'v6' is possibly undefined
// 8003C058: variable 'v7' is possibly undefined
// 8003C05C: variable 'v8' is possibly undefined
// 8003C060: variable 'v9' is possibly undefined
// 8003C064: variable 'v10' is possibly undefined
// 8003C068: variable 'v11' is possibly undefined
// 8003C06C: variable 'v12' is possibly undefined
// 8003C070: variable 'v13' is possibly undefined
// 8003C074: variable 'v14' is possibly undefined
// 8003C078: variable 'v15' is possibly undefined
// 8003C07C: variable 'v16' is possibly undefined
// 8003C080: variable 'v17' is possibly undefined
// 8003C088: variable 'v18' is possibly undefined
// 8003C08C: variable 'v19' is possibly undefined
// 1F80003C: using guessed type int (*)(void);

//----- (8003C2F0) --------------------------------------------------------
int __fastcall sub_8003C2F0(__int16 a1)
{
  int v1; // $a0
  int v3; // $v0

  v1 = a1 & 0xFFF;
  if ( v1 >= 2048 )
  {
    v3 = 2 * v1;
    if ( v1 >= 3072 )
      return -*(__int16 *)((char *)&dword_8005C91C[2048] - v3);
    else
      return -*(__int16 *)((char *)&dword_8005C91C[-1024] + v3);
  }
  else if ( v1 >= 1024 )
  {
    return *((__int16 *)&dword_8005C91C[1024] - v1);
  }
  else
  {
    return *((__int16 *)dword_8005C91C + v1);
  }
}
// 8005C91C: using guessed type int dword_8005C91C[512];

//----- (8003C364) --------------------------------------------------------
int __fastcall sub_8003C364(__int16 a1)
{
  int v1; // $a0
  int v2; // $v0
  int v4; // $v0

  v1 = a1 & 0xFFF;
  if ( v1 >= 2048 )
  {
    v4 = 2 * v1;
    if ( v1 >= 3072 )
      return *(__int16 *)((char *)&dword_8005C91C[-1536] + v4);
    else
      return -*(__int16 *)((char *)&dword_8005C91C[1536] - v4);
  }
  else
  {
    v2 = 2 * v1;
    if ( v1 >= 1024 )
      return -*(__int16 *)((char *)&dword_8005C91C[-512] + v2);
    else
      return *(__int16 *)((char *)&dword_8005C91C[512] - v2);
  }
}
// 8005C91C: using guessed type int dword_8005C91C[512];

//----- (8003C3D0) --------------------------------------------------------
int __fastcall sub_8003C3D0(int *a1, _DWORD *a2, int a3, char a4, int *a5, int a6, int a7)
{
  int v7; // $s0
  int v8; // $s1
  int v9; // $s2
  int v10; // $s3
  int v11; // $s4
  int v12; // $s5
  int v13; // $s6
  int v14; // $s7
  int v15; // $t8
  int v16; // $t9
  int v17; // $k0
  int v18; // $k1
  int v19; // $gp
  int v20; // $fp
  int (*v21)(void); // $ra
  int v28; // $s0
  int v29; // $s1
  int v38; // $fp
  unsigned int v39; // $gp
  int v40; // $t6
  int v41; // $t6
  int v43; // $t5
  int v44; // $t7
  int v45; // $t7
  int v47; // $t1
  int v48; // $t1
  int v49; // $t1
  int v50; // $t3
  int v51; // $lo
  int v83; // [sp+0h] [+0h] BYREF

  MEMORY[0x1F800000] = v7;
  MEMORY[0x1F800004] = v8;
  MEMORY[0x1F800008] = v9;
  MEMORY[0x1F80000C] = v10;
  MEMORY[0x1F800010] = v11;
  MEMORY[0x1F800014] = v12;
  MEMORY[0x1F800018] = v13;
  MEMORY[0x1F80001C] = v14;
  MEMORY[0x1F800020] = v15;
  MEMORY[0x1F800024] = v16;
  MEMORY[0x1F800028] = v17;
  MEMORY[0x1F80002C] = v18;
  MEMORY[0x1F800030] = v19;
  MEMORY[0x1F800034] = &v83;
  MEMORY[0x1F800038] = v20;
  MEMORY[0x1F80003C] = v21;
  _$V0 = a6;
  _$T0 = *a5;
  _$T1 = a5[1];
  _$T2 = a5[2];
  _$T3 = a5[3];
  _$T4 = a5[4];
  __asm
  {
    ctc2    $t0, $0
    ctc2    $t1, $1
    ctc2    $t2, $2
    ctc2    $t3, $3
    ctc2    $t4, $4
  }
  v28 = *a1;
  v29 = a1[1];
  if ( a3 )
  {
    _$S0 = v28 >> 8;
    _$S1 = -v29 >> 8;
    __asm
    {
      ctc2    $s0, $5
      ctc2    $s1, $6
    }
    __asm { ctc2    $v0, $7 }
  }
  else
  {
    _$S0 = (v28 - *a2) >> 8;
    _$S1 = (v29 - a2[1]) >> 8;
    _$S2 = (a1[2] - a2[2]) >> 8;
    __asm
    {
      mtc2    $s0, $9
      mtc2    $s1, $10
      mtc2    $s2, $11
    }
    __asm { cop2    0x49E012 }
    __asm
    {
      mfc2    $s0, $9
      mfc2    $s1, $10
      mfc2    $s2, $11
      ctc2    $s0, $5
      ctc2    $s1, $6
      ctc2    $s2, $7
    }
    if ( a6 >= _$S2 || _$S2 > 12000 || a7 && a7 < _$S2 )
      return MEMORY[0x1F80003C]();
  }
  v38 = a1[4] & 0xFFF;
  v39 = a1[5] & 0xFFF;
  if ( v39 >= 0x800 )
  {
    v41 = 2 * v39;
    if ( (a1[5] & 0xFFFu) >= 0xC00 )
      v40 = -*(__int16 *)((char *)&dword_8005C91C[2048] - v41);
    else
      v40 = -*(__int16 *)((char *)&dword_8005C91C[-1024] + v41);
  }
  else if ( (a1[5] & 0xFFFu) >= 0x400 )
  {
    v40 = *((__int16 *)&dword_8005C91C[1024] - v39);
  }
  else
  {
    v40 = *((__int16 *)dword_8005C91C + v39);
  }
  if ( (int)&v83 >= 2048 )
  {
    v43 = 2 * (_DWORD)&v83;
    if ( (int)&v83 >= 3072 )
      _$T5 = -*(__int16 *)((char *)&dword_8005C91C[2048] - v43);
    else
      _$T5 = -*(__int16 *)((char *)&dword_8005C91C[-1024] + v43);
  }
  else if ( (int)&v83 >= 1024 )
  {
    _$T5 = *((__int16 *)&dword_8005C91C[1024] - (_DWORD)&v83);
  }
  else
  {
    _$T5 = *((__int16 *)dword_8005C91C + (_DWORD)&v83);
  }
  if ( (a1[4] & 0xFFFu) >= 0x800 )
  {
    v45 = 2 * v38;
    if ( (a1[4] & 0xFFFu) >= 0xC00 )
      v44 = -*(__int16 *)((char *)&dword_8005C91C[2048] - v45);
    else
      v44 = -*(__int16 *)((char *)&dword_8005C91C[-1024] + v45);
  }
  else if ( (a1[4] & 0xFFFu) >= 0x400 )
  {
    v44 = *((__int16 *)&dword_8005C91C[1024] - v38);
  }
  else
  {
    v44 = *((__int16 *)dword_8005C91C + v38);
  }
  if ( (a1[5] & 0xFFFu) >= 0x800 )
  {
    _$T0 = 2 * v39;
    if ( (a1[5] & 0xFFFu) >= 0xC00 )
      LOWORD(_$T0) = *(_WORD *)((char *)&dword_8005C91C[-1536] + _$T0);
    else
      _$T0 = -*(__int16 *)((char *)&dword_8005C91C[1536] - _$T0);
  }
  else
  {
    _$T0 = 2 * v39;
    if ( (a1[5] & 0xFFFu) >= 0x400 )
      _$T0 = -*(__int16 *)((char *)&dword_8005C91C[-512] + _$T0);
    else
      LOWORD(_$T0) = *(_WORD *)((char *)&dword_8005C91C[512] - _$T0);
  }
  if ( (int)&v83 >= 2048 )
  {
    v49 = 2 * (_DWORD)&v83;
    if ( (int)&v83 >= 3072 )
      v48 = *(__int16 *)((char *)&dword_8005C91C[-1536] + v49);
    else
      v48 = -*(__int16 *)((char *)&dword_8005C91C[1536] - v49);
  }
  else
  {
    v47 = 2 * (_DWORD)&v83;
    if ( (int)&v83 >= 1024 )
      v48 = -*(__int16 *)((char *)&dword_8005C91C[-512] + v47);
    else
      v48 = *(__int16 *)((char *)&dword_8005C91C[512] - v47);
  }
  if ( (a1[4] & 0xFFFu) >= 0x800 )
  {
    v50 = 2 * v38;
    if ( (a1[4] & 0xFFFu) >= 0xC00 )
      LOWORD(v50) = *(_WORD *)((char *)&dword_8005C91C[-1536] + v50);
    else
      v50 = -*(__int16 *)((char *)&dword_8005C91C[1536] - v50);
  }
  else
  {
    v50 = 2 * v38;
    if ( (a1[4] & 0xFFFu) >= 0x400 )
      v50 = -*(__int16 *)((char *)&dword_8005C91C[-512] + v50);
    else
      LOWORD(v50) = *(_WORD *)((char *)&dword_8005C91C[512] - v50);
  }
  v51 = _$T5 * v44;
  _$T4 = (unsigned __int16)v40;
  _$T5 = (unsigned __int16)_$T5;
  _$T0 = (unsigned __int16)_$T0;
  _$T2 = (unsigned __int16)v48;
  __asm
  {
    ctc2    $zero, $1
    ctc2    $zero, $3
    mtc2    $t0, $1
  }
  _$AT = ((unsigned __int16)v50 << 16) | (unsigned __int16)v44;
  __asm { mtc2    $at, $0 }
  __asm
  {
    ctc2    $zero, $0
    ctc2    $t5, $2
    ctc2    $t2, $4
  }
  __asm
  {
    cop2    0x486012
    ctc2    $t0, $0
    ctc2    $t0, $2
  }
  _$AT = (unsigned __int16)(v51 >> 12);
  __asm { ctc2    $at, $4 }
  __asm
  {
    mfc2    $sp, $10
    mfc2    $s0, $11
  }
  __asm
  {
    cop2    0x486012
    ctc2    $t4, $0
    ctc2    $t4, $2
  }
  _$AT = (unsigned int)&v83 & 0xFFFF;
  __asm { ctc2    $at, $4 }
  __asm
  {
    mfc2    $s1, $9
    mfc2    $s2, $10
    mfc2    $s3, $11
  }
  __asm { cop2    0x486012 }
  __asm
  {
    mfc2    $s4, $9
    mfc2    $s5, $10
    mfc2    $s6, $11
  }
  _$S2 = _$S2 - ((v40 * (v51 >> 12)) >> 12);
  _$S7 = -((v40 * v48) >> 12);
  _$S1 = _$S1 + (((unsigned __int16)v40 * (int)&v83) >> 12);
  _$S3 = _$S5 + _$S3;
  _$S4 = _$S4 - _$S6;
  _$T2 = a1[6] >> a4;
  _$T3 = a1[7] >> a4;
  _$T4 = a1[8] >> a4;
  __asm
  {
    ctc2    $t2, $0
    ctc2    $zero, $1
    ctc2    $t3, $2
    ctc2    $zero, $3
    ctc2    $t4, $4
    mtc2    $s3, $9
    mtc2    $s0, $10
    mtc2    $s4, $11
  }
  __asm { cop2    0x49E012 }
  __asm
  {
    mfc2    $s3, $9
    mfc2    $s0, $10
    mfc2    $s4, $11
    mtc2    $s2, $9
    mtc2    $s7, $10
    mtc2    $s1, $11
  }
  __asm { cop2    0x49E012 }
  __asm
  {
    mfc2    $s2, $9
    mfc2    $s7, $10
    mfc2    $s1, $11
  }
  _$T0 = (_$S7 << 16) | (unsigned __int16)_$S2;
  _$T1 = (-65536 * ((5 * _$S3) >> 3)) | (unsigned __int16)_$S1;
  _$T2 = (-65536 * ((5 * _$S4) >> 3)) | (unsigned __int16)-((5 * _$S0) >> 3);
  __asm
  {
    ctc2    $t0, $0
    ctc2    $t1, $1
    ctc2    $t2, $2
    ctc2    $zero, $3
    ctc2    $zero, $4
  }
  return MEMORY[0x1F80003C]();
}
// 8003C3D0: variable 'v7' is possibly undefined
// 8003C3D8: variable 'v8' is possibly undefined
// 8003C3DC: variable 'v9' is possibly undefined
// 8003C3E0: variable 'v10' is possibly undefined
// 8003C3E4: variable 'v11' is possibly undefined
// 8003C3E8: variable 'v12' is possibly undefined
// 8003C3EC: variable 'v13' is possibly undefined
// 8003C3F0: variable 'v14' is possibly undefined
// 8003C3F4: variable 'v15' is possibly undefined
// 8003C3F8: variable 'v16' is possibly undefined
// 8003C3FC: variable 'v17' is possibly undefined
// 8003C400: variable 'v18' is possibly undefined
// 8003C404: variable 'v19' is possibly undefined
// 8003C40C: variable 'v20' is possibly undefined
// 8003C410: variable 'v21' is possibly undefined
// 1F80003C: using guessed type int (*)(void);
// 8005C91C: using guessed type int dword_8005C91C[512];

//----- (8003C990) --------------------------------------------------------
int __fastcall sub_8003C990(int a1, _DWORD *a2, char a3)
{
  int v3; // $s0
  int v4; // $s1
  int v5; // $s2
  int v6; // $s3
  int v7; // $s4
  int v8; // $a3
  int v9; // $v0
  int v10; // $v1
  unsigned int v11; // $t3
  unsigned int v12; // $t4
  unsigned int v13; // $t5
  int v14; // $t0
  int v15; // $t1
  int v16; // $t2
  int v17; // $s4
  int v18; // $s1
  int v19; // $s2
  int v20; // $a3
  unsigned __int16 *v21; // $a3
  int v22; // $t6
  int result; // $v0

  MEMORY[0x1F800000] = v3;
  MEMORY[0x1F800004] = v4;
  MEMORY[0x1F800008] = v5;
  MEMORY[0x1F80000C] = v6;
  MEMORY[0x1F800010] = v7;
  v8 = *(unsigned __int16 *)(a1 + 28);
  v9 = *(unsigned __int16 *)(a1 + 32);
  v10 = *(unsigned __int16 *)(a1 + 34);
  v11 = *(_DWORD *)(a1 + 12) << 8;
  v12 = *(_DWORD *)(a1 + 16) << 8;
  v13 = *(_DWORD *)(a1 + 20) << 8;
  v14 = (*(_DWORD *)a1 << 8) - *a2;
  v15 = (*(_DWORD *)(a1 + 4) << 8) - a2[1];
  v16 = (*(_DWORD *)(a1 + 8) << 8) - a2[2];
  v17 = 0;
  while ( v8 )
  {
    if ( (v8 & 1) != 0 )
    {
      v22 = v8 & 0xE;
      if ( (a3 & 8) == 0 || v22 != 6 && v22 != 8 )
      {
        result = v8;
        if ( (a3 & 1) != 0 )
          a2[1] += v15 + v12;
        else
          a2[2] += v16 - 1;
        return result;
      }
      break;
    }
    v11 >>= v17 < *(unsigned __int16 *)(a1 + 30);
    v12 >>= v17 < v9;
    v13 >>= v17 < v10;
    v18 = (int)(v14 + v11) < 0;
    v19 = (int)(v15 + v12) < 0;
    if ( (int)(v14 + v11) < 0 )
      v14 += v11;
    v20 = v8 + a1;
    if ( (int)(v15 + v12) < 0 )
      v15 += v12;
    v21 = (unsigned __int16 *)(v20
                             + 2 * ((v18 << (v17 < v9) << (v17 < v10)) + (v19 << (v17 < v10)) + ((int)(v16 + v13) < 0)));
    if ( (int)(v16 + v13) < 0 )
      v16 += v13;
    v8 = *v21;
    ++v17;
  }
  result = 0;
  if ( (a3 & 1) != 0 )
    a2[1] += v15 - 1;
  else
    a2[2] += v16 - 1;
  return result;
}
// 8003C990: variable 'v3' is possibly undefined
// 8003C998: variable 'v4' is possibly undefined
// 8003C99C: variable 'v5' is possibly undefined
// 8003C9A0: variable 'v6' is possibly undefined
// 8003C9A4: variable 'v7' is possibly undefined

//----- (8003CB24) --------------------------------------------------------
int __fastcall sub_8003CB24(int a1, int a2, int a3)
{
  _DWORD *v3; // $v1
  int v7; // $s1
  int *v8; // $s7
  int v9; // $fp
  int v10; // $v0
  bool v11; // dc
  int v12; // $v0
  int result; // $v0
  unsigned int v16; // $t9
  int v17; // $a0

  v10 = v3[60] - (v3[72] >> 17);
  v11 = v10 >= 0;
  v12 = 4 * v10;
  if ( !v11 )
    v12 = 0;
  v11 = v12 - 8188 <= 0;
  result = v12 + v9;
  if ( !v11 )
    result = v9 + 8188;
  __asm
  {
    mtc2    $t5, $20
    mtc2    $t6, $21
    mtc2    $t7, $22
  }
  _$A1 = (unsigned __int16)v3[58];
  __asm { mtc2    $a1, $8 }
  if ( !(unsigned __int16)v3[58] )
    JUMPOUT(0x80040B10);
  __asm { cop2    0xF8002A }
  v8[1] = -520091072;
  v8[2] = 0;
  v8[3] = ((unsigned int)(4096 - _$A1) >> 5)
        | ((unsigned int)(4096 - _$A1) >> 5 << 8)
        | ((unsigned int)(4096 - _$A1) >> 5 << 16)
        | 0x22000000;
  __asm
  {
    swc2    $12, 0x10($s7)
    swc2    $13, 0x14($s7)
  }
  __asm { swc2    $14, 0x18($s7) }
  if ( a3 == v7 )
  {
    v8[7] = -520091104;
    v8[8] = 0;
    __asm { mfc2    $t9, $20 }
    v8[9] = _$T9 | 0x32000000;
    __asm
    {
      swc2    $12, 0x28($s7)
      swc2    $21, 0x2C($s7)
      swc2    $13, 0x30($s7)
      swc2    $22, 0x34($s7)
      swc2    $14, 0x38($s7)
    }
    *v8 = *(_DWORD *)(result + 32) | 0xE000000;
  }
  else
  {
    v16 = *(_DWORD *)(a3 - 8) & 0xFF9FFFFF | 0x200000;
    v17 = *(_DWORD *)(a3 - 4);
    __asm
    {
      swc2    $12, 0x20($s7)
      swc2    $13, 0x2C($s7)
      swc2    $14, 0x38($s7)
    }
    v8[9] = *(_DWORD *)(a3 - 12);
    v8[12] = v16;
    v8[15] = v17;
    __asm { mfc2    $a0, $20 }
    v8[7] = _$A0 | 0x36000000;
    __asm
    {
      swc2    $21, 0x28($s7)
      swc2    $22, 0x34($s7)
    }
    *v8 = *(_DWORD *)(result + 32) | 0xF000000;
  }
  *(_DWORD *)(result + 32) = (unsigned int)v8 & 0xFFFFFF;
  return result;
}
// 8003CB68: control flows out of bounds to 80040B10
// 8003CB28: variable 'v3' is possibly undefined
// 8003CB48: variable 'v9' is possibly undefined
// 8003CB7C: variable 'v8' is possibly undefined
// 8003CBB4: variable 'v7' is possibly undefined

//----- (8003CE70) --------------------------------------------------------
#error "8003CF90: call analysis failed (funcsize=66)"

//----- (8003CFA8) --------------------------------------------------------
int __fastcall sub_8003CFA8(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8)
{
  int v8; // $v1
  int v9; // $ra
  int v10; // $v1
  int v11; // $a1
  int v12; // $a2
  int v13; // $a3
  int v15; // $a0
  bool v16; // dc
  int v17; // $a0

  *(_DWORD *)(v8 + 104) = v9;
  sub_8003D054();
  __asm { cfc2    $a0, $7 }
  v15 = _$A0 - *(_DWORD *)(v10 + 16);
  v16 = v15 < 0;
  v17 = v15 << *(_DWORD *)(v10 + 8);
  if ( !v16 )
  {
    v17 += a8;
    if ( v17 - 4096 > 0 )
      v17 = 4096;
  }
  return (*(int (__fastcall **)(int, int, int, int, int))(v10 + 104))(v17, v11, v12, v13, a5);
}
// 8003CFA8: variable 'v9' is possibly undefined
// 8003CFA8: variable 'v8' is possibly undefined
// 8003CFB8: variable 'v10' is possibly undefined
// 8003CFF4: variable 'v11' is possibly undefined
// 8003CFF4: variable 'v12' is possibly undefined
// 8003CFF4: variable 'v13' is possibly undefined
// 8003D054: using guessed type int sub_8003D054(void);

//----- (8003CFFC) --------------------------------------------------------
int sub_8003CFFC()
{
  int v0; // $v1
  int v1; // $ra
  int v2; // $v1
  int v3; // $v1

  *(_DWORD *)(v0 + 100) = v1;
  sub_80041EF0((int *)(v0 + 32));
  ((void (__fastcall *)(int))loc_80042060)(v2 + 32);
  return (*(int (**)(void))(v3 + 100))();
}
// 8003CFFC: variable 'v1' is possibly undefined
// 8003CFFC: variable 'v0' is possibly undefined
// 8003D01C: variable 'v2' is possibly undefined
// 8003D020: variable 'v3' is possibly undefined

//----- (8003D054) --------------------------------------------------------
#error "8003D060: call analysis failed (funcsize=6)"

//----- (8003D078) --------------------------------------------------------
#error "8003D084: call analysis failed (funcsize=6)"

//----- (8003D09C) --------------------------------------------------------
#error "8003D0A8: call analysis failed (funcsize=6)"

//----- (8003D0C0) --------------------------------------------------------
#error "8003D0CC: call analysis failed (funcsize=6)"

//----- (8003D0E4) --------------------------------------------------------
void sub_8003D0E4()
{
  int v0; // $v1

  __asm
  {
    ctc2    $zero, $21
    ctc2    $zero, $22
    ctc2    $zero, $23
  }
  *(_DWORD *)(v0 + 232) = 0;
}
// 8003D0F0: variable 'v0' is possibly undefined

//----- (8003D0FC) --------------------------------------------------------
int sub_8003D0FC()
{
  int v0; // $v1
  unsigned int v1; // $t0
  int v2; // $t1
  int v3; // $t2
  int v4; // $t3
  int v5; // $t4
  int *v6; // $s4
  int *v7; // $gp
  int v8; // $t8
  int result; // $v0
  int v10; // $t9
  _BYTE *v11; // $s4
  int v12; // $at
  int v13; // $t8
  char v14; // $t9
  int v15; // $t8
  int v16; // $a3
  int v17; // $t4
  int v18; // $a0
  int v19; // $a0
  int v20; // $t3
  int v21; // $t8
  char v22; // $t9
  int v23; // $t8
  int v24; // $a3
  int v25; // $t4
  int v26; // $a0
  int v27; // $a0
  int v28; // $t3
  char v29; // $t9
  int v30; // $t8
  int v31; // $t4
  int v32; // $a0
  unsigned int v33; // $t8
  int v34; // $t9
  int v35; // $t8

  v8 = 32 * v1;
  result = ((v1 >> 13) & 0x7F8) + v0;
  if ( (v1 & 0x4000000) == 0 )
  {
    v10 = (unsigned __int8)v6 & 2;
    if ( v7 )
    {
      v12 = *v7;
      v13 = ((unsigned int)*v7 >> 6) & 7;
      v14 = v13 ^ 0x1F;
      v15 = v13 + 1;
      v16 = v15 - 8;
      v17 = v5 + v15;
      v18 = v4 >> v14;
      if ( v17 > 0 )
      {
        v19 = v4;
        v4 = *v6++;
        v18 = (int)(v19 | ((unsigned int)v4 >> (v15 - v17))) >> v14;
        LOBYTE(v15) = v17;
        v17 -= 32;
      }
      v20 = v4 << v15;
      if ( v16 )
        v18 += 2 * (v12 >> 25) + *(char *)(v0 + 272);
      *(_BYTE *)(v0 + 272) = v18;
      v21 = ((unsigned int)v12 >> 3) & 7;
      v22 = v21 ^ 0x1F;
      v23 = v21 + 1;
      v24 = v23 - 8;
      v25 = v17 + v23;
      v26 = v20 >> v22;
      if ( v25 > 0 )
      {
        v27 = v20;
        v20 = *v6++;
        v26 = (int)(v27 | ((unsigned int)v20 >> (v23 - v25))) >> v22;
        LOBYTE(v23) = v25;
        v25 -= 32;
      }
      v28 = v20 << v23;
      if ( v24 )
        v26 += (v12 << 7 >> 24) + *(char *)(v0 + 274);
      *(_BYTE *)(v0 + 274) = v26;
      v29 = v12 & 7 ^ 0x1F;
      v30 = (v12 & 7) + 1;
      v31 = v25 + v30;
      v32 = v28 >> v29;
      if ( v31 > 0 )
        v32 = (int)(v28 | ((unsigned int)*v6 >> (v30 - v31))) >> v29;
      if ( (v12 & 7) != 7 )
        v32 += (v12 << 15 >> 24) + *(char *)(v0 + 273);
      *(_BYTE *)(v0 + 273) = v32;
      v8 = *(_DWORD *)(v0 + 272);
    }
    else
    {
      v11 = (char *)v6 + 3;
      LOWORD(v8) = *(_WORD *)(v11 - 3);
      BYTE2(v8) = *(v11 - 1);
      if ( v10 )
        HIBYTE(v8) = *v11;
    }
    v33 = 32 * v8;
    v34 = ((v33 & v2) + *(_DWORD *)(v0 + 280)) & v3;
    v35 = ((v33 >> 8) & 0x1FE0) + *(_DWORD *)(v0 + 284);
    *(_DWORD *)(result + 320) = v34;
    *(_DWORD *)(result + 324) = v35;
  }
  return result;
}
// 8003D104: variable 'v1' is possibly undefined
// 8003D10C: variable 'v0' is possibly undefined
// 8003D120: variable 'v6' is possibly undefined
// 8003D11C: variable 'v7' is possibly undefined
// 8003D154: variable 'v5' is possibly undefined
// 8003D15C: variable 'v4' is possibly undefined
// 8003D274: variable 'v2' is possibly undefined
// 8003D280: variable 'v3' is possibly undefined

//----- (8003D3AC) --------------------------------------------------------
void __fastcall sub_8003D3AC(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24)
{
  int v24; // $v1
  int v25; // $gp
  int v26; // $ra
  int v27; // $a0

  v27 = *(_DWORD *)(v25 + 112);
  *(_DWORD *)(v24 + 100) = v26;
  sub_800422A0(-v27);
  sub_80041FBC();
  __asm
  {
    lwc2    $0, arg_50($sp)
    lwc2    $1, arg_54($sp)
  }
  __asm
  {
    cop2    0x486012
    mfc2    $t8, $9
    mfc2    $t9, $10
    mfc2    $a0, $11
  }
  _$T8 = (unsigned __int16)_$T8 | (_$T9 << 16);
  __asm
  {
    ctc2    $t8, $8
    ctc2    $a0, $9
    lwc2    $0, arg_58($sp)
    lwc2    $1, arg_5C($sp)
  }
  __asm
  {
    cop2    0x486012
    mfc2    $t8, $9
    mfc2    $t9, $10
    mfc2    $a0, $11
  }
  _$T8 = (unsigned __int16)_$T8 | (_$T9 << 16);
  __asm { ctc2    $t8, $11 }
  __asm { ctc2    $a0, $12 }
  sub_80041FBC();
  sub_80041FD8();
  JUMPOUT(0x8003E68C);
}
// 8003D468: control flows out of bounds to 8003E68C
// 8003D3AC: variable 'v25' is possibly undefined
// 8003D3B0: variable 'v26' is possibly undefined
// 8003D3B0: variable 'v24' is possibly undefined

//----- (8003D470) --------------------------------------------------------
void sub_8003D470()
{
  JUMPOUT(0x8003D4A4);
}
// 8003D4A0: control flows out of bounds to 8003D4A4

//----- (8003D788) --------------------------------------------------------
#error "8003D76C: call analysis failed (funcsize=794)"

//----- (8003D9DC) --------------------------------------------------------
int __fastcall sub_8003D9DC(unsigned int a1)
{
  int result; // $v0
  int v2; // $t8
  int v3; // $a2
  int v4; // $t8
  int v5; // $t9
  int v6; // $t9

  result = 0;
  if ( a1 )
  {
    v2 = 0;
    v3 = 16;
    while ( v3-- != 0 )
    {
      v4 = v2 | (a1 >> 30);
      v5 = 4 * result + 1;
      result *= 2;
      v6 = v4 - v5;
      a1 *= 4;
      if ( v6 >= 0 )
      {
        ++result;
        v4 = v6;
      }
      v2 = 4 * v4;
    }
  }
  return result;
}

//----- (8003DA2C) --------------------------------------------------------
#error "8003DA48: call analysis failed (funcsize=123)"

//----- (8003E000) --------------------------------------------------------
int __fastcall sub_8003E000(int a1, int a2)
{
  int v2; // $a2
  unsigned int v3; // $a0
  unsigned int v4; // $a2
  int v5; // $a2
  int result; // $v0

  v2 = a1 << 16;
  if ( a1 >= 0 )
  {
    v3 = HIWORD(a1);
    if ( v2 >= 0 )
    {
      v4 = HIWORD(v2);
      if ( a2 - 200 >= 0 )
      {
        v5 = v4 - 512;
        if ( (int)(v3 - 216) < 0 && v5 < 0 )
          return sub_8003E034();
      }
    }
  }
  return result;
}
// 8003E034: using guessed type int sub_8003E034(void);

//----- (8003E034) --------------------------------------------------------
void sub_8003E034()
{
  ;
}

//----- (8003E040) --------------------------------------------------------
void __fastcall sub_8003E040(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, unsigned int a9)
{
  int v9; // $v1

  *(_DWORD *)(v9 + 232) = a8;
  __asm { mtc2    $zero, $6 }
  _$T9 = HIWORD(a9) & 0xFF0;
  _$A0 = (a9 >> 8) & 0xFF0;
  _$T8 = a9 & 0xFF0;
  __asm
  {
    ctc2    $t9, $21
    ctc2    $a0, $22
    ctc2    $t8, $23
  }
}
// 8003E048: variable 'v9' is possibly undefined

//----- (8003E078) --------------------------------------------------------
void __fastcall sub_8003E078(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, unsigned int a9)
{
  int v9; // $v1

  *(_DWORD *)(v9 + 232) = a8;
  __asm { mtc2    $zero, $6 }
  if ( (_WORD)a8 )
  {
    _$T9 = HIWORD(a9) & 0xFF0;
    _$A0 = (a9 >> 8) & 0xFF0;
    _$T8 = a9 & 0xFF0;
    __asm
    {
      ctc2    $t9, $21
      ctc2    $a0, $22
      ctc2    $t8, $23
    }
  }
}
// 8003E080: variable 'v9' is possibly undefined

//----- (8003E0B8) --------------------------------------------------------
void __fastcall sub_8003E0B8(_DWORD *a1, int a2, int *a3, _DWORD *a4)
{
  int v4; // $t5
  int v5; // $t7
  int v9; // $t0
  int v10; // $t2
  int v11; // $t4

  sub_800422A0(-*(_DWORD *)(a2 + 4));
  sub_80041FBC();
  if ( v4 )
  {
    sub_800422A0(v4);
    sub_80041F18();
  }
  if ( v5 )
  {
    sub_800422A0(v5);
    sub_80041F18();
  }
  v9 = *a3;
  v10 = a3[1];
  v11 = a3[2];
  if ( a4 )
  {
    v9 = (*a4 * v9) >> 12;
    v10 = (a4[1] * v10) >> 12;
    v11 = (a4[2] * v11) >> 12;
  }
  a1[5] = v9;
  a1[6] = v10;
  a1[7] = v11;
  if ( ((unsigned __int16)v9 | (unsigned __int16)v10 | v11) == 0x1000 )
  {
    __asm
    {
      cfc2    $t0, $0
      cfc2    $t1, $1
      cfc2    $t2, $2
      cfc2    $t3, $3
      cfc2    $t4, $4
    }
  }
  else
  {
    sub_80041F18();
  }
  *a1 = _$T0;
  a1[1] = _$T1;
  a1[2] = _$T2;
  a1[3] = _$T3;
  a1[4] = _$T4;
}
// 8003D4C4: variable 'v4' is possibly undefined
// 8003D4F0: variable 'v5' is possibly undefined
// 8003E854: variable '_$T0' is possibly undefined
// 8003E858: variable '_$T1' is possibly undefined
// 8003E85C: variable '_$T2' is possibly undefined
// 8003E860: variable '_$T3' is possibly undefined
// 8003E864: variable '_$T4' is possibly undefined

//----- (8003E370) --------------------------------------------------------
int __fastcall sub_8003E370(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        __int16 a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24)
{
  _DWORD *v24; // $v1
  int (*v25)(void); // $a3
  int result; // $v0

  if ( a8 )
  {
    v24[73] = a22;
    v24[74] = a23;
    v24[75] = a24;
  }
  else
  {
    v25 = *(int (**)(void))(v24[24] + 44);
    v24[73] = a22;
    v24[74] = a23;
    v24[75] = a24;
    return v25();
  }
  return result;
}
// 8003E380: variable 'v24' is possibly undefined

//----- (8003E39C) --------------------------------------------------------
void sub_8003E39C()
{
  int v0; // $v1

  *(_DWORD *)(v0 + 308) = &loc_800409C8;
  JUMPOUT(0x8003D754);
}
// 8003E3A4: control flows out of bounds to 8003D754
// 8003E3AC: control flows out of bounds to 8003D670
// 8003E3A8: variable 'v0' is possibly undefined

//----- (8003E67C) --------------------------------------------------------
int __fastcall sub_8003E67C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // $v1
  int v9; // $ra
  int v10; // $v1
  int v11; // $gp
  int v12; // $t5
  int v13; // $t6
  int v16; // $t6

  *(_DWORD *)(v8 + 100) = v9;
  sub_80041FD8();
  v12 = *(_DWORD *)(v11 + 96);
  v13 = *(_DWORD *)(v11 + 100);
  __asm { cfc2    $t7, $26 }
  if ( (a8 & 0x40000000) != 0 )
  {
    _$T5 = v12 >> 4;
    v16 = v13 >> 4;
    _$T7 *= 16;
  }
  else
  {
    _$T5 = v12 >> 8;
    v16 = v13 >> 8;
  }
  _$T6 = -v16;
  __asm
  {
    ctc2    $t5, $5
    ctc2    $t6, $6
  }
  __asm { ctc2    $t7, $7 }
  return (*(int (**)(void))(v10 + 100))();
}
// 8003E67C: variable 'v9' is possibly undefined
// 8003E67C: variable 'v8' is possibly undefined
// 8003E690: variable 'v11' is possibly undefined
// 8003E688: variable 'v10' is possibly undefined

//----- (8003E6D0) --------------------------------------------------------
#error "8003E704: call analysis failed (funcsize=540)"

//----- (8003E754) --------------------------------------------------------
void __fastcall sub_8003E754(_DWORD *a1, int a2, int *a3, _DWORD *a4)
{
  int v7; // $t5
  int v8; // $t0
  int v9; // $t2
  int v10; // $t4

  sub_800422A0(*(_DWORD *)(a2 + 8));
  sub_80041FBC();
  if ( v7 )
  {
    sub_800422A0(v7);
    sub_80041F18();
  }
  v8 = *a3;
  v9 = a3[1];
  v10 = a3[2];
  if ( a4 )
  {
    v8 = (*a4 * v8) >> 12;
    v9 = (a4[1] * v9) >> 12;
    v10 = (a4[2] * v10) >> 12;
  }
  a1[5] = v8;
  a1[6] = v9;
  a1[7] = v10;
  if ( ((unsigned __int16)v8 | (unsigned __int16)v9 | v10) == 0x1000 )
  {
    __asm
    {
      cfc2    $t0, $0
      cfc2    $t1, $1
      cfc2    $t2, $2
      cfc2    $t3, $3
      cfc2    $t4, $4
    }
  }
  else
  {
    sub_80041F18();
  }
  *a1 = _$T0;
  a1[1] = _$T1;
  a1[2] = _$T2;
  a1[3] = _$T3;
  a1[4] = _$T4;
}
// 8003E7A8: variable 'v7' is possibly undefined
// 8003E854: variable '_$T0' is possibly undefined
// 8003E858: variable '_$T1' is possibly undefined
// 8003E85C: variable '_$T2' is possibly undefined
// 8003E860: variable '_$T3' is possibly undefined
// 8003E864: variable '_$T4' is possibly undefined

//----- (8003E8C8) --------------------------------------------------------
int __fastcall sub_8003E8C8(int a1, int a2, int a3)
{
  _DWORD *v3; // $v1
  int v4; // $t0
  unsigned int v5; // $t5
  int *v6; // $s7
  int v7; // $fp
  int v8; // $v0
  int v9; // $v0
  int result; // $v0
  int v12; // $a1
  unsigned int v18; // $t8
  int v20; // $t9
  int v21; // $t9
  unsigned int v22; // $t8
  char *v23; // $t9
  unsigned int v25; // $a0
  unsigned int v26; // $a3
  int v27; // $t9
  unsigned int v28; // $a0
  unsigned int v29; // $a3
  int v30; // $a3
  int v31; // $a0
  int v32; // $a0
  int v33; // $a0
  int v34; // $a3
  int v35; // $t9
  int v36; // $t8
  bool v37; // dc
  int v38; // $a0

  __asm { cop2    0x1400006 }
  v8 = v3[60] - (v3[72] >> 17);
  v37 = v8 >= 0;
  v9 = 4 * v8;
  if ( !v37 )
    v9 = 0;
  v37 = v9 - 8188 <= 0;
  result = v9 + v7;
  if ( !v37 )
    result = v7 + 8188;
  __asm { mfc2    $a1, $24 }
  v12 = _$A1 ^ v3[58] ^ (4 * v4);
  __asm { swc2    $12, 8($s7) }
  if ( v12 < 0 )
    result -= 40;
  __asm
  {
    swc2    $13, 0x10($s7)
    swc2    $14, 0x18($s7)
  }
  _$T8 = 32 * (char)v5;
  __asm { mtc2    $t8, $9 }
  _$T8 = (int)(v5 >> 8 << 24) >> 19;
  __asm { mtc2    $t8, $10 }
  _$T8 = (int)(HIWORD(v5) << 24) >> 19;
  __asm { mtc2    $t8, $11 }
  __asm
  {
    cop2    0x4BE012
    mfc2    $t8, $9
    mfc2    $t9, $11
  }
  v18 = (unsigned int)(7 * (_$T8 + 4096) + 0x2000) >> 4;
  if ( v12 < 0 )
    v18 >>= 1;
  _$T8 = v18 - (unsigned __int16)v3[58];
  v20 = _$T9 >> 3;
  if ( _$T8 < 0 )
    _$T8 = 0;
  __asm { mtc2    $t8, $8 }
  __asm { cop2    0x780010 }
  if ( v20 < 0 )
    v20 = -v20;
  v21 = v20 - 384;
  v22 = 0;
  if ( v21 >= 0 )
  {
    v37 = v21 - 128 < 0;
    v23 = (char *)dword_8005D268 + v21;
    if ( !v37 )
      v23 = &byte_8005D2E7;
    v22 = (unsigned __int8)*v23;
  }
  __asm { mfc2    $t9, $22 }
  v25 = _$T9 >> 8;
  if ( v12 < 0 )
    v22 >>= 3;
  v26 = HIWORD(_$T9);
  v27 = (unsigned __int8)_$T9 + v22;
  v28 = (unsigned __int8)v25 + v22;
  v29 = (unsigned __int8)v26 + v22;
  v37 = (int)(v29 - 255) <= 0;
  v30 = v29 << 16;
  if ( !v37 )
    v30 = 16711680;
  v37 = (int)(v28 - 255) <= 0;
  v31 = v28 << 8;
  if ( !v37 )
    v31 = 65280;
  v32 = v31 | v30;
  if ( v27 - 255 > 0 )
    v27 = 255;
  v33 = v32 | v27;
  v34 = *(_DWORD *)(a3 - 8);
  v35 = 6291456;
  if ( (v34 & 0x600000) != 0 )
  {
    v36 = 603979776;
    if ( ((8 * v4) & v12) >= 0 )
    {
LABEL_33:
      v6[1] = v36 | v33;
      v38 = *(_DWORD *)(a3 - 4);
      v6[3] = *(_DWORD *)(a3 - 12);
      v6[5] = v35 | v34;
      v6[7] = v38;
      *v6 = *(_DWORD *)(result + 32) | 0x7000000;
      *(_DWORD *)(result + 32) = (unsigned int)v6 & 0xFFFFFF;
      return result;
    }
    v37 = 1;
  }
  else
  {
    v37 = 0;
  }
  v35 = 0x200000;
  if ( !v37 )
  {
    v36 = 637534208;
    if ( v12 < 0 )
      v35 = 0x400000;
    goto LABEL_33;
  }
  return result;
}
// 8003E8D0: variable 'v3' is possibly undefined
// 8003E8F0: variable 'v7' is possibly undefined
// 8003E8FC: variable 'v4' is possibly undefined
// 8003E920: variable 'v5' is possibly undefined
// 8003EA70: variable 'v6' is possibly undefined
// 8005D268: using guessed type int dword_8005D268[8];
// 8005D2E7: using guessed type char byte_8005D2E7;

//----- (8003EBE0) --------------------------------------------------------
int __fastcall sub_8003EBE0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8)
{
  int v8; // $v1
  int v9; // $ra
  int v10; // $v1
  int v11; // $a1
  int v12; // $a2
  int v13; // $a3
  int v15; // $a0
  bool v16; // dc
  int v17; // $a0

  *(_DWORD *)(v8 + 104) = v9;
  sub_8003D078();
  __asm { cfc2    $a0, $7 }
  v15 = _$A0 - *(_DWORD *)(v10 + 16);
  v16 = v15 < 0;
  v17 = v15 << *(_DWORD *)(v10 + 8);
  if ( !v16 )
  {
    v17 += a8;
    if ( v17 - 4096 > 0 )
      v17 = 4096;
  }
  return (*(int (__fastcall **)(int, int, int, int, int))(v10 + 104))(v17, v11, v12, v13, a5);
}
// 8003EBE0: variable 'v9' is possibly undefined
// 8003EBE0: variable 'v8' is possibly undefined
// 8003EBF0: variable 'v10' is possibly undefined
// 8003EC2C: variable 'v11' is possibly undefined
// 8003EC2C: variable 'v12' is possibly undefined
// 8003EC2C: variable 'v13' is possibly undefined
// 8003D078: using guessed type int sub_8003D078(void);

//----- (8003EC34) --------------------------------------------------------
int __fastcall sub_8003EC34(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 a8)
{
  int v8; // $v1
  int v9; // $ra
  int v10; // $v1
  int v11; // $a1
  int v12; // $a2
  int v14; // $a0
  bool v15; // dc
  int v16; // $a0

  *(_DWORD *)(v8 + 104) = v9;
  sub_8003CE70();
  __asm { cfc2    $a0, $7 }
  v14 = _$A0 - *(_DWORD *)(v10 + 16);
  v15 = v14 < 0;
  v16 = v14 << *(_DWORD *)(v10 + 8);
  if ( v15 )
    JUMPOUT(0x8003CFEC);
  if ( v16 + a8 - 4096 <= 0 )
    JUMPOUT(0x8003CFE8);
  return (*(int (__fastcall **)(int, int, int))(v10 + 104))(4096, v11, v12);
}
// 8003EC50: control flows out of bounds to 8003CFEC
// 8003EC68: control flows out of bounds to 8003CFE8
// 8003EC34: variable 'v9' is possibly undefined
// 8003EC34: variable 'v8' is possibly undefined
// 8003EC44: variable 'v10' is possibly undefined
// 8003EC80: variable 'v11' is possibly undefined
// 8003EC80: variable 'v12' is possibly undefined
// 8003CE70: using guessed type int sub_8003CE70(void);

//----- (8003F044) --------------------------------------------------------
void __fastcall sub_8003F044(_DWORD *a1, int a2, int *a3, _DWORD *a4)
{
  int v4; // $t0
  int v5; // $t2
  int v6; // $t4
  int v15; // $t5
  int v16; // $t6
  int v17; // $t7

  sub_800422A0(*(_DWORD *)(a2 + 8));
  sub_80041FBC();
  if ( v15 )
  {
    sub_800422A0(v15);
    sub_80041F18();
  }
  if ( v16 != v17 )
  {
    sub_800422A0(v16 - v17);
    sub_80041F18();
  }
  v4 = *a3;
  v5 = a3[1];
  v6 = a3[2];
  if ( a4 )
  {
    v4 = (*a4 * v4) >> 12;
    v5 = (a4[1] * v5) >> 12;
    v6 = (a4[2] * v6) >> 12;
  }
  a1[5] = v4;
  a1[6] = v5;
  a1[7] = v6;
  if ( ((unsigned __int16)v4 | (unsigned __int16)v5 | v6) == 0x1000 )
  {
    __asm
    {
      cfc2    $t0, $0
      cfc2    $t1, $1
      cfc2    $t2, $2
      cfc2    $t3, $3
      cfc2    $t4, $4
    }
  }
  else
  {
    sub_80041F18();
  }
  *a1 = _$T0;
  a1[1] = _$T1;
  a1[2] = _$T2;
  a1[3] = _$T3;
  a1[4] = _$T4;
}
// 8003F09C: variable 'v15' is possibly undefined
// 8003F0CC: variable 'v16' is possibly undefined
// 8003F0CC: variable 'v17' is possibly undefined
// 8003E854: variable '_$T0' is possibly undefined
// 8003E858: variable '_$T1' is possibly undefined
// 8003E85C: variable '_$T2' is possibly undefined
// 8003E860: variable '_$T3' is possibly undefined
// 8003E864: variable '_$T4' is possibly undefined

//----- (8003F2FC) --------------------------------------------------------
#error "8003F348: call analysis failed (funcsize=339)"

//----- (8003F3AC) --------------------------------------------------------
#error "8003F4A0: call analysis failed (funcsize=83)"

//----- (8003F518) --------------------------------------------------------
void nullsub_3()
{
  ;
}

//----- (8003F520) --------------------------------------------------------
void __fastcall sub_8003F520(int a1, int *a2, int *a3, int *a4, int a5, char a6)
{
  int v11; // $t5
  int v12; // $t6
  int v13; // $t7

  _$T0 = *a3;
  _$T1 = a3[1];
  _$T2 = a3[2];
  _$T3 = a3[3];
  _$T4 = a3[4];
  v11 = *a4;
  v12 = a4[1];
  v13 = a4[2];
  __asm
  {
    ctc2    $t0, $0
    ctc2    $t1, $1
    ctc2    $t2, $2
    ctc2    $t3, $3
    ctc2    $t4, $4
  }
  while ( a5-- > 0 )
  {
    _$T2 = a2[2] >> a6;
    _$T0 = (unsigned __int16)(*a2 >> a6) | (a2[1] >> a6 << 16);
    __asm
    {
      mtc2    $t0, $0
      mtc2    $t2, $1
    }
    a2 += 3;
    a1 += 12;
    __asm
    {
      cop2    0x486012
      mfc2    $t0, $9
      mfc2    $t1, $10
      mfc2    $t2, $11
    }
    *(_DWORD *)(a1 - 12) = (_$T0 << a6) + v11;
    *(_DWORD *)(a1 - 8) = (_$T1 << a6) + v12;
    *(_DWORD *)(a1 - 4) = (_$T2 << a6) + v13;
  }
}

//----- (8003F5D8) --------------------------------------------------------
void __fastcall sub_8003F5D8(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int *a15,
        int *a16)
{
  int v16; // $v1
  int v17; // $t0
  _DWORD *i; // $t9
  int v20; // $a0

  v17 = *a15;
  for ( i = (_DWORD *)(v16 + 320); v17-- > 0; ++i )
  {
    v20 = *a16++;
    *i = v20;
  }
  *(_DWORD *)(v16 + 272) = 0;
}
// 8003F5E4: variable 'v16' is possibly undefined

//----- (8003F63C) --------------------------------------------------------
void __fastcall sub_8003F63C(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int *a15,
        int *a16)
{
  int v16; // $v1
  int v17; // $t0
  _DWORD *i; // $t9
  int v20; // $a0

  v17 = *a15;
  for ( i = (_DWORD *)(v16 + 320); v17-- > 0; ++i )
  {
    v20 = *a16++;
    *i = v20;
  }
  *(_DWORD *)(v16 + 272) = 0;
}
// 8003F648: variable 'v16' is possibly undefined

//----- (8003F6AC) --------------------------------------------------------
int __fastcall sub_8003F6AC(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        _DWORD *a13)
{
  int v13; // $v1
  int (*v14)(void); // $t8
  int v15; // $a0

  v15 = a13[1];
  *(_DWORD *)(v13 + 280) = *a13;
  *(_DWORD *)(v13 + 284) = v15;
  return v14();
}
// 8003F6C0: variable 'v13' is possibly undefined
// 8003F6CC: variable 'v14' is possibly undefined

//----- (8003F6D4) --------------------------------------------------------
int __fastcall sub_8003F6D4(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        __int16 *a13,
        __int16 *a14)
{
  int v14; // $v1
  int (*v15)(void); // $t8

  *(_WORD *)(v14 + 280) = (*a13 + *a14) >> 1;
  *(_WORD *)(v14 + 282) = (a13[1] + a14[1]) >> 1;
  *(_DWORD *)(v14 + 284) = (*((_DWORD *)a13 + 1) + *((_DWORD *)a14 + 1)) >> 1;
  return v15();
}
// 8003F6F0: variable 'v14' is possibly undefined
// 8003F724: variable 'v15' is possibly undefined

//----- (8003F72C) --------------------------------------------------------
void sub_8003F72C()
{
  ;
}

//----- (8003F740) --------------------------------------------------------
void sub_8003F740()
{
  ;
}

//----- (8003F754) --------------------------------------------------------
void sub_8003F754()
{
  int v0; // $v1
  int v1; // $t9
  int v2; // $gp

  *(_DWORD *)(v2 + 168) = v1 & 0xFF7FFFFF;
  *(_DWORD *)(v0 + 240) = *(_DWORD *)(v0 + 244);
}
// 8003F75C: variable 'v1' is possibly undefined
// 8003F760: variable 'v2' is possibly undefined
// 8003F764: variable 'v0' is possibly undefined

//----- (8003F770) --------------------------------------------------------
void sub_8003F770()
{
  int v0; // $t9
  int v1; // $gp

  *(_DWORD *)(v1 + 168) = v0 | 0x800000;
}
// 8003F774: variable 'v0' is possibly undefined
// 8003F77C: variable 'v1' is possibly undefined

//----- (8003F780) --------------------------------------------------------
void sub_8003F780()
{
  ;
}

//----- (8003F79C) --------------------------------------------------------
void sub_8003F79C()
{
  ;
}

//----- (8003F7B4) --------------------------------------------------------
#error "8003F86C: call analysis failed (funcsize=50)"

//----- (8003F8A4) --------------------------------------------------------
int sub_8003F8A4()
{
  int *v0; // $s1
  int (*v1)(void); // $ra
  int (*v2)(void); // $at
  int v3; // $t5
  int v4; // $t7

  v2 = v1;
  if ( v0 )
  {
    v3 = *v0;
    v4 = v0[2];
    if ( v0[1] )
    {
      sub_800422A0(v0[1]);
      sub_80041F18();
    }
    if ( v3 )
    {
      sub_800422A0(v3);
      sub_80041F18();
    }
    if ( v4 )
    {
      sub_800422A0(v4);
      sub_80041F18();
    }
  }
  return v2();
}
// 8003F8AC: variable 'v1' is possibly undefined
// 8003F8A8: variable 'v0' is possibly undefined
// 8003F8E4: variable 'v3' is possibly undefined
// 8003F910: variable 'v4' is possibly undefined
// 8003F93C: variable 'v2' is possibly undefined

//----- (8003F944) --------------------------------------------------------
int sub_8003F944()
{
  int v0; // $s1
  int (*v1)(void); // $at
  int v2; // $t5
  int v3; // $t6
  int result; // $v0

  if ( v0 )
  {
    sub_800422A0(-*(_DWORD *)(v0 + 8));
    sub_80041FBC();
    if ( v2 )
    {
      sub_800422A0(-v2);
      sub_80041F18();
    }
    if ( v3 )
    {
      sub_800422A0(-v3);
      sub_80041F18();
    }
    return v1();
  }
  else
  {
    _$T8 = 4096;
    __asm
    {
      ctc2    $t8, $0
      ctc2    $zero, $1
      ctc2    $t8, $2
      ctc2    $zero, $3
      ctc2    $t8, $4
    }
  }
  return result;
}
// 8003F948: variable 'v0' is possibly undefined
// 8003F984: variable 'v2' is possibly undefined
// 8003F9B0: variable 'v3' is possibly undefined
// 8003F9D8: variable 'v1' is possibly undefined

//----- (8003FA80) --------------------------------------------------------
void sub_8003FA80()
{
  JUMPOUT(0x8003FA88);
}
// 8003FA84: control flows out of bounds to 8003FA88

//----- (800403AC) --------------------------------------------------------
int __fastcall sub_800403AC(int a1, int a2, int a3)
{
  _DWORD *v3; // $v1
  int v4; // $t5
  int v5; // $t6
  int v6; // $t7
  int v7; // $s1
  int v8; // $ra
  int v9; // $t9
  int v10; // $a0
  int v11; // $a1
  int v12; // $a1
  int v13; // $a1
  void (__fastcall *v14)(int); // $v0
  int v15; // $v1
  int v16; // $v1
  void (*v18)(void); // $v0
  __int16 v19; // $t9
  __int16 v20; // $a0
  void (*v22)(void); // $v0
  __int16 v23; // $t9
  int v25; // $at
  void (*v26)(void); // $v0
  __int16 v27; // $t9
  void (__fastcall *v28)(int); // $v0
  int v29; // $v1
  int v30; // $v1
  void (*v32)(void); // $v0
  __int16 v33; // $t9
  __int16 v34; // $a0
  void (*v36)(void); // $v0
  __int16 v37; // $t9
  int v39; // $at
  __int16 v40; // $t9
  void (__fastcall *v41)(int); // $v0
  int v42; // $v1
  int v43; // $v1
  void (*v45)(void); // $v0
  __int16 v46; // $t9
  __int16 v47; // $a0
  void (*v49)(void); // $v0
  __int16 v50; // $t9
  int v52; // $at
  __int16 v53; // $t9
  void (*v56)(void); // $v0
  int v57; // $v1

  v3[25] = v8;
  v9 = v3[39];
  v10 = v3[32];
  if ( (int)v3[46] < 0 )
  {
    if ( v9 < 0 )
    {
      v11 = v3[61];
      if ( v10 >= 0 )
        goto LABEL_11;
      goto LABEL_32;
    }
    v12 = v3[61];
    if ( v10 >= 0 )
    {
      v13 = v3[62];
LABEL_25:
      v3[60] = v13;
      sub_800407B8(v10, v13, a3);
      v41(v42 + 168);
      (*(void (**)(void))(v43 + 304))();
      __asm
      {
        lwc2    $2, 0xD4($v1)
        lwc2    $3, 0xD8($v1)
        lwc2    $4, 0xC4($v1)
        lwc2    $5, 0xC8($v1)
      }
      v45 = *(void (**)(void))(_$V1 + 308);
      __asm { cop2    0x280030 }
      if ( *(_DWORD *)(_$V1 + 88) != v7 )
      {
        v46 = *(_WORD *)(_$V1 + 224);
        v47 = *(_WORD *)(_$V1 + 208);
        *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 152);
        *(_WORD *)(_$V1 + 260) = v46;
        *(_WORD *)(_$V1 + 264) = v47;
      }
      __asm
      {
        swc2    $13, 0xD4($v1)
        swc2    $18, 0xD8($v1)
        swc2    $14, 0xC4($v1)
        swc2    $19, 0xC8($v1)
        lwc2    $12, 0xA0($v1)
        lwc2    $17, 0xA4($v1)
      }
      v45();
      v49 = *(void (**)(void))(_$V1 + 308);
      __asm
      {
        lwc2    $12, 0x84($v1)
        lwc2    $17, 0x88($v1)
        lwc2    $13, 0xA0($v1)
        lwc2    $18, 0xA4($v1)
      }
      if ( *(_DWORD *)(_$V1 + 88) != v7 )
      {
        v50 = *(_WORD *)(_$V1 + 152);
        *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 124);
        *(_WORD *)(_$V1 + 260) = v50;
      }
      v49();
      *(_DWORD *)(_$V1 + 240) = v52;
      v26 = *(void (**)(void))(_$V1 + 308);
      __asm
      {
        lwc2    $12, 0xD4($v1)
        lwc2    $17, 0xD8($v1)
        lwc2    $13, 0xBC($v1)
        lwc2    $18, 0xC0($v1)
      }
      if ( *(_DWORD *)(_$V1 + 88) != v7 )
      {
        v53 = *(_WORD *)(_$V1 + 180);
        *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 224);
        *(_WORD *)(_$V1 + 260) = v53;
      }
      goto LABEL_31;
    }
LABEL_18:
    v3[60] = v12;
    sub_800407B8(v10, v12, a3);
    v28(v29 + 140);
    (*(void (**)(void))(v30 + 304))();
    __asm
    {
      lwc2    $2, 0xD4($v1)
      lwc2    $3, 0xD8($v1)
      lwc2    $4, 0xC4($v1)
      lwc2    $5, 0xC8($v1)
    }
    v32 = *(void (**)(void))(_$V1 + 308);
    __asm { cop2    0x280030 }
    if ( *(_DWORD *)(_$V1 + 88) != v7 )
    {
      v33 = *(_WORD *)(_$V1 + 124);
      v34 = *(_WORD *)(_$V1 + 208);
      *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 180);
      *(_WORD *)(_$V1 + 260) = v33;
      *(_WORD *)(_$V1 + 264) = v34;
    }
    __asm
    {
      swc2    $13, 0xD4($v1)
      swc2    $18, 0xD8($v1)
      swc2    $14, 0xC4($v1)
      swc2    $19, 0xC8($v1)
      lwc2    $12, 0xBC($v1)
      lwc2    $17, 0xC0($v1)
      lwc2    $13, 0x84($v1)
      lwc2    $18, 0x88($v1)
    }
    v32();
    v36 = *(void (**)(void))(_$V1 + 308);
    __asm
    {
      lwc2    $12, 0xD4($v1)
      lwc2    $17, 0xD8($v1)
      lwc2    $13, 0xBC($v1)
      lwc2    $18, 0xC0($v1)
    }
    if ( *(_DWORD *)(_$V1 + 88) != v7 )
    {
      v37 = *(_WORD *)(_$V1 + 180);
      *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 224);
      *(_WORD *)(_$V1 + 260) = v37;
    }
    v36();
    *(_DWORD *)(_$V1 + 240) = v39;
    v26 = *(void (**)(void))(_$V1 + 308);
    __asm
    {
      lwc2    $12, 0xA0($v1)
      lwc2    $17, 0xA4($v1)
      lwc2    $13, 0xD4($v1)
      lwc2    $18, 0xD8($v1)
    }
    if ( *(_DWORD *)(_$V1 + 88) != v7 )
    {
      v40 = *(_WORD *)(_$V1 + 224);
      *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 152);
      *(_WORD *)(_$V1 + 260) = v40;
    }
    goto LABEL_31;
  }
  if ( v9 < 0 )
  {
    v13 = v3[61];
    if ( v10 < 0 )
      goto LABEL_25;
    v12 = v3[62];
    goto LABEL_18;
  }
  v11 = v3[62];
  if ( v10 < 0 )
  {
LABEL_11:
    v3[60] = v11;
    sub_800407B8(v10, v11, a3);
    v14(v15 + 140);
    (*(void (__fastcall **)(int))(v16 + 304))(v16 + 168);
    __asm
    {
      lwc2    $2, 0xD4($v1)
      lwc2    $3, 0xD8($v1)
      lwc2    $4, 0xC4($v1)
      lwc2    $5, 0xC8($v1)
    }
    v18 = *(void (**)(void))(_$V1 + 308);
    __asm { cop2    0x280030 }
    if ( *(_DWORD *)(_$V1 + 88) != v7 )
    {
      v19 = *(_WORD *)(_$V1 + 224);
      v20 = *(_WORD *)(_$V1 + 208);
      *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 180);
      *(_WORD *)(_$V1 + 260) = v19;
      *(_WORD *)(_$V1 + 264) = v20;
    }
    __asm
    {
      swc2    $13, 0xD4($v1)
      swc2    $18, 0xD8($v1)
      swc2    $14, 0xC4($v1)
      swc2    $19, 0xC8($v1)
      lwc2    $12, 0xBC($v1)
      lwc2    $17, 0xC0($v1)
    }
    v18();
    v22 = *(void (**)(void))(_$V1 + 308);
    __asm
    {
      lwc2    $12, 0xA0($v1)
      lwc2    $17, 0xA4($v1)
      lwc2    $13, 0xBC($v1)
      lwc2    $18, 0xC0($v1)
    }
    if ( *(_DWORD *)(_$V1 + 88) != v7 )
    {
      v23 = *(_WORD *)(_$V1 + 180);
      *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 152);
      *(_WORD *)(_$V1 + 260) = v23;
    }
    v22();
    *(_DWORD *)(_$V1 + 240) = v25;
    v26 = *(void (**)(void))(_$V1 + 308);
    __asm
    {
      lwc2    $12, 0xD4($v1)
      lwc2    $17, 0xD8($v1)
      lwc2    $13, 0x84($v1)
      lwc2    $18, 0x88($v1)
    }
    if ( *(_DWORD *)(_$V1 + 88) != v7 )
    {
      v27 = *(_WORD *)(_$V1 + 124);
      *(_WORD *)(_$V1 + 256) = *(_WORD *)(_$V1 + 224);
      *(_WORD *)(_$V1 + 260) = v27;
    }
LABEL_31:
    v26();
    __asm
    {
      lwc2    $12, 0x84($v1)
      lwc2    $17, 0x88($v1)
      lwc2    $13, 0xA0($v1)
      lwc2    $18, 0xA4($v1)
      lwc2    $14, 0xBC($v1)
      lwc2    $19, 0xC0($v1)
    }
    return (*(int (**)(void))(_$V1 + 100))();
  }
LABEL_32:
  v56 = (void (*)(void))v3[77];
  v3[30] = v4;
  v3[37] = v5;
  v3[44] = v6;
  v3[60] = v11;
  v56();
  return (*(int (**)(void))(v57 + 100))();
}
// 800403AC: variable 'v8' is possibly undefined
// 800403AC: variable 'v3' is possibly undefined
// 80040430: variable 'v14' is possibly undefined
// 80040434: variable 'v15' is possibly undefined
// 80040438: variable 'v16' is possibly undefined
// 8004045C: variable '_$V1' is possibly undefined
// 8004046C: variable 'v7' is possibly undefined
// 800404B0: variable '_$V1' is possibly undefined
// 800404EC: variable 'v25' is possibly undefined
// 800404EC: variable '_$V1' is possibly undefined
// 80040540: variable 'v28' is possibly undefined
// 80040544: variable 'v29' is possibly undefined
// 80040548: variable 'v30' is possibly undefined
// 8004056C: variable '_$V1' is possibly undefined
// 800405C8: variable '_$V1' is possibly undefined
// 80040604: variable 'v39' is possibly undefined
// 80040604: variable '_$V1' is possibly undefined
// 80040658: variable 'v41' is possibly undefined
// 8004065C: variable 'v42' is possibly undefined
// 80040660: variable 'v43' is possibly undefined
// 80040684: variable '_$V1' is possibly undefined
// 800406D8: variable '_$V1' is possibly undefined
// 80040714: variable 'v52' is possibly undefined
// 80040714: variable '_$V1' is possibly undefined
// 80040778: variable '_$V1' is possibly undefined
// 8004078C: variable 'v4' is possibly undefined
// 80040790: variable 'v5' is possibly undefined
// 80040794: variable 'v6' is possibly undefined
// 800407A4: variable 'v57' is possibly undefined

//----- (800407B8) --------------------------------------------------------
void __fastcall sub_800407B8(int a1, int a2, int a3)
{
  int v3; // $v1
  int v4; // $t5
  int v5; // $t6
  int v6; // $t7
  int v7; // $s1
  int v8; // $a1
  int v9; // $a3
  int v10; // $a1

  __asm
  {
    swc2    $12, 0x84($v1)
    swc2    $17, 0x88($v1)
    swc2    $13, 0xA0($v1)
    swc2    $18, 0xA4($v1)
    swc2    $14, 0xBC($v1)
    swc2    $19, 0xC0($v1)
  }
  *(_DWORD *)(v3 + 120) = v4;
  *(_DWORD *)(v3 + 148) = v5;
  *(_DWORD *)(v3 + 176) = v6;
  *(_DWORD *)(v3 + 204) = 0;
  *(_DWORD *)(v3 + 220) = 0;
  *(_DWORD *)(v3 + 88) = a3;
  if ( a3 != v7 )
  {
    v8 = *(_DWORD *)(a3 - 12);
    v9 = *(_DWORD *)(a3 - 8);
    *(_DWORD *)(v3 + 256) = v8;
    *(_WORD *)(v3 + 124) = v8;
    *(_DWORD *)(v3 + 260) = v9;
    v10 = *(_DWORD *)(a3 - 4);
    *(_WORD *)(v3 + 152) = v9;
    *(_DWORD *)(v3 + 264) = v10;
    *(_WORD *)(v3 + 180) = v10;
  }
}
// 800407D0: variable 'v4' is possibly undefined
// 800407D0: variable 'v3' is possibly undefined
// 800407D4: variable 'v5' is possibly undefined
// 800407D8: variable 'v6' is possibly undefined
// 800407E4: variable 'v7' is possibly undefined

//----- (8004081C) --------------------------------------------------------
int __fastcall sub_8004081C(__int16 *a1)
{
  int v1; // $v1
  int v2; // $ra
  int v3; // $v1
  int (*v4)(void); // $ra
  _BYTE *v5; // $t8

  *(_DWORD *)(v1 + 92) = v2;
  sub_800408BC(a1);
  v4 = *(int (**)(void))(v3 + 92);
  v5[8] = -1;
  v5[9] = -1;
  v5[10] = -1;
  return v4();
}
// 8004081C: variable 'v2' is possibly undefined
// 8004081C: variable 'v1' is possibly undefined
// 80040828: variable 'v3' is possibly undefined
// 80040830: variable 'v5' is possibly undefined

//----- (80040840) --------------------------------------------------------
int __fastcall sub_80040840(__int16 *a1)
{
  int v1; // $v1
  int v2; // $ra
  unsigned __int8 *v3; // $t9
  unsigned __int8 *v4; // $a0
  int v5; // $v1
  int (*v6)(void); // $ra
  int v7; // $a3
  _BYTE *v8; // $t8

  *(_DWORD *)(v1 + 92) = v2;
  sub_800408BC(a1);
  v6 = *(int (**)(void))(v5 + 92);
  v8[8] = (((v4[8] - (unsigned int)v3[8]) * v7) >> 16) + v3[8];
  v8[9] = (((v4[9] - (unsigned int)v3[9]) * v7) >> 16) + v3[9];
  v8[10] = (((v4[10] - (unsigned int)v3[10]) * v7) >> 16) + v3[10];
  return v6();
}
// 80040840: variable 'v2' is possibly undefined
// 80040840: variable 'v1' is possibly undefined
// 80040854: variable 'v5' is possibly undefined
// 80040850: variable 'v4' is possibly undefined
// 8004084C: variable 'v3' is possibly undefined
// 80040860: variable 'v7' is possibly undefined
// 8004086C: variable 'v8' is possibly undefined

//----- (800408BC) --------------------------------------------------------
int __fastcall sub_800408BC(__int16 *a1)
{
  int v1; // $v1
  int v2; // $s1
  int v3; // $t8
  __int16 *v4; // $t9
  unsigned int v5; // $a1
  int v6; // $a3
  int v7; // $v0
  int v8; // $a3
  int result; // $v0

  v5 = *(_DWORD *)v4 & 0xFFFF0000;
  v6 = *(_DWORD *)(v1 + 292);
  v7 = (int)(*(_DWORD *)a1 - v5) >> 16;
  *(_WORD *)(v3 + 2) = v6;
  v8 = (int)((v6 << 16) - v5) / v7;
  if ( *(_DWORD *)(v1 + 88) != v2 )
  {
    *(_BYTE *)(v3 + 12) = (((*((unsigned __int8 *)a1 + 12)
                           - (unsigned int)*((unsigned __int8 *)&loc_800408C8 + (_DWORD)v4 + 2147219268))
                          * v8) >> 16)
                        + *((_BYTE *)&loc_800408C8 + (_DWORD)v4 + 2147219268);
    *(_BYTE *)(v3 + 13) = (((*((unsigned __int8 *)a1 + 13)
                           - (unsigned int)*((unsigned __int8 *)&loc_800408C8 + (_DWORD)v4 + 2147219268))
                          * v8) >> 16)
                        + *((_BYTE *)&loc_800408C8 + (_DWORD)v4 + 2147219268);
  }
  *(_WORD *)v3 = ((unsigned int)((*a1 - *v4) * v8) >> 16) + *v4;
  result = (((*((_DWORD *)a1 + 1) - *(_DWORD *)((char *)&loc_800408C0 + (_DWORD)v4 + 2147219268)) * v8) >> 16)
         + *(_DWORD *)((char *)&loc_800408C0 + (_DWORD)v4 + 2147219268);
  *(_DWORD *)(v3 + 4) = result;
  return result;
}
// 800408BC: variable 'v4' is possibly undefined
// 800408CC: variable 'v1' is possibly undefined
// 800408D8: variable 'v3' is possibly undefined
// 800408EC: variable 'v2' is possibly undefined

//----- (80040988) --------------------------------------------------------
int sub_80040988()
{
  int v0; // $v1
  int (__fastcall *v1)(_DWORD); // $s3

  return v1(*(_DWORD *)(v0 + 296));
}
// 800409AC: variable 'v1' is possibly undefined
// 80040988: variable 'v0' is possibly undefined

//----- (800409B4) --------------------------------------------------------
void sub_800409B4()
{
  int v0; // $t9

  if ( v0 < 0 )
    JUMPOUT(0x8004098C);
}
// 800409C0: control flows out of bounds to 8004098C
// 800409D4: control flows out of bounds to 800409AC
// 800409B8: variable 'v0' is possibly undefined

//----- (800409E4) --------------------------------------------------------
int sub_800409E4()
{
  int v0; // $v1
  int (*v1)(void); // $s3
  int v2; // $t9

  if ( (v2 ^ *(_DWORD *)(v0 + 296)) >= 0 )
  {
    __asm { mfc2    $t9, $12 }
    _$T9 = _$T9 & 0xFFFF0000 | (unsigned __int16)(_$T9 + 3);
    __asm
    {
      mtc2    $t9, $12
      mfc2    $t9, $13
    }
    _$T9 = _$T9 & 0xFFFF0000 | (unsigned __int16)(_$T9 + 3);
    __asm
    {
      mtc2    $t9, $13
      mfc2    $t9, $14
    }
    _$T9 = _$T9 & 0xFFFF0000 | (unsigned __int16)(_$T9 + 3);
    __asm { mtc2    $t9, $14 }
  }
  return v1();
}
// 800409F0: variable 'v2' is possibly undefined
// 800409E4: variable 'v0' is possibly undefined
// 80040A94: variable 'v1' is possibly undefined

//----- (80040A9C) --------------------------------------------------------
int __fastcall sub_80040A9C(int a1, int a2, int a3)
{
  _DWORD *v3; // $v1
  int v4; // $t0
  int v8; // $s1
  int *v9; // $s7
  int v10; // $fp
  int v11; // $t8
  int v12; // $v0
  bool v13; // dc
  int v14; // $v0
  int result; // $v0
  int v18; // $t9
  int v19; // $t9
  int v20; // $a0
  int v22; // $t8

  v11 = v3[61];
  if ( v4 << 6 <= 0 )
    v11 = v3[62];
  v3[60] = v11;
  v12 = v3[60] - (v3[72] >> 17);
  v13 = v12 >= 0;
  v14 = 4 * v12;
  if ( !v13 )
    v14 = 0;
  v13 = v14 - 8188 <= 0;
  result = v14 + v10;
  if ( !v13 )
    result = v10 + 8188;
  __asm
  {
    mtc2    $t5, $20
    mtc2    $t6, $21
    mtc2    $t7, $22
  }
  _$A1 = (unsigned __int16)v3[58];
  __asm { mtc2    $a1, $8 }
  if ( (unsigned __int16)v3[58] && (v4 & 0x1000000) == 0 )
    __asm { cop2    0xF8002A }
  if ( a3 == v8 )
  {
    __asm
    {
      swc2    $12, 8($s7)
      swc2    $13, 0x10($s7)
      swc2    $14, 0x18($s7)
      mfc2    $t9, $20
    }
    v9[1] = _$T9 | 0x30000000;
    __asm
    {
      swc2    $21, 0xC($s7)
      swc2    $22, 0x14($s7)
    }
    v18 = 100663296;
  }
  else
  {
    v19 = *(_DWORD *)(a3 - 8);
    v20 = *(_DWORD *)(a3 - 4);
    __asm
    {
      swc2    $12, 8($s7)
      swc2    $13, 0x14($s7)
      swc2    $14, 0x20($s7)
    }
    v9[3] = *(_DWORD *)(a3 - 12);
    v9[6] = v19;
    v9[9] = v20;
    __asm { mfc2    $a0, $20 }
    v22 = 872415232;
    if ( (v19 & 0x600000) != 0x600000 )
      v22 = 905969664;
    v9[1] = v22 | _$A0;
    __asm
    {
      swc2    $21, 0x10($s7)
      swc2    $22, 0x1C($s7)
    }
    v18 = 150994944;
  }
  *v9 = *(_DWORD *)(result + 32) | v18;
  *(_DWORD *)(result + 32) = (unsigned int)v9 & 0xFFFFFF;
  return result;
}
// 80040A9C: variable 'v3' is possibly undefined
// 80040AA4: variable 'v4' is possibly undefined
// 80040ADC: variable 'v10' is possibly undefined
// 80040B10: variable 'v8' is possibly undefined
// 80040B30: variable 'v9' is possibly undefined

//----- (80040BBC) --------------------------------------------------------
void sub_80040BBC()
{
  int v0; // $v1

  *(_DWORD *)(v0 + 308) = &loc_800409C8;
  JUMPOUT(0x8003F378);
}
// 80040BC4: control flows out of bounds to 8003F378
// 80040BC8: variable 'v0' is possibly undefined
// 80040BCC: using guessed type int sub_80040BCC(void);

//----- (80040BCC) --------------------------------------------------------
void __fastcall sub_80040BCC(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        _DWORD *a27)
{
  int v27; // $v1
  _DWORD *v28; // $a1
  int v29; // $t9
  int v30; // $a0

  v28 = **(_DWORD ***)(v27 + 96);
  *(_DWORD *)(v27 + 296) = -1;
  v29 = v28[4];
  v30 = v28[5];
  *a27 = 1024 - v28[3];
  a27[1] = v29 + 2048;
  a27[2] = v30;
  __asm { cfc2    $t9, $7 }
}
// 80040BCC: variable 'v27' is possibly undefined

//----- (80040C20) --------------------------------------------------------
void __fastcall sub_80040C20(_DWORD *a1, int a2, int *a3, _DWORD *a4)
{
  int v4; // $t0
  int v5; // $t2
  int v6; // $t4
  int v15; // $t5
  int v16; // $t6

  sub_800422A0(*(_DWORD *)(a2 + 8));
  sub_80041FBC();
  if ( v15 )
  {
    sub_800422A0(v15);
    sub_80041F18();
  }
  if ( v16 )
  {
    sub_800422A0(v16);
    sub_80041F18();
  }
  v4 = *a3;
  v5 = a3[1];
  v6 = a3[2];
  if ( a4 )
  {
    v4 = (*a4 * v4) >> 12;
    v5 = (a4[1] * v5) >> 12;
    v6 = (a4[2] * v6) >> 12;
  }
  a1[5] = v4;
  a1[6] = v5;
  a1[7] = v6;
  if ( ((unsigned __int16)v4 | (unsigned __int16)v5 | v6) == 0x1000 )
  {
    __asm
    {
      cfc2    $t0, $0
      cfc2    $t1, $1
      cfc2    $t2, $2
      cfc2    $t3, $3
      cfc2    $t4, $4
    }
  }
  else
  {
    sub_80041F18();
  }
  *a1 = _$T0;
  a1[1] = _$T1;
  a1[2] = _$T2;
  a1[3] = _$T3;
  a1[4] = _$T4;
}
// 80040C78: variable 'v15' is possibly undefined
// 80040CA4: variable 'v16' is possibly undefined
// 8003E854: variable '_$T0' is possibly undefined
// 8003E858: variable '_$T1' is possibly undefined
// 8003E85C: variable '_$T2' is possibly undefined
// 8003E860: variable '_$T3' is possibly undefined
// 8003E864: variable '_$T4' is possibly undefined

//----- (80040CD4) --------------------------------------------------------
void __fastcall sub_80040CD4(
        int a1,
        int a2,
        int a3,
        int a4,
        int a5,
        __int16 *a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20)
{
  _DWORD *v20; // $v1
  int v21; // $gp
  int v25; // $a1
  int v26; // $a1
  unsigned int v27; // $t8
  int v28; // $a0
  int v29; // $t9
  int v30; // $t8
  bool v31; // dc
  int v32; // $a1
  int v33; // $a2
  int i; // $a3
  int v35; // $v0
  int v36; // $v0
  int v37; // $v0
  int v44; // $a2
  int v45; // $t9
  int v46; // $a2

  __asm { cfc2    $t8, $5 }
  __asm { cfc2    $t9, $6 }
  if ( (a8 & 0x10000000) != 0 )
  {
    v20[60] = *(_DWORD *)(v21 + 280) + 1904;
    v20[61] = a19 + 1904;
    v20[62] = a20 + 1904;
  }
  else
  {
    __asm { cfc2    $a0, $7 }
    if ( _$T8 < 0 )
      _$T8 = -_$T8;
    if ( _$T9 < 0 )
      _$T9 = -_$T9;
    if ( _$A0 < 0 )
      _$A0 = -_$A0;
    v25 = _$T8;
    if ( _$T8 - _$T9 <= 0 )
    {
      _$T8 = _$T9;
      _$T9 = v25;
    }
    v26 = _$T8;
    if ( _$T8 - _$A0 <= 0 )
    {
      _$T8 = _$A0;
      _$A0 = v26;
    }
    v27 = _$T8 + ((unsigned int)_$T9 >> 2) + ((unsigned int)_$A0 >> 2);
    v28 = 0;
    v29 = v27;
    v30 = v27 >> 15;
    while ( 1 )
    {
      v31 = v30 == 0;
      v30 >>= 1;
      if ( v31 )
        break;
      ++v28;
    }
    v32 = a6[10] >> v28;
    v33 = a6[12] >> v28;
    for ( i = a6[14] >> v28; ; i >>= 1 )
    {
      v35 = v32 - 0x4000;
      if ( v32 < 0 )
        v35 = -v32 - 0x4000;
      if ( v35 <= 0 )
        break;
      v32 >>= 1;
      v33 >>= 1;
      ++v28;
    }
    while ( 1 )
    {
      v36 = v33 - 0x4000;
      if ( v33 < 0 )
        v36 = -v33 - 0x4000;
      if ( v36 <= 0 )
        break;
      v32 >>= 1;
      v33 >>= 1;
      i >>= 1;
      ++v28;
    }
    while ( 1 )
    {
      v37 = i - 0x4000;
      if ( i < 0 )
        v37 = -i - 0x4000;
      if ( v37 <= 0 )
        break;
      v32 >>= 1;
      v33 >>= 1;
      i >>= 1;
      ++v28;
    }
    *((_DWORD *)a6 + 5) = v32;
    *((_DWORD *)a6 + 6) = v33;
    *((_DWORD *)a6 + 7) = i;
    v20[59] = v28;
    __asm
    {
      cfc2    $t8, $5
      cfc2    $a1, $6
      cfc2    $a2, $7
    }
    _$T8 = _$T8 >> v28;
    _$A1 = _$A1 >> v28;
    _$A2 = _$A2 >> v28;
    __asm
    {
      ctc2    $t8, $5
      ctc2    $a1, $6
    }
    __asm { ctc2    $a2, $7 }
    v20[63] = (int)v20[63] >> v28;
    v44 = v29 - (v29 >> v28);
    v45 = 1904;
    v46 = v44 >> 5;
    if ( v28 )
      v45 = 1904 - v46;
    v20[60] = *(_DWORD *)(v21 + 280) + v45;
    v20[61] = a19 + v45;
    v20[62] = a20 + v45;
    if ( v28 )
      sub_80041F18();
  }
}
// 80040E14: variable 'v20' is possibly undefined
// 80040E60: variable 'v21' is possibly undefined

//----- (80040ED8) --------------------------------------------------------
void __fastcall sub_80040ED8(int a1, int a2, _DWORD *a3, int a4)
{
  int v4; // $s0
  int v5; // $s1
  int v6; // $s2
  int v7; // $s3
  int v8; // $s4
  int v9; // $s5
  int v10; // $t8
  int v11; // $t9
  int v14; // $fp
  int v15; // $a1
  int v16; // $t9
  int v17; // $a0
  int v18; // $t9
  void (__fastcall *v19)(_DWORD, int, _DWORD *, int, int, int, int, int, int, int); // $a0
  int v20; // $t8
  int v21; // $t9
  _DWORD *v22; // $v1
  __int16 v23; // $t3
  unsigned int v24; // $s4
  int v25; // $t9
  int v26; // $t3
  _DWORD *v27; // $s4
  unsigned int *v28; // $t9
  unsigned int v29; // $s3
  unsigned int v30; // $gp
  int v31; // $t8
  int v32; // $ra
  int v33; // $t8
  int v34; // $t9
  unsigned int v35; // $t5
  unsigned int v36; // $t6
  unsigned int v38; // $t7
  int v41; // $t0
  int v44; // $t9
  int v46; // $t9
  unsigned int v48; // $t5
  unsigned int v49; // $t6
  unsigned int v51; // $t7
  int v54; // $t0
  __int16 v56; // $t7
  unsigned int v59; // $t5
  unsigned int v60; // $t6
  unsigned int v62; // $t7
  int v65; // $t0
  int v68; // $t9
  _WORD v70[8]; // [sp+2h] [-38h] BYREF
  int v71; // [sp+12h] [-28h]
  int v72; // [sp+16h] [-24h]
  int v73; // [sp+1Ah] [-20h]
  int v74; // [sp+1Eh] [-1Ch]
  int v75; // [sp+22h] [-18h]
  int v76; // [sp+26h] [-14h]
  int v77; // [sp+32h] [-8h]
  int v78; // [sp+36h] [-4h]

  v71 = v4;
  v72 = v5;
  v73 = v6;
  v74 = v7;
  v75 = v8;
  v76 = v9;
  v77 = v10;
  v78 = v11;
  MEMORY[0x1F800000] = v70;
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $6
    ctc2    $zero, $7
  }
  _$T8 = 1365;
  __asm { ctc2    $t8, $29 }
  _$T8 = 1024;
  __asm { ctc2    $t8, $30 }
  v14 = a2 + 32;
  MEMORY[0x1F80001C] = a4;
  MEMORY[0x1F80009C] = a1 + 4;
  if ( (_WORD *)(a1 + 4) == v70 )
  {
    sub_8003AC44(a2 + 32, 0x800u);
    __asm { jr      $ra }
  }
  v15 = *a3;
  v16 = *(int *)(*a3 + 4) >> 8;
  v17 = *(int *)(*a3 + 8) >> 8;
  MEMORY[0x1F8000C0] = *(int *)*a3 >> 8;
  MEMORY[0x1F8000C4] = v16;
  MEMORY[0x1F8000C8] = v17;
  v18 = a3[7];
  v19 = (void (__fastcall *)(_DWORD, int, _DWORD *, int, int, int, int, int, int, int))a3[5];
  MEMORY[0x1F8000A8] = a3[6];
  v20 = a3[10];
  MEMORY[0x1F8000AC] = v18;
  MEMORY[0x1F800070] = v20;
  v21 = a3[9];
  MEMORY[0x1F800064] = a3[8];
  MEMORY[0x1F800068] = v21;
  MEMORY[0x1F80022C] = a3[12];
  v19(v19, v15, a3, a4, v71, v72, v73, v74, v75, v76);
  v22[52] = 488447261;
  v22[53] = 421075739;
  v22[54] = 353703703;
  v22[55] = 320017171;
  v22[56] = 286331153;
  v22[57] = 286331153;
  v22[58] = 252645135;
  v22[59] = 252645135;
  v22[118] = -983056;
  v22[119] = -65537;
  v22[135] = 14221824;
  *(_DWORD *)(v14 + 8188) = 0xFFFFFF;
  v23 = v70[0];
  v24 = v70[0] & 0xE000;
  v22[29] = v24;
  v25 = v23 & 0x7FF;
  v26 = v23 & 0x1800;
  v27 = (_DWORD *)((char *)v22 + (v24 >> 8));
  if ( v26 )
  {
    v28 = (unsigned int *)(v27[163] + 8 * v25);
    v29 = *v28;
    v30 = v28[1];
  }
  else
  {
    v31 = v27[162];
    v30 = *(unsigned __int16 *)(v31 + 2 * v25);
    v29 = *(_DWORD *)(v31 - 4 * v25 - 4);
  }
  v22[27] = 0;
  v32 = v27[160];
  v33 = v27[161];
  v34 = v27[164];
  if ( !v26 )
  {
    v35 = (v29 >> 18) & 0x3FFC;
    v36 = (v29 >> 6) & 0x3FFC;
    _$V0 = (((*(_DWORD *)(v34 - v35 - 4) & 0xFFF0FFF0) >> 2) + v32) & v22[119];
    __asm { mtc2    $v0, $0 }
    v38 = (v30 >> 2) & 0x3FFC;
    _$V0 = ((unsigned __int16)(*(_WORD *)(v34 + (v35 >> 1)) & 0xFFF0) >> 2) + v33;
    __asm { mtc2    $v0, $1 }
    _$V0 = (((*(_DWORD *)(v34 - v36 - 4) & 0xFFF0FFF0) >> 2) + v32) & v22[119];
    __asm { mtc2    $v0, $2 }
    v41 = *(_DWORD *)(v34 - v38 - 4);
    _$V0 = ((unsigned __int16)(*(_WORD *)(v34 + (v36 >> 1)) & 0xFFF0) >> 2) + v33;
    __asm { mtc2    $v0, $3 }
    LOWORD(v38) = *(_WORD *)(v34 + (v38 >> 1));
    _$V0 = (((v41 & 0xFFF0FFF0) >> 2) + v32) & v22[119];
    v44 = v22[42];
    __asm { mtc2    $v0, $4 }
    _$A2 = ((unsigned __int16)(v38 & 0xFFF0) >> 2) + v33;
    __asm { mtc2    $a2, $5 }
    v22[97] = 0;
    __asm { jr      $t9 }
  }
  if ( (v26 & 0x800) != 0 )
  {
    v48 = (v29 >> 18) & 0x3FFC;
    v49 = (v29 >> 6) & 0x3FFC;
    _$V0 = (((*(_DWORD *)(v34 - v48 - 4) & 0xFFF0FFF0) >> 2) + v32) & v22[119];
    __asm { mtc2    $v0, $0 }
    v51 = (v30 >> 18) & 0x3FFC;
    _$V0 = ((unsigned __int16)(*(_WORD *)(v34 + (v48 >> 1)) & 0xFFF0) >> 2) + v33;
    __asm { mtc2    $v0, $1 }
    _$V0 = (((*(_DWORD *)(v34 - v49 - 4) & 0xFFF0FFF0) >> 2) + v32) & v22[119];
    __asm { mtc2    $v0, $2 }
    v54 = *(_DWORD *)(v34 - v51 - 4);
    _$V0 = ((unsigned __int16)(*(_WORD *)(v34 + (v49 >> 1)) & 0xFFF0) >> 2) + v33;
    __asm { mtc2    $v0, $3 }
    v56 = *(_WORD *)(v34 + (v51 >> 1));
    _$V0 = (((v54 & 0xFFF0FFF0) >> 2) + v32) & v22[119];
    if ( v26 == 6144 )
    {
      __asm { mtc2    $v0, $4 }
      _$V0 = ((unsigned __int16)(v56 & 0xFFF0) >> 2) + v33;
      __asm { mtc2    $v0, $5 }
      __asm { jr      $t9 }
    }
    v46 = v22[42];
    __asm { mtc2    $v0, $4 }
    _$A2 = ((unsigned __int16)(v56 & 0xFFF0) >> 2) + v33;
    __asm { mtc2    $a2, $5 }
    v22[97] = 0;
    __asm { jr      $t9 }
  }
  v59 = (v29 >> 6) & 0x3FFC;
  v60 = (v30 >> 18) & 0x3FFC;
  _$V0 = (((*(_DWORD *)(v34 - v59 - 4) & 0xFFF0FFF0) >> 2) + v32) & v22[119];
  __asm { mtc2    $v0, $0 }
  v62 = (v30 >> 6) & 0x3FFC;
  _$V0 = ((unsigned __int16)(*(_WORD *)(v34 + (v59 >> 1)) & 0xFFF0) >> 2) + v33;
  __asm { mtc2    $v0, $1 }
  _$V0 = (((*(_DWORD *)(v34 - v60 - 4) & 0xFFF0FFF0) >> 2) + v32) & v22[119];
  __asm { mtc2    $v0, $2 }
  v65 = *(_DWORD *)(v34 - v62 - 4);
  _$V0 = ((unsigned __int16)(*(_WORD *)(v34 + (v60 >> 1)) & 0xFFF0) >> 2) + v33;
  __asm { mtc2    $v0, $3 }
  LOWORD(v62) = *(_WORD *)(v34 + (v62 >> 1));
  _$V0 = (((v65 & 0xFFF0FFF0) >> 2) + v32) & v22[119];
  v68 = v22[42];
  __asm { mtc2    $v0, $4 }
  _$A2 = ((unsigned __int16)(v62 & 0xFFF0) >> 2) + v33;
  __asm { mtc2    $a2, $5 }
  v22[97] = -983056;
  __asm { jr      $t9 }
}
// 80040EDC: variable 'v4' is possibly undefined
// 80040EE0: variable 'v5' is possibly undefined
// 80040EE4: variable 'v6' is possibly undefined
// 80040EE8: variable 'v7' is possibly undefined
// 80040EEC: variable 'v8' is possibly undefined
// 80040EF0: variable 'v9' is possibly undefined
// 80040EFC: variable 'v10' is possibly undefined
// 80040F00: variable 'v11' is possibly undefined
// 80040FE8: variable 'v22' is possibly undefined

//----- (80041550) --------------------------------------------------------
void sub_80041550()
{
  char *v0; // $v0
  int v1; // $v1
  unsigned int i; // $t1
  unsigned int *v3; // $t4
  unsigned int *v4; // $s7
  int v5; // $t9
  unsigned int v6; // $t1
  int v7; // [sp+0h] [+0h] BYREF

  if ( v0 - (char *)v3 < 0 )
  {
    v6 = (_DWORD)v3-- << 8;
    for ( i = v6 >> 8; v0 != (char *)v3; i -= 4 )
      *v3-- = i;
  }
  *v4 = i | v5;
  *v3 = (unsigned int)v4 & 0xFFFFFF;
  if ( &v7 == *(int **)(v1 + 156) )
    JUMPOUT(0x800414BC);
  JUMPOUT(0x800410EC);
}
// 8004159C: control flows out of bounds to 800414BC
// 80041594: control flows out of bounds to 800410EC
// 80041708: control flows out of bounds to 800414AC
// 80041550: variable 'v0' is possibly undefined
// 80041550: variable 'v3' is possibly undefined
// 8004157C: variable 'i' is possibly undefined
// 8004157C: variable 'v5' is possibly undefined
// 80041580: variable 'v4' is possibly undefined
// 8004158C: variable 'v1' is possibly undefined

//----- (80041768) --------------------------------------------------------
void sub_80041768()
{
  _DWORD *v0; // $v1
  int v1; // $t5
  int v2; // $t6
  int v3; // $t7
  int v4; // $s0
  int v5; // $s1
  int v6; // $s5
  _DWORD *v7; // $s7
  unsigned int v8; // $ra
  int v9; // $t8
  bool v10; // dc
  int v11; // $s5
  int v12; // $s5
  unsigned int v13; // $s5
  char v14; // $ra
  int v15; // $a1
  int v16; // $s5
  int v17; // $s5
  unsigned int v18; // $t8
  unsigned int v19; // $a0
  unsigned int v20; // $a1
  int v21; // $t8

  v9 = v6 << 20;
  v10 = v6 << 20 != 0;
  v11 = v6 & 0x7FF;
  if ( !v10 )
  {
    __asm
    {
      swc2    $12, 8($s7)
      swc2    $13, 0x10($s7)
      swc2    $14, 0x18($s7)
    }
    v7[1] = v1 | 0x30000000;
    v7[3] = v2;
    v7[5] = v3;
    JUMPOUT(0x6000000);
  }
  if ( v9 > 0 )
  {
    v12 = 12 * v11;
    goto LABEL_10;
  }
  v13 = *(_DWORD *)(4 * v11 + v4);
  v14 = *((_BYTE *)v0 + (v8 >> v0[139]) + 208);
  if ( (v13 & 0x80000000) == 0 )
  {
    v15 = v13 << 20;
    v16 = ((_WORD)v13 + ((unsigned __int16)((v0[7] >> (v13 >> 26)) + (v13 >> 19)) & (v13 >> 12) & 0x7F)) & 0x7FF;
    if ( v15 >= 0 )
    {
LABEL_9:
      v12 = 12 * v16;
LABEL_10:
      v17 = v12 + v5;
      v18 = *(_DWORD *)(v17 - 12);
      v19 = *(_DWORD *)(v17 - 8);
      v20 = *(_DWORD *)(v17 - 4);
      if ( v0[97] )
      {
        v18 = v18 & 0xFFFF0000 | (unsigned __int16)*(_DWORD *)(v17 - 8);
        v19 = v19 & 0xFFFF0000 | (unsigned __int16)*(_DWORD *)(v17 - 4);
        v20 >>= 16;
      }
      v7[3] = v18;
      v7[6] = v19;
      v7[9] = v20;
      v7[4] = v2;
      v7[7] = v3;
      v21 = 872415232;
      if ( (v19 & 0x600000) != 0x600000 )
        v21 = 905969664;
      v7[1] = v1 | v21;
      __asm
      {
        swc2    $12, 8($s7)
        swc2    $13, 0x14($s7)
        swc2    $14, 0x20($s7)
      }
      JUMPOUT(0x9000000);
    }
    v13 = *(_DWORD *)(4 * v16 + v4);
  }
  v16 = (v13 & 0x7FF) + ((v13 >> v14) & 3);
  goto LABEL_9;
}
// 800417A0: control flows out of bounds to 6000000
// 800418BC: control flows out of bounds to 9000000
// 80041768: variable 'v6' is possibly undefined
// 8004178C: variable 'v1' is possibly undefined
// 80041790: variable 'v7' is possibly undefined
// 80041794: variable 'v2' is possibly undefined
// 8004179C: variable 'v3' is possibly undefined
// 800417C4: variable 'v4' is possibly undefined
// 800417D0: variable 'v8' is possibly undefined
// 800417C8: variable 'v0' is possibly undefined
// 8004183C: variable 'v5' is possibly undefined

//----- (800418C4) --------------------------------------------------------
int __fastcall sub_800418C4(unsigned int a1, int a2, int _$A2)
{
  int v4; // $v1
  __int16 v5; // $t3
  int v6; // $s2
  int v7; // $s7
  int v11; // $ra
  int v12; // $a2
  int v13; // $t8
  int v15; // $t8
  bool v16; // dc
  int v17; // $t8

  __asm
  {
    swc2    $0, 0x1B4($v1)
    swc2    $1, 0x1B8($v1)
    cop2    0x280030
  }
  *(_DWORD *)(v4 + 116) = v5 & 0xE000;
  __asm
  {
    swc2    $12, 0x178($v1)
    swc2    $17, 0x17C($v1)
    mtc2    $v0, $0
    mtc2    $a2, $1
    mfc2    $t8, $12
    mfc2    $t9, $13
    mfc2    $v0, $14
  }
  *(_DWORD *)(v7 + 8) = _$T8;
  v11 = *(_DWORD *)(v4 + 540);
  __asm { cop2    0x180001 }
  v12 = _$T8 & _$T9 & _$V0;
  v13 = (_$T8 - v11) | (_$T9 - v11);
  __asm { mfc2    $t9, $14 }
  __asm { cop2    0x168002E }
  v15 = ~(v13 | (_$V0 - v11) | (_$T9 - v11)) | v12 & _$T9;
  v16 = v15 < 0;
  v17 = v15 << 16;
  if ( v16 || v17 < 0 )
    JUMPOUT(0x800414AC);
  __asm { mfc2    $ra, $24 }
  return (*(int (__fastcall **)(unsigned int, _DWORD))(v4 + 104))(
           a1,
           *(_DWORD *)(((4 * a2) & 0x3C | (a1 >> 6) & 0xC00 | (a1 << 6) & 0x3C0) + v6));
}
// 800419CC: control flows out of bounds to 800414AC
// 800418D4: variable 'v5' is possibly undefined
// 800418D8: variable 'v4' is possibly undefined
// 80041974: variable 'v7' is possibly undefined
// 80041A0C: variable 'v6' is possibly undefined

//----- (80041B7C) --------------------------------------------------------
void sub_80041B7C()
{
  ;
}

//----- (80041EF0) --------------------------------------------------------
int __fastcall sub_80041EF0(int *a1)
{
  _$T8 = *a1;
  _$T9 = a1[1];
  __asm
  {
    ctc2    $t8, $0
    ctc2    $t9, $1
  }
  _$T8 = a1[2];
  _$T9 = a1[3];
  _$A0 = a1[4];
  __asm
  {
    ctc2    $t8, $2
    ctc2    $t9, $3
    ctc2    $a0, $4
  }
  return sub_80041F18();
}
// 80041F18: using guessed type int sub_80041F18(void);

//----- (80041F18) --------------------------------------------------------
int sub_80041F18()
{
  unsigned int v0; // $t0
  int v1; // $t1
  int v2; // $t2

  _$T8 = (unsigned __int16)v0 | v1 & 0xFFFF0000;
  __asm
  {
    mtc2    $t8, $0
    mtc2    $t3, $1
  }
  __asm { cop2    0x486012 }
  _$T8 = HIWORD(v0) | (v2 << 16);
  _$T9 = HIWORD(_$T3);
  __asm
  {
    mtc2    $t8, $2
    mtc2    $t9, $3
  }
  _$T8 = (unsigned __int16)v1 | v2 & 0xFFFF0000;
  __asm
  {
    mfc2    $t0, $9
    mfc2    $t1, $10
    mfc2    $t3, $11
    cop2    0x48E012
    mtc2    $t8, $4
    mtc2    $t4, $5
  }
  __asm
  {
    mfc2    $t8, $9
    mfc2    $t2, $10
    mfc2    $t9, $11
    cop2    0x496012
  }
  __asm
  {
    mfc2    $t8, $9
    mfc2    $t9, $10
    mfc2    $t4, $11
  }
  return sub_80041FBC();
}
// 80041F1C: variable 'v0' is possibly undefined
// 80041F20: variable 'v1' is possibly undefined
// 80041F34: variable 'v2' is possibly undefined
// 80041F40: variable '_$T3' is possibly undefined
// 80041FBC: using guessed type int sub_80041FBC(void);

//----- (80041FBC) --------------------------------------------------------
void sub_80041FBC()
{
  __asm
  {
    ctc2    $t0, $0
    ctc2    $t1, $1
    ctc2    $t2, $2
    ctc2    $t3, $3
    ctc2    $t4, $4
  }
}

//----- (80041FD8) --------------------------------------------------------
void sub_80041FD8()
{
  JUMPOUT(0x80041FC0);
}
// 80042050: control flows out of bounds to 80041FC0
// 80042058: using guessed type int sub_80042058(void);

//----- (80042058) --------------------------------------------------------
void __fastcall sub_80042058(
        __int16 *a1,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23,
        int a24,
        int a25,
        int a26,
        int a27,
        _DWORD *a28)
{
  _DWORD *v28; // $v1
  _DWORD *v29; // $gp
  int v30; // $t5
  int v31; // $t6
  int v32; // $t7
  int v33; // $a1
  int v34; // $a2
  int v35; // $t5
  int v36; // $t6
  int v37; // $t7

  v30 = v29[24];
  v31 = v29[25];
  v32 = v29[26];
  if ( (a8 & 0x40000000) != 0 )
  {
    v33 = *(_DWORD *)(a13 + 8);
    v34 = *(_DWORD *)(a13 + 12);
    if ( (a8 & 0x20000000) != 0 )
    {
      v34 = (v34 + *(_DWORD *)(a14 + 12)) >> 1;
      v33 = (unsigned __int16)(((v33 << 16) + (*(_DWORD *)(a14 + 8) << 16)) >> 17)
          | (((v33 >> 16) + (*(int *)(a14 + 8) >> 16)) >> 1 << 16);
    }
    if ( v33 | v34 )
    {
      v32 += (v34 * ((v29[32] * a28[2]) >> 12)) >> 4;
      v31 += (int)(((unsigned __int64)v33 >> 16) * ((v29[31] * a28[1]) >> 12)) >> 4;
      v30 += ((__int16)v33 * ((v29[30] * *a28) >> 12)) >> 4;
    }
  }
  v28[63] = v31;
  v35 = (v30 >> 8) - v28[13];
  v36 = (v31 >> 8) - v28[14];
  v37 = (v32 >> 8) - v28[15];
  _$T2 = ((v35 * (__int64)*a1) >> 12) + ((v36 * (__int64)a1[1]) >> 12) + ((v37 * (__int64)a1[2]) >> 12);
  __asm { ctc2    $t2, $5 }
  _$T2 = ((v35 * (__int64)a1[3]) >> 12) + ((v36 * (__int64)a1[4]) >> 12) + ((v37 * (__int64)a1[5]) >> 12);
  __asm { ctc2    $t2, $6 }
  _$T7 = ((v35 * (__int64)a1[6]) >> 12) + ((v36 * (__int64)a1[7]) >> 12) + ((v37 * (__int64)a1[8]) >> 12);
  __asm { ctc2    $t7, $7 }
}
// 80042058: variable 'v29' is possibly undefined
// 80042150: variable 'v28' is possibly undefined

//----- (800422A0) --------------------------------------------------------
int __fastcall sub_800422A0(int a1)
{
  int v1; // $a1
  int result; // $v0

  v1 = (2 * a1) & 0xFFF;
  if ( (a1 & 0x400) != 0 )
  {
    if ( (a1 & 0x800) != 0 )
      return *(__int16 *)((char *)&dword_8005C91C[-512] + v1);
    else
      return (unsigned __int16)-*(_WORD *)((char *)&dword_8005C91C[-512] + v1);
  }
  else
  {
    result = *(__int16 *)((char *)&dword_8005C91C[512] - v1);
    if ( (a1 & 0x800) != 0 )
      return (unsigned __int16)-(__int16)result;
  }
  return result;
}
// 8005C91C: using guessed type int dword_8005C91C[512];

//----- (80042C58) --------------------------------------------------------
void __fastcall sub_80042C58(int a1)
{
  int v2; // $t2
  int v3; // $s7
  int v4; // $t8
  int v5; // $t9
  int v6; // $s2
  int v7; // $t0
  int v8; // $at
  int v9; // $a2
  int v10; // $s6
  int v11; // $a3
  int v12; // $a2
  int v13; // $s6
  int v14; // $a3
  int v15; // $a2
  int v16; // $a3
  int v17; // $a0
  int v18; // $s6
  int v19; // $a2
  int v20; // $a0
  int v21; // $s6
  int v22; // $a2
  int v23; // $a0
  int v24; // $a2
  int v25; // $a3
  int v26; // $a2
  bool v27; // dc
  int v28; // $a2
  int v29; // $a2
  int v31; // $a0
  int v32; // $s6
  int v33; // $a2
  int v34; // $a0
  int v35; // $s6
  int v36; // $a2
  int v37; // $a0
  int v38; // $a2

  v6 = _$V1[34];
  v7 = _$V1[32];
  v8 = _$V1[35];
  v9 = a1 - v7;
  v10 = v4 - _$V1[31];
  if ( a1 - v7 < 0 )
    v9 = v7 - a1;
  v11 = 2100 - v9;
  v12 = v10 >> 16;
  if ( v11 < 0 )
    goto LABEL_32;
  v13 = v10 << 16;
  if ( v12 < 0 )
    v12 = -v12;
  v14 = v11 - v12;
  v15 = v13 >> 16;
  if ( v14 < 0 )
    goto LABEL_32;
  if ( v15 < 0 )
    v15 = -v15;
  v16 = v14 - v15;
  if ( v16 < 0 )
  {
LABEL_32:
    v31 = a1 - v8;
    v32 = v4 - v6;
    if ( v31 < 0 )
      v31 = -v31;
    v33 = 2100 - v31;
    v34 = v32 >> 16;
    if ( v33 < 0 )
      goto LABEL_43;
    v35 = v32 << 16;
    if ( v34 < 0 )
      v34 = -v34;
    v36 = v33 - v34;
    v37 = v35 >> 16;
    if ( v36 < 0 )
      goto LABEL_43;
    if ( v37 < 0 )
      v37 = -v37;
    v38 = v36 - v37;
    v27 = v38 < 0;
    v28 = v38 - 800;
    if ( v27 )
    {
LABEL_43:
      if ( v2 )
      {
        v28 = 0;
        if ( !(((unsigned int)(_$V1[44] | _$V1[45]) | _$V1[46] | _$V1[47]) << 12 >> 30) )
        {
          __asm
          {
            swc2    $12, 0xC($s7)
            swc2    $13, 0x10($s7)
            swc2    $14, 0x14($s7)
          }
          *(_DWORD *)(v3 + 4) = 671088640;
          JUMPOUT(0x5000000);
        }
      }
      else
      {
        v28 = 0;
        if ( !(((unsigned int)(_$V1[44] | _$V1[45]) | _$V1[46]) << 12 >> 30) )
        {
          __asm
          {
            swc2    $12, 8($s7)
            swc2    $13, 0xC($s7)
            swc2    $14, 0x10($s7)
          }
          *(_DWORD *)(v3 + 4) = 0x20000000;
          JUMPOUT(0x4000000);
        }
      }
    }
    else if ( v28 < 0 )
    {
      v28 = 0;
    }
  }
  else
  {
    v17 = a1 - v8;
    v18 = v4 - v6;
    if ( v17 < 0 )
      v17 = -v17;
    v19 = 2100 - v17;
    v20 = v18 >> 16;
    if ( v19 < 0 )
      goto LABEL_48;
    v21 = v18 << 16;
    if ( v20 < 0 )
      v20 = -v20;
    v22 = v19 - v20;
    v23 = v21 >> 16;
    if ( v22 < 0 )
      goto LABEL_48;
    if ( v23 < 0 )
      v23 = -v23;
    v24 = v22 - v23;
    if ( v24 < 0 )
    {
LABEL_48:
      v28 = v16 - 800;
      if ( v16 - 800 < 0 )
        v28 = 0;
    }
    else
    {
      v25 = v16 - 800;
      v26 = v24 - 800;
      if ( v25 < 0 )
        v25 = 0;
      v27 = v26 >= 0;
      v28 = v25 + v26;
      if ( !v27 )
        v28 = v25;
    }
  }
  v29 = 4 * v28;
  if ( (v5 & 0x80000) != 0 )
  {
    v29 += 1227;
  }
  else if ( (v5 & 0x40000) != 0 )
  {
    __asm { lwc2    $22, 0xDC($v1) }
    return;
  }
  if ( v29 )
  {
    _$A2 = 4096 - v29;
    __asm
    {
      mtc2    $a2, $8
      lwc2    $6, 0xDC($v1)
    }
    if ( _$A2 <= 0 )
      __asm { lwc2    $22, 0xDC($v1) }
    else
      __asm { cop2    0x780010 }
  }
  else
  {
    __asm { mtc2    $zero, $22 }
  }
}
// 80042E6C: control flows out of bounds to 4000000
// 80042ED4: control flows out of bounds to 5000000
// 80041A74: control flows out of bounds to 8000000
// 80041B74: control flows out of bounds to C000000
// 80042C5C: variable '_$V1' is possibly undefined
// 80042C74: variable 'v4' is possibly undefined
// 80042D30: variable 'v5' is possibly undefined
// 80042E10: variable 'v2' is possibly undefined
// 80042E60: variable 'v3' is possibly undefined

//----- (80043050) --------------------------------------------------------
unsigned int __fastcall sub_80043050(int a1, int a2, _DWORD *a3)
{
  int v3; // $s0
  int v4; // $s1
  int v5; // $s2
  int v6; // $s3
  int v7; // $s4
  int v8; // $s5
  int v9; // $s6
  int v10; // $s7
  int v11; // $t8
  int v12; // $t9
  int *v14; // $s7
  _DWORD *v15; // $a0
  int v16; // $t5
  int v17; // $s5
  int v18; // $s4
  int v19; // $t8
  int v20; // $t9
  int v21; // $a0
  unsigned int v22; // $t8
  int v23; // $t1
  int v24; // $t3
  unsigned int v25; // $t0
  unsigned int v26; // $t2
  unsigned int v27; // $at
  unsigned int v28; // $s6
  int v29; // $t4
  unsigned int v30; // $v0
  unsigned int v31; // $s6
  unsigned int v32; // $a3
  unsigned int v33; // $at
  unsigned int v34; // $a3
  unsigned int v35; // $s6
  unsigned int v36; // $v0
  unsigned int v37; // $t9
  unsigned int v38; // $at
  unsigned int v39; // $t9
  unsigned int v40; // $s6
  unsigned int v41; // $v0
  unsigned int v42; // $t8
  unsigned int result; // $v0
  unsigned int v44; // $t8
  int v45; // $a3
  int v46; // $a2
  int v47; // $a3
  bool v48; // dc
  int v49; // $a2
  unsigned int v52; // $t8
  int v53; // $a0
  int v54; // $a1
  int v57; // $t8
  int v61; // $t8
  int v62; // $t8
  _BYTE v63[16]; // [sp+0h] [-38h] BYREF
  int v64; // [sp+10h] [-28h]
  int v65; // [sp+14h] [-24h]
  int v66; // [sp+18h] [-20h]
  int v67; // [sp+1Ch] [-1Ch]
  int v68; // [sp+20h] [-18h]
  int v69; // [sp+24h] [-14h]
  int v70; // [sp+28h] [-10h]
  int v71; // [sp+2Ch] [-Ch]
  int v72; // [sp+30h] [-8h]
  int v73; // [sp+34h] [-4h]

  v64 = v3;
  v65 = v4;
  v66 = v5;
  v67 = v6;
  v68 = v7;
  v69 = v8;
  v70 = v9;
  v71 = v10;
  v72 = v11;
  v73 = v12;
  MEMORY[0x1F800000] = v63;
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $6
    ctc2    $zero, $7
    mtc2    $zero, $4
  }
  __asm { mtc2    $zero, $5 }
  v14 = *(int **)(a2 + 8);
  v15 = (_DWORD *)a3[3];
  v16 = a3[30];
  v17 = a3[31];
  v18 = a2 + 4 * a3[33];
  v19 = v15[5];
  v20 = v15[6];
  v21 = v15[7];
  v22 = (unsigned __int16)v19 | (v20 << 16) & 0xFFFEFFFF;
  v23 = a3[26] - v21;
  v24 = a3[28] - v21;
  v25 = ((a3[25] & 0xFFFEFFFF) - v22) & 0xFFFEFFFF;
  v26 = ((a3[27] & 0xFFFEFFFF) - v22) & 0xFFFEFFFF;
  v27 = 806507520;
  v28 = 1228243966;
  v29 = a3[29] | 0x52000000;
  while ( (int)v63 >= 0 )
  {
    v30 = v28 << 24;
    v31 = v28 >> 8;
    v32 = v27 + v31;
    v33 = (v27 >> 8) | v30;
    v34 = (v32 + (v33 >> 8)) << 24;
    v35 = v31 | v34;
    v36 = v35 << 24;
    v35 >>= 8;
    v37 = v33 + v35;
    v38 = (v33 >> 8) | v36;
    v39 = (v37 + (v38 >> 8)) << 24;
    v40 = v35 | v39;
    v41 = v40 << 24;
    v40 >>= 8;
    v42 = v38 + v40;
    v27 = (v38 >> 8) | v41;
    result = v27 >> 8;
    v44 = (v42 + (v27 >> 8)) << 24;
    v28 = v40 | v44;
    v45 = (v34 >> 17) | (v39 >> 2);
    v46 = (v45 + v25) & 0x3FFF7FFF;
    v47 = (v45 + v26) & 0x3FFF7FFF;
    v48 = v46 - v47 != v25 - v26;
    v49 = v46 - 536887296;
    if ( !v48 )
    {
      _$A2 = v49 & 0xFFFEFFFF;
      _$A3 = (v47 - 536887296) & 0xFFFEFFFF;
      __asm
      {
        mtc2    $a2, $0
        mtc2    $a3, $2
      }
      v52 = v44 >> 17;
      v53 = ((_WORD)v52 + (_WORD)v23) & 0x7FFF;
      v54 = ((_WORD)v52 + (_WORD)v24) & 0x7FFF;
      v48 = v53 - v54 != v23 - v24;
      _$A0 = v53 - 0x4000;
      if ( !v48 )
      {
        _$A1 = v54 - 0x4000;
        __asm
        {
          mtc2    $a0, $1
          mtc2    $a1, $3
        }
        __asm { cop2    0x280030 }
        v57 = *(_DWORD *)(v18 + 32);
        v14[1] = v29;
        *v14 = v57 | 0x4000000;
        __asm
        {
          cfc2    $t8, $31
          mfc2    $t9, $12
          mfc2    $a0, $13
        }
        if ( (_$T8 & 0x40000) == 0 )
        {
          v61 = ~((_$T9 - 14221824) | (_$A0 - 14221824)) | _$T9 & _$A0;
          v48 = v61 < 0;
          v62 = v61 << 16;
          if ( !v48 && v62 >= 0 )
          {
            v14[3] = v16;
            __asm
            {
              swc2    $12, 8($s7)
              swc2    $13, 0x10($s7)
            }
            *(_DWORD *)(v18 + 32) = (unsigned int)v14 & 0xFFFFFF;
            v14 += 5;
          }
        }
      }
    }
  }
  v14[1] = v17;
  v14[2] = 0;
  *v14 = *(_DWORD *)(v18 + 32) | 0x2000000;
  *(_DWORD *)(v18 + 32) = (unsigned int)v14 & 0xFFFFFF;
  *(_DWORD *)(a2 + 8) = v14 + 3;
  return result;
}
// 80043050: could not find valid save-restore pair for $s0
// 80043050: could not find valid save-restore pair for $s1
// 80043050: could not find valid save-restore pair for $s2
// 80043050: could not find valid save-restore pair for $s3
// 80043050: could not find valid save-restore pair for $s4
// 80043050: could not find valid save-restore pair for $s5
// 80043050: could not find valid save-restore pair for $s6
// 80043050: could not find valid save-restore pair for $s7
// 80043054: variable 'v3' is possibly undefined
// 80043058: variable 'v4' is possibly undefined
// 8004305C: variable 'v5' is possibly undefined
// 80043060: variable 'v6' is possibly undefined
// 80043064: variable 'v7' is possibly undefined
// 80043068: variable 'v8' is possibly undefined
// 8004306C: variable 'v9' is possibly undefined
// 80043070: variable 'v10' is possibly undefined
// 80043074: variable 'v11' is possibly undefined
// 80043078: variable 'v12' is possibly undefined

//----- (80043310) --------------------------------------------------------
void __fastcall sub_80043310(int a1, int a2, _DWORD *a3)
{
  int v3; // $t8
  int v4; // $t9
  int *v6; // $s7
  int v7; // $t2
  int v8; // $t1
  int v9; // $t3
  unsigned int v10; // $at
  unsigned int v11; // $s6
  unsigned int v12; // $v0
  unsigned int v13; // $s6
  unsigned int v14; // $t8
  unsigned int v15; // $at
  int v16; // $t8
  unsigned int v17; // $s6
  unsigned int v18; // $v0
  unsigned int v19; // $t9
  unsigned int v20; // $at
  int v21; // $t9
  unsigned int v22; // $s6
  unsigned int v23; // $v0
  unsigned int v24; // $a0
  unsigned int v25; // $at
  int v26; // $a0
  unsigned int v27; // $s6
  int v28; // $t8
  int v29; // $t9
  int v30; // $a0
  int v31; // $a1
  int v32; // $a2
  int v33; // $a3
  int v34; // $v0
  int v35; // $v0
  int v36; // $a1
  unsigned int v39; // $v0
  unsigned int v40; // $s6
  unsigned int v41; // $t0
  int v42; // $t0
  int v43; // $t0
  int v46; // $t8
  bool v47; // dc
  int v48; // $t8
  int v49; // $t8
  _BYTE v50[20]; // [sp+0h] [-38h] BYREF
  int v51; // [sp+30h] [-8h]
  int v52; // [sp+34h] [-4h]

  v51 = v3;
  v52 = v4;
  MEMORY[0x1F800000] = v50;
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $6
    ctc2    $zero, $7
  }
  v6 = *(int **)(a2 + 8);
  v7 = a3[35];
  v8 = a3[36] + 20;
  v9 = a2 + 4 * a3[37];
  v10 = 806507520;
  v11 = 1228243966;
  while ( (int)v50 >= 0 )
  {
    v12 = v11 << 24;
    v13 = v11 >> 8;
    v14 = v10 + v13;
    v15 = (v10 >> 8) | v12;
    v16 = (v14 + (v15 >> 8)) << 24;
    v17 = v13 | v16;
    v18 = v17 << 24;
    v17 >>= 8;
    v19 = v15 + v17;
    v20 = (v15 >> 8) | v18;
    v21 = (v19 + (v20 >> 8)) << 24;
    v22 = v17 | v21;
    v23 = v22 << 24;
    v22 >>= 8;
    v24 = v20 + v22;
    v25 = (v20 >> 8) | v23;
    v26 = (v24 + (v25 >> 8)) << 24;
    v27 = v22 | v26;
    v28 = v16 >> 20;
    v29 = v21 >> v8;
    v30 = v26 >> 20;
    v31 = v28;
    if ( v28 < 0 )
      v31 = -v28;
    v32 = v29;
    if ( v29 < 0 )
    {
      v32 = -v29;
      v29 = -v29;
    }
    v33 = v30;
    if ( v30 < 0 )
      v33 = -v30;
    v34 = v31;
    if ( v31 - v32 <= 0 )
    {
      v31 = v32;
      v32 = v34;
    }
    v35 = v31;
    if ( v31 - v33 <= 0 )
    {
      v31 = v33;
      v33 = v35;
    }
    v36 = 0x1000000 / (v31 + (v32 >> 2) + (v33 >> 2));
    _$T8 = (unsigned __int16)((v28 * v36) >> 12) | ((((v29 * v36) >> 12) + v7) << 16);
    _$A0 = (v30 * v36) >> 12;
    __asm
    {
      mtc2    $t8, $0
      mtc2    $a0, $1
    }
    v39 = v27 << 24;
    v40 = v27 >> 8;
    v41 = v25 + v40;
    v10 = (v25 >> 8) | v39;
    v42 = (v41 + (v10 >> 8)) << 24;
    v11 = v40 | v42;
    __asm { cop2    0x180001 }
    v43 = HIBYTE(v42) | 0x40 | ((HIBYTE(v42) | 0x40) << 8) | ((HIBYTE(v42) | 0x40) << 16) | 0x68000000;
    __asm
    {
      cfc2    $t8, $31
      mfc2    $a1, $14
    }
    if ( (_$T8 & 0x40000) == 0 )
    {
      v46 = ~((_$A1 - 14221824) | _$A1);
      v47 = v46 < 0;
      v48 = v46 << 16;
      if ( !v47 && v48 >= 0 )
      {
        v49 = *(_DWORD *)(v9 + 32);
        v6[1] = v43;
        *v6 = v49 | 0x2000000;
        v6[2] = _$A1;
        *(_DWORD *)(v9 + 32) = (unsigned int)v6 & 0xFFFFFF;
        v6 += 3;
      }
    }
  }
  v6[1] = -520091040;
  v6[2] = 0;
  *v6 = *(_DWORD *)(v9 + 32) | 0x2000000;
  *(_DWORD *)(v9 + 32) = (unsigned int)v6 & 0xFFFFFF;
  *(_DWORD *)(a2 + 8) = v6 + 3;
  __asm { jr      $ra }
}
// 80043334: variable 'v3' is possibly undefined
// 80043338: variable 'v4' is possibly undefined

//----- (800435DC) --------------------------------------------------------
int __fastcall sub_800435DC(int a1, _DWORD *a2)
{
  int v2; // $t8
  int v3; // $t9
  int v4; // $ra
  int v8; // $s7
  int v9; // $t8
  bool v10; // dc
  int v11; // $t8
  int v12; // $t8
  int v13; // $t8
  void (__fastcall *v14)(int, int); // $t8
  int v15; // $v1
  int v16; // $t7
  int (*v17)(void); // $ra
  void (__fastcall *v19)(int, int); // $t8
  int v20; // $t7
  int v21; // [sp+0h] [-38h] BYREF
  int v22; // [sp+30h] [-8h]
  int v23; // [sp+34h] [-4h]

  v22 = v2;
  v23 = v3;
  _$T8 = 1365;
  __asm { ctc2    $t8, $29 }
  _$T8 = 1024;
  __asm { ctc2    $t8, $30 }
  MEMORY[0x1F800378] = v4;
  MEMORY[0x1F800000] = &v21;
  v8 = *(_DWORD *)(a1 + 8);
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $6
    ctc2    $zero, $7
    ctc2    $zero, $21
    ctc2    $zero, $22
    ctc2    $zero, $23
  }
  MEMORY[0x1F800380] = 14221824;
  v9 = 192;
  do
  {
    *(_DWORD *)(v9 + 528482596) = 0;
    v10 = v9 > 0;
    v9 -= 4;
  }
  while ( v10 );
  v11 = *(_DWORD *)(*a2 + 16);
  MEMORY[0x1F800370] = a2[45];
  v12 = (v11 + 512) << 20;
  v10 = v12 < 0;
  v13 = 2 * v12;
  if ( v10 )
  {
    if ( v13 >= 0 )
      v19 = (void (__fastcall *)(int, int))&loc_80043C24;
    else
      v19 = sub_80043BE4;
    MEMORY[0x1F800374] = v19;
    do
      sub_80043A00();
    while ( v20 - 6144 > 0 );
  }
  else
  {
    if ( v13 >= 0 )
      v14 = (void (__fastcall *)(int, int))&loc_80043C24;
    else
      v14 = sub_80043BE4;
    MEMORY[0x1F800374] = v14;
    do
      sub_800437A4();
    while ( v16 - 6144 < 0 );
  }
  v17 = *(int (**)(void))(v15 + 888);
  *(_DWORD *)(a1 + 8) = v8;
  return v17();
}
// 80043600: variable 'v2' is possibly undefined
// 80043604: variable 'v3' is possibly undefined
// 80043628: variable 'v4' is possibly undefined
// 80043754: variable 'v16' is possibly undefined
// 80043760: variable 'v15' is possibly undefined
// 800439EC: variable 'v20' is possibly undefined

//----- (800437A4) --------------------------------------------------------
void sub_800437A4()
{
  int v0; // $v1
  int v1; // $t6
  int v2; // $ra
  int v3; // $v1
  int v4; // $v1
  int v5; // $t6
  int v6; // $gp
  int v7; // $v1
  void (*v8)(void); // $at
  int v9; // $t6
  int v10; // $gp
  int v11; // $t8
  int v12; // $t9
  int v16; // $t8
  bool v17; // dc
  int v18; // $t8
  int v19; // $v1
  int v20; // $t8
  int v21; // $t9
  int v25; // $t8
  int v26; // $t8
  int v27; // $t6
  int v28; // $gp
  char v29; // [sp+0h] [-5Ch] BYREF
  int v30; // [sp+5Ch] [+0h] BYREF

  *(_DWORD *)(v0 + 892) = v2;
  if ( v1 - (int)&v30 < 0 && (int)&v29 >= 0 )
    *(_WORD *)((char *)&STACK[0x17E] + v0) = 0;
  (*(void (__fastcall **)(_DWORD, int))(v0 + 884))(*(_DWORD *)(v0 + 884), -1);
  (*(void (__fastcall **)(_DWORD, _DWORD))(v3 + 884))(*(_DWORD *)(v3 + 884), 0);
  if ( v6 - v5 > 0 )
  {
    while ( 1 )
    {
      (*(void (__fastcall **)(_DWORD, int))(v4 + 884))(*(_DWORD *)(v4 + 884), -1);
      __asm { swc2    $12, 0x384($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v7 + 884))(*(_DWORD *)(v7 + 884), 0);
      *(_DWORD *)(v4 + 904) = v11;
      *(_DWORD *)(v4 + 908) = v12;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v16 = ~((*(_DWORD *)(v4 + 900) - *(_DWORD *)(v4 + 896))
            | (_$T9 - *(_DWORD *)(v4 + 896))
            | (_$A0 - *(_DWORD *)(v4 + 896))
            | (_$A1 - *(_DWORD *)(v4 + 896)))
          | *(_DWORD *)(v4 + 900) & _$T9 & _$A0 & _$A1;
      v17 = v16 < 0;
      v18 = v16 << 16;
      if ( !v17 && v18 >= 0 )
        break;
      if ( v10 - v9 <= 0 )
        goto LABEL_12;
    }
    do
    {
      v8();
      if ( v28 - v27 <= 0 )
        break;
      (*(void (__fastcall **)(_DWORD, int))(v4 + 884))(*(_DWORD *)(v4 + 884), -1);
      __asm { swc2    $12, 0x384($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v19 + 884))(*(_DWORD *)(v19 + 884), 0);
      *(_DWORD *)(v4 + 904) = v20;
      *(_DWORD *)(v4 + 908) = v21;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v25 = ~((*(_DWORD *)(v4 + 900) - *(_DWORD *)(v4 + 896))
            | (_$T9 - *(_DWORD *)(v4 + 896))
            | (_$A0 - *(_DWORD *)(v4 + 896))
            | (_$A1 - *(_DWORD *)(v4 + 896)))
          | *(_DWORD *)(v4 + 900) & _$T9 & _$A0 & _$A1;
      v17 = v25 < 0;
      v26 = v25 << 16;
      if ( v17 )
        break;
    }
    while ( v26 >= 0 );
  }
LABEL_12:
  __asm { jr      $ra }
}
// 800437A4: variable 'v2' is possibly undefined
// 800437A4: variable 'v0' is possibly undefined
// 800437A8: variable 'v1' is possibly undefined
// 800437E8: variable 'v3' is possibly undefined
// 80043804: variable 'v6' is possibly undefined
// 80043804: variable 'v5' is possibly undefined
// 80043810: variable 'v4' is possibly undefined
// 80043830: variable 'v7' is possibly undefined
// 80043844: variable 'v11' is possibly undefined
// 80043848: variable 'v12' is possibly undefined
// 800438B4: variable 'v10' is possibly undefined
// 800438B4: variable 'v9' is possibly undefined
// 800438E4: variable 'v19' is possibly undefined
// 800438F8: variable 'v20' is possibly undefined
// 800438FC: variable 'v21' is possibly undefined
// 80043954: variable 'v8' is possibly undefined
// 8004396C: variable 'v28' is possibly undefined
// 8004396C: variable 'v27' is possibly undefined

//----- (80043A00) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int sub_80043A00()
{
  int v0; // $v1
  int v1; // $t6
  int v2; // $ra
  int v3; // $v1
  int v4; // $v1
  int v5; // $t6
  int v6; // $gp
  int v7; // $v1
  void (*v8)(void); // $at
  int v9; // $t6
  int v10; // $gp
  int v11; // $t8
  int v12; // $t9
  int v16; // $t8
  bool v17; // dc
  int v18; // $t8
  int v19; // $v1
  int v20; // $t8
  int v21; // $t9
  int v25; // $t8
  int v26; // $t8
  int v27; // $t6
  int v28; // $gp
  int v30; // [sp-4h] [-68h] BYREF
  int v31; // [sp+60h] [-4h] BYREF
  int v32; // [sp+64h] [+0h] BYREF

  *(_DWORD *)(v0 + 892) = v2;
  if ( v1 - (int)&v31 > 0 && (int)&v30 <= 0 )
    *(_WORD *)((char *)&v32 + v0 + 294) = 0;
  (*(void (__fastcall **)(_DWORD, int))(v0 + 884))(*(_DWORD *)(v0 + 884), -1);
  (*(void (__fastcall **)(_DWORD, _DWORD))(v3 + 884))(*(_DWORD *)(v3 + 884), 0);
  if ( v6 - v5 < 0 )
  {
    while ( 1 )
    {
      (*(void (__fastcall **)(_DWORD, int))(v4 + 884))(*(_DWORD *)(v4 + 884), -1);
      __asm { swc2    $12, 0x384($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v7 + 884))(*(_DWORD *)(v7 + 884), 0);
      *(_DWORD *)(v4 + 904) = v11;
      *(_DWORD *)(v4 + 908) = v12;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v16 = ~((*(_DWORD *)(v4 + 900) - *(_DWORD *)(v4 + 896))
            | (_$T9 - *(_DWORD *)(v4 + 896))
            | (_$A0 - *(_DWORD *)(v4 + 896))
            | (_$A1 - *(_DWORD *)(v4 + 896)))
          | *(_DWORD *)(v4 + 900) & _$T9 & _$A0 & _$A1;
      v17 = v16 < 0;
      v18 = v16 << 16;
      if ( !v17 && v18 >= 0 )
        break;
      if ( v10 - v9 >= 0 )
        return (*(int (**)(void))(v4 + 892))();
    }
    do
    {
      v8();
      if ( v28 - v27 >= 0 )
        break;
      (*(void (__fastcall **)(_DWORD, int))(v4 + 884))(*(_DWORD *)(v4 + 884), -1);
      __asm { swc2    $12, 0x384($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v19 + 884))(*(_DWORD *)(v19 + 884), 0);
      *(_DWORD *)(v4 + 904) = v20;
      *(_DWORD *)(v4 + 908) = v21;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v25 = ~((*(_DWORD *)(v4 + 900) - *(_DWORD *)(v4 + 896))
            | (_$T9 - *(_DWORD *)(v4 + 896))
            | (_$A0 - *(_DWORD *)(v4 + 896))
            | (_$A1 - *(_DWORD *)(v4 + 896)))
          | *(_DWORD *)(v4 + 900) & _$T9 & _$A0 & _$A1;
      v17 = v25 < 0;
      v26 = v25 << 16;
      if ( v17 )
        break;
    }
    while ( v26 >= 0 );
  }
  return (*(int (**)(void))(v4 + 892))();
}
// 80043A1C: positive sp value 4 has been found
// 80043A00: variable 'v2' is possibly undefined
// 80043A00: variable 'v0' is possibly undefined
// 80043A04: variable 'v1' is possibly undefined
// 80043A44: variable 'v3' is possibly undefined
// 80043A60: variable 'v6' is possibly undefined
// 80043A60: variable 'v5' is possibly undefined
// 80043A6C: variable 'v4' is possibly undefined
// 80043A8C: variable 'v7' is possibly undefined
// 80043AA0: variable 'v11' is possibly undefined
// 80043AA4: variable 'v12' is possibly undefined
// 80043B10: variable 'v10' is possibly undefined
// 80043B10: variable 'v9' is possibly undefined
// 80043B40: variable 'v19' is possibly undefined
// 80043B54: variable 'v20' is possibly undefined
// 80043B58: variable 'v21' is possibly undefined
// 80043BB0: variable 'v8' is possibly undefined
// 80043BC8: variable 'v28' is possibly undefined
// 80043BC8: variable 'v27' is possibly undefined

//----- (80043BE4) --------------------------------------------------------
void __fastcall sub_80043BE4(int a1, int a2)
{
  int v2; // $v1
  __int16 v3; // $t0
  int v4; // $t1
  char v5; // $t2
  int v6; // $t3
  int v7; // $t4
  int v8; // $t5
  int v9; // $t8
  int v10; // $t9
  int v12; // $a2
  unsigned int v14; // $a0
  unsigned int v16; // $a0
  int v18; // $a0
  int v20; // $a0
  __int16 v22; // $t9

  _$S6 = v9 + v2;
  if ( (*(__int16 *)(v9 + v2 + 294) & a2) == 0 )
  {
    v12 = 4 * v10 + v7;
    _$A3 = (v9 << 8) + v8;
    __asm { mtc2    $a3, $1 }
    *(_WORD *)(_$S6 + 294) = -1;
    v14 = *(_DWORD *)((((((_BYTE)v9 + v5) & 0xFC) << 6) | ((unsigned __int16)((v10 + v3) & 0x3F00) >> 6)) + v6);
    _$T9 = (unsigned __int16)(4 * v10 + v7) | ((((v14 >> 22) & 0x3FC) + v4) << 17);
    __asm { mtc2    $t9, $0 }
    if ( _$A3 < 0 )
      _$A3 = -_$A3;
    v16 = v14 << 8;
    if ( v12 < 0 )
      v12 = -v12;
    __asm { cop2    0x180001 }
    _$A0 = v16 >> 8;
    __asm
    {
      mtc2    $a0, $6
      mtc2    $a0, $22
    }
    v18 = _$A3 >> 2;
    if ( v12 - _$A3 < 0 )
    {
      v18 = v12 >> 2;
      v12 = _$A3;
    }
    _$A2 = v12 + v18 - 0x4000;
    v20 = 0;
    if ( _$A2 >= 0 )
    {
      v20 = _$A2;
      if ( _$A2 - 4096 >= 0 )
      {
        _$T8 = 0;
        v22 = 0;
        goto LABEL_13;
      }
      __asm
      {
        mfc2    $t8, $12
        mtc2    $a2, $8
      }
      __asm { cop2    0x780010 }
    }
    v22 = ((unsigned int)(4096 - v20) >> 5) | ((unsigned __int16)((unsigned int)(4096 - v20) >> 5) << 8);
    __asm { mfc2    $t8, $22 }
LABEL_13:
    __asm
    {
      swc2    $14, 0x1E8($s6)
      swc2    $19, 0x2AC($s6)
    }
    *(_DWORD *)(_$S6 + 96) = _$T8;
    *(_WORD *)(_$S6 + 292) = v22;
    return;
  }
  __asm
  {
    mfc2    $t8, $13
    mfc2    $t9, $18
    mtc2    $t8, $12
    mtc2    $t9, $17
    mfc2    $t8, $14
    mfc2    $t9, $19
    mtc2    $t8, $13
    mtc2    $t9, $18
  }
  __asm { lwc2    $14, 0x1E8($s6) }
  __asm { lwc2    $19, 0x2AC($s6) }
}
// 80043BE4: variable 'v9' is possibly undefined
// 80043BE4: variable 'v2' is possibly undefined
// 80043BF8: variable 'v10' is possibly undefined
// 80043BFC: variable 'v7' is possibly undefined
// 80043C00: variable 'v8' is possibly undefined
// 80043C08: variable 'v5' is possibly undefined
// 80043C0C: variable 'v3' is possibly undefined
// 80043C64: variable 'v6' is possibly undefined
// 80043C78: variable 'v4' is possibly undefined

//----- (80043D6C) --------------------------------------------------------
int __fastcall sub_80043D6C(int a1, int a2)
{
  _DWORD *v2; // $v1
  char v3; // $t0
  __int16 v4; // $t2
  char v5; // $t6
  __int16 v6; // $t7
  int v7; // $s0
  int v8; // $s1
  int v9; // $s2
  int v10; // $s3
  int v11; // $s4
  int v12; // $s5
  int *v13; // $s7
  int v14; // $fp
  _DWORD *v15; // $a0
  int v16; // $t8
  int v17; // $t9
  unsigned int v18; // $a0
  int v20; // $a3
  int v21; // $v0
  bool v22; // dc
  int v23; // $v0
  int result; // $v0
  int v25; // $a2
  int v26; // $a2
  unsigned int v27; // $s7
  unsigned int v28; // $a1

  v15 = (_DWORD *)(v2[220] + 4 * ((v5 + v3) & 0x1C | ((unsigned __int16)((v6 + v4) & 0x700) >> 3)));
  v16 = v15[1];
  v17 = v15[2];
  v18 = v15[3];
  __asm { mfc2    $v0, $24 }
  v20 = v2[225];
  v21 = a2 - (_$V0 >> 15);
  v22 = v21 >= 0;
  v23 = 4 * v21;
  if ( !v22 )
    v23 = 0;
  v22 = v23 - 8188 <= 0;
  result = v23 + v14;
  if ( !v22 )
    result = v14 + 8188;
  if ( ((v10 & v11 & v12 & v2[227]) + 128) << 24 )
  {
    if ( v7 | v8 | v9 | v2[226] )
    {
      v13[1] = v7 | 0x3E000000;
      v13[2] = v20;
      v13[3] = v16;
      v13[4] = v8;
      __asm { swc2    $12, 0x14($s7) }
      v13[6] = v17 ^ 0x400000;
      v13[7] = v9;
      __asm { swc2    $13, 0x20($s7) }
      v26 = v2[226];
      v13[9] = v18;
      v13[10] = v26;
      __asm { swc2    $14, 0x2C($s7) }
      v13[12] = HIWORD(v18);
      *v13 = *(_DWORD *)(result + 32) | 0xC000000;
      *(_DWORD *)(result + 32) = (unsigned int)v13 & 0xFFFFFF;
      v27 = (unsigned int)(v13 + 13);
      *(_DWORD *)(v27 + 4) = v10 | 0x3A000000;
      *(_DWORD *)(v27 + 8) = v20;
      *(_DWORD *)(v27 + 12) = v11;
      __asm { swc2    $12, 0x10($s7) }
      *(_DWORD *)(v27 + 20) = v12;
      __asm { swc2    $13, 0x18($s7) }
      *(_DWORD *)(v27 + 28) = v2[227];
      __asm { swc2    $14, 0x20($s7) }
      *(_DWORD *)v27 = *(_DWORD *)(result + 32) | 0x8000000;
      *(_DWORD *)(result + 32) = v27 & 0xFFFFFF;
      v28 = v27 << 8;
      v27 += 36;
      *(_DWORD *)(v27 + 4) = -520091072;
      *(_DWORD *)(v27 + 8) = 0;
      *(_DWORD *)v27 = (v28 >> 8) | 0x2000000;
      *(_DWORD *)(result + 32) = v27 & 0xFFFFFF;
    }
  }
  else
  {
    v13[1] = v7 | 0x3C000000;
    v13[2] = v20;
    v13[3] = v16;
    v13[4] = v8;
    __asm { swc2    $12, 0x14($s7) }
    v13[6] = v17;
    v13[7] = v9;
    __asm { swc2    $13, 0x20($s7) }
    v25 = v2[226];
    v13[9] = v18;
    v13[10] = v25;
    __asm { swc2    $14, 0x2C($s7) }
    v13[12] = HIWORD(v18);
    *v13 = *(_DWORD *)(result + 32) | 0xC000000;
    *(_DWORD *)(result + 32) = (unsigned int)v13 & 0xFFFFFF;
  }
  return result;
}
// 80043D84: variable 'v2' is possibly undefined
// 80043D6C: variable 'v5' is possibly undefined
// 80043D6C: variable 'v3' is possibly undefined
// 80043D70: variable 'v6' is possibly undefined
// 80043D70: variable 'v4' is possibly undefined
// 80043E6C: variable 'v14' is possibly undefined
// 80043E78: variable 'v10' is possibly undefined
// 80043E78: variable 'v11' is possibly undefined
// 80043E7C: variable 'v12' is possibly undefined
// 80043E94: variable 'v7' is possibly undefined
// 80043E98: variable 'v13' is possibly undefined
// 80043EA4: variable 'v8' is possibly undefined
// 80043EB0: variable 'v9' is possibly undefined

//----- (80043FFC) --------------------------------------------------------
int __fastcall sub_80043FFC(unsigned int a1, int a2, int *a3)
{
  int v3; // $t8
  int v4; // $t9
  int v5; // $ra
  unsigned int v9; // $t9
  char *v10; // $t2
  int v11; // $t3
  int v12; // $t2
  _DWORD *v13; // $t8
  int v14; // $a0
  int v15; // $a1
  int v16; // $s7
  int v17; // $a0
  int v18; // $t8
  bool v19; // dc
  void (__fastcall *v20)(int, int); // $t8
  int v21; // $s1
  int v22; // $v1
  int (*v23)(void); // $ra
  void (__fastcall *v25)(int, int); // $t8
  int v26; // $s1
  int v27; // [sp+0h] [-38h] BYREF
  int v28; // [sp+30h] [-8h]
  int v29; // [sp+34h] [-4h]

  v28 = v3;
  v29 = v4;
  _$T8 = 1365;
  __asm { ctc2    $t8, $29 }
  _$T8 = 1024;
  __asm { ctc2    $t8, $30 }
  MEMORY[0x1F800384] = v5;
  MEMORY[0x1F800000] = &v27;
  v9 = (a1 % 0xE0) & 7;
  v10 = (char *)a3 + (((a1 % 0xE0) >> 1) & 0xFFFC);
  v11 = *((_DWORD *)v10 + 47);
  v12 = *((_DWORD *)v10 + 46);
  a3[40] = v9;
  a3[41] = v12;
  a3[42] = v11;
  v13 = (_DWORD *)a3[45];
  MEMORY[0x1F800398] = v9 << 9;
  v14 = v13[2];
  v15 = v13[3];
  MEMORY[0x1F800370] = v13[1];
  MEMORY[0x1F80037C] = MEMORY[0x1F800370];
  MEMORY[0x1F800374] = v14 & 0xFF9FFFFF | 0x200000;
  MEMORY[0x1F800378] = v15;
  v16 = *(_DWORD *)(a2 + 8);
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $6
    ctc2    $zero, $7
  }
  MEMORY[0x1F80038C] = 14221824;
  v17 = *a3;
  v18 = 192;
  do
  {
    *(_DWORD *)(v18 + 528482596) = 0;
    v19 = v18 > 0;
    v18 -= 4;
  }
  while ( v19 );
  if ( ((*(_DWORD *)(v17 + 16) + 512) & 0x800) != 0 )
  {
    if ( ((*(_DWORD *)(v17 + 16) + 512) & 0x400) != 0 )
      v25 = sub_80044674;
    else
      v25 = (void (__fastcall *)(int, int))&loc_800446B0;
    MEMORY[0x1F800380] = v25;
    v26 = 12288;
    do
    {
      sub_8004447C();
      v26 -= 256;
    }
    while ( v26 - 5888 > 0 );
  }
  else
  {
    if ( ((*(_DWORD *)(v17 + 16) + 512) & 0x400) != 0 )
      v20 = sub_80044674;
    else
      v20 = (void (__fastcall *)(int, int))&loc_800446B0;
    MEMORY[0x1F800380] = v20;
    v21 = 0;
    do
    {
      sub_8004420C();
      v21 += 256;
    }
    while ( v21 - 6400 < 0 );
  }
  v23 = *(int (**)(void))(v22 + 900);
  *(_DWORD *)(a2 + 8) = v16;
  return v23();
}
// 80044020: variable 'v3' is possibly undefined
// 80044024: variable 'v4' is possibly undefined
// 80044050: variable 'v5' is possibly undefined
// 800441C8: variable 'v22' is possibly undefined

//----- (8004420C) --------------------------------------------------------
void sub_8004420C()
{
  int v0; // $v1
  int *v1; // $s0
  int v2; // $ra
  int v3; // $v1
  __int16 v4; // $t9
  int v5; // $v1
  __int16 v6; // $t9
  int v7; // $gp
  bool v8; // dc
  _BYTE *v9; // $s0
  int v10; // $v1
  __int16 v11; // $t9
  void (*v12)(void); // $t4
  int v13; // $gp
  int v14; // $t8
  __int16 v15; // $t9
  int v19; // $t8
  int v20; // $t8
  __int16 v21; // $t9
  int v22; // $v1
  __int16 v23; // $t9
  int v24; // $t8
  __int16 v25; // $t9
  int v29; // $t8
  int v30; // $t8
  __int16 v31; // $t9
  int v32; // $gp
  char v33; // [sp+1h] [-17h] BYREF
  char v34; // [sp+17h] [-1h] BYREF
  int v35; // [sp+18h] [+0h] BYREF

  *(_DWORD *)(v0 + 904) = v2;
  if ( (char *)v1 - (char *)&v35 < 0 )
  {
    v1 = &v35;
    if ( (int)&v33 >= 0 )
    {
      v1 = (int *)&v34;
      *(_WORD *)(4 * (_DWORD)&v34 + v0 + 294) = 0;
    }
  }
  (*(void (__fastcall **)(_DWORD, int))(v0 + 896))(*(_DWORD *)(v0 + 896), -1);
  *(_WORD *)(v3 + 880) = v4;
  (*(void (__fastcall **)(_DWORD, _DWORD))(v3 + 896))(*(_DWORD *)(v3 + 896), 0);
  *(_WORD *)(v5 + 884) = v6;
  v8 = v7 - (int)v1 <= 0;
  v9 = (char *)v1 + 1;
  if ( !v8 )
  {
    while ( 1 )
    {
      (*(void (__fastcall **)(_DWORD, int))(v5 + 896))(*(_DWORD *)(v5 + 896), -1);
      *(_WORD *)(v10 + 888) = v11;
      __asm { swc2    $12, 0x390($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v10 + 896))(*(_DWORD *)(v10 + 896), 0);
      *(_DWORD *)(v5 + 916) = v14;
      *(_WORD *)(v5 + 890) = v15;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v19 = ~((*(_DWORD *)(v5 + 912) - *(_DWORD *)(v5 + 908))
            | (_$T9 - *(_DWORD *)(v5 + 908))
            | (_$A0 - *(_DWORD *)(v5 + 908))
            | (_$A1 - *(_DWORD *)(v5 + 908)))
          | *(_DWORD *)(v5 + 912) & _$T9 & _$A0 & _$A1;
      v8 = v19 < 0;
      v20 = v19 << 16;
      if ( !v8 && v20 >= 0 )
        break;
      v21 = *(_WORD *)(v5 + 890);
      *(_WORD *)(v5 + 880) = *(_WORD *)(v5 + 888);
      *(_WORD *)(v5 + 884) = v21;
      v8 = v13 - (int)v9++ > 0;
      if ( !v8 )
        goto LABEL_12;
    }
    do
    {
      v12();
      v31 = *(_WORD *)(v5 + 890);
      *(_WORD *)(v5 + 880) = *(_WORD *)(v5 + 888);
      *(_WORD *)(v5 + 884) = v31;
      v8 = v32 - (int)v9++ > 0;
      if ( !v8 )
        break;
      (*(void (__fastcall **)(_DWORD, int))(v5 + 896))(*(_DWORD *)(v5 + 896), -1);
      *(_WORD *)(v22 + 888) = v23;
      __asm { swc2    $12, 0x390($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v22 + 896))(*(_DWORD *)(v22 + 896), 0);
      *(_DWORD *)(v5 + 916) = v24;
      *(_WORD *)(v5 + 890) = v25;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v29 = ~((*(_DWORD *)(v5 + 912) - *(_DWORD *)(v5 + 908))
            | (_$T9 - *(_DWORD *)(v5 + 908))
            | (_$A0 - *(_DWORD *)(v5 + 908))
            | (_$A1 - *(_DWORD *)(v5 + 908)))
          | *(_DWORD *)(v5 + 912) & _$T9 & _$A0 & _$A1;
      v8 = v29 < 0;
      v30 = v29 << 16;
      if ( v8 )
        break;
    }
    while ( v30 >= 0 );
  }
LABEL_12:
  __asm { jr      $ra }
}
// 8004420C: variable 'v2' is possibly undefined
// 8004420C: variable 'v0' is possibly undefined
// 80044210: variable 'v1' is possibly undefined
// 80044250: variable 'v4' is possibly undefined
// 80044250: variable 'v3' is possibly undefined
// 8004426C: variable 'v6' is possibly undefined
// 8004426C: variable 'v5' is possibly undefined
// 80044270: variable 'v7' is possibly undefined
// 80044294: variable 'v11' is possibly undefined
// 80044294: variable 'v10' is possibly undefined
// 800442B0: variable 'v14' is possibly undefined
// 800442B4: variable 'v15' is possibly undefined
// 80044328: variable 'v13' is possibly undefined
// 80044350: variable 'v23' is possibly undefined
// 80044350: variable 'v22' is possibly undefined
// 8004436C: variable 'v24' is possibly undefined
// 80044370: variable 'v25' is possibly undefined
// 800443C8: variable 'v12' is possibly undefined
// 800443E8: variable 'v32' is possibly undefined

//----- (8004447C) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int sub_8004447C()
{
  int v0; // $v1
  int *v1; // $s0
  int v2; // $ra
  int v3; // $v1
  __int16 v4; // $t9
  int v5; // $v1
  __int16 v6; // $t9
  int v7; // $gp
  bool v8; // dc
  _BYTE *v9; // $s0
  int v10; // $v1
  __int16 v11; // $t9
  void (*v12)(void); // $t4
  int v13; // $gp
  int v14; // $t8
  __int16 v15; // $t9
  int v19; // $t8
  int v20; // $t8
  __int16 v21; // $t9
  int v22; // $v1
  __int16 v23; // $t9
  int v24; // $t8
  __int16 v25; // $t9
  int v29; // $t8
  int v30; // $t8
  __int16 v31; // $t9
  int v32; // $gp
  __int16 v34; // [sp+0h] [-1Ah] BYREF
  char v35; // [sp+19h] [-1h] BYREF
  int v36; // [sp+1Ah] [+0h] BYREF

  *(_DWORD *)(v0 + 904) = v2;
  if ( (char *)v1 - &v35 > 0 )
  {
    v1 = (int *)&v35;
    if ( (int)&v34 <= 0 )
    {
      v1 = &v36;
      *(_WORD *)(4 * (_DWORD)&v36 + v0 + 294) = 0;
    }
  }
  (*(void (__fastcall **)(_DWORD, int))(v0 + 896))(*(_DWORD *)(v0 + 896), -1);
  *(_WORD *)(v3 + 880) = v4;
  (*(void (__fastcall **)(_DWORD, _DWORD))(v3 + 896))(*(_DWORD *)(v3 + 896), 0);
  *(_WORD *)(v5 + 884) = v6;
  v8 = v7 - (int)v1 >= 0;
  v9 = (char *)v1 - 1;
  if ( !v8 )
  {
    while ( 1 )
    {
      (*(void (__fastcall **)(_DWORD, int))(v5 + 896))(*(_DWORD *)(v5 + 896), -1);
      *(_WORD *)(v10 + 888) = v11;
      __asm { swc2    $12, 0x390($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v10 + 896))(*(_DWORD *)(v10 + 896), 0);
      *(_DWORD *)(v5 + 916) = v14;
      *(_WORD *)(v5 + 890) = v15;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v19 = ~((*(_DWORD *)(v5 + 912) - *(_DWORD *)(v5 + 908))
            | (_$T9 - *(_DWORD *)(v5 + 908))
            | (_$A0 - *(_DWORD *)(v5 + 908))
            | (_$A1 - *(_DWORD *)(v5 + 908)))
          | *(_DWORD *)(v5 + 912) & _$T9 & _$A0 & _$A1;
      v8 = v19 < 0;
      v20 = v19 << 16;
      if ( !v8 && v20 >= 0 )
        break;
      v21 = *(_WORD *)(v5 + 890);
      *(_WORD *)(v5 + 880) = *(_WORD *)(v5 + 888);
      *(_WORD *)(v5 + 884) = v21;
      v8 = v13 - (int)v9-- < 0;
      if ( !v8 )
        return (*(int (**)(void))(v5 + 904))();
    }
    do
    {
      v12();
      v31 = *(_WORD *)(v5 + 890);
      *(_WORD *)(v5 + 880) = *(_WORD *)(v5 + 888);
      *(_WORD *)(v5 + 884) = v31;
      v8 = v32 - (int)v9-- < 0;
      if ( !v8 )
        break;
      (*(void (__fastcall **)(_DWORD, int))(v5 + 896))(*(_DWORD *)(v5 + 896), -1);
      *(_WORD *)(v22 + 888) = v23;
      __asm { swc2    $12, 0x390($v1) }
      (*(void (__fastcall **)(_DWORD, _DWORD))(v22 + 896))(*(_DWORD *)(v22 + 896), 0);
      *(_DWORD *)(v5 + 916) = v24;
      *(_WORD *)(v5 + 890) = v25;
      __asm
      {
        mfc2    $t9, $12
        mfc2    $a0, $13
        mfc2    $a1, $14
      }
      __asm { cop2    0x168002E }
      v29 = ~((*(_DWORD *)(v5 + 912) - *(_DWORD *)(v5 + 908))
            | (_$T9 - *(_DWORD *)(v5 + 908))
            | (_$A0 - *(_DWORD *)(v5 + 908))
            | (_$A1 - *(_DWORD *)(v5 + 908)))
          | *(_DWORD *)(v5 + 912) & _$T9 & _$A0 & _$A1;
      v8 = v29 < 0;
      v30 = v29 << 16;
      if ( v8 )
        break;
    }
    while ( v30 >= 0 );
  }
  return (*(int (**)(void))(v5 + 904))();
}
// 80044498: positive sp value 1 has been found
// 8004447C: variable 'v2' is possibly undefined
// 8004447C: variable 'v0' is possibly undefined
// 80044480: variable 'v1' is possibly undefined
// 800444C0: variable 'v4' is possibly undefined
// 800444C0: variable 'v3' is possibly undefined
// 800444DC: variable 'v6' is possibly undefined
// 800444DC: variable 'v5' is possibly undefined
// 800444E0: variable 'v7' is possibly undefined
// 80044504: variable 'v11' is possibly undefined
// 80044504: variable 'v10' is possibly undefined
// 80044520: variable 'v14' is possibly undefined
// 80044524: variable 'v15' is possibly undefined
// 80044598: variable 'v13' is possibly undefined
// 800445C0: variable 'v23' is possibly undefined
// 800445C0: variable 'v22' is possibly undefined
// 800445DC: variable 'v24' is possibly undefined
// 800445E0: variable 'v25' is possibly undefined
// 80044638: variable 'v12' is possibly undefined
// 80044658: variable 'v32' is possibly undefined

//----- (80044674) --------------------------------------------------------
void __fastcall sub_80044674(int a1, int a2)
{
  int v2; // $at
  int v3; // $v1
  int v4; // $t0
  __int16 v5; // $t1
  int v6; // $t2
  int v7; // $t3
  int v8; // $t5
  int v9; // $t6
  int v10; // $t7
  int v11; // $t8
  int v12; // $t9
  int v14; // $a2
  unsigned int v16; // $a0
  unsigned int v17; // $t8
  char v18; // $v0
  int v19; // $v0
  int v20; // $t8
  int v23; // $a1
  int v27; // $lo
  unsigned int v29; // $a1
  __int16 v30; // $t9
  int v32; // $t8
  int v33; // $a0
  int v34; // $t8
  int v35; // $a1
  int v36; // $t8
  int v37; // $t8

  _$S6 = 4 * v11 + v3;
  if ( (*(__int16 *)(_$S6 + 294) & a2) == 0 )
  {
    v14 = v12 + v8;
    _$A3 = (v11 << 8) + v9;
    __asm { mtc2    $a3, $1 }
    v16 = v12 + v4;
    LOWORD(v12) = ((_WORD)v11 + v5) << 8;
    v17 = v16 >> 8;
    v18 = 16;
    if ( v10 )
    {
      LOBYTE(v17) = BYTE1(v16);
      v12 &= 0xFF00u;
      v19 = BYTE1(v16) | v12;
      if ( v12 == 65280 )
        v19 = BYTE1(v16);
      v18 = *(_BYTE *)(v19 + v10);
    }
    *(_WORD *)(_$S6 + 294) = -1;
    v20 = 4 * (v17 & 0x1F | ((unsigned __int16)(v12 & 0x1F00) >> 3));
    _$T9 = *(_DWORD *)(v3 + 920);
    _$A0 = *(_DWORD *)(v20 + v6);
    v23 = *(_DWORD *)(v20 + v7);
    __asm { mtc2    $a0, $6 }
    _$T8 = (16 * v23) & 0xFF0;
    __asm { ctc2    $t8, $21 }
    _$T8 = ((unsigned int)v23 >> 4) & 0xFF0;
    __asm { ctc2    $t8, $22 }
    _$T8 = ((unsigned int)v23 >> 12) & 0xFF0;
    __asm
    {
      ctc2    $t8, $23
      mtc2    $t9, $8
    }
    __asm { cop2    0x780010 }
    v27 = (v18 & 0x1F) * (8 * (_$A0 >> 24) + ((_$T9 * ((v23 >> 24) - (_$A0 >> 24))) >> 9));
    __asm { mfc2    $t8, $22 }
    v29 = (_$T8 >> 12) & 0xFF0;
    v30 = _$T8 + *(_WORD *)(v3 + 892);
    _$A0 = (unsigned __int16)v14 | (((v27 >> 7) + v2) << 17);
    __asm { mtc2    $a0, $0 }
    if ( _$A3 < 0 )
      _$A3 = -_$A3;
    v32 = v14;
    if ( v14 < 0 )
      v32 = -v14;
    __asm { cop2    0x180001 }
    v33 = _$A3 >> 2;
    if ( v32 - _$A3 < 0 )
    {
      v33 = v32 >> 2;
      v32 = _$A3;
    }
    v34 = v32 + v33 - 2048;
    if ( v34 >= 0 )
    {
      v36 = 4096 - v34;
      if ( v36 <= 0 )
      {
        v37 = 0;
        goto LABEL_18;
      }
      v35 = (int)(v36 * v29) >> 17;
    }
    else
    {
      v35 = v29 >> 5;
    }
    v37 = v35 | (v35 << 8) | (v35 << 16);
LABEL_18:
    __asm
    {
      swc2    $14, 0x1E8($s6)
      swc2    $19, 0x2AC($s6)
    }
    *(_DWORD *)(_$S6 + 96) = v37;
    *(_WORD *)(_$S6 + 292) = v30;
    return;
  }
  __asm
  {
    mfc2    $t8, $13
    mfc2    $t9, $18
    mtc2    $t8, $12
    mtc2    $t9, $17
    mfc2    $t8, $14
    mfc2    $t9, $19
    mtc2    $t8, $13
    mtc2    $t9, $18
    lwc2    $14, 0x1E8($s6)
    lwc2    $19, 0x2AC($s6)
  }
}
// 80044674: variable 'v11' is possibly undefined
// 80044678: variable 'v3' is possibly undefined
// 80044690: variable 'v12' is possibly undefined
// 80044690: variable 'v8' is possibly undefined
// 80044694: variable 'v9' is possibly undefined
// 800446A0: variable 'v4' is possibly undefined
// 8004469C: variable 'v5' is possibly undefined
// 800446E0: variable 'v10' is possibly undefined
// 80044724: variable 'v6' is possibly undefined
// 80044728: variable 'v7' is possibly undefined
// 800447AC: variable 'v2' is possibly undefined

//----- (80044878) --------------------------------------------------------
void __fastcall sub_80044878(int a1, int a2)
{
  int v2; // $v1
  char v3; // $t0
  __int16 v4; // $t1
  int v5; // $t7
  char v6; // $s0
  __int16 v7; // $s1
  int v8; // $s2
  int v9; // $s3
  int v10; // $s4
  int *v11; // $s7
  int v12; // $fp
  int v13; // $t9
  int v14; // $t8
  unsigned int v15; // $t8
  int v16; // $t8
  int v17; // $t9
  unsigned int v18; // $a0
  int v20; // $a3
  int v21; // $v0
  bool v22; // dc
  int v23; // $v0
  int v24; // $v0
  int v25; // $a2
  int v26; // $t9
  int v27; // $a2
  int v28; // $t8
  int v29; // $t9
  int v31; // $a0
  int v32; // $v0
  int v33; // $v0
  int v34; // $v0
  int v35; // $a2
  int v36; // $t8
  int v37; // $t9
  unsigned int v38; // $a0
  int v40; // $a3
  int v41; // $v0
  int v42; // $v0
  int v43; // $a2
  int v44; // $t8
  int v45; // $t9
  int v46; // $a0
  int v48; // $a3
  int v49; // $v0
  int v50; // $v0
  int v51; // $t8
  int v52; // $t9
  int v53; // $a0
  int v55; // $a3
  int v56; // $v0
  int v57; // $v0
  int v58; // $a2

  if ( v5 )
  {
    v13 = (v7 + v4) & 0xFF00;
    v14 = (unsigned __int8)(v6 + v3) | v13;
    if ( v13 == 65280 )
      v14 = (unsigned __int8)(v6 + v3);
    v15 = *(unsigned __int8 *)(v14 + v5);
    if ( (v15 & 0x80) != 0 )
    {
      v26 = v15 << 26;
      if ( (v15 & 0x40) != 0 )
      {
        if ( (v15 & 0x20) != 0 )
        {
          v51 = *(_DWORD *)(v2 + 880);
          if ( !(v26 | *(_DWORD *)(v2 + 916)) )
            return;
          v52 = (*(__int16 *)(v2 + 886) << 16) | *(unsigned __int16 *)(v2 + 888);
          v53 = *(unsigned __int16 *)(v2 + 890);
          __asm { mfc2    $v0, $24 }
          v55 = *(_DWORD *)(v2 + 912);
          v56 = a2 - (_$V0 >> 15);
          v22 = v56 >= 0;
          v57 = 4 * v56;
          if ( !v22 )
            v57 = 0;
          v22 = v57 - 8188 <= 0;
          v34 = v57 + v12;
          if ( !v22 )
            v34 = v12 + 8188;
          v11[1] = v8 | 0x36000000;
          v11[2] = v55;
          v11[3] = v51;
          v11[4] = v10;
          __asm { swc2    $13, 0x14($s7) }
          v58 = *(_DWORD *)(v2 + 916);
          v11[6] = v52;
          v11[7] = v58;
          __asm { swc2    $14, 0x20($s7) }
          v11[9] = v53;
        }
        else
        {
          v44 = *(_DWORD *)(v2 + 880);
          if ( !(v8 | v9 | v10) )
            return;
          v45 = *(_DWORD *)(v2 + 884);
          v46 = *(_DWORD *)(v2 + 888);
          __asm { mfc2    $v0, $24 }
          v48 = *(_DWORD *)(v2 + 912);
          v49 = a2 - (_$V0 >> 15);
          v22 = v49 >= 0;
          v50 = 4 * v49;
          if ( !v22 )
            v50 = 0;
          v22 = v50 - 8188 <= 0;
          v34 = v50 + v12;
          if ( !v22 )
            v34 = v12 + 8188;
          v11[1] = v8 | 0x36000000;
          v11[2] = v48;
          v11[3] = v44;
          v11[4] = v9;
          __asm { swc2    $12, 0x14($s7) }
          v11[6] = v45;
          v11[7] = v10;
          __asm { swc2    $13, 0x20($s7) }
          v11[9] = v46;
        }
      }
      else
      {
        v27 = *(_DWORD *)(v2 + 916);
        if ( (v15 & 0x20) != 0 )
        {
          v36 = *(_DWORD *)(v2 + 880);
          if ( !(v8 | v9 | v27) )
            return;
          v37 = *(_DWORD *)(v2 + 884);
          v38 = *(_DWORD *)(v2 + 888);
          __asm { mfc2    $v0, $24 }
          v40 = *(_DWORD *)(v2 + 912);
          v41 = a2 - (_$V0 >> 15);
          v22 = v41 >= 0;
          v42 = 4 * v41;
          if ( !v22 )
            v42 = 0;
          v22 = v42 - 8188 <= 0;
          v34 = v42 + v12;
          if ( !v22 )
            v34 = v12 + 8188;
          v11[1] = v8 | 0x36000000;
          v11[2] = v40;
          v11[3] = v36;
          v11[4] = v9;
          __asm { swc2    $12, 0x14($s7) }
          v43 = *(_DWORD *)(v2 + 916);
          v11[6] = v37;
          v11[7] = v43;
          __asm { swc2    $14, 0x20($s7) }
          v11[9] = HIWORD(v38);
        }
        else
        {
          if ( !(v9 | v10 | v27) )
            return;
          v28 = (*(__int16 *)(v2 + 882) << 16) | *(unsigned __int16 *)(v2 + 884);
          v29 = (*(__int16 *)(v2 + 886) << 16) | *(unsigned __int16 *)(v2 + 888);
          __asm { mfc2    $v0, $24 }
          v31 = *(unsigned __int16 *)(v2 + 890);
          v32 = a2 - (_$V0 >> 15);
          v22 = v32 >= 0;
          v33 = 4 * v32;
          if ( !v22 )
            v33 = 0;
          v22 = v33 - 8188 <= 0;
          v34 = v33 + v12;
          if ( !v22 )
            v34 = v12 + 8188;
          v11[1] = v9 | 0x36000000;
          __asm { swc2    $12, 8($s7) }
          v11[3] = v28;
          v11[4] = v10;
          __asm { swc2    $13, 0x14($s7) }
          v35 = *(_DWORD *)(v2 + 916);
          v11[6] = v29;
          v11[7] = v35;
          __asm { swc2    $14, 0x20($s7) }
          v11[9] = v31;
        }
      }
      *v11 = *(_DWORD *)(v34 + 32) | 0x9000000;
      *(_DWORD *)(v34 + 32) = (unsigned int)v11 & 0xFFFFFF;
      return;
    }
    if ( !(v15 >> 5) )
      return;
  }
  v16 = *(_DWORD *)(v2 + 880);
  if ( v8 | v9 | v10 | *(_DWORD *)(v2 + 916) )
  {
    v17 = *(_DWORD *)(v2 + 884);
    v18 = *(_DWORD *)(v2 + 888);
    __asm { mfc2    $v0, $24 }
    v20 = *(_DWORD *)(v2 + 912);
    v21 = a2 - (_$V0 >> 15);
    v22 = v21 >= 0;
    v23 = 4 * v21;
    if ( !v22 )
      v23 = 0;
    v22 = v23 - 8188 <= 0;
    v24 = v23 + v12;
    if ( !v22 )
      v24 = v12 + 8188;
    v11[1] = v8 | 0x3E000000;
    v11[2] = v20;
    v11[3] = v16;
    v11[4] = v9;
    __asm { swc2    $12, 0x14($s7) }
    v11[6] = v17;
    v11[7] = v10;
    __asm { swc2    $13, 0x20($s7) }
    v25 = *(_DWORD *)(v2 + 916);
    v11[9] = v18;
    v11[10] = v25;
    __asm { swc2    $14, 0x2C($s7) }
    v11[12] = HIWORD(v18);
    *v11 = *(_DWORD *)(v24 + 32) | 0xC000000;
    *(_DWORD *)(v24 + 32) = (unsigned int)v11 & 0xFFFFFF;
  }
}
// 80044878: variable 'v5' is possibly undefined
// 80044880: variable 'v7' is possibly undefined
// 80044880: variable 'v4' is possibly undefined
// 80044884: variable 'v6' is possibly undefined
// 80044884: variable 'v3' is possibly undefined
// 800449C4: variable 'v2' is possibly undefined
// 800449B4: variable 'v8' is possibly undefined
// 800449B4: variable 'v9' is possibly undefined
// 800449B8: variable 'v10' is possibly undefined
// 800449F4: variable 'v12' is possibly undefined
// 80044A04: variable 'v11' is possibly undefined

//----- (80044CA0) --------------------------------------------------------
int __fastcall sub_80044CA0(int *a1, _DWORD *a2, int _$A2, int *a4)
{
  int v4; // $t8
  int v5; // $t9
  int v6; // $ra
  int v7; // $t7
  int v8; // $s3
  int v9; // $s5
  int v10; // $s0
  int v11; // $s1
  int v12; // $s2
  int v13; // $s6
  int v14; // $s7
  int v15; // $gp
  int v16; // $t1
  int v17; // $v0
  int v18; // $t6
  unsigned int v19; // $t0
  unsigned int v20; // $t1
  bool v21; // dc
  int v22; // $t6
  int v23; // $t6
  int v24; // $t6
  int v25; // $t9
  int v26; // $t8
  int v27; // $t6
  unsigned int v28; // $t1
  int v29; // $t6
  int v30; // $t9
  int v31; // $t8
  int v32; // $t6
  unsigned int v33; // $t0
  int v34; // $t6
  int v35; // $t9
  int v36; // $t8
  int v37; // $t6
  unsigned int v38; // $t1
  int v39; // $t9
  int v40; // $t8
  unsigned int v42; // $t0
  unsigned int v43; // $t1
  int v44; // $v1
  int v45; // $a2
  int v46; // $a3
  int v47; // $a2
  int v48; // $s0
  int v49; // $s1
  int v50; // $v0
  int v52; // [sp+0h] [-38h] BYREF
  int v53; // [sp+30h] [-8h]
  int v54; // [sp+34h] [-4h]

  v53 = v4;
  v54 = v5;
  MEMORY[0x1F800384] = v6;
  MEMORY[0x1F800000] = &v52;
  v7 = *(_DWORD *)(_$A2 + 176);
  v8 = a2[24];
  v9 = a2[26];
  v10 = *a4;
  v11 = a4[1];
  v12 = a4[2];
  v13 = v8 + *a4;
  v14 = a2[25] + v11;
  v15 = v9 + v12;
  while ( 1 )
  {
    v16 = (v15 >> 18 << 8) & 0xFF00;
    v17 = (unsigned __int8)(v13 >> 18) | v16;
    if ( v16 == 65280 )
      v17 = (unsigned __int8)(v13 >> 18);
    v18 = *(unsigned __int8 *)(v17 + v7);
    v19 = v13 & 0xFFFC0000;
    v20 = v15 & 0xFFFC0000;
    v21 = v18 == 0;
    v22 = v18 << 24;
    if ( v21 )
      break;
    v21 = v22 >= 0;
    v23 = 2 * v22;
    if ( v21 || (((v9 - v20) ^ (v15 - v20)) & 0x80000000) == 0 || (int)(v15 - v20) < 0 )
    {
      v21 = v23 >= 0;
      v24 = 2 * v23;
      if ( !v21 )
      {
        v25 = v15 - v20 + v13 - v19 - 0x40000;
        if ( (((v8 - v19 + v9 - v20 - 0x40000) ^ v25) & 0x80000000) != 0 )
        {
          v26 = (v25 >> 1) + 256;
          if ( v25 >= 0 )
          {
            v13 -= v26;
            v15 -= v26;
            goto LABEL_37;
          }
        }
      }
      v21 = v24 >= 0;
      v27 = 2 * v24;
      if ( v21 || (((v8 - v19) ^ (v13 - v19)) & 0x80000000) == 0 || (int)(v13 - v19) < 0 )
      {
        v28 = v20 + 0x40000;
        v21 = v27 >= 0;
        v29 = 2 * v27;
        if ( !v21 )
        {
          v30 = v28 - v15 + v13 - v19 - 0x40000;
          if ( (((v8 - v19 + v28 - v9 - 0x40000) ^ v30) & 0x80000000) != 0 )
          {
            v31 = (v30 >> 1) + 256;
            if ( v30 >= 0 )
            {
              v13 -= v31;
              v15 += v31;
              goto LABEL_37;
            }
          }
        }
        v21 = v29 >= 0;
        v32 = 2 * v29;
        if ( v21 || (((v9 - v28) ^ (v15 - v28)) & 0x80000000) == 0 || (int)(v15 - v28) >= 0 )
        {
          v33 = v19 + 0x40000;
          v21 = v32 >= 0;
          v34 = 2 * v32;
          if ( !v21 )
          {
            v35 = v28 - v15 + v33 - v13 - 0x40000;
            if ( (((v33 - v8 + v28 - v9 - 0x40000) ^ v35) & 0x80000000) != 0 )
            {
              v36 = (v35 >> 1) + 256;
              if ( v35 >= 0 )
              {
                v13 += v36;
                v15 += v36;
                goto LABEL_37;
              }
            }
          }
          v21 = v34 >= 0;
          v37 = 2 * v34;
          if ( v21 || (((v8 - v33) ^ (v13 - v33)) & 0x80000000) == 0 || (int)(v13 - v33) >= 0 )
          {
            v38 = v28 - 0x40000;
            if ( !v37 )
              break;
            v39 = v15 - v38 + v33 - v13 - 0x40000;
            if ( (((v33 - v8 + v9 - v38 - 0x40000) ^ v39) & 0x80000000) == 0 )
              break;
            v40 = (v39 >> 1) + 256;
            if ( v39 < 0 )
              break;
            v13 += v40;
            v15 -= v40;
LABEL_37:
            a2[33] = 30 * (v13 - v8);
            a2[35] = 30 * (v15 - v9);
          }
          else
          {
            v13 = v33 + 256;
            a2[33] = 0;
          }
        }
        else
        {
          v15 = v28 + 256;
          a2[35] = 0;
        }
      }
      else
      {
        v13 = v19 - 256;
        a2[33] = 0;
      }
    }
    else
    {
      v15 = v20 - 256;
      a2[35] = 0;
    }
  }
  a2[24] = v13;
  a2[25] = v14;
  a2[26] = v15;
  __asm { lwc2    $8, 0xA0($a2) }
  v42 = (unsigned int)(v13 >> 8) >> 10;
  v43 = (unsigned int)(v15 >> 8) >> 10 << 8;
  if ( ((v13 >> 8) & 0x3FF) + ((v15 >> 8) & 0x3FF) - 1024 >= 0 )
  {
    sub_80044F74(
      (unsigned int)(v13 >> 8) >> 10,
      v43 + 256,
      v42 + 1,
      (unsigned __int16)((unsigned int)(v15 >> 8) >> 10) << 8);
    v45 = v10 - v11;
    v46 = v10 - v12;
  }
  else
  {
    sub_80044F74(
      v42 + 1,
      (unsigned __int16)((unsigned int)(v15 >> 8) >> 10) << 8,
      (unsigned int)(v13 >> 8) >> 10,
      v43 + 256);
    v45 = v11 - v10;
    v46 = v12 - v10;
  }
  v47 = -v45;
  if ( a1 )
  {
    v48 = v47 >> 5;
    v49 = -v46 >> 5;
    v50 = sub_8003D9DC(v48 * v48 + 0x1000000 + v49 * v49);
    *a1 = (v48 << 12) / v50;
    a1[1] = 0x1000000 / v50;
    a1[2] = (v49 << 12) / v50;
  }
  return (*(int (**)(void))(v44 + 900))();
}
// 80044CC4: variable 'v4' is possibly undefined
// 80044CC8: variable 'v5' is possibly undefined
// 80044CD8: variable 'v6' is possibly undefined
// 80045264: variable 'v44' is possibly undefined

//----- (80044F74) --------------------------------------------------------
int __fastcall sub_80044F74(char a1, __int16 a2, unsigned __int8 a3, __int16 a4)
{
  int v4; // $t2
  int v5; // $t3
  int v6; // $t7
  char v7; // $t8
  __int16 v8; // $t9
  int v9; // $t9
  int v12; // $a1
  int v15; // $a3
  int v16; // $v0
  int result; // $v0
  int v18; // $a3

  v9 = 4 * (((unsigned __int16)(v8 & 0x1F00) >> 3) | v7 & 0x1F);
  _$T8 = *(int *)(v9 + v4) >> 24;
  _$T9 = (*(int *)(v9 + v5) >> 24) - _$T8;
  _$T8 *= 8;
  __asm
  {
    mtc2    $t8, $25
    mtc2    $t9, $9
  }
  v12 = 4 * (((unsigned __int16)(a2 & 0x1F00) >> 3) | a1 & 0x1F);
  _$A0 = *(int *)(v12 + v4) >> 24;
  _$A1 = (*(int *)(v12 + v5) >> 24) - _$A0;
  _$A0 *= 8;
  __asm
  {
    mtc2    $a0, $26
    mtc2    $a1, $10
  }
  v15 = a4 & 0xFF00;
  v16 = a3 | v15;
  if ( v15 == 65280 )
    v16 = (unsigned __int8)(a3 | v15);
  result = v16 + v6;
  v18 = 4 * (((unsigned __int16)(v15 & 0x1F00) >> 3) | a3 & 0x1F);
  _$A2 = *(int *)(v18 + v4) >> 24;
  _$A3 = (*(int *)(v18 + v5) >> 24) - _$A2;
  _$A2 *= 8;
  __asm
  {
    mtc2    $a2, $27
    mtc2    $a3, $11
  }
  __asm { cop2    0x1A0003E }
  __asm
  {
    mfc2    $t9, $9
    mfc2    $a1, $10
    mfc2    $a3, $11
  }
  return result;
}
// 80044F94: variable 'v8' is possibly undefined
// 80044F90: variable 'v7' is possibly undefined
// 80044FA4: variable 'v4' is possibly undefined
// 80044FA8: variable 'v5' is possibly undefined
// 80045044: variable 'v6' is possibly undefined

//----- (800450D4) --------------------------------------------------------
void sub_800450D4()
{
  int v0; // $t8
  int v1; // $t9
  int v2; // $ra
  int v3; // [sp+0h] [-38h] BYREF
  int v4; // [sp+30h] [-8h]
  int v5; // [sp+34h] [-4h]

  v4 = v0;
  v5 = v1;
  MEMORY[0x1F800384] = v2;
  MEMORY[0x1F800000] = &v3;
  JUMPOUT(0x8004511C);
}
// 80045118: control flows out of bounds to 8004511C
// 800450F8: variable 'v0' is possibly undefined
// 800450FC: variable 'v1' is possibly undefined
// 8004510C: variable 'v2' is possibly undefined

//----- (800452A0) --------------------------------------------------------
int __fastcall sub_800452A0(unsigned int a1, int a2, _DWORD *a3)
{
  int v3; // $t8
  int v4; // $t9
  int v5; // $ra
  int v6; // $v1
  int v7; // $t9
  int v8; // $a0
  _DWORD *v9; // $t8
  int v11; // $s7
  int v12; // $a0
  int v13; // $t9
  int v14; // $t4
  int v15; // $s0
  int v16; // $gp
  _BYTE *v17; // $s0
  _WORD *v18; // $s5
  _WORD *v19; // $s6
  int v20; // $s4
  int v21; // $s2
  int v22; // $s1
  int v23; // $s3
  bool v24; // dc
  int v25; // $t8
  int (__fastcall *v26)(int); // $ra
  _BYTE v28[16]; // [sp+FEh] [-38h] BYREF
  int v29; // [sp+12Eh] [-8h]
  int v30; // [sp+132h] [-4h]

  v29 = v3;
  v30 = v4;
  v6 = 528482304;
  MEMORY[0x1F800074] = v5;
  MEMORY[0x1F800000] = v28;
  MEMORY[0x1F800068] = a1 >> 1;
  v7 = a3[77];
  v8 = a3[40];
  MEMORY[0x1F800060] = a3[76];
  MEMORY[0x1F800064] = v7;
  MEMORY[0x1F80006C] = v8;
  v9 = (_DWORD *)a3[3];
  v11 = *(_DWORD *)(a2 + 8);
  v12 = v9[6];
  v13 = v9[5] - 49152;
  v14 = v13 >> 10;
  v15 = (v9[7] - 49152) >> 10;
  v16 = (v13 >> 10) + 96;
  if ( v16 >= 0 && (int)v28 >= 0 && (v13 >> 10) - 256 <= 0 && v15 - 255 <= 0 )
  {
    if ( v14 < 0 )
      v14 = 0;
    if ( v15 < 0 )
      v15 = 0;
    if ( (v13 >> 10) - 160 > 0 )
      v16 = 256;
    v17 = (_BYTE *)(2 * v15);
    __asm
    {
      ctc2    $zero, $5
      ctc2    $zero, $7
      ctc2    $zero, $6
      ctc2    $zero, $21
      ctc2    $zero, $22
      ctc2    $zero, $23
    }
    MEMORY[0x1F800070] = 14221824;
LABEL_20:
    while ( 1 )
    {
      v25 = *(_DWORD *)(v6 + 96);
      v24 = v17 != v28;
      v17 += 2;
      if ( !v24 )
        break;
      v18 = (_WORD *)(*(unsigned __int16 *)&v17[v25] + v25);
      v19 = (_WORD *)(*(unsigned __int16 *)&v17[v25 + 2] + v25);
      v20 = HIBYTE(*v18);
      v21 = (unsigned __int8)*v18;
LABEL_19:
      while ( 1 )
      {
        v22 = v21;
        v23 = v20;
        v24 = v18++ != v19;
        if ( !v24 )
          break;
        v20 = HIBYTE(*v18);
        if ( v21 - v16 > 0 )
          break;
        v21 = (unsigned __int8)*v18;
        if ( v23 && (v22 - v14 >= 0 || v21 - v14 >= 0) )
        {
          while ( 1 )
          {
            sub_800454D4();
            if ( ++v22 - v16 > 0 )
              goto LABEL_20;
            if ( v21 - v22 <= 0 )
              goto LABEL_19;
          }
        }
      }
    }
  }
  v26 = *(int (__fastcall **)(int))(v6 + 116);
  *(_DWORD *)(a2 + 8) = v11;
  return v26(v12);
}
// 800452C4: variable 'v3' is possibly undefined
// 800452C8: variable 'v4' is possibly undefined
// 800452D8: variable 'v5' is possibly undefined
// 8004542C: variable 'v16' is possibly undefined
// 80045440: variable 'v14' is possibly undefined
// 80045484: variable 'v6' is possibly undefined
// 800454CC: variable 'v12' is possibly undefined

//----- (800454D4) --------------------------------------------------------
int sub_800454D4()
{
  int v0; // $at
  _DWORD *v1; // $v1
  int v2; // $t0
  int v3; // $t1
  int v4; // $t2
  int v5; // $t3
  int v6; // $t5
  int v7; // $t6
  int v8; // $t7
  int v9; // $s0
  int v10; // $s1
  int v11; // $s3
  int *v12; // $s7
  int v13; // $fp
  int v14; // $a2
  int v16; // $t8
  int result; // $v0
  int v19; // $t8
  int v20; // $a0
  int v21; // $t8
  _DWORD *v24; // $a0
  _DWORD *v25; // $a0
  int v26; // $t8
  int v27; // $t9
  unsigned int v28; // $a0
  int v29; // $a3
  bool v30; // dc
  int v32; // $lo
  int v35; // $lo
  int v36; // $v0
  int v37; // $v0
  unsigned int v38; // $a0
  int v39; // $a3
  int v40; // $lo

  v14 = ((v10 - v2) << 8) + v6;
  _$A3 = ((v9 - v3) << 7) + v7;
  __asm { mtc2    $a3, $1 }
  v16 = 4 * (v10 & 0x1F | (16 * v9) & 0x3E0);
  result = *(_BYTE *)(((v9 << 7) | v10) + v8) & 0x1F;
  _$A0 = (unsigned __int16)((((_WORD)v10 - (_WORD)v2) << 8) + v6)
       | ((((result
           * (8 * (*(int *)(v16 + v4) >> 24) + v1[27] * ((*(int *)(v16 + v5) >> 24) - (*(int *)(v16 + v4) >> 24)))) >> 7)
         + v0) << 17);
  __asm { mtc2    $a0, $0 }
  if ( _$A3 < 0 )
    _$A3 = -_$A3;
  v19 = ((v10 - v2) << 8) + v6;
  if ( v14 < 0 )
    v19 = -v14;
  __asm { cop2    0x180001 }
  v20 = _$A3 >> 2;
  if ( v19 - _$A3 < 0 )
  {
    v20 = v19 >> 2;
    v19 = _$A3;
  }
  v21 = v19 + v20 - 4096;
  __asm { cfc2    $a1, $31 }
  if ( (_$A1 & 0x40000) == 0 )
  {
    _$A2 = 2654336;
    if ( v11 != 1 )
      _$A2 = 2631808;
    v24 = (_DWORD *)v1[25];
    if ( v21 >= 0 )
    {
      v30 = v21 - 0x2000 >= 0;
      _$T8 = v21 >> 1;
      if ( v30 )
        return result;
      __asm
      {
        mtc2    $t8, $8
        mtc2    $a2, $6
      }
      __asm { cop2    0x780010 }
      v32 = 21600 * (0x2000 - _$T8);
      v26 = v24[65];
      v27 = v24[66];
      v28 = v24[67];
      __asm { mfc2    $a2, $22 }
      v29 = v32 >> 13;
    }
    else
    {
      v25 = &v24[4 * (((_BYTE)v9 + (_BYTE)v10 + (unsigned __int8)v1[26]) & 0xF)];
      v26 = v25[1];
      v27 = v25[2];
      v28 = v25[3];
      v29 = 21600;
    }
    v12[1] = _$A2 | 0x2E000000;
    v12[3] = v26;
    v12[5] = v27;
    v12[7] = v28;
    v12[9] = HIWORD(v28);
    __asm
    {
      mfc2    $a0, $19
      mfc2    $a1, $14
    }
    v35 = v29 / (int)_$A0;
    if ( (int)(_$A0 - 144) > 0 )
    {
      v36 = 1940 - (_$A0 >> 3);
      v30 = v36 >= 0;
      v37 = 4 * v36;
      if ( !v30 )
        v37 = 0;
      v30 = v37 - 8188 <= 0;
      result = v37 + v13;
      if ( !v30 )
        result = v13 + 8188;
      v38 = HIWORD(_$A1);
      v39 = v35;
      v40 = 160 * v35;
      if ( (unsigned __int16)_$A1 - v39 - 512 < 0 && (unsigned __int16)_$A1 + v39 >= 0 )
      {
        v12[2] = ((v38 - (v40 >> 8)) << 16) | (unsigned __int16)(_$A1 - v39);
        v12[4] = ((v38 - (v40 >> 8)) << 16) | (unsigned __int16)(_$A1 + v39);
        v12[6] = ((v38 + (v40 >> 8)) << 16) | (unsigned __int16)(_$A1 - v39);
        v12[8] = ((v38 + (v40 >> 8)) << 16) | (unsigned __int16)(_$A1 + v39);
        __asm { mfc2    $a0, $22 }
        *v12 = *(_DWORD *)(result + 32) | 0x9000000;
        *(_DWORD *)(result + 32) = (unsigned int)v12 & 0xFFFFFF;
      }
    }
  }
  return result;
}
// 800454D4: variable 'v10' is possibly undefined
// 800454D4: variable 'v2' is possibly undefined
// 800454E4: variable 'v6' is possibly undefined
// 800454D8: variable 'v9' is possibly undefined
// 800454D8: variable 'v3' is possibly undefined
// 800454E8: variable 'v7' is possibly undefined
// 800454F8: variable 'v8' is possibly undefined
// 80045514: variable 'v4' is possibly undefined
// 8004551C: variable 'v1' is possibly undefined
// 80045518: variable 'v5' is possibly undefined
// 80045554: variable 'v0' is possibly undefined
// 800455B0: variable 'v11' is possibly undefined
// 8004563C: variable 'v12' is possibly undefined
// 80045688: variable 'v13' is possibly undefined

//----- (80045750) --------------------------------------------------------
int sub_80045750()
{
  int i; // $s0

  for ( i = 4; i != -1; --i )
  {
    if ( sub_800458A0(1) )
    {
      sub_800459EC((int)sub_800457E8);
      sub_80045A04((int)sub_80045810);
      sub_80048010((int)sub_80045838);
      sub_80048028(0);
      return 1;
    }
  }
  printf("CdInit: Init failed\n");
  return 0;
}
// 80048110: using guessed type int printf(const char *, ...);

//----- (800457E8) --------------------------------------------------------
int sub_800457E8()
{
  return DeliverEvent(-268435453, 32);
}
// 80048BD8: using guessed type int __fastcall DeliverEvent(_DWORD, _DWORD);

//----- (80045810) --------------------------------------------------------
int sub_80045810()
{
  return DeliverEvent(-268435453, 64);
}
// 80048BD8: using guessed type int __fastcall DeliverEvent(_DWORD, _DWORD);

//----- (80045838) --------------------------------------------------------
int sub_80045838()
{
  return DeliverEvent(-268435453, 64);
}
// 80048BD8: using guessed type int __fastcall DeliverEvent(_DWORD, _DWORD);

//----- (80045860) --------------------------------------------------------
int sub_80045860()
{
  return 0;
}

//----- (80045870) --------------------------------------------------------
int sub_80045870()
{
  return 0;
}

//----- (80045880) --------------------------------------------------------
int sub_80045880()
{
  return 0;
}

//----- (80045890) --------------------------------------------------------
char *sub_80045890()
{
  return &byte_8005DE68;
}
// 8005DE68: using guessed type char byte_8005DE68;

//----- (800458A0) --------------------------------------------------------
BOOL __fastcall sub_800458A0(int a1)
{
  BOOL result; // $v0
  bool v3; // dc

  if ( a1 == 2 )
  {
    sub_80047138();
    return 1;
  }
  else
  {
    v3 = sub_80047188() != 0;
    result = 0;
    if ( !v3 )
    {
      result = 1;
      if ( a1 == 1 )
        return sub_80047044() == 0;
    }
  }
  return result;
}

//----- (8004590C) --------------------------------------------------------
int sub_8004590C()
{
  return sub_80046F64();
}

//----- (8004592C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004592C(int a1)
{
  int result; // $v0

  result = 0;
  dword_8005DE58 = a1;
  return result;
}
// 80045934: write access to const memory at 8005DE58 has been detected
// 8005DE58: using guessed type int dword_8005DE58;

//----- (800459AC) --------------------------------------------------------
int __fastcall sub_800459AC(int a1)
{
  return sub_80046574(a1);
}

//----- (800459CC) --------------------------------------------------------
int __fastcall sub_800459CC(int a1)
{
  return sub_800467F4(a1);
}

//----- (800459EC) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_800459EC(int a1)
{
  int result; // $v0

  result = 0;
  dword_8005DE4C = a1;
  return result;
}
// 800459F4: write access to const memory at 8005DE4C has been detected
// 8005DE4C: using guessed type int dword_8005DE4C;

//----- (80045A04) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80045A04(int a1)
{
  int result; // $v0

  result = 0;
  dword_8005DE50 = a1;
  return result;
}
// 80045A0C: write access to const memory at 8005DE50 has been detected
// 8005DE50: using guessed type int dword_8005DE50;

//----- (80045A1C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80045A1C(unsigned __int8 a1, char *a2, int a3)
{
  int v6; // $s0
  int *v7; // $s6
  bool v8; // dc
  int result; // $v0

  v6 = 3;
  v7 = &dword_8005DDC4[a1];
  while ( 1 )
  {
    dword_8005DE4C = 0;
    if ( !a2 || !*v7 || !sub_80046AC0(2u, a2, a3, 0) )
    {
      dword_8005DE4C = 0;
      v8 = sub_80046AC0(a1, a2, a3, 0) == 0;
      result = 1;
      if ( v8 )
        break;
    }
    if ( --v6 == -1 )
    {
      dword_8005DE4C = 0;
      return 0;
    }
  }
  return result;
}
// 80045A74: write access to const memory at 8005DE4C has been detected
// 80045AE0: write access to const memory at 8005DE4C has been detected
// 80045B14: write access to const memory at 8005DE4C has been detected
// 8005DDC4: using guessed type int dword_8005DDC4[3];
// 8005DE4C: using guessed type int dword_8005DE4C;

//----- (80045B54) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80045B54(unsigned __int8 a1, char *a2)
{
  int v4; // $s0
  int *v5; // $s5
  bool v6; // dc
  int result; // $v0

  v4 = 3;
  v5 = &dword_8005DDC4[a1];
  while ( 1 )
  {
    dword_8005DE4C = 0;
    if ( !a2 || !*v5 || !sub_80046AC0(2u, a2, 0, 0) )
    {
      dword_8005DE4C = 0;
      v6 = sub_80046AC0(a1, a2, 0, 1) == 0;
      result = 1;
      if ( v6 )
        break;
    }
    if ( --v4 == -1 )
    {
      dword_8005DE4C = 0;
      return 0;
    }
  }
  return result;
}
// 80045BA4: write access to const memory at 8005DE4C has been detected
// 80045C10: write access to const memory at 8005DE4C has been detected
// 80045C44: write access to const memory at 8005DE4C has been detected
// 8005DDC4: using guessed type int dword_8005DDC4[3];
// 8005DE4C: using guessed type int dword_8005DE4C;

//----- (80045C80) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
BOOL __fastcall sub_80045C80(unsigned __int8 a1, char *a2, int a3)
{
  int v6; // $s0
  int *v7; // $s6
  bool v8; // dc
  int v9; // $v0

  v6 = 3;
  v7 = &dword_8005DDC4[a1];
  while ( 1 )
  {
    dword_8005DE4C = 0;
    if ( !a2 || !*v7 || !sub_80046AC0(2u, a2, a3, 0) )
    {
      dword_8005DE4C = 0;
      v8 = sub_80046AC0(a1, a2, a3, 0) == 0;
      v9 = 0;
      if ( v8 )
        break;
    }
    --v6;
    v9 = -1;
    if ( v6 == -1 )
    {
      dword_8005DE4C = 0;
      break;
    }
  }
  return !v9 && sub_80046574(0) == 2;
}
// 80045CD0: write access to const memory at 8005DE4C has been detected
// 80045D3C: write access to const memory at 8005DE4C has been detected
// 80045D70: write access to const memory at 8005DE4C has been detected
// 8005DDC4: using guessed type int dword_8005DDC4[3];
// 8005DE4C: using guessed type int dword_8005DE4C;

//----- (80046574) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80046574(int a1)
{
  int v2; // $v1
  int v3; // $v0
  bool v4; // dc
  int result; // $v0
  char v6; // $s1

  dword_8006D170 = sub_8004B2A8(-1) + 960;
  dword_8006D174 = 0;
  dword_8006D178 = (int)"CD_sync";
  do
  {
    if ( dword_8006D170 >= sub_8004B2A8(-1) && (v2 = dword_8006D174, ++dword_8006D174, v2 <= 3932160) )
    {
      v3 = 0;
    }
    else
    {
      sub_80048058();
      printf("%s:(%s) Sync=%s, Ready=%s\n", (const char *)dword_8006D178, "CdlSync", "NoIntr", "NoIntr");
      sub_80046F64();
      v3 = -1;
    }
    v4 = v3 != 0;
    result = -1;
    if ( v4 )
      break;
    if ( CheckCallback() )
    {
      v6 = MEMORY[0x1F801800] & 3;
      while ( sub_80045FEC() )
        ;
      MEMORY[0x1F801800] = v6;
    }
    result = 0;
  }
  while ( !a1 );
  return result;
}
// 80046784: write access to const memory at 8005E12C has been detected
// 80046778: conditional instruction was optimized away because $a2.4==0
// 80045FEC: using guessed type int sub_80045FEC(void);
// 80048110: using guessed type int printf(const char *, ...);
// 8004B5F0: using guessed type int CheckCallback(void);
// 8005DE4C: using guessed type int dword_8005DE4C;
// 8005DE50: using guessed type int dword_8005DE50;
// 8005E12C: using guessed type char byte_8005E12C;
// 8005E12D: using guessed type char byte_8005E12D;
// 8006D170: using guessed type int dword_8006D170;
// 8006D174: using guessed type int dword_8006D174;
// 8006D178: using guessed type int dword_8006D178;

//----- (800467F4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_800467F4(int a1)
{
  int v2; // $v1
  int v3; // $v0
  bool v4; // dc
  int result; // $v0
  char v6; // $s1

  dword_8006D170 = sub_8004B2A8(-1) + 960;
  dword_8006D174 = 0;
  dword_8006D178 = (int)"CD_ready";
  do
  {
    if ( dword_8006D170 >= sub_8004B2A8(-1) && (v2 = dword_8006D174, ++dword_8006D174, v2 <= 3932160) )
    {
      v3 = 0;
    }
    else
    {
      sub_80048058();
      printf("%s:(%s) Sync=%s, Ready=%s\n", (const char *)dword_8006D178, "CdlSync", "NoIntr", "NoIntr");
      sub_80046F64();
      v3 = -1;
    }
    v4 = v3 != 0;
    result = -1;
    if ( v4 )
      break;
    if ( CheckCallback() )
    {
      v6 = MEMORY[0x1F801800] & 3;
      while ( sub_80045FEC() )
        ;
      MEMORY[0x1F801800] = v6;
    }
    result = 0;
  }
  while ( !a1 );
  return result;
}
// 800469FC: write access to const memory at 8005E12E has been detected
// 80046A4C: write access to const memory at 8005E12D has been detected
// 80045FEC: using guessed type int sub_80045FEC(void);
// 80048110: using guessed type int printf(const char *, ...);
// 8004B5F0: using guessed type int CheckCallback(void);
// 8005DE4C: using guessed type int dword_8005DE4C;
// 8005DE50: using guessed type int dword_8005DE50;
// 8005E12C: using guessed type char byte_8005E12C;
// 8005E12D: using guessed type char byte_8005E12D;
// 8005E12E: using guessed type char byte_8005E12E;
// 8006D170: using guessed type int dword_8006D170;
// 8006D174: using guessed type int dword_8006D174;
// 8006D178: using guessed type int dword_8006D178;

//----- (80046AC0) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80046AC0(unsigned __int8 a1, char *a2, int a3, int a4)
{
  int result; // $v0
  int v8; // $v1
  int v9; // $a0
  char *v10; // $v1
  int *v11; // $v1
  int v12; // $a0
  char *v13; // $a1
  char v14; // $v0
  int v15; // $v1
  int v16; // $v0
  bool v17; // dc
  char v18; // $s1

  if ( dword_8005E094[a1] && !a2 )
    return -2;
  sub_80046574(0);
  v8 = a1;
  if ( a1 == 2 )
  {
    v9 = 0;
    v10 = a2;
    do
      byte_8005DE68[v9++] = *v10++;
    while ( v9 < 4 );
    v8 = a1;
  }
  if ( v8 == 14 )
    byte_8005DE6C = *a2;
  byte_8005E12C = 0;
  if ( dword_8005DF94[v8] )
    byte_8005E12D = 0;
  MEMORY[0x1F801800] = 0;
  v11 = &dword_8005E094[v8];
  v12 = 0;
  if ( *v11 > 0 )
  {
    v13 = a2;
    do
    {
      v14 = *v13++;
      MEMORY[0x1F801802] = v14;
      ++v12;
    }
    while ( v12 < *v11 );
  }
  byte_8005DE6D = a1;
  MEMORY[0x1F801801] = a1;
  result = 0;
  if ( !a4 )
  {
    dword_8006D170 = sub_8004B2A8(-1) + 960;
    dword_8006D174 = 0;
    dword_8006D178 = (int)"CD_cw";
    while ( 1 )
    {
      if ( dword_8006D170 >= sub_8004B2A8(-1) && (v15 = dword_8006D174, ++dword_8006D174, v15 <= 3932160) )
      {
        v16 = 0;
      }
      else
      {
        sub_80048058();
        printf("%s:(%s) Sync=%s, Ready=%s\n", (const char *)dword_8006D178, "CdlSync", "NoIntr", "NoIntr");
        sub_80046F64();
        v16 = -1;
      }
      v17 = v16 != 0;
      result = -1;
      if ( v17 )
        break;
      if ( CheckCallback() )
      {
        v18 = MEMORY[0x1F801800] & 3;
        while ( sub_80045FEC() )
          ;
        MEMORY[0x1F801800] = v18;
      }
    }
  }
  return result;
}
// 80046BD8: write access to const memory at 8005DE6C has been detected
// 80046C0C: write access to const memory at 8005E12D has been detected
// 80046C74: write access to const memory at 8005DE6D has been detected
// 80046BEC: write access to const memory at 8005E12C has been detected
// 80045FEC: using guessed type int sub_80045FEC(void);
// 80048110: using guessed type int printf(const char *, ...);
// 8004B5F0: using guessed type int CheckCallback(void);
// 8005DE4C: using guessed type int dword_8005DE4C;
// 8005DE50: using guessed type int dword_8005DE50;
// 8005DE58: using guessed type int dword_8005DE58;
// 8005DE6C: using guessed type char byte_8005DE6C;
// 8005DE6D: using guessed type char byte_8005DE6D;
// 8005DF94: using guessed type int dword_8005DF94[];
// 8005E094: using guessed type int dword_8005E094[];
// 8005E12C: using guessed type char byte_8005E12C;
// 8005E12D: using guessed type char byte_8005E12D;
// 8006D170: using guessed type int dword_8006D170;
// 8006D174: using guessed type int dword_8006D174;
// 8006D178: using guessed type int dword_8006D178;

//----- (80046EDC) --------------------------------------------------------
int __fastcall sub_80046EDC(_BYTE *a1)
{
  MEMORY[0x1F801800] = 2;
  MEMORY[0x1F801802] = *a1;
  MEMORY[0x1F801803] = a1[1];
  MEMORY[0x1F801800] = 3;
  MEMORY[0x1F801801] = a1[2];
  MEMORY[0x1F801802] = a1[3];
  MEMORY[0x1F801803] = 32;
  return 0;
}

//----- (80046F64) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80046F64()
{
  int result; // $v0

  MEMORY[0x1F801800] = 1;
  if ( (MEMORY[0x1F801803] & 7) != 0 )
  {
    while ( 1 )
    {
      MEMORY[0x1F801800] = 1;
      MEMORY[0x1F801803] = 7;
      MEMORY[0x1F801802] = 7;
    }
  }
  byte_8005E12E = 0;
  byte_8005E12D = 0;
  byte_8005E12C = 2;
  MEMORY[0x1F801800] = 0;
  MEMORY[0x1F801803] = 0;
  result = 4901;
  MEMORY[0x1F801020] = 4901;
  return result;
}
// 80046FE8: write access to const memory at 8005E12E has been detected
// 80047008: write access to const memory at 8005E12D has been detected
// 80047014: write access to const memory at 8005E12C has been detected
// 8005E12C: using guessed type char byte_8005E12C;
// 8005E12D: using guessed type char byte_8005E12D;
// 8005E12E: using guessed type char byte_8005E12E;

//----- (80047044) --------------------------------------------------------
int sub_80047044()
{
  if ( !MEMORY[0x1F801DB8] && !MEMORY[0x1F801DBA] )
  {
    MEMORY[0x1F801D80] = 0x3FFF;
    MEMORY[0x1F801D82] = 0x3FFF;
  }
  MEMORY[0x1F801DB0] = 0x3FFF;
  MEMORY[0x1F801DB2] = 0x3FFF;
  MEMORY[0x1F801DAA] = -16383;
  MEMORY[0x1F801800] = 3;
  MEMORY[0x1F801801] = 0x80;
  MEMORY[0x1F801802] = 0;
  MEMORY[0x1F801803] = 32;
  return 0;
}

//----- (80047138) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80047138()
{
  dword_8005DE50 = 0;
  dword_8005DE4C = 0;
  dword_8005DE60 = 0;
  dword_8005DE5C = 0;
  ResetCallback();
  return InterruptCallback(2, sub_800476E0);
}
// 80047140: write access to const memory at 8005DE50 has been detected
// 80047148: write access to const memory at 8005DE4C has been detected
// 80047150: write access to const memory at 8005DE60 has been detected
// 80047158: write access to const memory at 8005DE5C has been detected
// 8004B49C: using guessed type int ResetCallback(void);
// 8004B4CC: using guessed type int __fastcall InterruptCallback(_DWORD, _DWORD);
// 8005DE4C: using guessed type int dword_8005DE4C;
// 8005DE50: using guessed type int dword_8005DE50;
// 8005DE5C: using guessed type int dword_8005DE5C;
// 8005DE60: using guessed type int dword_8005DE60;

//----- (80047188) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80047188()
{
  bool v0; // dc
  int result; // $v0

  sub_80048058();
  printf("addr=%08x\n", &off_8005E130);
  byte_8005DE6D = 0;
  byte_8005DE6C = 0;
  dword_8005DE50 = 0;
  dword_8005DE4C = 0;
  dword_8005DE60 = 0;
  dword_8005DE5C = 0;
  ResetCallback();
  InterruptCallback(2, sub_800476E0);
  MEMORY[0x1F801800] = 1;
  if ( (MEMORY[0x1F801803] & 7) != 0 )
  {
    while ( 1 )
    {
      MEMORY[0x1F801800] = 1;
      MEMORY[0x1F801803] = 7;
      MEMORY[0x1F801802] = 7;
    }
  }
  byte_8005E12E = 0;
  byte_8005E12D = 0;
  byte_8005E12C = 2;
  MEMORY[0x1F801800] = 0;
  MEMORY[0x1F801803] = 0;
  MEMORY[0x1F801020] = 4901;
  sub_80046AC0(1u, 0, 0, 0);
  v0 = sub_80046AC0(0xAu, 0, 0, 0) != 0;
  result = -1;
  if ( !v0 )
  {
    v0 = sub_80046AC0(0xCu, 0, 0, 0) != 0;
    result = -1;
    if ( !v0 )
      return -(sub_80046574(0) != 2);
  }
  return result;
}
// 800471B8: write access to const memory at 8005DE6D has been detected
// 800471C0: write access to const memory at 8005DE6C has been detected
// 800471C8: write access to const memory at 8005DE50 has been detected
// 800471D0: write access to const memory at 8005DE4C has been detected
// 800471D8: write access to const memory at 8005DE60 has been detected
// 800471E0: write access to const memory at 8005DE5C has been detected
// 80047290: write access to const memory at 8005E12E has been detected
// 800472B0: write access to const memory at 8005E12D has been detected
// 800472BC: write access to const memory at 8005E12C has been detected
// 80048110: using guessed type int printf(const char *, ...);
// 8004B49C: using guessed type int ResetCallback(void);
// 8004B4CC: using guessed type int __fastcall InterruptCallback(_DWORD, _DWORD);
// 8005DE4C: using guessed type int dword_8005DE4C;
// 8005DE50: using guessed type int dword_8005DE50;
// 8005DE5C: using guessed type int dword_8005DE5C;
// 8005DE60: using guessed type int dword_8005DE60;
// 8005DE6C: using guessed type char byte_8005DE6C;
// 8005DE6D: using guessed type char byte_8005DE6D;
// 8005E12C: using guessed type char byte_8005E12C;
// 8005E12D: using guessed type char byte_8005E12D;
// 8005E12E: using guessed type char byte_8005E12E;
// 8005E130: using guessed type char *off_8005E130;

//----- (80047374) --------------------------------------------------------
int __fastcall sub_80047374(int a1)
{
  int v2; // $v1
  int v3; // $v0
  bool v4; // dc
  int result; // $v0

  dword_8006D170 = sub_8004B2A8(-1) + 960;
  dword_8006D174 = 0;
  dword_8006D178 = (int)"CD_datasync";
  do
  {
    if ( dword_8006D170 >= sub_8004B2A8(-1) && (v2 = dword_8006D174, ++dword_8006D174, v2 <= 3932160) )
    {
      v3 = 0;
    }
    else
    {
      sub_80048058();
      printf("%s:(%s) Sync=%s, Ready=%s\n", (const char *)dword_8006D178, "CdlSync", "NoIntr", "NoIntr");
      sub_80046F64();
      v3 = -1;
    }
    v4 = v3 != 0;
    result = -1;
    if ( v4 )
      break;
    result = 0;
    if ( (MEMORY[0x1F8010B8] & 0x1000000) == 0 )
      break;
    result = 1;
  }
  while ( !a1 );
  return result;
}
// 80048110: using guessed type int printf(const char *, ...);
// 8005DE6D: using guessed type char byte_8005DE6D;
// 8005E12C: using guessed type char byte_8005E12C;
// 8005E12D: using guessed type char byte_8005E12D;
// 8006D170: using guessed type int dword_8006D170;
// 8006D174: using guessed type int dword_8006D174;
// 8006D178: using guessed type int dword_8006D178;

//----- (800474E0) --------------------------------------------------------
int __fastcall sub_800474E0(int a1, int a2)
{
  MEMORY[0x1F801800] = 0;
  MEMORY[0x1F801803] = 0x80;
  MEMORY[0x1F801018] = 133443;
  MEMORY[0x1F801020] = 4899;
  MEMORY[0x1F8010F0] |= 0x8000u;
  MEMORY[0x1F8010B0] = a1;
  MEMORY[0x1F8010B4] = a2 | 0x10000;
  while ( (MEMORY[0x1F801800] & 0x40) == 0 )
    ;
  MEMORY[0x1F8010B8] = 285212672;
  while ( (MEMORY[0x1F8010B8] & 0x1000000) != 0 )
    ;
  MEMORY[0x1F801020] = 4901;
  return 0;
}

//----- (800475E0) --------------------------------------------------------
int __fastcall sub_800475E0(int a1, int a2)
{
  MEMORY[0x1F801800] = 0;
  MEMORY[0x1F801803] = 0x80;
  MEMORY[0x1F801018] = 553781315;
  MEMORY[0x1F801020] = 4901;
  MEMORY[0x1F8010F0] |= 0x8000u;
  MEMORY[0x1F8010B0] = a1;
  MEMORY[0x1F8010B4] = a2 | 0x10000;
  while ( (MEMORY[0x1F801800] & 0x40) == 0 )
    ;
  MEMORY[0x1F8010B8] = 289407232;
  return 0;
}

//----- (800476E0) --------------------------------------------------------
int sub_800476E0()
{
  char v0; // $s2
  int result; // $v0

  v0 = MEMORY[0x1F801800] & 3;
  while ( sub_80045FEC() )
    ;
  result = 528488448;
  MEMORY[0x1F801800] = v0;
  return result;
}
// 80045FEC: using guessed type int sub_80045FEC(void);
// 8005DE4C: using guessed type int dword_8005DE4C;
// 8005DE50: using guessed type int dword_8005DE50;

//----- (800477C4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_800477C4(char a1, int a2)
{
  dword_8005E194 = a2;
  if ( a1 != 1 )
    dword_8005E174 = -1;
  dword_8005E178 = sub_8004B2A8(-1);
  if ( sub_8004B2A8(-1) > 1200 )
    dword_8005E174 = -1;
  sub_800459EC(0);
  sub_80045A04(0);
  return sub_80045B54(9u, 0);
}
// 800477DC: write access to const memory at 8005E194 has been detected
// 8004789C: write access to const memory at 8005E174 has been detected
// 80047910: write access to const memory at 8005E168 has been detected
// 80047928: write access to const memory at 8005E174 has been detected
// 80047948: write access to const memory at 8005E180 has been detected
// 80047960: write access to const memory at 8005E174 has been detected
// 80047970: write access to const memory at 8005E178 has been detected
// 800479B8: write access to const memory at 8005E174 has been detected
// 80045DE4: using guessed type int __fastcall DsGetSector(_DWORD, _DWORD);
// 80045E04: using guessed type int __fastcall DsGetSector2(_DWORD, _DWORD);
// 80045E24: using guessed type int __fastcall DsDataSync(_DWORD);
// 80045E48: using guessed type int __fastcall sub_80045E48(_DWORD);
// 80045F6C: using guessed type int __fastcall sub_80045F6C(_DWORD);
// 80047B90: using guessed type int __fastcall sub_80047B90(_DWORD);
// 8005E15C: using guessed type int dword_8005E15C;
// 8005E168: using guessed type int dword_8005E168;
// 8005E174: using guessed type int dword_8005E174;
// 8005E178: using guessed type int dword_8005E178;
// 8005E180: using guessed type int dword_8005E180;
// 8005E190: using guessed type int dword_8005E190;
// 8005E194: using guessed type int dword_8005E194;

//----- (80047A94) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80047A94()
{
  dword_8005E168 = 0;
  dword_8005E174 = -1;
  dword_8005E180 = 1;
  sub_800459EC(0);
  sub_80045A04(0);
  sub_80045B54(9u, 0);
  return 0;
}
// 80047AAC: write access to const memory at 8005E168 has been detected
// 80047AC4: write access to const memory at 8005E174 has been detected
// 80047AE4: write access to const memory at 8005E180 has been detected
// 80045E24: using guessed type int __fastcall DsDataSync(_DWORD);
// 8005E15C: using guessed type int dword_8005E15C;
// 8005E168: using guessed type int dword_8005E168;
// 8005E174: using guessed type int dword_8005E174;
// 8005E180: using guessed type int dword_8005E180;
// 8005E190: using guessed type int dword_8005E190;

//----- (80047B90) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80047B90(int a1)
{
  char *v2; // $v0
  char *v3; // $v0
  char v5[8]; // [sp+10h] [-8h] BYREF

  sub_800459EC(0);
  sub_80045A04(0);
  if ( (sub_80045860() & 0x10) != 0 )
  {
    if ( (sub_8004B2A8(-1) & 0x3F) == 0 )
      sub_80048058();
    sub_80045B54(1u, 0);
    dword_8005E17C = sub_8004B2A8(-1);
    dword_8005E174 = -1;
  }
  else if ( !a1 || (sub_80048058(), sub_80045A1C(9u, 0, 0), v2 = sub_80045890(), sub_80045A1C(2u, v2, 0)) )
  {
    sub_8004590C();
    v5[0] = 0;
    if ( (sub_80045870() || a1) && !sub_80045A1C(0xEu, v5, 0) )
    {
      dword_8005E174 = -1;
    }
    else
    {
      v3 = sub_80045890();
      dword_8005E180 = sub_80045F6C(v3);
      sub_80045A04((int)sub_800477C4);
      dword_8005E168 = 0;
      sub_80045B54(6u, 0);
      dword_8005E174 = 0;
      dword_8005E178 = sub_8004B2A8(-1);
    }
  }
  else
  {
    dword_8005E174 = -1;
  }
  return 0;
}
// 80047C24: write access to const memory at 8005E17C has been detected
// 80047C30: write access to const memory at 8005E174 has been detected
// 80047C88: write access to const memory at 8005E174 has been detected
// 80047CE0: write access to const memory at 8005E174 has been detected
// 80047D08: write access to const memory at 8005E180 has been detected
// 80047D50: write access to const memory at 8005E168 has been detected
// 80047D6C: write access to const memory at 8005E174 has been detected
// 80047D7C: write access to const memory at 8005E178 has been detected
// 80045E24: using guessed type int __fastcall DsDataSync(_DWORD);
// 80045F6C: using guessed type int __fastcall sub_80045F6C(_DWORD);
// 8005E168: using guessed type int dword_8005E168;
// 8005E174: using guessed type int dword_8005E174;
// 8005E178: using guessed type int dword_8005E178;
// 8005E17C: using guessed type int dword_8005E17C;
// 8005E180: using guessed type int dword_8005E180;
// 8005E190: using guessed type int dword_8005E190;

//----- (80047DA4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80047DA4()
{
  dword_8005E174 = 0;
  sub_800459EC(0);
  sub_80045A04(0);
  return sub_80045B54(9u, 0);
}
// 80047DD4: write access to const memory at 8005E174 has been detected
// 80045E24: using guessed type int __fastcall DsDataSync(_DWORD);
// 80045E48: using guessed type int __fastcall sub_80045E48(_DWORD);
// 8005E174: using guessed type int dword_8005E174;
// 8005E184: using guessed type int dword_8005E184;
// 8005E188: using guessed type int dword_8005E188;
// 8005E190: using guessed type int dword_8005E190;

//----- (80047E40) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
BOOL __fastcall sub_80047E40(int a1, int a2)
{
  dword_8005E170 = 512;
  dword_8005E16C = 32;
  dword_8005E164 = a2;
  dword_8005E160 = a1;
  dword_8005E184 = sub_800459EC(0);
  dword_8005E188 = sub_80045A04(0);
  dword_8005E17C = sub_8004B2A8(-1);
  if ( (sub_80045860() & 0xE0) != 0 )
    sub_80045C80(9u, 0, 0);
  return sub_80047B90(0) > 0;
}
// 80047E44: write access to const memory at 8005E16C has been detected
// 80047E7C: write access to const memory at 8005E170 has been detected
// 80047E94: write access to const memory at 8005E16C has been detected
// 80047EA4: write access to const memory at 8005E164 has been detected
// 80047EBC: write access to const memory at 8005E184 has been detected
// 80047ECC: write access to const memory at 8005E188 has been detected
// 80047EF4: write access to const memory at 8005E18C has been detected
// 80047F04: write access to const memory at 8005E17C has been detected
// 80047EAC: write access to const memory at 8005E160 has been detected
// 80045E24: using guessed type int __fastcall DsDataSync(_DWORD);
// 8005E160: using guessed type int dword_8005E160;
// 8005E164: using guessed type int dword_8005E164;
// 8005E16C: using guessed type int dword_8005E16C;
// 8005E170: using guessed type int dword_8005E170;
// 8005E17C: using guessed type int dword_8005E17C;
// 8005E184: using guessed type int dword_8005E184;
// 8005E188: using guessed type int dword_8005E188;
// 8005E190: using guessed type int dword_8005E190;

//----- (80047F44) --------------------------------------------------------
int sub_80047F44()
{
  int v0; // $s0

  v0 = -1;
  if ( sub_8004B2A8(-1) <= 1200 )
  {
    if ( sub_8004B2A8(-1) > 60 )
      sub_80047B90(1);
    v0 = 0;
  }
  sub_800459CC(1);
  return v0;
}
// 80047FDC: conditional instruction was optimized away because $s0.4 is in (==0|==FFFFFFFF)
// 8005E174: using guessed type int dword_8005E174;
// 8005E178: using guessed type int dword_8005E178;
// 8005E17C: using guessed type int dword_8005E17C;

//----- (80048010) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80048010(int a1)
{
  int result; // $v0

  result = 0;
  dword_8005E15C = a1;
  return result;
}
// 80048018: write access to const memory at 8005E15C has been detected
// 8005E15C: using guessed type int dword_8005E15C;

//----- (80048028) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80048028(int a1)
{
  int result; // $v0

  result = 0;
  dword_8005E190 = a1;
  return result;
}
// 80048034: write access to const memory at 8005E190 has been detected
// 8005E190: using guessed type int dword_8005E190;

//----- (80048058) --------------------------------------------------------
void sub_80048058()
{
  JUMPOUT(0xB0);
}
// 8004805C: control flows out of bounds to B0

//----- (80048120) --------------------------------------------------------
int sub_80048120(int a1, unsigned __int8 *a2, ...)
{
  int v3; // $a1
  int v4; // $s2
  _BYTE *v5; // $v0
  _BYTE *v6; // $a0
  unsigned int v7; // $v0
  int *v8; // $v1
  int v9; // $v0
  _BYTE *v10; // $a0
  unsigned int v11; // $v0
  int *v12; // $v1
  char *v13; // $s1
  int v14; // $v0
  int *v15; // $v1
  int v16; // $a0
  int *v17; // $v1
  int i; // $s0
  unsigned int v19; // kr00_4
  unsigned int v20; // $v0
  char *v21; // $s1
  unsigned int *v22; // $v1
  unsigned int v23; // $a0
  char *v24; // $s1
  const char *v25; // $a3
  unsigned int *v26; // $v1
  unsigned int v27; // $a0
  int v28; // $v0
  char *v29; // $s1
  char *v30; // $s1
  _DWORD *v31; // $v0
  char **v32; // $v0
  int v33; // $v0
  _WORD **v34; // $v0
  _WORD *v35; // $s1
  char *v36; // $a0
  char *v37; // $a1
  _BYTE *v38; // $v1
  _BYTE *v39; // $v1
  char v41; // [sp+20Fh] [-19h] BYREF
  int v42; // [sp+210h] [-18h] BYREF
  int v43; // [sp+214h] [-14h]
  int v44; // [sp+218h] [-10h]
  va_list v45; // [sp+220h] [-8h]
  _BYTE *v46; // [sp+24Ch] [+24h]
  va_list va; // [sp+250h] [+28h] BYREF

  va_start(va, a2);
  v46 = a2;
  va_copy(v45, va);
  v3 = *a2;
  v4 = 0;
  if ( v3 )
  {
    do
    {
      v5 = (_BYTE *)(a1 + v4);
      if ( v3 == 37 )
      {
        v42 = 0;
        v43 = 0;
        v44 = 0;
        while ( 1 )
        {
          while ( 1 )
          {
            while ( 1 )
            {
              while ( 1 )
              {
                while ( 1 )
                {
                  v6 = v46++;
                  v3 = (unsigned __int8)*v46;
                  if ( v3 != 45 )
                    break;
                  v42 |= 1u;
                }
                if ( v3 != 43 )
                  break;
                v42 |= 2u;
              }
              if ( v3 != 32 )
                break;
              BYTE1(v42) = 32;
            }
            if ( v3 != 35 )
              break;
            v42 |= 4u;
          }
          if ( v3 != 48 )
            break;
          v42 |= 8u;
        }
        v7 = v3 - 48;
        if ( v3 == 42 )
        {
          v8 = (int *)v45++;
          v9 = *v8;
          v43 = *v8;
          if ( v43 < 0 )
          {
            v43 = -v9;
            v42 |= 1u;
          }
          v46 = v6 + 2;
          v3 = (unsigned __int8)v6[2];
        }
        else
        {
          while ( v7 < 0xA )
          {
            v43 = 10 * v43 - 48 + v3;
            v3 = (unsigned __int8)*++v46;
            v7 = v3 - 48;
          }
        }
        if ( v3 == 46 )
        {
          v10 = v46++;
          v3 = (unsigned __int8)*v46;
          v11 = v3 - 48;
          if ( v3 == 42 )
          {
            v12 = (int *)v45++;
            v44 = *v12;
            v46 = v10 + 2;
            v3 = (unsigned __int8)v10[2];
          }
          else
          {
            while ( v11 < 0xA )
            {
              v44 = 10 * v44 - 48 + v3;
              v3 = (unsigned __int8)*++v46;
              v11 = v3 - 48;
            }
          }
          if ( v44 >= 0 )
            v42 |= 0x10u;
        }
        v13 = (char *)&v42;
        if ( (v42 & 1) != 0 )
          v42 &= ~8u;
        while ( 2 )
        {
          switch ( v3 )
          {
            case 'L':
              v14 = v42 | 0x80;
              goto LABEL_33;
            case 'X':
              goto LABEL_75;
            case 'c':
              v31 = v45;
              v13 = &v41;
              ++v45;
              i = 1;
              v41 = *v31;
              goto LABEL_107;
            case 'd':
            case 'i':
              v15 = (int *)v45++;
              v16 = *v15;
              if ( (v42 & 0x20) != 0 )
                v16 = (__int16)v16;
              if ( v16 >= 0 )
              {
                if ( (v42 & 2) != 0 )
                  BYTE1(v42) = 43;
              }
              else
              {
                v16 = -v16;
                BYTE1(v42) = 45;
              }
              goto LABEL_43;
            case 'h':
              v14 = v42 | 0x20;
              goto LABEL_33;
            case 'l':
              v14 = v42 | 0x40;
LABEL_33:
              v42 = v14;
              v3 = (unsigned __int8)*++v46;
              continue;
            case 'n':
              v34 = (_WORD **)v45++;
              v35 = *v34;
              if ( (v42 & 0x20) != 0 )
                *v35 = v4;
              else
                *(_DWORD *)v35 = v4;
              goto LABEL_116;
            case 'o':
              v22 = (unsigned int *)v45++;
              v23 = *v22;
              if ( (v42 & 0x20) != 0 )
                v23 = (unsigned __int16)*v22;
              if ( (v42 & 0x10) == 0 )
              {
                if ( (v42 & 8) != 0 )
                  v44 = v43;
                if ( v44 <= 0 )
                  v44 = 1;
              }
              for ( i = 0; v23; ++i )
              {
                *--v13 = (v23 & 7) + 48;
                v23 >>= 3;
              }
              if ( (v42 & 4) != 0 && i && *v13 != 48 )
              {
                *--v13 = 48;
                ++i;
              }
              if ( i < v44 )
              {
                v24 = v13 - 1;
                do
                {
                  *v24 = 48;
                  ++i;
                  --v24;
                }
                while ( i < v44 );
                v13 = v24 + 1;
              }
              goto LABEL_107;
            case 'p':
              v44 = 8;
              v42 |= 0x50u;
LABEL_75:
              v25 = "0123456789ABCDEF";
              goto LABEL_77;
            case 's':
              v32 = (char **)v45++;
              v13 = *v32;
              if ( (v42 & 4) != 0 )
              {
                i = (unsigned __int8)*v13++;
                if ( (v42 & 0x10) != 0 && v44 < i )
                  i = v44;
              }
              else if ( (v42 & 0x10) != 0 )
              {
                v33 = memchr(v13, 0, v44);
                i = v33 - (_DWORD)v13;
                if ( !v33 )
                  i = v44;
              }
              else
              {
                i = strlen(v13);
              }
              goto LABEL_107;
            case 'u':
              v17 = (int *)v45++;
              v16 = *v17;
              if ( (v42 & 0x20) != 0 )
                v16 = (unsigned __int16)*v17;
              BYTE1(v42) = 0;
LABEL_43:
              if ( (v42 & 0x10) == 0 )
              {
                if ( (v42 & 8) != 0 )
                {
                  v44 = v43;
                  if ( BYTE1(v42) )
                    v44 = v43 - 1;
                }
                if ( v44 <= 0 )
                  v44 = 1;
              }
              i = 0;
              if ( v16 )
              {
                do
                {
                  --v13;
                  ++i;
                  v19 = v16;
                  v20 = v16 % 0xAu + 48;
                  v16 /= 0xAu;
                  *v13 = v20;
                }
                while ( v19 / 0xA );
              }
              if ( i < v44 )
              {
                v21 = v13 - 1;
                do
                {
                  *v21 = 48;
                  ++i;
                  --v21;
                }
                while ( i < v44 );
                v13 = v21 + 1;
              }
              if ( BYTE1(v42) )
              {
                *--v13 = BYTE1(v42);
                ++i;
              }
              goto LABEL_107;
            case 'x':
              v25 = "0123456789abcdef";
LABEL_77:
              v26 = (unsigned int *)v45++;
              v27 = *v26;
              if ( (v42 & 0x20) != 0 )
                v27 = (unsigned __int16)*v26;
              if ( (v42 & 0x10) == 0 )
              {
                if ( (v42 & 8) != 0 )
                {
                  v44 = v43;
                  if ( (v42 & 4) != 0 )
                    v44 = v43 - 2;
                }
                if ( v44 <= 0 )
                  v44 = 1;
              }
              for ( i = 0; v27; *v13 = v25[v28] )
              {
                --v13;
                v28 = v27 & 0xF;
                v27 >>= 4;
                ++i;
              }
              if ( i < v44 )
              {
                v29 = v13 - 1;
                do
                {
                  *v29 = 48;
                  ++i;
                  --v29;
                }
                while ( i < v44 );
                v13 = v29 + 1;
              }
              if ( (v42 & 4) != 0 )
              {
                v30 = v13 - 1;
                *v30 = v3;
                v13 = v30 - 1;
                i += 2;
                *v13 = 48;
              }
LABEL_107:
              v36 = (char *)(a1 + v4);
              if ( i >= v43 )
                goto LABEL_112;
              v37 = v13;
              if ( (v42 & 1) == 0 )
              {
                v38 = (_BYTE *)(v4 + a1);
                do
                {
                  *v38++ = 32;
                  --v43;
                  ++v4;
                }
                while ( i < v43 );
                v36 = (char *)(a1 + v4);
LABEL_112:
                v37 = v13;
              }
              sub_8004898C(v36, v37, i);
              v4 += i;
              if ( i < v43 )
              {
                v39 = (_BYTE *)(v4 + a1);
                do
                {
                  *v39++ = 32;
                  ++i;
                  ++v4;
                }
                while ( i < v43 );
              }
              break;
            default:
              v5 = (_BYTE *)(a1 + v4);
              if ( v3 == 37 )
                goto LABEL_106;
              goto LABEL_117;
          }
          break;
        }
      }
      else
      {
LABEL_106:
        *v5 = v3;
        ++v4;
      }
LABEL_116:
      v3 = (unsigned __int8)*++v46;
    }
    while ( *v46 );
  }
LABEL_117:
  *(_BYTE *)(a1 + v4) = 0;
  return v4;
}
// 800480C0: using guessed type int __fastcall strlen(_DWORD);
// 8004897C: using guessed type int __fastcall memchr(_DWORD, _DWORD, _DWORD);

//----- (8004898C) --------------------------------------------------------
char *__fastcall sub_8004898C(char *a1, char *a2, int a3)
{
  int v4; // $a2
  char *v5; // $a3
  char *v6; // $a1
  char v7; // $v0
  int v8; // $v1
  int v9; // $a2
  char v10; // $v0
  int v11; // $v1

  if ( a1 < a2 )
  {
    v9 = a3 - 1;
    if ( a3 > 0 )
    {
      do
      {
        v10 = *a2++;
        v11 = v9--;
        *a1++ = v10;
      }
      while ( v11 > 0 );
    }
  }
  else
  {
    v4 = a3 - 1;
    if ( a3 > 0 )
    {
      v5 = &a1[v4];
      v6 = &a2[v4];
      do
      {
        v7 = *v6--;
        v8 = v4--;
        *v5-- = v7;
      }
      while ( v8 > 0 );
    }
  }
  return a1;
}

//----- (80048BC0) --------------------------------------------------------
void sub_80048BC0()
{
  JUMPOUT(0xA0);
}
// 80048BC4: control flows out of bounds to A0

//----- (800490B8) --------------------------------------------------------
int __fastcall sub_800490B8(int a1, int a2, int a3)
{
  int v4; // $v0
  int result; // $v0
  unsigned __int8 *v7; // $v1

  v4 = dword_8006D1AC();
  if ( a2 < 0 )
    return *(unsigned __int8 *)(v4 + 233);
  if ( a2 >= *(unsigned __int8 *)(v4 + 233) )
    return 0;
  v7 = (unsigned __int8 *)(*(_DWORD *)(v4 + 4) + 5 * a2);
  switch ( a3 )
  {
    case 1:
      result = *v7;
      break;
    case 2:
      result = v7[1];
      break;
    case 3:
      result = v7[2];
      break;
    case 4:
      result = v7[3];
      break;
    case 5:
      result = v7[4];
      break;
    default:
      return 0;
  }
  return result;
}
// 8006D1AC: using guessed type int (*dword_8006D1AC)(void);

//----- (8004918C) --------------------------------------------------------
int __fastcall sub_8004918C(int a1, int a2, int a3)
{
  int v4; // $v0
  int result; // $v0
  _DWORD *v7; // $v1

  v4 = dword_8006D1AC();
  if ( a2 < 0 )
    return *(unsigned __int8 *)(v4 + 234);
  if ( a2 >= *(unsigned __int8 *)(v4 + 234) )
    return 0;
  v7 = (_DWORD *)(*(_DWORD *)(v4 + 8) + 8 * a2);
  if ( a3 < 0 )
    return *(unsigned __int8 *)v7;
  result = 0;
  if ( a3 < *(unsigned __int8 *)v7 )
    return *(unsigned __int8 *)(v7[1] + a3);
  return result;
}
// 8006D1AC: using guessed type int (*dword_8006D1AC)(void);

//----- (8004A25C) --------------------------------------------------------
int __fastcall sub_8004A25C(int a1, int a2)
{
  bool v4; // dc
  int result; // $v0

  v4 = dword_8006D1BC() != 0;
  result = 0;
  if ( !v4 )
  {
    result = 1;
    *(_BYTE *)(a1 + 70) = 1;
    *(_DWORD *)(a1 + 20) = sub_8004A2C4;
    *(_DWORD *)(a1 + 32) = a2;
    *(_DWORD *)(a1 + 24) = sub_8004A2E0;
  }
  return result;
}
// 8006D1BC: using guessed type int (*dword_8006D1BC)(void);

//----- (8004A2C4) --------------------------------------------------------
int __fastcall sub_8004A2C4(int a1)
{
  int v1; // $v1
  int result; // $v0

  v1 = *(_DWORD *)(a1 + 32);
  *(_BYTE *)(a1 + 54) = 77;
  result = 6;
  *(_BYTE *)(a1 + 53) = 6;
  *(_DWORD *)(a1 + 44) = v1;
  return result;
}

//----- (8004A2E0) --------------------------------------------------------
int __fastcall sub_8004A2E0(int a1)
{
  int v1; // $t0
  int v2; // $t2
  unsigned __int8 *v3; // $a1
  int v4; // $a3
  int i; // $v1
  int v6; // $v0
  int v7; // $v0
  int v8; // $t1
  unsigned __int8 *v9; // $a1
  int v10; // $v1
  int v11; // $a2
  int v12; // $v0

  v1 = 0;
  if ( *(_BYTE *)(a1 + 233) )
  {
    v2 = 0;
    do
    {
      v3 = *(unsigned __int8 **)(a1 + 32);
      v4 = 0;
      for ( i = 5; i >= 0; --i )
      {
        v6 = *v3++;
        if ( v6 == v1 )
          ++v4;
      }
      v7 = v2 + *(_DWORD *)(a1 + 4);
      v8 = *(unsigned __int8 *)(v7 + 2);
      v9 = *(unsigned __int8 **)(a1 + 32);
      v10 = 0;
      if ( !*(_BYTE *)(v7 + 2) )
        v8 = 1;
      v11 = a1;
      do
      {
        v12 = *v9++;
        if ( v12 == v1 )
        {
          if ( v4 >= v8 )
          {
            *(_BYTE *)(v11 + 93) = v1;
          }
          else
          {
            *(_BYTE *)(v11 + 93) = -1;
            --v4;
          }
        }
        ++v10;
        ++v11;
      }
      while ( v10 < 6 );
      ++v1;
      v2 += 5;
    }
    while ( v1 < *(unsigned __int8 *)(a1 + 233) );
  }
  *(_BYTE *)(a1 + 70) = -2;
  return 0;
}

//----- (8004A3A8) --------------------------------------------------------
int __fastcall sub_8004A3A8(int a1, unsigned __int8 a2, char a3)
{
  bool v7; // dc
  int result; // $v0
  int v9; // $a0

  v7 = dword_8006D1BC() != 0;
  result = 0;
  if ( !v7 )
  {
    result = 1;
    v9 = *(unsigned __int8 *)(a1 + 228);
    *(_BYTE *)(a1 + 70) = 1;
    *(_DWORD *)(a1 + 20) = sub_8004A440;
    *(_DWORD *)(a1 + 24) = sub_8004A494;
    *(_BYTE *)(a1 + 81) = a2;
    *(_BYTE *)(a1 + 82) = a3;
    *(_BYTE *)(a1 + 83) = a2 == v9;
  }
  return result;
}
// 8006D1BC: using guessed type int (*dword_8006D1BC)(void);

//----- (8004A440) --------------------------------------------------------
int __fastcall sub_8004A440(int a1)
{
  int v1; // $v1
  int result; // $v0

  v1 = *(unsigned __int8 *)(a1 + 70);
  if ( v1 == 2 )
  {
    *(_BYTE *)(a1 + 54) = 68;
    result = a1 + 81;
    *(_DWORD *)(a1 + 44) = a1 + 81;
    *(_BYTE *)(a1 + 53) = 2;
  }
  else
  {
    result = 77;
    if ( v1 == 3 )
    {
      *(_BYTE *)(a1 + 54) = 77;
      *(_DWORD *)(a1 + 44) = a1 + 93;
      result = 6;
      *(_BYTE *)(a1 + 53) = 6;
    }
  }
  return result;
}

//----- (8004A494) --------------------------------------------------------
int __fastcall sub_8004A494(int a1)
{
  if ( *(_BYTE *)(a1 + 83) )
  {
    if ( *(_BYTE *)(a1 + 70) == 2 )
      return 1;
    *(_BYTE *)(a1 + 70) = -2;
  }
  else
  {
    dword_8006D1C8(a1);
    *(_BYTE *)(a1 + 70) = 0;
  }
  return 0;
}
// 8006D1C8: using guessed type int (__fastcall *dword_8006D1C8)(_DWORD);

//----- (8004A500) --------------------------------------------------------
int __fastcall sub_8004A500(int a1, char a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 54) = 67;
  *(_DWORD *)(a1 + 44) = a1 + 36;
  result = 1;
  *(_BYTE *)(a1 + 36) = a2;
  *(_BYTE *)(a1 + 53) = 1;
  return result;
}

//----- (8004A520) --------------------------------------------------------
int __fastcall sub_8004A520(int a1)
{
  int result; // $v0

  result = 69;
  *(_BYTE *)(a1 + 54) = 69;
  *(_DWORD *)(a1 + 44) = 0;
  *(_BYTE *)(a1 + 53) = 0;
  return result;
}

//----- (8004A534) --------------------------------------------------------
int __fastcall sub_8004A534(int a1, char a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 54) = 76;
  *(_DWORD *)(a1 + 44) = a1 + 36;
  result = 1;
  *(_BYTE *)(a1 + 36) = a2;
  *(_BYTE *)(a1 + 53) = 1;
  return result;
}

//----- (8004A554) --------------------------------------------------------
int __fastcall sub_8004A554(int a1, char a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 54) = 70;
  *(_DWORD *)(a1 + 44) = a1 + 36;
  result = 1;
  *(_BYTE *)(a1 + 36) = a2;
  *(_BYTE *)(a1 + 53) = 1;
  return result;
}

//----- (8004A574) --------------------------------------------------------
int __fastcall sub_8004A574(int a1, char a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 54) = 71;
  *(_DWORD *)(a1 + 44) = a1 + 36;
  result = 1;
  *(_BYTE *)(a1 + 36) = a2;
  *(_BYTE *)(a1 + 53) = 1;
  return result;
}

//----- (8004A594) --------------------------------------------------------
int __fastcall sub_8004A594(int a1)
{
  int result; // $v0

  result = 75;
  *(_BYTE *)(a1 + 54) = 75;
  *(_DWORD *)(a1 + 44) = 0;
  *(_BYTE *)(a1 + 53) = 0;
  return result;
}

//----- (8004A5A8) --------------------------------------------------------
int sub_8004A5A8()
{
  return sub_80049978(-2);
}
// 80049978: using guessed type int __fastcall sub_80049978(_DWORD);

//----- (8004A5C8) --------------------------------------------------------
int __fastcall sub_8004A5C8(int a1)
{
  int v1; // $a0

  if ( *(_BYTE *)(a1 + 54) )
    v1 = *(unsigned __int8 *)(a1 + 54);
  else
    v1 = 66;
  return sub_80049978(v1);
}
// 80049978: using guessed type int __fastcall sub_80049978(_DWORD);

//----- (8004A604) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_8004A604()
{
  int result; // $v0

  result = sub_80049978(0);
  if ( result >= 0 )
  {
    dword_8005E228 = 32;
    return 0;
  }
  return result;
}
// 8004A63C: write access to const memory at 8005E228 has been detected
// 8004A650: write access to const memory at 8005E228 has been detected
// 80049978: using guessed type int __fastcall sub_80049978(_DWORD);
// 8005E228: using guessed type int dword_8005E228;

//----- (8004A66C) --------------------------------------------------------
int sub_8004A66C()
{
  unsigned __int8 v0; // $v0

  v0 = dword_8006D1C0();
  return sub_80049978(v0);
}
// 80049978: using guessed type int __fastcall sub_80049978(_DWORD);
// 8006D1C0: using guessed type int (*dword_8006D1C0)(void);

//----- (8004A69C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004A69C(int a1)
{
  int v1; // $v1

  dword_8005E228 = -1;
  v1 = *(unsigned __int8 *)(a1 + 68);
  *(_BYTE *)(a1 + 68) = v1 + 1;
  *(_BYTE *)(v1 + *(_DWORD *)(a1 + 60)) = MEMORY[0x1F801040];
  dword_8006D1A8(0);
  return 0;
}
// 8004A6B8: write access to const memory at 8005E228 has been detected
// 80049978: using guessed type int __fastcall sub_80049978(_DWORD);
// 8005E228: using guessed type int dword_8005E228;
// 8006D1A8: using guessed type int (__fastcall *dword_8006D1A8)(_DWORD);
// 8006D1C0: using guessed type int (*dword_8006D1C0)(void);

//----- (8004AE54) --------------------------------------------------------
int __fastcall sub_8004AE54(int a1)
{
  int v2; // $s1
  int v3; // $v0
  int v4; // $a0
  bool v5; // dc
  int v6; // $v1
  int result; // $v0
  int v8; // $v0
  int (__fastcall *v9)(int); // $v0

  v2 = *(unsigned __int8 *)(a1 + 232);
  v3 = **(unsigned __int8 **)(a1 + 60) >> 4;
  *(_BYTE *)(a1 + 232) = v3;
  if ( v3 == 15 )
  {
    *(_BYTE *)(a1 + 232) = v2;
  }
  else
  {
    **(_BYTE **)(a1 + 48) = 0;
    *(_BYTE *)(*(_DWORD *)(a1 + 48) + 1) = **(_BYTE **)(a1 + 60);
    v4 = 2;
    if ( *(unsigned __int8 *)(a1 + 68) > 2u )
    {
      do
      {
        *(_BYTE *)(*(_DWORD *)(a1 + 48) + v4) = *(_BYTE *)(*(_DWORD *)(a1 + 60) + v4);
        ++v4;
      }
      while ( v4 < *(unsigned __int8 *)(a1 + 68) );
    }
  }
  if ( !*(_BYTE *)(*(_DWORD *)(a1 + 60) + 1)
    && (*(_BYTE *)(a1 + 70) != 1 || *(_DWORD *)(a1 + 20))
    && !*(_BYTE *)(a1 + 80)
    || !sub_8004B190(a1) && !*(_BYTE *)(a1 + 55) && !*(_BYTE *)(a1 + 74) && *(unsigned __int8 *)(a1 + 232) != v2 )
  {
    dword_8006D1C8(a1);
  }
  v5 = (unsigned __int8)(*(_BYTE *)(a1 + 70) - 2) >= 0xFCu;
  *(_BYTE *)(a1 + 74) = 0;
  if ( !v5 && **(unsigned __int8 **)(a1 + 60) != 243 )
    dword_8006D1C8(a1);
  v6 = *(unsigned __int8 *)(a1 + 70);
  if ( !*(_BYTE *)(a1 + 70) || v6 == 255 || (result = *(unsigned __int8 *)(a1 + 54), *(_BYTE *)(a1 + 54)) )
  {
    if ( v6 == 1 )
    {
      v8 = *(unsigned __int8 *)(a1 + 70);
      *(_BYTE *)(a1 + 71) = 0;
    }
    else
    {
      if ( *(unsigned __int8 *)(a1 + 70) >= 2u )
      {
        result = 255;
        if ( v6 == 254 )
        {
          *(_BYTE *)(a1 + 70) = -1;
          return result;
        }
        if ( v6 == 255 )
          return result;
        goto LABEL_32;
      }
      if ( *(_BYTE *)(a1 + 70) )
      {
LABEL_32:
        v9 = *(int (__fastcall **)(int))(a1 + 24);
        if ( v9 )
          result = v9(a1);
        else
          result = sub_80049CE8(a1);
        *(_BYTE *)(a1 + 70) += result;
        return result;
      }
      result = *(unsigned __int8 *)(a1 + 232);
      if ( !*(_BYTE *)(a1 + 232) )
        return result;
      v8 = *(unsigned __int8 *)(a1 + 70);
      *(_BYTE *)(a1 + 73) = 1;
    }
    result = v8 + 1;
    *(_BYTE *)(a1 + 70) = result;
  }
  return result;
}
// 80049CE8: using guessed type int __fastcall sub_80049CE8(_DWORD);
// 8006D1C8: using guessed type int (__fastcall *dword_8006D1C8)(_DWORD);

//----- (8004B0B8) --------------------------------------------------------
int __fastcall sub_8004B0B8(int a1, char a2)
{
  int v4; // $v1
  unsigned int v5; // $v1
  int result; // $v0
  unsigned int v7; // $v1

  v4 = *(unsigned __int8 *)(a1 + 70);
  ++*(_DWORD *)(a1 + 76);
  if ( v4 )
  {
    if ( v4 == 1 )
    {
      v5 = *(unsigned __int8 *)(a1 + 74);
      result = v5 + 1;
      if ( v5 >= 2 )
      {
        *(_BYTE *)(a1 + 73) = 2;
        result = 255;
        *(_BYTE *)(a1 + 70) = -1;
        return result;
      }
      goto LABEL_6;
    }
    v7 = *(unsigned __int8 *)(a1 + 74);
    result = v7 + 1;
    if ( v7 < 4 )
    {
LABEL_6:
      *(_BYTE *)(a1 + 74) = result;
      return result;
    }
    dword_8006D1C8(a1);
  }
  result = 243;
  if ( **(unsigned __int8 **)(a1 + 60) != 243 )
  {
    **(_BYTE **)(a1 + 48) = a2;
    result = *(_DWORD *)(a1 + 48);
    *(_BYTE *)(result + 1) = 0;
    *(_BYTE *)(a1 + 232) = 0;
  }
  return result;
}
// 8006D1C8: using guessed type int (__fastcall *dword_8006D1C8)(_DWORD);

//----- (8004B190) --------------------------------------------------------
int __fastcall sub_8004B190(int a1)
{
  int result; // $v0

  if ( !*(_WORD *)(a1 + 230) )
    return 1;
  result = 0;
  if ( *(unsigned __int8 *)(a1 + 70) != 255 )
    return 1;
  return result;
}

//----- (8004B1C8) --------------------------------------------------------
int __fastcall sub_8004B1C8(int a1)
{
  int result; // $v0

  result = MEMORY[0x1F801120];
  dword_8006D454 = a1;
  dword_8006D450 = MEMORY[0x1F801120];
  return result;
}
// 8006D450: using guessed type int dword_8006D450;
// 8006D454: using guessed type int dword_8006D454;

//----- (8004B1E4) --------------------------------------------------------
BOOL sub_8004B1E4()
{
  __int16 v0; // $v1
  int v1; // $v0
  bool v2; // dc
  int v3; // $a0
  unsigned int v4; // $v1
  unsigned int v5; // $v0

  v0 = MEMORY[0x1F801124];
  if ( MEMORY[0x1F801124] != -1 )
  {
    v1 = MEMORY[0x1F801124];
    v0 = MEMORY[0x1F801124];
    do
    {
      v2 = v1 != MEMORY[0x1F801124];
      v1 = MEMORY[0x1F801124];
    }
    while ( v2 );
  }
  v3 = MEMORY[0x1F801120];
  if ( MEMORY[0x1F801120] < (unsigned int)dword_8006D450 )
  {
    if ( MEMORY[0x1F801128] )
      v3 = MEMORY[0x1F801120] + MEMORY[0x1F801128];
    else
      v3 = MEMORY[0x1F801120] + 0x10000;
  }
  if ( (v0 & 0x200) != 0 )
  {
    v4 = dword_8006D454;
    v5 = v3 - dword_8006D450;
  }
  else
  {
    v4 = dword_8006D454;
    v5 = (unsigned int)(v3 - dword_8006D450) >> 3;
  }
  return v5 >= v4;
}
// 8006D450: using guessed type int dword_8006D450;
// 8006D454: using guessed type int dword_8006D454;

//----- (8004B2A8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004B2A8(int a1)
{
  int v1; // $s1
  int result; // $v0
  int v3; // $v0
  int v4; // $a1
  int v5; // $s0

  v1 = MEMORY[0x1F801110];
  if ( a1 < 0 )
    return 0;
  result = MEMORY[0x1F801110];
  if ( a1 != 1 )
  {
    if ( a1 <= 0 )
      v3 = 0;
    else
      v3 = a1 - 1;
    v4 = 0;
    if ( a1 > 0 )
      v4 = a1 - 1;
    sub_8004B3F0(v3, v4);
    v5 = MEMORY[0x1F801814];
    sub_8004B3F0(1, 1);
    if ( (v5 & 0x400000) != 0 && (v5 ^ MEMORY[0x1F801814]) >= 0 )
    {
      while ( ((v5 ^ MEMORY[0x1F801814]) & 0x80000000) == 0 )
        ;
    }
    dword_8005E26C = 0;
    result = v1;
    dword_8005E268 = MEMORY[0x1F801110];
  }
  return result;
}
// 8004B3C0: write access to const memory at 8005E26C has been detected
// 8004B3D0: write access to const memory at 8005E268 has been detected
// 8005E268: using guessed type int dword_8005E268;
// 8005E26C: using guessed type int dword_8005E26C;
// 8005F384: using guessed type int dword_8005F384;

//----- (8004B3F0) --------------------------------------------------------
int __fastcall sub_8004B3F0(int a1, int a2)
{
  int result; // $v0
  int v3; // [sp+10h] [-8h]

  v3 = a2 << 15;
  result = a1 > 0;
  if ( a1 > 0 )
  {
    do
      --v3;
    while ( v3 != -1 );
    sub_80048058();
    ChangeClearPAD(0);
    return sub_80049C38(3, 0);
  }
  return result;
}
// 8004B474: conditional instruction was optimized away because $a0.4>=1
// 80049C38: using guessed type int __fastcall sub_80049C38(_DWORD, _DWORD);
// 8004B48C: using guessed type int __fastcall ChangeClearPAD(_DWORD);
// 8005F384: using guessed type int dword_8005F384;

//----- (8004BAF8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
__int16 *sub_8004BAF8()
{
  HookEntryInt(&dword_8005E300);
  word_8005E2C8 = 1;
  MEMORY[0x1F801074] = 0;
  MEMORY[0x1F8010F0] = 0;
  ExitCriticalSection();
  return &word_8005E2C8;
}
// 8004BB38: write access to const memory at 8005E2C8 has been detected
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8004BBDC: using guessed type int __fastcall HookEntryInt(_DWORD);
// 8005E2C8: using guessed type __int16 word_8005E2C8;
// 8005E300: using guessed type int dword_8005E300;

//----- (8004BB80) --------------------------------------------------------
int __fastcall sub_8004BB80(_DWORD *a1, int a2)
{
  int result; // $v0

  result = a2 - 1;
  if ( a2 )
  {
    do
    {
      *a1 = 0;
      --result;
      ++a1;
    }
    while ( result != -1 );
  }
  return result;
}

//----- (8004BBEC) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int (__fastcall *sub_8004BBEC())(int a1, int a2)
{
  MEMORY[0x1F801114] = 263;
  dword_8005F384 = 0;
  sub_8004BCE8(dword_8005F364, 8);
  InterruptCallback(0, sub_8004BC44);
  return sub_8004BCBC;
}
// 8004BC0C: write access to const memory at 8005F384 has been detected
// 8004B4CC: using guessed type int __fastcall InterruptCallback(_DWORD, _DWORD);
// 8005F364: using guessed type int dword_8005F364[8];
// 8005F384: using guessed type int dword_8005F384;

//----- (8004BC44) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
BOOL sub_8004BC44()
{
  int v0; // $s1
  void (**v1)(void); // $s0
  BOOL result; // $v0

  v0 = 0;
  v1 = (void (**)(void))dword_8005F364;
  dword_8005F384 = 1;
  do
  {
    if ( *v1 )
      (*v1)();
    result = ++v0 < 8;
    ++v1;
  }
  while ( v0 < 8 );
  return result;
}
// 8004BC6C: write access to const memory at 8005F384 has been detected
// 8005F364: using guessed type int dword_8005F364[8];
// 8005F384: using guessed type int dword_8005F384;

//----- (8004BCBC) --------------------------------------------------------
int __fastcall sub_8004BCBC(int a1, int a2)
{
  int *v2; // $a0
  int result; // $v0

  v2 = &dword_8005F364[a1];
  result = *v2;
  if ( a2 != *v2 )
    *v2 = a2;
  return result;
}
// 8005F364: using guessed type int dword_8005F364[8];

//----- (8004BCE8) --------------------------------------------------------
int __fastcall sub_8004BCE8(_DWORD *a1, int a2)
{
  int result; // $v0

  result = a2 - 1;
  if ( a2 )
  {
    do
    {
      *a1 = 0;
      --result;
      ++a1;
    }
    while ( result != -1 );
  }
  return result;
}

//----- (8004BFBC) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004BFBC(int a1)
{
  int result; // $v0

  result = 0;
  dword_8005F3B4 = a1;
  return result;
}
// 8004BFC4: write access to const memory at 8005F3B4 has been detected
// 8005F3B4: using guessed type int dword_8005F3B4;

//----- (8004D264) --------------------------------------------------------
int __fastcall sub_8004D264(int a1)
{
  memcpy(a1, &word_8005F474, 20);
  return a1;
}
// 800480F0: using guessed type int __fastcall memcpy(_DWORD, _DWORD, _DWORD);
// 8005F474: using guessed type __int16 word_8005F474;

//----- (8004D298) --------------------------------------------------------
unsigned int sub_8004D298()
{
  return (unsigned int)sub_8004DAB8() >> 31;
}

//----- (8004D2C8) --------------------------------------------------------
int __fastcall sub_8004D2C8(int a1, int a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 3) = 2;
  result = sub_8004DA38(a2);
  *(_DWORD *)(a1 + 4) = result;
  *(_DWORD *)(a1 + 8) = 0;
  return result;
}
// 8004DA38: using guessed type int __fastcall sub_8004DA38(_DWORD);

//----- (8004D300) --------------------------------------------------------
int __fastcall sub_8004D300(int a1, __int16 *a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 3) = 2;
  *(_DWORD *)(a1 + 4) = sub_8004D8EC(*a2, a2[1]);
  result = sub_8004D984((__int16)(*a2 + a2[2] - 1), (__int16)(a2[1] + a2[3] - 1));
  *(_DWORD *)(a1 + 8) = result;
  return result;
}
// 8004D8EC: using guessed type int __fastcall sub_8004D8EC(_DWORD, _DWORD);
// 8004D984: using guessed type int __fastcall sub_8004D984(_DWORD, _DWORD);

//----- (8004D380) --------------------------------------------------------
int __fastcall sub_8004D380(int a1, __int16 *a2)
{
  int result; // $v0

  *(_BYTE *)(a1 + 3) = 2;
  result = sub_8004DA1C(*a2, a2[1]);
  *(_DWORD *)(a1 + 4) = result;
  *(_DWORD *)(a1 + 8) = 0;
  return result;
}
// 8004DA1C: using guessed type int __fastcall sub_8004DA1C(_DWORD, _DWORD);

//----- (8004DAB8) --------------------------------------------------------
int sub_8004DAB8()
{
  return MEMORY[0x1F801814];
}

//----- (8004DAD0) --------------------------------------------------------
int __fastcall sub_8004DAD0(int a1, int a2)
{
  int result; // $v0
  bool v4; // dc

  MEMORY[0x1F8010F0] |= 0x8000000u;
  MEMORY[0x1F8010E0] = a1 + 4 * a2 - 4;
  MEMORY[0x1F8010E4] = a2;
  MEMORY[0x1F8010E8] = 285212674;
  sub_8004EB4C();
  for ( result = a2; (MEMORY[0x1F8010E8] & 0x1000000) != 0; result = a2 )
  {
    v4 = sub_8004EB80() != 0;
    result = -1;
    if ( v4 )
      break;
  }
  return result;
}
// 8004EB4C: using guessed type int sub_8004EB4C(void);
// 8004EB80: using guessed type int sub_8004EB80(void);

//----- (8004DBB0) --------------------------------------------------------
int __fastcall sub_8004DBB0(_WORD *a1, unsigned int a2)
{
  __int16 v3; // $v0
  __int16 v4; // $a0
  __int16 v5; // $v1
  int v6; // $v0
  int v7; // $v0

  if ( (__int16)a1[2] < 0 )
    v3 = 0;
  else
    v3 = -1;
  v4 = a1[3];
  a1[2] = v3;
  if ( v4 < 0 )
  {
    v5 = 0;
  }
  else
  {
    v5 = -1;
    if ( v4 <= -1 )
      v5 = v4;
  }
  v6 = *a1 & 0x3F;
  a1[3] = v5;
  if ( v6 || (a1[2] & 0x3F) != 0 )
  {
    dword_8006D460 = (unsigned int)&dword_8006D488 & 0xFFFFFF | 0x8000000;
    dword_8006D470 = -436207616;
    dword_8006D464 = -486539264;
    dword_8006D468 = -452984833;
    dword_8006D46C = -452984832;
    dword_8006D478 = a2 & 0xFFFFFF | 0x60000000;
    dword_8006D474 = MEMORY[0x1F801814] & 0x7FF | (a2 >> 31 << 10) | 0xE1000000;
    dword_8006D47C = *(_DWORD *)a1;
    v7 = *((_DWORD *)a1 + 1);
    dword_8006D488 = 0x3FFFFFF;
    dword_8006D480 = v7;
    dword_8006D48C = sub_8004E35C(3) | 0xE3000000;
    dword_8006D490 = sub_8004E35C(4) | 0xE4000000;
    dword_8006D494 = sub_8004E35C(5) | 0xE5000000;
  }
  else
  {
    dword_8006D460 = 100663295;
    dword_8006D464 = -436207616;
    dword_8006D46C = a2 & 0xFFFFFF | 0x2000000;
    dword_8006D468 = MEMORY[0x1F801814] & 0x7FF | (a2 >> 31 << 10) | 0xE1000000;
    dword_8006D470 = *(_DWORD *)a1;
    dword_8006D474 = *((_DWORD *)a1 + 1);
  }
  sub_8004E314(&dword_8006D460);
  return 0;
}
// 8004DBF4: conditional instruction was optimized away because $v1.4<8000u
// 8004E314: using guessed type int __fastcall sub_8004E314(_DWORD);
// 8006D460: using guessed type int dword_8006D460;
// 8006D464: using guessed type int dword_8006D464;
// 8006D468: using guessed type int dword_8006D468;
// 8006D46C: using guessed type int dword_8006D46C;
// 8006D470: using guessed type int dword_8006D470;
// 8006D474: using guessed type int dword_8006D474;
// 8006D478: using guessed type int dword_8006D478;
// 8006D47C: using guessed type int dword_8006D47C;
// 8006D480: using guessed type int dword_8006D480;
// 8006D488: using guessed type int dword_8006D488;
// 8006D48C: using guessed type int dword_8006D48C;
// 8006D490: using guessed type int dword_8006D490;
// 8006D494: using guessed type int dword_8006D494;

//----- (8004E01C) --------------------------------------------------------
int __fastcall sub_8004E01C(int a1, _DWORD *a2)
{
  int v4; // $a1
  __int16 v5; // $a0
  int v6; // $a1
  int v7; // $v1
  __int16 v8; // $a0
  int v9; // $v0
  int v10; // $lo
  signed int v11; // $v1
  int v12; // $a0
  int result; // $v0
  int v14; // $s0
  int v15; // $s4
  bool v16; // dc
  int i; // $s0

  sub_8004EB4C();
  v4 = *(__int16 *)(a1 + 4);
  v5 = *(_WORD *)(a1 + 4);
  if ( v4 < 0 )
  {
    v5 = 0;
  }
  else if ( v4 > 0 )
  {
    v5 = 0;
  }
  v6 = *(__int16 *)(a1 + 6);
  v7 = *(unsigned __int16 *)(a1 + 6);
  *(_WORD *)(a1 + 4) = v5;
  if ( v6 < 0 )
  {
    v8 = 0;
  }
  else
  {
    v8 = v7;
    v9 = v7 << 16;
    if ( v6 <= 0 )
      goto LABEL_10;
    v8 = 0;
  }
  v9 = 0;
LABEL_10:
  v10 = *(__int16 *)(a1 + 4) * (v9 >> 16);
  *(_WORD *)(a1 + 6) = v8;
  v11 = v10 + 1 + ((unsigned int)(v10 + 1) >> 31);
  v12 = (v10 + 1) / 2;
  if ( v12 <= 0 )
    return -1;
  v14 = v12 - 16 * (v11 >> 5);
  v15 = v11 >> 5;
  if ( (MEMORY[0x1F801814] & 0x4000000) != 0 )
  {
LABEL_15:
    MEMORY[0x1F801814] = 0x4000000;
    MEMORY[0x1F801810] = -1073741824;
    MEMORY[0x1F801810] = *(_DWORD *)a1;
    MEMORY[0x1F801810] = *(_DWORD *)(a1 + 4);
    while ( 1 )
    {
      v16 = sub_8004EB80() != 0;
      result = -1;
      if ( v16 )
        break;
      if ( (MEMORY[0x1F801814] & 0x8000000) != 0 )
      {
        for ( i = v14 - 1; i != -1; ++a2 )
        {
          --i;
          *a2 = MEMORY[0x1F801810];
        }
        if ( v15 )
        {
          MEMORY[0x1F801814] = 67108867;
          MEMORY[0x1F8010A0] = a2;
          MEMORY[0x1F8010A4] = (v15 << 16) | 0x10;
          MEMORY[0x1F8010A8] = 16777728;
        }
        return 0;
      }
    }
  }
  else
  {
    while ( 1 )
    {
      v16 = sub_8004EB80() != 0;
      result = -1;
      if ( v16 )
        break;
      if ( (MEMORY[0x1F801814] & 0x4000000) != 0 )
        goto LABEL_15;
    }
  }
  return result;
}
// 8004EB4C: using guessed type int sub_8004EB4C(void);
// 8004EB80: using guessed type int sub_8004EB80(void);

//----- (8004E2C0) --------------------------------------------------------
int __fastcall sub_8004E2C0(int a1)
{
  return (unsigned __int8)byte_8006D4A8[a1];
}

//----- (8004E35C) --------------------------------------------------------
int __fastcall sub_8004E35C(int a1)
{
  MEMORY[0x1F801814] = a1 | 0x10000000;
  return MEMORY[0x1F801810] & 0xFFFFFF;
}

//----- (8004E38C) --------------------------------------------------------
int __fastcall sub_8004E38C(int a1, int a2, int a3)
{
  return sub_8004E3B0(a1, a2, 0, a3);
}
// 8004E3B0: using guessed type int __fastcall sub_8004E3B0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (8004ED64) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004ED64(int a1, int a2)
{
  int i; // $v0
  bool v5; // dc
  int result; // $v0

  sub_8004C668("LoadImage2", a1);
  dword_8005F514 = sub_8004B2A8(-1) + 240;
  dword_8005F518 = 0;
  for ( i = MEMORY[0x1F8010A8]; (i & 0x1000000) != 0 || (MEMORY[0x1F801814] & 0x4000000) == 0; i = MEMORY[0x1F8010A8] )
  {
    v5 = sub_8004EB80() != 0;
    result = -1;
    if ( v5 )
      return result;
  }
  DMACallback(2, sub_8004F17C);
  sub_8004DDE0(a1, a2);
  return 0;
}
// 8004EDA0: write access to const memory at 8005F514 has been detected
// 8004EDA8: write access to const memory at 8005F518 has been detected
// 8004B4FC: using guessed type int __fastcall DMACallback(_DWORD, _DWORD);
// 8004C668: using guessed type int __fastcall sub_8004C668(_DWORD, _DWORD);
// 8004DDE0: using guessed type int __fastcall sub_8004DDE0(_DWORD, _DWORD);
// 8004EB80: using guessed type int sub_8004EB80(void);
// 8005F514: using guessed type int dword_8005F514;
// 8005F518: using guessed type int dword_8005F518;

//----- (8004EE50) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004EE50(int a1, _DWORD *a2)
{
  int i; // $v0
  bool v5; // dc
  int result; // $v0

  sub_8004C668("StoreImage", a1);
  dword_8005F514 = sub_8004B2A8(-1) + 240;
  dword_8005F518 = 0;
  for ( i = MEMORY[0x1F8010A8]; (i & 0x1000000) != 0 || (MEMORY[0x1F801814] & 0x4000000) == 0; i = MEMORY[0x1F8010A8] )
  {
    v5 = sub_8004EB80() != 0;
    result = -1;
    if ( v5 )
      return result;
  }
  DMACallback(2, sub_8004F17C);
  sub_8004E01C(a1, a2);
  return 0;
}
// 8004EE8C: write access to const memory at 8005F514 has been detected
// 8004EE94: write access to const memory at 8005F518 has been detected
// 8004B4FC: using guessed type int __fastcall DMACallback(_DWORD, _DWORD);
// 8004C668: using guessed type int __fastcall sub_8004C668(_DWORD, _DWORD);
// 8004EB80: using guessed type int sub_8004EB80(void);
// 8005F514: using guessed type int dword_8005F514;
// 8005F518: using guessed type int dword_8005F518;

//----- (8004EF3C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004EF3C(int a1, unsigned __int16 a2, int a3)
{
  int i; // $v0
  bool v7; // dc
  int result; // $v0
  int v9; // $a1

  sub_8004C668("MoveImage", a1);
  dword_8005F514 = sub_8004B2A8(-1) + 240;
  dword_8005F518 = 0;
  for ( i = MEMORY[0x1F8010A8]; (i & 0x1000000) != 0 || (MEMORY[0x1F801814] & 0x4000000) == 0; i = MEMORY[0x1F8010A8] )
  {
    v7 = sub_8004EB80() != 0;
    result = -1;
    if ( v7 )
      return result;
  }
  DMACallback(2, sub_8004F17C);
  result = -1;
  if ( *(_WORD *)(a1 + 4) )
  {
    if ( *(_WORD *)(a1 + 6) )
    {
      v9 = *(_DWORD *)a1;
      dword_8005F4AC = (a3 << 16) | a2;
      dword_8005F4A8 = v9;
      dword_8005F4B0 = *(_DWORD *)(a1 + 4);
      sub_8004E314(dword_8005F4A0);
      return 0;
    }
    else
    {
      return -1;
    }
  }
  return result;
}
// 8004EF80: write access to const memory at 8005F514 has been detected
// 8004EF88: write access to const memory at 8005F518 has been detected
// 8004F040: write access to const memory at 8005F4AC has been detected
// 8004F044: write access to const memory at 8005F4A8 has been detected
// 8004F050: write access to const memory at 8005F4B0 has been detected
// 8004B4FC: using guessed type int __fastcall DMACallback(_DWORD, _DWORD);
// 8004C668: using guessed type int __fastcall sub_8004C668(_DWORD, _DWORD);
// 8004E314: using guessed type int __fastcall sub_8004E314(_DWORD);
// 8004EB80: using guessed type int sub_8004EB80(void);
// 8005F4A0: using guessed type int dword_8005F4A0[2];
// 8005F4A8: using guessed type int dword_8005F4A8;
// 8005F4AC: using guessed type int dword_8005F4AC;
// 8005F4B0: using guessed type int dword_8005F4B0;
// 8005F514: using guessed type int dword_8005F514;
// 8005F518: using guessed type int dword_8005F518;

//----- (8004F080) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8004F080(int a1)
{
  int i; // $v0
  bool v3; // dc
  int result; // $v0

  dword_8005F514 = sub_8004B2A8(-1) + 240;
  dword_8005F518 = 0;
  for ( i = MEMORY[0x1F8010A8]; (i & 0x1000000) != 0 || (MEMORY[0x1F801814] & 0x4000000) == 0; i = MEMORY[0x1F8010A8] )
  {
    v3 = sub_8004EB80() != 0;
    result = -1;
    if ( v3 )
      return result;
  }
  DMACallback(2, sub_8004F17C);
  sub_8004E314(a1);
  return 0;
}
// 8004F0D0: write access to const memory at 8005F514 has been detected
// 8004F0D8: write access to const memory at 8005F518 has been detected
// 80048110: using guessed type int printf(const char *, ...);
// 8004B4FC: using guessed type int __fastcall DMACallback(_DWORD, _DWORD);
// 8004E314: using guessed type int __fastcall sub_8004E314(_DWORD);
// 8004EB80: using guessed type int sub_8004EB80(void);
// 8005F514: using guessed type int dword_8005F514;
// 8005F518: using guessed type int dword_8005F518;

//----- (8004F17C) --------------------------------------------------------
int sub_8004F17C()
{
  return DMACallback(2, sub_8004E660);
}
// 8004B4FC: using guessed type int __fastcall DMACallback(_DWORD, _DWORD);
// 8004E660: using guessed type int sub_8004E660();

//----- (8004F37C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
void sub_8004F37C()
{
  int v0; // $ra
  unsigned __int32 v1; // $v0

  dword_8005F6A8 = v0;
  sub_8004F914();
  v1 = _mfc0(0xCu, 0);
  _mtc0(0xCu, 0, v1 | 0x40000000);
  _$T0 = 341;
  __asm { ctc2    $t0, $29 }
  _$T0 = 256;
  __asm { ctc2    $t0, $30 }
  _$T0 = 1000;
  __asm { ctc2    $t0, $26 }
  _$T0 = -4194;
  __asm { ctc2    $t0, $27 }
  _$T0 = 20971520;
  __asm { ctc2    $t0, $28 }
  __asm
  {
    ctc2    $zero, $24
    ctc2    $zero, $25
  }
  JUMPOUT(0);
}
// 8004F37C: write access to const memory at 8005F6A8 has been detected
// 8004F3F4: control flows out of bounds to 0
// 8004F37C: variable 'v0' is possibly undefined
// 8005F6A8: using guessed type int dword_8005F6A8;

//----- (8004F544) --------------------------------------------------------
int *__fastcall sub_8004F544(int *a1, int *a2)
{
  int v2; // $t3
  int v3; // $t4
  int v4; // $t5
  int v5; // $t0
  int *result; // $v0
  int v7; // $lo
  int v8; // $t2
  int v9; // $t0
  int v10; // $lo
  int v11; // $t2
  int v12; // $t0
  int v13; // $lo
  int v14; // $t2
  int v15; // $t0

  v2 = *a2;
  v3 = a2[1];
  v4 = a2[2];
  v5 = a1[1];
  result = a1;
  *a1 = (unsigned __int16)(((__int16)*a1 * *a2) >> 12) | (((*a1 >> 16) * v3) >> 12 << 16);
  v7 = (__int16)v5 * v4;
  v8 = v5 >> 16;
  v9 = a1[2];
  a1[1] = (unsigned __int16)(v7 >> 12) | ((v8 * v2) >> 12 << 16);
  v10 = (__int16)v9 * v3;
  v11 = v9 >> 16;
  v12 = a1[3];
  a1[2] = (unsigned __int16)(v10 >> 12) | ((v11 * v4) >> 12 << 16);
  v13 = (__int16)v12 * v2;
  v14 = v12 >> 16;
  v15 = a1[4];
  a1[3] = (unsigned __int16)(v13 >> 12) | ((v14 * v3) >> 12 << 16);
  a1[4] = ((__int16)v15 * v4) >> 12;
  return result;
}

//----- (8004F794) --------------------------------------------------------
int __fastcall sub_8004F794(int a1, int a2)
{
  int v2; // $a2
  int v3; // $a3
  int result; // $v0
  int v5; // $v0
  int v6; // $v0
  int v7; // $v1
  int v8; // $v0
  int v9; // $v0

  v2 = 0;
  v3 = 0;
  if ( a2 < 0 )
  {
    v2 = 1;
    a2 = -a2;
  }
  if ( a1 < 0 )
  {
    v3 = 1;
    a1 = -a1;
  }
  if ( !a2 && !a1 )
    return 0;
  if ( a1 >= a2 )
  {
    v8 = a1 >> 10;
    if ( (a2 & 0x7FE00000) != 0 )
    {
      if ( !v8 )
        _break(7u, 0);
      if ( v8 == -1 && a2 == 0x80000000 )
        _break(6u, 0);
      v9 = a2 / v8;
    }
    else
    {
      if ( a1 == -1 && a2 << 10 == 0x80000000 )
        _break(6u, 0);
      v9 = (a2 << 10) / a1;
    }
    v7 = 1024 - word_8005F6B8[v9];
  }
  else
  {
    v5 = a2 >> 10;
    if ( (a1 & 0x7FE00000) != 0 )
    {
      if ( v5 == -1 && a1 == 0x80000000 )
        _break(6u, 0);
      v6 = a1 / v5;
    }
    else
    {
      if ( a2 == -1 && a1 << 10 == 0x80000000 )
        _break(6u, 0);
      v6 = (a1 << 10) / a2;
    }
    v7 = word_8005F6B8[v6];
  }
  if ( v2 )
    v7 = 2048 - v7;
  result = v7;
  if ( v3 )
    return -v7;
  return result;
}
// 8004F7E8: conditional instruction was optimized away because $v0.4!=0
// 8004F820: conditional instruction was optimized away because $a1.4!=0
// 8004F8AC: conditional instruction was optimized away because $a0.4!=0
// 8005F6B8: using guessed type __int16 word_8005F6B8[];

//----- (8004F914) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
void sub_8004F914()
{
  int v0; // $ra
  int v1; // $v0
  int (*v2)(); // $t2
  int v3; // $v1

  dword_80060B40 = v0;
  EnterCriticalSection();
  v1 = *(_DWORD *)(MEMORY[0xB0]() + 24);
  v2 = (int (*)())dword_8004F97C;
  do
  {
    v3 = *(_DWORD *)v2;
    v2 = (int (*)())((char *)v2 + 4);
    v1 += 4;
    *(_DWORD *)(v1 - 4) = v3;
  }
  while ( v2 != SpuInitMalloc );
  FlushCache();
  ExitCriticalSection();
  JUMPOUT(0);
}
// 8004F914: write access to const memory at 80060B40 has been detected
// 8004F974: control flows out of bounds to 0
// 8004F914: variable 'v0' is possibly undefined
// 80048B78: using guessed type int FlushCache(void);
// 80048C38: using guessed type int EnterCriticalSection(void);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8004F97C: using guessed type int dword_8004F97C[2];
// 8004F9B4: using guessed type int SpuInitMalloc();
// 80060B40: using guessed type int dword_80060B40;

//----- (80051DF0) --------------------------------------------------------
int __fastcall sub_80051DF0(int a1, int a2, int a3)
{
  BOOL v3; // $v0
  int result; // $v0
  int v5; // $a3
  int v6; // $a1
  _BYTE *v7; // $a2

  v3 = a1 < 24;
  if ( a1 < 0 )
  {
    a1 = 0;
    v3 = 1;
  }
  if ( !v3 )
    return -3;
  if ( a2 >= 24 )
    a2 = 23;
  result = -3;
  if ( a2 >= 0 )
  {
    v5 = a1;
    if ( a2 < a1 )
      return -3;
    v6 = a2 + 1;
    result = 0;
    if ( a1 < v6 )
    {
      v7 = (_BYTE *)(a1 + a3);
      do
      {
        if ( *(_WORD *)(16 * v5 + 0x1F801C0C) )
          *v7 = 2;
        else
          *v7 = 0;
        ++v5;
        ++v7;
      }
      while ( v5 < v6 );
      return 0;
    }
  }
  return result;
}

//----- (800525E0) --------------------------------------------------------
int __fastcall sub_800525E0(unsigned __int16 a1, unsigned __int16 a2, unsigned __int16 a3, unsigned __int16 a4)
{
  int v4; // $a2
  int v5; // $a1
  int v6; // $a0
  int v7; // $v1
  int v8; // $v0
  int v9; // $a2
  unsigned int v10; // $a0
  int v11; // $lo
  int v12; // $a3
  signed int v13; // $a1
  unsigned int v14; // $v0
  int v15; // $lo
  unsigned int v16; // $v1
  int result; // $v0
  int v18; // [sp+0h] [-8h]

  v4 = (a3 << 7) + a4 - ((a1 << 7) + a2);
  v5 = v4;
  if ( v4 < 0 )
    v5 = -v4;
  v6 = v5 / 1536;
  v7 = v5 % 1536;
  if ( v4 < 0 )
  {
    if ( v7 )
    {
      LOBYTE(v6) = v6 + 1;
      v7 = 1536 - v7;
    }
    v8 = 4096 >> v6;
  }
  else
  {
    v8 = 4096 << v6;
  }
  v9 = (unsigned __int16)v8;
  v10 = 4155;
  v11 = 4155 * (unsigned __int16)v8;
  v12 = (unsigned __int16)v8 << 12;
  v13 = 0;
  v14 = v7;
  if ( v7 < 0 )
    v14 = -v7;
  v18 = v11;
  if ( v14 >> 5 )
  {
    v15 = 4155 * v9;
    do
    {
      v12 = v15;
      v10 = (4155 * v10) >> 12;
      v15 = v9 * v10;
      ++v13;
      v18 = v9 * v10;
    }
    while ( v13 < (int)(v14 >> 5) );
  }
  v16 = (v12 + ((unsigned int)(v18 - v12) >> 5) * (v14 & 0x1F)) >> 12;
  result = (unsigned __int16)v16;
  if ( v16 >= 0x4000 )
    return 0x3FFF;
  return result;
}

//----- (80052718) --------------------------------------------------------
int __fastcall sub_80052718(unsigned __int16 a1, unsigned __int16 a2, unsigned __int16 a3)
{
  int v5; // $v1
  int v6; // $t2
  int v7; // $a2
  int v8; // $v0
  int v9; // $t6
  unsigned int v10; // $t0
  int v11; // $t2
  unsigned int v12; // $a2
  int v13; // $lo
  int v14; // $a0
  int v15; // $t3
  unsigned int v16; // $t1
  unsigned int v17; // $a3
  int v18; // $v0

  v5 = 0;
  v6 = 15;
  v7 = (unsigned __int16)~a3;
  v8 = v7 >> 15;
  while ( (v8 & 1) != 0 )
  {
    v8 = v7 >> --v6;
    if ( v6 < 0 )
      goto LABEL_5;
  }
  v5 = v6;
LABEL_5:
  v9 = 1 << v5;
  v10 = 4096;
  v11 = 0;
  v12 = a3;
  v13 = 1 << v5 << 12;
LABEL_6:
  v10 = (4155 * v10) >> 12;
  v14 = 0;
  v15 = 0;
  v16 = (v9 * v10 - v13) >> 5;
  v17 = v16;
  while ( 1 )
  {
    if ( v12 >= (unsigned int)(v13 + v15) >> 12 )
    {
      v18 = 32 * v11 + v14;
      if ( v12 < (v13 + v17) >> 12 )
        return ((a1 + v18 / 128 + 12 * (v5 - 12)) << 8) | (a2 + v18 % 128);
    }
    v17 += v16;
    ++v14;
    v15 += v16;
    if ( v14 >= 32 )
    {
      ++v11;
      v13 = v9 * v10;
      if ( v11 < 48 )
        goto LABEL_6;
      v18 = 1536;
      return ((a1 + v18 / 128 + 12 * (v5 - 12)) << 8) | (a2 + v18 % 128);
    }
  }
}

//----- (80052C34) --------------------------------------------------------
int __fastcall sub_80052C34(__int16 a1)
{
  int v1; // $s0
  int result; // $v0
  int v3; // $a2
  int *v4; // $a1
  int v5; // $a0
  int v6; // $v1
  bool v7; // dc

  v1 = a1;
  sub_80059C54(a1, 0, 0);
  sub_8005A284(v1);
  result = dword_8006D7E8 & ~(1 << v1);
  dword_8006D7E8 = result;
  v3 = 0;
  if ( word_8006E072 > 0 )
  {
    v4 = &dword_8006D7F0[v1];
    v5 = 0;
    do
    {
      *(_DWORD *)(v5 + *v4 + 152) = 0;
      *(_BYTE *)(v5 + *v4 + 34) = -1;
      *(_BYTE *)(v5 + *v4 + 35) = 0;
      *(_WORD *)(v5 + *v4 + 72) = 0;
      *(_WORD *)(v5 + *v4 + 74) = 0;
      *(_DWORD *)(v5 + *v4 + 156) = 0;
      *(_DWORD *)(v5 + *v4 + 160) = 0;
      *(_WORD *)(v5 + *v4 + 76) = 0;
      *(_DWORD *)(v5 + *v4 + 172) = 0;
      *(_DWORD *)(v5 + *v4 + 168) = 0;
      *(_DWORD *)(v5 + *v4 + 164) = 0;
      *(_WORD *)(v5 + *v4 + 78) = 0;
      ++v3;
      *(_WORD *)(v5 + *v4 + 88) = 127;
      v6 = v5 + *v4;
      v5 += 176;
      result = v3 < word_8006E072;
      v7 = v3 < word_8006E072;
      *(_WORD *)(v6 + 90) = 127;
    }
    while ( v7 );
  }
  return result;
}
// 8006D7E8: using guessed type int dword_8006D7E8;
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E072: using guessed type __int16 word_8006E072;

//----- (80052DB0) --------------------------------------------------------
int __fastcall sub_80052DB0(__int16 a1)
{
  return sub_80052C34(a1);
}

//----- (80052DD4) --------------------------------------------------------
int __fastcall sub_80052DD4(__int16 a1)
{
  return sub_80052C34(a1);
}

//----- (80052DF8) --------------------------------------------------------
unsigned int __fastcall sub_80052DF8(int a1, __int16 a2, __int16 a3, int a4)
{
  __int16 v6; // $s2
  unsigned __int16 v9; // $v1
  bool v10; // dc
  int v11; // $s0
  int v12; // $s0
  int *v13; // $s0
  int v14; // $v1
  unsigned int result; // $v0
  unsigned __int16 v16; // [sp+10h] [-8h] BYREF
  _WORD v17[3]; // [sp+12h] [-6h] BYREF

  v6 = a3;
  sub_8005A190(a1 | (a2 << 8), &v16, v17);
  v9 = v16;
  if ( v16 + a3 >= 128 || (v9 = v17[0], v10 = v17[0] + a3 < 128, v11 = a1 << 16, !v10) )
  {
    v6 = 128 - v9;
    v11 = a1 << 16;
  }
  v12 = v11 >> 16;
  sub_80052F94(v12, a2, v6, a4);
  v13 = &dword_8006D7F0[v12];
  *(_DWORD *)(176 * a2 + *v13 + 152) |= 0x10u;
  v14 = 176 * a2 + *v13;
  result = *(_DWORD *)(v14 + 152) & 0xFFFFFFDF;
  *(_DWORD *)(v14 + 152) = result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80052F2C) --------------------------------------------------------
unsigned int __fastcall sub_80052F2C(__int16 a1, __int16 a2, int a3)
{
  return sub_80052DF8(a1, 0, a2, a3);
}

//----- (80052F60) --------------------------------------------------------
unsigned int __fastcall sub_80052F60(__int16 a1, __int16 a2, __int16 a3, int a4)
{
  return sub_80052DF8(a1, a2, a3, a4);
}

//----- (80052F94) --------------------------------------------------------
int __fastcall sub_80052F94(__int16 a1, __int16 a2, int a3, int a4)
{
  int v4; // $a0
  int v5; // $v1
  int result; // $v0
  int v7; // $v1
  int v8; // $lo

  v4 = dword_8006D7F0[a1] + 176 * a2;
  v5 = *(_DWORD *)(v4 + 152);
  result = v5 & 4;
  if ( (v5 & 4) == 0 )
  {
    result = a3 << 16;
    if ( (v5 & 0x100) == 0 )
    {
      result = (__int16)a3;
      if ( (_WORD)a3 )
      {
        v7 = (__int16)a3;
        if ( (a3 & 0x8000u) != 0 )
          v7 = -(__int16)a3;
        *(_WORD *)(v4 + 72) = a3;
        *(_DWORD *)(v4 + 156) = a4;
        *(_WORD *)(v4 + 74) = a3;
        *(_DWORD *)(v4 + 160) = a4;
        if ( a4 < v7 )
        {
          v8 = v7 / a4;
          if ( a4 == -1 && v7 == 0x80000000 )
            _break(6u, 0);
          result = -v8;
          *(_WORD *)(v4 + 76) = -(__int16)v8;
        }
        else
        {
          if ( v7 == -1 && a4 == 0x80000000 )
            _break(6u, 0);
          result = a4 / v7;
          *(_WORD *)(v4 + 76) = a4 / v7;
        }
      }
    }
  }
  return result;
}
// 8005301C: conditional instruction was optimized away because $v1.4!=0
// 80053050: conditional instruction was optimized away because $a3.4!=0
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (8005308C) --------------------------------------------------------
unsigned int __fastcall sub_8005308C(int a1, __int16 a2, signed __int16 a3, int a4)
{
  __int16 v6; // $s2
  unsigned __int16 v9; // $v1
  bool v10; // dc
  int v11; // $s0
  int v12; // $s0
  int *v13; // $s0
  int v14; // $v1
  unsigned int result; // $v0
  unsigned __int16 v16; // [sp+10h] [-8h] BYREF
  _WORD v17[3]; // [sp+12h] [-6h] BYREF

  v6 = a3;
  sub_8005A190(a1 | (a2 << 8), &v16, v17);
  v9 = v16;
  if ( v16 < a3 || (v9 = v17[0], v10 = v17[0] >= a3, v11 = a1 << 16, !v10) )
  {
    v6 = v9;
    v11 = a1 << 16;
  }
  v12 = v11 >> 16;
  sub_80052F94(v12, a2, v6, a4);
  v13 = &dword_8006D7F0[v12];
  *(_DWORD *)(176 * a2 + *v13 + 152) |= 0x20u;
  v14 = 176 * a2 + *v13;
  result = *(_DWORD *)(v14 + 152) & 0xFFFFFFEF;
  *(_DWORD *)(v14 + 152) = result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (800531B4) --------------------------------------------------------
unsigned int __fastcall sub_800531B4(__int16 a1, signed __int16 a2, int a3)
{
  return sub_8005308C(a1, 0, a2, a3);
}

//----- (800531E8) --------------------------------------------------------
unsigned int __fastcall sub_800531E8(__int16 a1, __int16 a2, signed __int16 a3, int a4)
{
  return sub_8005308C(a1, a2, a3, a4);
}

//----- (8005321C) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_8005321C()
{
  return 1;
}
// 8005323C: write access to const memory at 800606D5 has been detected
// 80053270: write access to const memory at 800606D4 has been detected
// 800532A4: write access to const memory at 800606D0 has been detected
// 800532C8: write access to const memory at 800606D6 has been detected
// 80048C38: using guessed type int EnterCriticalSection(void);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8004B4CC: using guessed type int __fastcall InterruptCallback(_DWORD, _DWORD);
// 8004B52C: using guessed type int __fastcall VSyncCallback(_DWORD);
// 800606D5: using guessed type char byte_800606D5;

//----- (800533C8) --------------------------------------------------------
int sub_800533C8()
{
  ResetCallback();
  sub_800533F8();
  return SsInit();
}
// 8004B49C: using guessed type int ResetCallback(void);
// 800532E0: using guessed type int SsInit(void);

//----- (800533F8) --------------------------------------------------------
int sub_800533F8()
{
  return SpuInit(0);
}
// 80050624: using guessed type int __fastcall SpuInit(_DWORD);

//----- (80053418) --------------------------------------------------------
int __fastcall sub_80053418(int a1, int a2, __int16 a3)
{
  __int16 v4; // $s5
  __int16 v6; // $a0
  unsigned __int8 v7; // $a3
  int v8; // $v0
  __int16 v9; // $s0
  int v10; // $s2
  int v11; // $s1
  int inited; // $v1
  __int16 v13; // $v0

  v4 = 0;
  if ( dword_8006D7E8 == -1 )
  {
    printf("Can't Open Sequence data any more\n\n");
    return -1;
  }
  v6 = 0;
  v7 = 0;
  dword_8006D750 = (int)SsNoteOn;
  dword_8006D754 = (int)sub_80054970;
  dword_8006D75C = (int)SsGetMetaEvent;
  dword_8006D758 = (int)sub_800543E4;
  dword_8006D760 = (int)SsSetControlChange;
  dword_8006D764 = (int)sub_80053794;
  dword_8006D76C = (int)SsContMainVol;
  dword_8006D770 = (int)sub_80053D04;
  dword_8006D774 = (int)SsContExpression;
  dword_8006D778 = (int)sub_80053EB4;
  dword_8006D77C = (int)sub_80053FE4;
  dword_8006D780 = (int)sub_80054114;
  dword_8006D784 = (int)SsContRpn1;
  dword_8006D788 = (int)SsContRpn2;
  dword_8006D78C = (int)SsContExternal;
  dword_8006D790 = (int)SsContResetAll;
  dword_8006D768 = (int)sub_8005380C;
  dword_8006D794[0] = (int)sub_80032F28;
  dword_8006D798 = (int)sub_80032F30;
  dword_8006D79C = (int)sub_80032F38;
  dword_8006D7A0 = (int)sub_80032F40;
  dword_8006D7A4 = (int)sub_80032F48;
  dword_8006D7A8 = (int)sub_80032F50;
  dword_8006D7AC = (int)sub_80032F58;
  dword_8006D7B0 = (int)sub_80032F60;
  dword_8006D7B4 = (int)sub_80032F68;
  dword_8006D7B8 = (int)sub_80032F70;
  dword_8006D7BC = (int)sub_80032F78;
  dword_8006D7C0 = (int)sub_80032F80;
  dword_8006D7C4 = (int)sub_80032F88;
  dword_8006D7C8 = (int)sub_80032F90;
  dword_8006D7CC = (int)sub_80032F98;
  dword_8006D7D0 = (int)sub_80032FA0;
  dword_8006D7D4 = (int)sub_80032FA8;
  dword_8006D7D8 = (int)sub_80032FB0;
  dword_8006D7DC = (int)sub_80032FB8;
  dword_8006D7E0 = (int)sub_80032FC0;
  do
  {
    v8 = v7;
    if ( (dword_8006D7E8 & (1 << v6)) == 0 )
    {
      v4 = v6;
      v7 = 1;
      v8 = 1;
    }
    ++v6;
  }
  while ( !v8 );
  dword_8006D7E8 |= 1 << v4;
  v9 = 0;
  if ( a3 > 0 )
  {
    v10 = a2 << 16;
    v11 = a3;
    while ( 1 )
    {
      inited = SsInitSoundSep(v4, v9, v10 >> 16, a1);
      v13 = v9 + 1;
      if ( inited == -1 )
        break;
      ++v9;
      a1 += inited;
      if ( v13 >= v11 )
        return v4;
    }
    return -1;
  }
  return v4;
}
// 80048110: using guessed type int printf(const char *, ...);
// 80053C34: using guessed type int SsContMainVol();
// 80053DCC: using guessed type int SsContExpression();
// 80053EB4: using guessed type int sub_80053EB4();
// 80053F5C: using guessed type int SsContExternal();
// 80053FE4: using guessed type int sub_80053FE4();
// 80054248: using guessed type int SsContRpn1();
// 800542B8: using guessed type int SsContRpn2();
// 80054328: using guessed type int SsContResetAll();
// 800543E4: using guessed type int sub_800543E4();
// 80054494: using guessed type int SsSetControlChange();
// 800546CC: using guessed type int SsGetMetaEvent();
// 8005489C: using guessed type int SsNoteOn();
// 80054970: using guessed type int sub_80054970();
// 80054A90: using guessed type int __fastcall SsInitSoundSep(_DWORD, _DWORD, _DWORD, _DWORD);
// 8006D750: using guessed type int dword_8006D750;
// 8006D754: using guessed type int dword_8006D754;
// 8006D758: using guessed type int dword_8006D758;
// 8006D75C: using guessed type int dword_8006D75C;
// 8006D760: using guessed type int dword_8006D760;
// 8006D764: using guessed type int dword_8006D764;
// 8006D768: using guessed type int dword_8006D768;
// 8006D76C: using guessed type int dword_8006D76C;
// 8006D770: using guessed type int dword_8006D770;
// 8006D774: using guessed type int dword_8006D774;
// 8006D778: using guessed type int dword_8006D778;
// 8006D77C: using guessed type int dword_8006D77C;
// 8006D780: using guessed type int dword_8006D780;
// 8006D784: using guessed type int dword_8006D784;
// 8006D788: using guessed type int dword_8006D788;
// 8006D78C: using guessed type int dword_8006D78C;
// 8006D790: using guessed type int dword_8006D790;
// 8006D794: using guessed type int dword_8006D794[];
// 8006D798: using guessed type int dword_8006D798;
// 8006D79C: using guessed type int dword_8006D79C;
// 8006D7A0: using guessed type int dword_8006D7A0;
// 8006D7A4: using guessed type int dword_8006D7A4;
// 8006D7A8: using guessed type int dword_8006D7A8;
// 8006D7AC: using guessed type int dword_8006D7AC;
// 8006D7B0: using guessed type int dword_8006D7B0;
// 8006D7B4: using guessed type int dword_8006D7B4;
// 8006D7B8: using guessed type int dword_8006D7B8;
// 8006D7BC: using guessed type int dword_8006D7BC;
// 8006D7C0: using guessed type int dword_8006D7C0;
// 8006D7C4: using guessed type int dword_8006D7C4;
// 8006D7C8: using guessed type int dword_8006D7C8;
// 8006D7CC: using guessed type int dword_8006D7CC;
// 8006D7D0: using guessed type int dword_8006D7D0;
// 8006D7D4: using guessed type int dword_8006D7D4;
// 8006D7D8: using guessed type int dword_8006D7D8;
// 8006D7DC: using guessed type int dword_8006D7DC;
// 8006D7E0: using guessed type int dword_8006D7E0;
// 8006D7E8: using guessed type int dword_8006D7E8;

//----- (80053794) --------------------------------------------------------
int __fastcall sub_80053794(__int16 a1, __int16 a2)
{
  int v2; // $s0
  _BYTE *v3; // $v1
  int result; // $v0

  v2 = dword_8006D7F0[a1] + 176 * a2;
  v3 = (_BYTE *)(*(_DWORD *)v2)++;
  *(_BYTE *)(v2 + 38) = *v3;
  result = sub_800549E0(a1, a2);
  *(_DWORD *)(v2 + 144) = result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (8005380C) --------------------------------------------------------
int __fastcall sub_8005380C(int a1, __int16 a2, unsigned __int8 a3)
{
  __int16 v4; // $s3
  int v7; // $s0
  int v8; // $s2
  __int16 v10; // $a0
  __int16 v11; // $a1
  int v12; // $a0
  int v13; // $s1
  int v14; // $s6
  int v15; // $s2
  int v16; // $v1
  int v17; // $a2
  int result; // $v0
  int v19; // $a0
  int v20; // $a2
  int v21; // $s1
  int v22; // $s2
  int v23; // $a2
  char v24[16]; // [sp+38h] [-78h] BYREF
  unsigned __int16 v25; // [sp+48h] [-68h] BYREF
  unsigned __int16 v26; // [sp+4Ah] [-66h]
  int v27; // [sp+4Ch] [-64h]
  int v28; // [sp+50h] [-60h]
  int v29; // [sp+54h] [-5Ch]
  int v30; // [sp+58h] [-58h]
  int v31; // [sp+5Ch] [-54h]
  int v32; // [sp+60h] [-50h]
  int v33; // [sp+64h] [-4Ch]
  int v34; // [sp+68h] [-48h]

  v4 = a1;
  v7 = dword_8006D7F0[(__int16)a1] + 176 * a2;
  v8 = *(unsigned __int8 *)(v7 + 23);
  sub_8005708C(*(unsigned __int8 *)(v7 + 38), *(unsigned __int8 *)(v8 + v7 + 55), (int)v24);
  if ( *(_BYTE *)(v7 + 28) == 1 )
  {
    v10 = v4;
    if ( !*(_BYTE *)(v7 + 21) )
    {
      v11 = a2;
      *(_BYTE *)(v7 + 29) = a3;
      *(_BYTE *)(v7 + 28) = 0;
      *(_BYTE *)(v7 + 21) = 1;
LABEL_28:
      result = sub_800549E0(v10, v11);
      *(_DWORD *)(v7 + 144) = result;
      return result;
    }
  }
  if ( *(_BYTE *)(v7 + 30) == 2 )
  {
    v12 = a1 << 16;
    if ( *(_BYTE *)(v7 + 25) || (v13 = 0, !v24[0]) )
    {
LABEL_18:
      result = sub_800549E0(SHIWORD(v12), a2);
      *(_DWORD *)(v7 + 144) = result;
      *(_BYTE *)(v7 + 30) = 0;
      return result;
    }
    v14 = v8 + v7;
    v34 = 6400 * a3;
    v15 = 0;
    while ( 1 )
    {
      sub_80057194(*(unsigned __int8 *)(v7 + 38), *(unsigned __int8 *)(v14 + 55), v15 >> 16, (int)&v25);
      v16 = *(unsigned __int8 *)(v7 + 24);
      if ( v16 == 1 )
        goto LABEL_15;
      if ( *(unsigned __int8 *)(v7 + 24) >= 2u )
        break;
      if ( !*(_BYTE *)(v7 + 24) )
      {
        BYTE1(v29) = a3 & 0x7F;
        LOBYTE(v29) = a3 & 0x7F;
LABEL_15:
        v17 = v15 >> 16;
        goto LABEL_16;
      }
      v17 = v15 >> 16;
LABEL_16:
      ++v13;
      sub_80057488(*(unsigned __int8 *)(v7 + 38), *(unsigned __int8 *)(v14 + 55), v17, (int)&v25);
      v15 += 0x10000;
      if ( v13 >= (unsigned __int8)v24[0] )
      {
        v12 = a1 << 16;
        goto LABEL_18;
      }
    }
    v17 = v15 >> 16;
    if ( v16 != 2 )
      goto LABEL_16;
    goto LABEL_15;
  }
  v19 = a1 << 16;
  if ( *(_BYTE *)(v7 + 31) != 2 )
  {
    v10 = a1;
    v11 = a2;
    goto LABEL_28;
  }
  v20 = *(unsigned __int8 *)(v7 + 27);
  if ( v20 == 16 )
  {
    v21 = 0;
    if ( v24[0] )
    {
      v22 = v8 + v7;
      v23 = 0;
      do
      {
        ((void (__fastcall *)(_DWORD, _DWORD, int, int, int, int, int, int, int, int, int, _DWORD, _DWORD))dword_8006D794[*(unsigned __int8 *)(v7 + 26)])(
          *(unsigned __int8 *)(v7 + 38),
          *(unsigned __int8 *)(v22 + 55),
          v23,
          v25 | (v26 << 16),
          v27,
          v28,
          v29,
          v30,
          v31,
          v32,
          v33,
          *(unsigned __int8 *)(v7 + 26),
          a3);
        v23 = ++v21;
      }
      while ( v21 < (unsigned __int8)v24[0] );
      v19 = a1 << 16;
    }
  }
  else
  {
    ((void (__fastcall *)(_DWORD, _DWORD, int, int, int, int, int, int, int, int, int, _DWORD, _DWORD))dword_8006D794[*(unsigned __int8 *)(v7 + 26)])(
      *(unsigned __int8 *)(v7 + 38),
      *(unsigned __int8 *)(v8 + v7 + 55),
      v20,
      v25 | (v26 << 16),
      v27,
      v28,
      v29,
      v30,
      v31,
      v32,
      v33,
      *(unsigned __int8 *)(v7 + 26),
      a3);
    v19 = a1 << 16;
  }
  result = sub_800549E0(SHIWORD(v19), a2);
  *(_DWORD *)(v7 + 144) = result;
  *(_BYTE *)(v7 + 31) = 0;
  return result;
}
// 8006D794: using guessed type int dword_8006D794[];
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80053D04) --------------------------------------------------------
int __fastcall sub_80053D04(__int16 a1, __int16 a2, unsigned __int8 a3)
{
  int v6; // $s0
  int v7; // $v0
  int v8; // $s3
  int result; // $v0

  v6 = dword_8006D7F0[a1] + 176 * a2;
  v7 = *(unsigned __int8 *)(v6 + 23);
  v8 = v6 + v7;
  sub_8005A3D4(
    a1 | (a2 << 8),
    *(unsigned __int8 *)(v6 + 38),
    *(unsigned __int8 *)(v6 + v7 + 55),
    *(_WORD *)(2 * v7 + v6 + 96),
    a3);
  *(_BYTE *)(v8 + 39) = a3;
  result = sub_800549E0(a1, a2);
  *(_DWORD *)(v6 + 144) = result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80054114) --------------------------------------------------------
int __fastcall sub_80054114(__int16 a1, __int16 a2, char a3)
{
  int v3; // $s0
  int result; // $v0
  int v5; // $v1
  unsigned __int8 v6; // $v1
  int v7; // $v1
  char v8; // $v0

  v3 = dword_8006D7F0[a1] + 176 * a2;
  if ( a3 == 20 )
  {
    *(_BYTE *)(v3 + 27) = a3;
    *(_BYTE *)(v3 + 28) = 1;
    result = sub_800549E0(a1, a2);
    v5 = *(_DWORD *)v3;
    *(_DWORD *)(v3 + 144) = result;
    *(_DWORD *)(v3 + 8) = v5;
    return result;
  }
  if ( a3 != 30 )
  {
    v8 = *(_BYTE *)(v3 + 31);
    *(_BYTE *)(v3 + 27) = a3;
    *(_BYTE *)(v3 + 31) = v8 + 1;
LABEL_12:
    result = sub_800549E0(a1, a2);
    *(_DWORD *)(v3 + 144) = result;
    return result;
  }
  v6 = *(_BYTE *)(v3 + 29);
  *(_BYTE *)(v3 + 27) = a3;
  if ( !v6 )
  {
    *(_BYTE *)(v3 + 21) = 0;
    goto LABEL_12;
  }
  if ( v6 >= 0x7Fu )
  {
    sub_800549E0(a1, a2);
    result = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 144) = 0;
    *(_DWORD *)v3 = result;
  }
  else
  {
    *(_BYTE *)(v3 + 29) = v6 - 1;
    result = sub_800549E0(a1, a2);
    v7 = *(unsigned __int8 *)(v3 + 29);
    *(_DWORD *)(v3 + 144) = result;
    if ( v7 )
    {
      result = *(_DWORD *)(v3 + 8);
      *(_DWORD *)v3 = result;
    }
    else
    {
      *(_BYTE *)(v3 + 21) = 0;
    }
  }
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (800549E0) --------------------------------------------------------
int __fastcall sub_800549E0(__int16 a1, __int16 a2)
{
  _DWORD *v2; // $a1
  _BYTE *v3; // $v1
  int v4; // $a0
  int result; // $v0
  int v6; // $v0
  _BYTE *v7; // $v1

  v2 = (_DWORD *)(dword_8006D7F0[a1] + 176 * a2);
  v3 = (_BYTE *)(*v2)++;
  v4 = (unsigned __int8)*v3;
  if ( !*v3 )
    return 0;
  v6 = 4 * v4;
  if ( (v4 & 0x80) != 0 )
  {
    v4 &= 0x7Fu;
    do
    {
      v7 = (_BYTE *)(*v2)++;
      LOBYTE(v7) = *v7;
      v4 = (v4 << 7) + ((unsigned __int8)v7 & 0x7F);
    }
    while ( ((unsigned __int8)v7 & 0x80) != 0 );
    v6 = 4 * v4;
  }
  result = 2 * (v6 + v4);
  v2[34] += result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80054F48) --------------------------------------------------------
int __fastcall sub_80054F48(__int16 a1)
{
  return SsSndSetPauseMode(a1, 0);
}
// 80054E78: using guessed type int __fastcall SsSndSetPauseMode(_DWORD, _DWORD);

//----- (80054F9C) --------------------------------------------------------
int __fastcall sub_80054F9C(__int16 a1, char a2, char a3)
{
  return sub_800550FC(a1, 0, a2, a3);
}

//----- (80054FD4) --------------------------------------------------------
int __fastcall sub_80054FD4(__int16 a1, __int16 a2, char a3, char a4)
{
  return sub_800550FC(a1, a2, a3, a4);
}

//----- (800550FC) --------------------------------------------------------
int __fastcall sub_800550FC(__int16 a1, __int16 a2, char a3, char a4)
{
  int *v4; // $t2
  int v5; // $t1
  int v6; // $t0
  int v7; // $v1
  int result; // $v0
  __int16 v9; // $a0
  __int16 v10; // $a1
  __int16 v11; // $a2
  int v12; // $v1

  v4 = &dword_8006D7F0[a1];
  v5 = 176 * a2;
  v6 = *v4 + v5;
  v7 = *(_DWORD *)(v6 + 4);
  *(_DWORD *)v6 = v7;
  *(_DWORD *)(v6 + 8) = v7;
  *(_DWORD *)(v6 + 12) = v7;
  *(_DWORD *)(v5 + *v4 + 152) &= ~0x200u;
  *(_DWORD *)(v5 + *v4 + 152) &= ~4u;
  result = 1;
  *(_BYTE *)(v6 + 32) = a4;
  if ( a3 == 1 )
  {
    v9 = a1 | (a2 << 8);
    *(_DWORD *)(v5 + *v4 + 152) |= 1u;
    v10 = *(_WORD *)(v6 + 88);
    v11 = *(_WORD *)(v6 + 90);
    *(_BYTE *)(v6 + 33) = 0;
    *(_BYTE *)(v6 + 20) = 1;
    return sub_80059C54(v9, v10, v11);
  }
  else if ( !a3 )
  {
    v12 = v5 + *v4;
    result = *(_DWORD *)(v12 + 152) | 2;
    *(_DWORD *)(v12 + 152) = result;
  }
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80055218) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80055218()
{
  int v0; // $v0

  v0 = 998;
  while ( v0-- >= 0 )
    ;
  byte_800606D4 = 0;
  byte_800606D6 = 6;
  byte_800606D5 = 0;
  dword_800606D0 = 0;
  return 1;
}
// 80055258: write access to const memory at 800606D6 has been detected
// 80055264: write access to const memory at 800606D5 has been detected
// 8005526C: write access to const memory at 800606D0 has been detected
// 800552B4: write access to const memory at 800606D6 has been detected
// 800552C4: write access to const memory at 800606D6 has been detected
// 80055428: write access to const memory at 800606D0 has been detected
// 80055248: write access to const memory at 800606D4 has been detected
// 800552D8: write access to const memory at 800606D4 has been detected
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 80048CD8: using guessed type int __fastcall SetRCnt(_DWORD, _DWORD, _DWORD);
// 80048E10: using guessed type int __fastcall ResetRCnt(_DWORD);
// 8004B4CC: using guessed type int __fastcall InterruptCallback(_DWORD, _DWORD);
// 8004B52C: using guessed type int __fastcall VSyncCallback(_DWORD);
// 800606C4: using guessed type int dword_800606C4;
// 800606C8: using guessed type int dword_800606C8;
// 800606D0: using guessed type int dword_800606D0;
// 800606D4: using guessed type char byte_800606D4;
// 800606D5: using guessed type char byte_800606D5;
// 800606D6: using guessed type char byte_800606D6;

//----- (80055480) --------------------------------------------------------
int sub_80055480()
{
  return sub_80055218();
}

//----- (800554A0) --------------------------------------------------------
int sub_800554A0()
{
  return sub_80055218();
}

//----- (800554C0) --------------------------------------------------------
int sub_800554C0()
{
  return sub_80055550();
}

//----- (80055500) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_80055500()
{
  int result; // $v0

  result = 1;
  dword_800606D8 = 1;
  return result;
}
// 80055518: write access to const memory at 800606D8 has been detected
// 80055530: write access to const memory at 800606D8 has been detected
// 800606D8: using guessed type int dword_800606D8;

//----- (80055550) --------------------------------------------------------
int sub_80055550()
{
  int result; // $v0
  int v1; // $s7
  int *v2; // $fp
  int v3; // $s6
  int v4; // $s3
  int v5; // $s0

  result = dword_8006D7E4;
  if ( dword_8006D7E4 != 1 )
  {
    dword_8006D7E4 = 1;
    v1 = 0;
    sub_80057674();
    result = word_8006E070;
    if ( word_8006E070 > 0 )
    {
      v2 = dword_8006D7F0;
      do
      {
        if ( (dword_8006D7E8 & (1 << v1)) != 0 )
        {
          v3 = 0;
          if ( word_8006E072 > 0 )
          {
            v4 = 0;
            v5 = 0;
            do
            {
              if ( (*(_DWORD *)(v5 + *v2 + 152) & 1) != 0 )
              {
                sub_80055F2C((__int16)v1, v4 >> 16);
                if ( (*(_DWORD *)(v5 + *v2 + 152) & 0x10) != 0 )
                  sub_800557C4((__int16)v1, SHIWORD(v4));
                if ( (*(_DWORD *)(v5 + *v2 + 152) & 0x20) != 0 )
                  sub_80055AE4((__int16)v1, SHIWORD(v4));
                if ( (*(_DWORD *)(v5 + *v2 + 152) & 0x40) != 0 )
                  sub_80056E6C(v1, SHIWORD(v4));
                if ( (*(_DWORD *)(v5 + *v2 + 152) & 0x80) != 0 )
                  sub_80056E6C(v1, SHIWORD(v4));
              }
              if ( (*(_DWORD *)(v5 + *v2 + 152) & 2) != 0 )
                SsSndPause((__int16)v1, v4 >> 16);
              if ( (*(_DWORD *)(v5 + *v2 + 152) & 8) != 0 )
                SsSndReplay((__int16)v1, v4 >> 16);
              if ( (*(_DWORD *)(v5 + *v2 + 152) & 4) != 0 )
              {
                SsSndStop((__int16)v1, v4 >> 16);
                *(_DWORD *)(v5 + *v2 + 152) = 0;
              }
              v4 += 0x10000;
              ++v3;
              v5 += 176;
            }
            while ( v3 < word_8006E072 );
          }
        }
        result = ++v1 < word_8006E070;
        ++v2;
      }
      while ( v1 < word_8006E070 );
    }
    dword_8006D7E4 = 0;
  }
  return result;
}
// 80055E90: using guessed type int __fastcall SsSndPause(_DWORD, _DWORD);
// 80055F2C: using guessed type int __fastcall sub_80055F2C(_DWORD, _DWORD);
// 80056744: using guessed type int __fastcall SsSndReplay(_DWORD, _DWORD);
// 800567A4: using guessed type int __fastcall SsSndStop(_DWORD, _DWORD);
// 8006D7E4: using guessed type int dword_8006D7E4;
// 8006D7E8: using guessed type int dword_8006D7E8;
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E070: using guessed type __int16 word_8006E070;
// 8006E072: using guessed type __int16 word_8006E072;

//----- (800557C4) --------------------------------------------------------
int __fastcall sub_800557C4(int a1, __int16 a2)
{
  __int16 v2; // $a3
  int *v3; // $s3
  int v4; // $s2
  int v6; // $s0
  int v8; // $v0
  int v9; // $v0
  int v10; // $a2
  __int16 v11; // $a0
  __int16 v12; // $v0
  __int16 v13; // $s1
  __int16 v14; // $a0
  __int16 v15; // $a1
  __int16 v16; // $a2
  __int16 v17; // $v0
  __int16 v18; // $s1
  int v19; // $v1
  __int16 v20; // $v1
  int v21; // $a0
  unsigned __int16 v23; // [sp+10h] [-18h] BYREF
  _WORD v24[11]; // [sp+12h] [-16h] BYREF

  v2 = a1;
  v3 = &dword_8006D7F0[(__int16)a1];
  v4 = 176 * a2;
  v6 = *v3 + v4;
  v8 = *(_DWORD *)(v6 + 160) - 1;
  *(_DWORD *)(v6 + 160) = v8;
  if ( v8 < 0 )
  {
    v9 = v4 + *v3;
LABEL_23:
    *(_DWORD *)(v9 + 152) &= ~0x10u;
    v11 = a2 << 8;
    return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
  }
  v10 = *(__int16 *)(v6 + 76);
  if ( v10 <= 0 )
  {
    v11 = a2 << 8;
    if ( v10 >= 0 )
      return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
    v17 = *(_WORD *)(v6 + 74) + *(_WORD *)(v6 + 76);
    *(_WORD *)(v6 + 74) = v17;
    if ( (v17 & 0x8000) == 0 )
    {
      v18 = v2 | (a2 << 8);
      sub_8005A190(v18, &v23, v24);
      v19 = *(__int16 *)(v6 + 76);
      if ( v23 - v19 >= 127 && v24[0] - v19 >= 127 )
      {
        sub_80059C54(v18, 127, 127);
        *(_DWORD *)(v4 + *v3 + 152) &= ~0x10u;
      }
      v20 = *(_WORD *)(v6 + 76);
      if ( (*(_DWORD *)(v6 + 156) - *(_DWORD *)(v6 + 160)) * -v20 >= *(__int16 *)(v6 + 72) )
        goto LABEL_19;
      v14 = a1 | (a2 << 8);
      v15 = v23 - v20;
      v16 = v24[0] - v20;
      goto LABEL_17;
    }
LABEL_18:
    sub_80059C54(v2 | (a2 << 8), 127, 127);
    *(_DWORD *)(v4 + *v3 + 152) &= ~0x10u;
    goto LABEL_19;
  }
  if ( !*(_WORD *)(v6 + 76) )
    _break(7u, 0);
  v11 = a2 << 8;
  if ( v8 % v10 )
    return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
  v12 = *(_WORD *)(v6 + 74) - 1;
  *(_WORD *)(v6 + 74) = v12;
  if ( v12 < 0 )
    goto LABEL_18;
  v13 = v2 | (a2 << 8);
  sub_8005A190(v13, &v23, v24);
  v14 = v13;
  if ( v23 + *(__int16 *)(v6 + 74) >= v23 + 1 )
  {
    v15 = v23 + 1;
    v16 = v24[0] + 1;
LABEL_17:
    sub_80059C54(v14, v15, v16);
  }
LABEL_19:
  v21 = a1 << 16;
  if ( !*(_DWORD *)(v6 + 160) )
  {
LABEL_22:
    v9 = 176 * a2 + *(int *)((char *)dword_8006D7F0 + (v21 >> 14));
    goto LABEL_23;
  }
  v11 = a2 << 8;
  if ( *(__int16 *)(v6 + 74) <= 0 )
  {
    v21 = a1 << 16;
    goto LABEL_22;
  }
  return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
}
// 80055868: conditional instruction was optimized away because $a2.4 is in (1..7FFF)
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80055AE4) --------------------------------------------------------
int __fastcall sub_80055AE4(int a1, __int16 a2)
{
  __int16 v2; // $a3
  int *v3; // $s3
  int v4; // $s2
  int v6; // $s0
  int v8; // $v0
  int v9; // $v0
  int v10; // $a2
  __int16 v11; // $a0
  __int16 v12; // $v0
  __int16 v13; // $s1
  int v14; // $a2
  __int16 v15; // $a0
  int v16; // $v0
  __int16 v17; // $a1
  __int16 v18; // $a2
  __int16 v19; // $v0
  __int16 v20; // $s1
  int v21; // $v1
  __int16 v22; // $v1
  int v23; // $a0
  unsigned __int16 v25; // [sp+10h] [-18h] BYREF
  _WORD v26[11]; // [sp+12h] [-16h] BYREF

  v2 = a1;
  v3 = &dword_8006D7F0[(__int16)a1];
  v4 = 176 * a2;
  v6 = *v3 + v4;
  v8 = *(_DWORD *)(v6 + 160) - 1;
  *(_DWORD *)(v6 + 160) = v8;
  if ( v8 < 0 )
  {
    v9 = v4 + *v3;
LABEL_31:
    *(_DWORD *)(v9 + 152) &= ~0x20u;
    v11 = a2 << 8;
    return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
  }
  v10 = *(__int16 *)(v6 + 76);
  if ( v10 <= 0 )
  {
    v11 = a2 << 8;
    if ( v10 >= 0 )
      return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
    v19 = *(_WORD *)(v6 + 74) + *(_WORD *)(v6 + 76);
    *(_WORD *)(v6 + 74) = v19;
    if ( (v19 & 0x8000) == 0 )
    {
      v20 = v2 | (a2 << 8);
      sub_8005A190(v20, &v25, v26);
      v21 = *(__int16 *)(v6 + 76);
      if ( v25 + v21 <= 0 && v26[0] + v21 <= 0 )
      {
        sub_80059C54(v20, 0, 0);
        *(_DWORD *)(v4 + *v3 + 152) &= ~0x20u;
      }
      v22 = *(_WORD *)(v6 + 76);
      if ( (*(_DWORD *)(v6 + 156) - *(_DWORD *)(v6 + 160)) * -v22 >= *(__int16 *)(v6 + 72) )
        goto LABEL_27;
      if ( !v25 || !v26[0] )
      {
        v16 = 176 * a2 + dword_8006D7F0[(__int16)a1];
        goto LABEL_23;
      }
      v15 = a1 | (a2 << 8);
      v17 = v25 + v22;
      v18 = v26[0] + v22;
LABEL_25:
      sub_80059C54(v15, v17, v18);
      goto LABEL_27;
    }
LABEL_26:
    sub_80059C54(v2 | (a2 << 8), 0, 0);
    *(_DWORD *)(v4 + *v3 + 152) &= ~0x20u;
    goto LABEL_27;
  }
  if ( !*(_WORD *)(v6 + 76) )
    _break(7u, 0);
  v11 = a2 << 8;
  if ( v8 % v10 )
    return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
  v12 = *(_WORD *)(v6 + 74) - 1;
  *(_WORD *)(v6 + 74) = v12;
  if ( v12 < 0 )
    goto LABEL_26;
  v13 = v2 | (a2 << 8);
  sub_8005A190(v13, &v25, v26);
  v14 = *(__int16 *)(v6 + 74);
  if ( v25 - 1 < v25 - v14 && v26[0] - 1 < v26[0] - v14 )
    goto LABEL_27;
  if ( v25 )
  {
    v15 = v13;
    if ( v26[0] )
    {
      v17 = v25 - 1;
      v18 = v26[0] - 1;
      goto LABEL_25;
    }
  }
  v16 = v4 + *v3;
LABEL_23:
  *(_DWORD *)(v16 + 152) &= ~0x20u;
LABEL_27:
  v23 = a1 << 16;
  if ( !*(_DWORD *)(v6 + 160) )
  {
LABEL_30:
    v9 = 176 * a2 + *(int *)((char *)dword_8006D7F0 + (v23 >> 14));
    goto LABEL_31;
  }
  v11 = a2 << 8;
  if ( *(__int16 *)(v6 + 74) <= 0 )
  {
    v23 = a1 << 16;
    goto LABEL_30;
  }
  return sub_8005A190(a1 | v11, (_WORD *)(v6 + 92), (_WORD *)(v6 + 94));
}
// 80055B88: conditional instruction was optimized away because $a2.4 is in (1..7FFF)
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80055F58) --------------------------------------------------------
int __fastcall sub_80055F58(int a1, int a2)
{
  int v2; // $a3
  int v3; // $a1
  int v4; // $s1
  int v5; // $v0
  int v6; // $v1
  int v7; // $a0
  int result; // $v0
  int v9; // $v0
  int v10; // $s0
  int v11; // $s3
  int v12; // $s2
  int v13; // $a0
  int v14; // $v0
  int v15; // $v1

  v2 = a1 << 16;
  v3 = a2 << 16;
  v4 = dword_8006D7F0[(__int16)a1] + 176 * (v3 >> 16);
  v5 = *(__int16 *)(v4 + 84);
  v6 = *(_DWORD *)(v4 + 144);
  v7 = v6 - v5;
  if ( v6 - v5 <= 0 )
  {
    result = v5 < v6;
    v10 = *(_DWORD *)(v4 + 144);
    if ( result )
      return result;
    v11 = v2;
    v12 = v3;
    v13 = v2 >> 16;
    do
    {
      do
      {
        sub_800562A4(v13, v12 >> 16);
        v14 = *(_DWORD *)(v4 + 144);
        v13 = v11 >> 16;
      }
      while ( !v14 );
      v15 = *(__int16 *)(v4 + 84);
      v10 += v14;
      result = v10 - v15;
    }
    while ( v10 < v15 );
  }
  else
  {
    result = *(__int16 *)(v4 + 82);
    if ( result > 0 )
    {
      *(_WORD *)(v4 + 82) = --result;
      return result;
    }
    if ( *(_WORD *)(v4 + 82) )
    {
      *(_DWORD *)(v4 + 144) = v7;
      return result;
    }
    v9 = *(_DWORD *)(v4 + 144);
    *(_WORD *)(v4 + 82) = *(_WORD *)(v4 + 84);
    result = v9 - 1;
  }
  *(_DWORD *)(v4 + 144) = result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80056060) --------------------------------------------------------
int __fastcall sub_80056060(__int16 a1, __int16 a2)
{
  int *v2; // $a3
  int v3; // $a2
  int v6; // $s0
  unsigned int v7; // $v1
  unsigned __int8 v8; // $v0
  int result; // $v0
  int v10; // $v0
  __int16 v11; // $a0
  __int16 v12; // $a1

  v2 = &dword_8006D7F0[a1];
  v3 = 176 * a2;
  v6 = *v2 + v3;
  v7 = *(unsigned __int8 *)(v6 + 32);
  v8 = *(_BYTE *)(v6 + 33) + 1;
  *(_BYTE *)(v6 + 33) = v8;
  if ( v7 )
  {
    if ( v8 >= v7 )
    {
      *(_DWORD *)(v3 + *v2 + 152) &= ~1u;
      *(_DWORD *)(v3 + *v2 + 152) &= ~8u;
      *(_DWORD *)(v3 + *v2 + 152) &= ~2u;
      *(_DWORD *)(v3 + *v2 + 152) |= 0x200u;
      *(_DWORD *)(v3 + *v2 + 152) |= 4u;
      *(_BYTE *)(v6 + 20) = 0;
      if ( (*(_DWORD *)(v3 + *v2 + 152) & 0x400) != 0 )
        v10 = *(_DWORD *)(v6 + 12);
      else
        v10 = *(_DWORD *)(v6 + 4);
      *(_DWORD *)(v6 + 8) = v10;
      if ( *(unsigned __int8 *)(v6 + 34) != 255 )
      {
        v11 = *(unsigned __int8 *)(v6 + 34);
        v12 = *(unsigned __int8 *)(v6 + 35);
        *(_BYTE *)(v6 + 20) = 0;
        sub_80056648(v11, v12);
        sub_8005A284(a1 | (a2 << 8));
      }
      sub_8005A284(a1 | (a2 << 8));
      result = *(__int16 *)(v6 + 84);
      *(_DWORD *)(v6 + 144) = result;
    }
    else
    {
      *(_DWORD *)(v6 + 136) = 0;
      *(_BYTE *)(v6 + 28) = 0;
      *(_DWORD *)(v6 + 144) = 0;
      if ( (*(_DWORD *)(v3 + *v2 + 152) & 0x400) != 0 )
        result = *(_DWORD *)(v6 + 12);
      else
        result = *(_DWORD *)(v6 + 4);
      *(_DWORD *)v6 = result;
      *(_DWORD *)(v6 + 8) = result;
    }
  }
  else
  {
    *(_DWORD *)(v6 + 136) = 0;
    *(_BYTE *)(v6 + 28) = 0;
    *(_DWORD *)(v6 + 144) = 0;
    if ( (*(_DWORD *)(v3 + *v2 + 152) & 0x400) != 0 )
      result = *(_DWORD *)(v6 + 12);
    else
      result = *(_DWORD *)(v6 + 4);
    *(_DWORD *)v6 = result;
  }
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (800562A4) --------------------------------------------------------
int __fastcall sub_800562A4(int a1, int a2)
{
  int *v2; // $a2
  int v3; // $v0
  int *v4; // $s3
  unsigned __int8 *v5; // $a3
  int v6; // $t1
  int v7; // $s2
  int v8; // $v0
  int v10; // $a2
  int v11; // $a0
  int v12; // $s1
  int v13; // $s0
  unsigned __int8 *v14; // $v1
  int v15; // $s2
  int v16; // $s4
  unsigned __int8 *v17; // $v1
  unsigned __int8 *v18; // $v1
  int v19; // $v0
  int v20; // $a1
  unsigned __int8 *v21; // $v1
  int v22; // $a2
  int v23; // $a0
  int v24; // $v1
  int v25; // $a0
  int v26; // $s1
  int v27; // $s0
  unsigned __int8 *v28; // $v1
  int v29; // $s4

  v2 = &dword_8006D7F0[(__int16)a1];
  v3 = 176 * (__int16)a2;
  v4 = (int *)(*v2 + v3);
  v5 = (unsigned __int8 *)*v4;
  v6 = *v4 + 1;
  *v4 = v6;
  v7 = *v5;
  if ( (*(_DWORD *)(v3 + *v2 + 152) & 0x401) == 0x401 )
  {
    v8 = v7 & 0x80;
    if ( v6 == v4[4] + 1 )
    {
      sub_80056060(a1, a2);
      return -1;
    }
  }
  else
  {
    v8 = v7 & 0x80;
  }
  if ( v8 )
  {
    *((_BYTE *)v4 + 23) = v7 & 0xF;
    v10 = v7 & 0xF0;
    if ( v10 != 192 )
    {
      if ( (v7 & 0xF0u) < 0xC1 )
      {
        if ( v10 != 144 )
        {
          v11 = a1 << 16;
          if ( v10 != 176 )
            return 0;
          v17 = (unsigned __int8 *)*v4;
          *((_BYTE *)v4 + 22) = -80;
          *v4 = (int)(v17 + 1);
          ((void (__fastcall *)(int, _DWORD, _DWORD))dword_8006D760)(v11 >> 16, (__int16)a2, *v17);
          return 0;
        }
        v12 = (__int16)a1;
        v13 = (__int16)a2;
        v14 = (unsigned __int8 *)*v4;
        *((_BYTE *)v4 + 22) = -112;
        *v4 = (int)(v14 + 1);
        v15 = *v14;
        *v4 = (int)(v14 + 2);
        v16 = v14[1];
        v4[36] = sub_800549E0(a1, a2);
        ((void (__fastcall *)(int, int, int, int))dword_8006D750)(v12, v13, v15, v16);
        return 0;
      }
      if ( v10 != 224 )
      {
        if ( v10 != 240 )
          return 0;
        v21 = (unsigned __int8 *)*v4;
        *((_BYTE *)v4 + 22) = -1;
        *v4 = (int)(v21 + 1);
        v22 = *v21;
        if ( v22 != 47 )
        {
          v23 = a1 << 16;
LABEL_37:
          ((void (__fastcall *)(int, _DWORD, int))dword_8006D75C)(v23 >> 16, (__int16)a2, v22);
          return 0;
        }
        goto LABEL_35;
      }
      a1 = (__int16)a1;
      v19 = *v4;
      v20 = a2 << 16;
      *((_BYTE *)v4 + 22) = -32;
      *v4 = v19 + 1;
      goto LABEL_33;
    }
    v18 = (unsigned __int8 *)*v4;
    *((_BYTE *)v4 + 22) = -64;
    *v4 = (int)(v18 + 1);
    ((void (__fastcall *)(_DWORD, _DWORD, _DWORD))dword_8006D754)((__int16)a1, (__int16)a2, *v18);
  }
  else
  {
    v24 = *((unsigned __int8 *)v4 + 22);
    if ( v24 != 192 )
    {
      if ( *((unsigned __int8 *)v4 + 22) < 0xC1u )
      {
        if ( v24 != 144 )
        {
          v25 = a1 << 16;
          if ( v24 != 176 )
            return 0;
          ((void (__fastcall *)(int, _DWORD, _DWORD))dword_8006D760)(v25 >> 16, (__int16)a2, *v5);
          return 0;
        }
        v26 = (__int16)a1;
        v27 = (__int16)a2;
        v28 = (unsigned __int8 *)(*v4)++;
        v29 = *v28;
        v4[36] = sub_800549E0(a1, a2);
        ((void (__fastcall *)(int, int, int, int))dword_8006D750)(v26, v27, v7, v29);
        return 0;
      }
      if ( v24 != 224 )
      {
        v22 = *v5;
        if ( v24 != 255 )
          return 0;
        if ( v22 != 47 )
        {
          v23 = a1 << 16;
          goto LABEL_37;
        }
LABEL_35:
        sub_80056060(a1, a2);
        return 1;
      }
      a1 = (__int16)a1;
      v20 = a2 << 16;
LABEL_33:
      dword_8006D758(a1, v20 >> 16);
      return 0;
    }
    ((void (__fastcall *)(_DWORD, _DWORD, _DWORD))dword_8006D754)((__int16)a1, (__int16)a2, *v5);
  }
  return 0;
}
// 8006D758: invalid function type '?' has been ignored
// 8006D750: using guessed type int dword_8006D750;
// 8006D754: using guessed type int dword_8006D754;
// 8006D758: using guessed type int (__fastcall *dword_8006D758)(_DWORD, _DWORD);
// 8006D75C: using guessed type int dword_8006D75C;
// 8006D760: using guessed type int dword_8006D760;
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80056648) --------------------------------------------------------
int __fastcall sub_80056648(__int16 a1, __int16 a2)
{
  int *v2; // $a0
  int v3; // $a2
  int v4; // $a3
  int v5; // $v0
  int v6; // $a2
  int result; // $v0

  v2 = &dword_8006D7F0[a1];
  v3 = 176 * a2;
  v4 = *v2 + v3;
  *(_WORD *)(v4 + 32) = 1;
  *(_DWORD *)(v3 + *v2 + 152) &= ~0x100u;
  *(_DWORD *)(v3 + *v2 + 152) &= ~8u;
  *(_DWORD *)(v3 + *v2 + 152) &= ~2u;
  *(_DWORD *)(v3 + *v2 + 152) &= ~4u;
  *(_DWORD *)(v3 + *v2 + 152) &= ~0x200u;
  v5 = *(_DWORD *)(v4 + 4);
  *(_BYTE *)(v4 + 20) = 1;
  *(_DWORD *)v4 = v5;
  v6 = v3 + *v2;
  result = *(_DWORD *)(v6 + 152) | 1;
  *(_DWORD *)(v6 + 152) = result;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80056928) --------------------------------------------------------
int __fastcall sub_80056928(__int16 a1)
{
  return SsSndStop(a1, 0);
}
// 800567A4: using guessed type int __fastcall SsSndStop(_DWORD, _DWORD);

//----- (8005697C) --------------------------------------------------------
int __fastcall sub_8005697C(int a1, __int16 a2, __int16 a3)
{
  int v3; // $a3
  int v4; // $t0
  int *v5; // $a2
  int v6; // $v1
  int result; // $v0
  int v8; // $a3
  int *v9; // $t1
  int v10; // $a2
  int v11; // $a0
  int v12; // $v1
  bool v13; // dc

  word_8006E070 = a2;
  word_8006E072 = a3;
  v3 = 0;
  if ( a2 > 0 )
  {
    v4 = a3;
    v5 = dword_8006D7F0;
    v6 = 0;
    do
    {
      *v5++ = a1 + 176 * v6;
      ++v3;
      v6 += v4;
    }
    while ( v3 < a2 );
  }
  result = word_8006E070;
  v8 = 0;
  if ( word_8006E070 > 0 )
  {
    v9 = dword_8006D7F0;
    do
    {
      v10 = 0;
      if ( word_8006E072 > 0 )
      {
        v11 = 0;
        do
        {
          *(_DWORD *)(v11 + *v9 + 152) = 0;
          *(_BYTE *)(v11 + *v9 + 34) = -1;
          *(_BYTE *)(v11 + *v9 + 35) = 0;
          *(_WORD *)(v11 + *v9 + 72) = 0;
          *(_WORD *)(v11 + *v9 + 74) = 0;
          *(_DWORD *)(v11 + *v9 + 156) = 0;
          *(_DWORD *)(v11 + *v9 + 160) = 0;
          *(_WORD *)(v11 + *v9 + 76) = 0;
          *(_DWORD *)(v11 + *v9 + 172) = 0;
          *(_DWORD *)(v11 + *v9 + 168) = 0;
          *(_DWORD *)(v11 + *v9 + 164) = 0;
          *(_WORD *)(v11 + *v9 + 78) = 0;
          *(_WORD *)(v11 + *v9 + 88) = 127;
          *(_WORD *)(v11 + *v9 + 90) = 127;
          ++v10;
          *(_WORD *)(v11 + *v9 + 92) = 127;
          v12 = v11 + *v9;
          v11 += 176;
          v13 = v10 < word_8006E072;
          *(_WORD *)(v12 + 94) = 127;
        }
        while ( v13 );
      }
      result = ++v8 < word_8006E070;
      ++v9;
    }
    while ( v8 < word_8006E070 );
  }
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E070: using guessed type __int16 word_8006E070;
// 8006E072: using guessed type __int16 word_8006E072;

//----- (80056B54) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_80056B54(int a1)
{
  int result; // $v0

  GsGetWorkBase();
  if ( (a1 & 0x1000) != 0 )
  {
    dword_800606C8 = 1;
    dword_800606C4 = a1 & 0xFFF;
  }
  else
  {
    dword_800606C8 = 0;
    dword_800606C4 = a1;
  }
  result = 0;
  dword_8006D7EC = 60;
  return result;
}
// 80056B78: write access to const memory at 800606C8 has been detected
// 80056B84: write access to const memory at 800606C4 has been detected
// 80056B94: write access to const memory at 800606C8 has been detected
// 80056B9C: write access to const memory at 800606C4 has been detected
// 80056BF4: write access to const memory at 800606C4 has been detected
// 80056C1C: write access to const memory at 800606C4 has been detected
// 8004BFD4: using guessed type int GsGetWorkBase(void);
// 800606C4: using guessed type int dword_800606C4;
// 800606C8: using guessed type int dword_800606C8;
// 8006D7EC: using guessed type int dword_8006D7EC;

//----- (80056CC0) --------------------------------------------------------
int __fastcall sub_80056CC0(__int16 a1, __int16 a2, __int16 a3, __int16 a4)
{
  int v5; // $a0
  int result; // $v0

  v5 = dword_8006D7F0[a1] + 176 * a2;
  result = 1;
  if ( *(_DWORD *)(v5 + 152) == 1 )
    return sub_80059C54(a1 | (a2 << 8), a3, a4);
  *(_WORD *)(v5 + 88) = a3;
  *(_WORD *)(v5 + 90) = a4;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80056D4C) --------------------------------------------------------
int __fastcall sub_80056D4C(__int16 a1, __int16 a2, __int16 a3)
{
  int v3; // $a3
  int result; // $v0

  v3 = dword_8006D7F0[a1];
  result = 1;
  if ( *(_DWORD *)(v3 + 152) == 1 )
    return sub_80059C54(a1, a2, a3);
  *(_WORD *)(v3 + 88) = a2;
  *(_WORD *)(v3 + 90) = a3;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80056DAC) --------------------------------------------------------
int __fastcall sub_80056DAC(__int16 a1, __int16 a2, __int16 a3, __int16 a4)
{
  int v5; // $a0
  int result; // $v0

  v5 = dword_8006D7F0[a1] + 176 * a2;
  result = 1;
  if ( *(_DWORD *)(v5 + 152) == 1 )
    return sub_80059C54(a1 | (a2 << 8), a3, a4);
  *(_WORD *)(v5 + 88) = a3;
  *(_WORD *)(v5 + 90) = a4;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (80056E38) --------------------------------------------------------
int __fastcall sub_80056E38(__int16 a1, __int16 a2, _WORD *a3, _WORD *a4)
{
  return sub_8005A190(a1 | (a2 << 8), a3, a4);
}

//----- (80056E6C) --------------------------------------------------------
unsigned int __fastcall sub_80056E6C(__int16 a1, __int16 a2)
{
  int *v2; // $t0
  int v3; // $a2
  int v5; // $a3
  int v6; // $v0
  int v7; // $v1
  int v8; // $a0
  int v9; // $hi
  unsigned int result; // $v0
  unsigned int v11; // $v1
  unsigned int v12; // $a0
  unsigned int v13; // $v0
  unsigned int v14; // $v1
  unsigned int v15; // $t0
  unsigned int v16; // $v0
  BOOL v17; // $v0
  unsigned int v18; // $v0
  unsigned int v19; // $lo
  int *v20; // $a2
  int v21; // $v1

  v2 = &dword_8006D7F0[a1];
  v3 = 176 * a2;
  v5 = *v2 + v3;
  v6 = *(_DWORD *)(v5 + 168) - 1;
  *(_DWORD *)(v5 + 168) = v6;
  if ( v6 < 0 )
  {
    *(_DWORD *)(v3 + *v2 + 152) &= ~0x40u;
    v7 = v3 + *v2;
LABEL_23:
    result = *(_DWORD *)(v7 + 152) & 0xFFFFFF7F;
    *(_DWORD *)(v7 + 152) = result;
    return result;
  }
  v8 = *(__int16 *)(v5 + 78);
  if ( v8 <= 0 )
  {
    v14 = *(_DWORD *)(v5 + 148);
    v15 = *(_DWORD *)(v5 + 172);
    v16 = v14 + v8;
    if ( v15 >= v14 )
    {
      v18 = v14 - v8;
      if ( v14 >= v15 )
        goto LABEL_16;
      v15 = *(_DWORD *)(v5 + 172);
      *(_DWORD *)(v5 + 148) = v18;
      v17 = v15 < v18;
    }
    else
    {
      *(_DWORD *)(v5 + 148) = v16;
      v17 = v16 < v15;
    }
    if ( v17 )
      *(_DWORD *)(v5 + 148) = v15;
  }
  else
  {
    v9 = v6 % v8;
    if ( !*(_WORD *)(v5 + 78) )
      _break(7u, 0);
    result = v6 % v8;
    if ( v9 )
      return result;
    v11 = *(_DWORD *)(v5 + 148);
    v12 = *(_DWORD *)(v5 + 172);
    v13 = v11 - 1;
    if ( v12 < v11 || (v13 = v11 + 1, v11 < v12) )
      *(_DWORD *)(v5 + 148) = v13;
  }
LABEL_16:
  v19 = 10 * *(__int16 *)(v5 + 80) * *(_DWORD *)(v5 + 148) / (unsigned int)(60 * dword_8006D7EC);
  if ( !(60 * dword_8006D7EC) )
    _break(7u, 0);
  *(_WORD *)(v5 + 84) = v19;
  if ( (int)(v19 << 16) <= 0 )
    *(_WORD *)(v5 + 84) = 1;
  if ( !*(_DWORD *)(v5 + 168) || (result = *(_DWORD *)(v5 + 172), *(_DWORD *)(v5 + 148) == result) )
  {
    v20 = &dword_8006D7F0[a1];
    v21 = 176 * a2;
    *(_DWORD *)(v21 + *v20 + 152) &= ~0x40u;
    v7 = v21 + *v20;
    goto LABEL_23;
  }
  return result;
}
// 80056F08: conditional instruction was optimized away because $a0.4 is in (1..7FFF)
// 8006D7EC: using guessed type int dword_8006D7EC;
// 8006D7F0: using guessed type int dword_8006D7F0[32];

//----- (8005708C) --------------------------------------------------------
int __fastcall sub_8005708C(signed __int16 a1, __int16 a2, int a3)
{
  int result; // $v0
  int v5; // $s0

  if ( byte_8006E898[a1] != 1 )
    return -1;
  v5 = a2;
  sub_8005A950(a1, a2);
  v5 *= 16;
  *(_BYTE *)a3 = *(_BYTE *)(v5 + dword_8006E864);
  *(_BYTE *)(a3 + 1) = *(_BYTE *)(v5 + dword_8006E864 + 1);
  *(_BYTE *)(a3 + 2) = *(_BYTE *)(v5 + dword_8006E864 + 2);
  *(_BYTE *)(a3 + 3) = *(_BYTE *)(v5 + dword_8006E864 + 3);
  *(_BYTE *)(a3 + 4) = *(_BYTE *)(v5 + dword_8006E864 + 4);
  result = 0;
  *(_WORD *)(a3 + 6) = *(_WORD *)(v5 + dword_8006E864 + 6);
  return result;
}
// 8006E864: using guessed type int dword_8006E864;

//----- (80057194) --------------------------------------------------------
int __fastcall sub_80057194(signed __int16 a1, __int16 a2, int a3, int a4)
{
  int result; // $v0
  int v7; // $v1
  _WORD *v8; // $v1

  if ( byte_8006E898[a1] != 1 )
    return -1;
  sub_8005A950(a1, a2);
  v7 = (a3 + 16 * (unsigned __int8)byte_8006E87F) << 16 >> 11;
  *(_BYTE *)a4 = *(_BYTE *)(v7 + dword_8006E870);
  *(_BYTE *)(a4 + 1) = *(_BYTE *)(v7 + dword_8006E870 + 1);
  *(_BYTE *)(a4 + 2) = *(_BYTE *)(v7 + dword_8006E870 + 2);
  *(_BYTE *)(a4 + 3) = *(_BYTE *)(v7 + dword_8006E870 + 3);
  *(_BYTE *)(a4 + 4) = *(_BYTE *)(v7 + dword_8006E870 + 4);
  *(_BYTE *)(a4 + 5) = *(_BYTE *)(v7 + dword_8006E870 + 5);
  *(_BYTE *)(a4 + 7) = *(_BYTE *)(v7 + dword_8006E870 + 7);
  *(_BYTE *)(a4 + 6) = *(_BYTE *)(v7 + dword_8006E870 + 6);
  *(_BYTE *)(a4 + 8) = *(_BYTE *)(v7 + dword_8006E870 + 8);
  *(_BYTE *)(a4 + 9) = *(_BYTE *)(v7 + dword_8006E870 + 9);
  *(_BYTE *)(a4 + 10) = *(_BYTE *)(v7 + dword_8006E870 + 10);
  *(_BYTE *)(a4 + 11) = *(_BYTE *)(v7 + dword_8006E870 + 11);
  *(_BYTE *)(a4 + 12) = *(_BYTE *)(v7 + dword_8006E870 + 12);
  *(_BYTE *)(a4 + 13) = *(_BYTE *)(v7 + dword_8006E870 + 13);
  v8 = (_WORD *)(v7 + dword_8006E870);
  *(_WORD *)(a4 + 16) = v8[8];
  *(_WORD *)(a4 + 18) = v8[9];
  *(_WORD *)(a4 + 20) = v8[10];
  result = 0;
  *(_WORD *)(a4 + 22) = v8[11];
  return result;
}
// 8006E870: using guessed type int dword_8006E870;
// 8006E87F: using guessed type char byte_8006E87F;

//----- (80057488) --------------------------------------------------------
int __fastcall sub_80057488(signed __int16 a1, __int16 a2, int a3, int a4)
{
  int result; // $v0
  int v7; // $v1
  _WORD *v8; // $v1

  if ( byte_8006E898[a1] != 1 )
    return -1;
  sub_8005A950(a1, a2);
  v7 = (a3 + 16 * (unsigned __int8)byte_8006E87F) << 16 >> 11;
  *(_BYTE *)(v7 + dword_8006E870) = *(_BYTE *)a4;
  *(_BYTE *)(v7 + dword_8006E870 + 1) = *(_BYTE *)(a4 + 1);
  *(_BYTE *)(v7 + dword_8006E870 + 2) = *(_BYTE *)(a4 + 2);
  *(_BYTE *)(v7 + dword_8006E870 + 3) = *(_BYTE *)(a4 + 3);
  *(_BYTE *)(v7 + dword_8006E870 + 4) = *(_BYTE *)(a4 + 4);
  *(_BYTE *)(v7 + dword_8006E870 + 5) = *(_BYTE *)(a4 + 5);
  *(_BYTE *)(v7 + dword_8006E870 + 7) = *(_BYTE *)(a4 + 7);
  *(_BYTE *)(v7 + dword_8006E870 + 6) = *(_BYTE *)(a4 + 6);
  *(_BYTE *)(v7 + dword_8006E870 + 8) = *(_BYTE *)(a4 + 8);
  *(_BYTE *)(v7 + dword_8006E870 + 9) = *(_BYTE *)(a4 + 9);
  *(_BYTE *)(v7 + dword_8006E870 + 10) = *(_BYTE *)(a4 + 10);
  *(_BYTE *)(v7 + dword_8006E870 + 11) = *(_BYTE *)(a4 + 11);
  *(_BYTE *)(v7 + dword_8006E870 + 12) = *(_BYTE *)(a4 + 12);
  *(_BYTE *)(v7 + dword_8006E870 + 13) = *(_BYTE *)(a4 + 13);
  v8 = (_WORD *)(v7 + dword_8006E870);
  v8[8] = *(_WORD *)(a4 + 16);
  v8[9] = *(_WORD *)(a4 + 18);
  v8[10] = *(_WORD *)(a4 + 20);
  result = 0;
  v8[11] = *(_WORD *)(a4 + 22);
  return result;
}
// 8006E870: using guessed type int dword_8006E870;
// 8006E87F: using guessed type char byte_8006E87F;

//----- (80057650) --------------------------------------------------------
void sub_80057650()
{
  word_8006E818 = 0;
}
// 8006E818: using guessed type __int16 word_8006E818;

//----- (80057660) --------------------------------------------------------
int sub_80057660()
{
  int result; // $v0

  result = 2;
  word_8006E818 = 2;
  return result;
}
// 8006E818: using guessed type __int16 word_8006E818;

//----- (80057674) --------------------------------------------------------
int sub_80057674()
{
  int v0; // $s1
  __int16 *v1; // $s2
  int v2; // $s0
  int v3; // $s1
  int v4; // $s2
  int *v5; // $v1
  int v6; // $s1
  int v7; // $s0
  int v8; // $s0
  int v9; // $s1
  char *v10; // $s0
  __int16 *v11; // $s6
  __int16 *v12; // $s5
  int v13; // $s2
  __int16 *v14; // $s4
  __int16 *v15; // $s3
  int result; // $v0
  int v17; // [sp+10h] [-58h] BYREF
  int v18; // [sp+14h] [-54h]
  __int16 v19; // [sp+18h] [-50h]
  __int16 v20; // [sp+1Ah] [-4Eh]
  __int16 v21; // [sp+24h] [-44h]
  int v22; // [sp+2Ch] [-3Ch]
  __int16 v23; // [sp+4Ah] [-1Eh]
  __int16 v24; // [sp+4Ch] [-1Ch]

  dword_8006E734 = ((_BYTE)dword_8006E734 + 1) & 0xF;
  dword_8006E738[dword_8006E734] = 0;
  v0 = 0;
  if ( byte_8006E874 )
  {
    v1 = word_8006E086;
    v2 = 0;
    do
    {
      SpuGetVoiceEnvelope(v0, v1);
      if ( !word_8006E086[v2] )
        dword_8006E738[dword_8006E734] |= 1 << v0;
      v1 += 27;
      ++v0;
      v2 += 27;
    }
    while ( v0 < (unsigned __int8)byte_8006E874 );
  }
  v3 = 0;
  if ( !byte_8006E8A8 )
  {
    v4 = -1;
    v5 = dword_8006E738;
    do
    {
      ++v3;
      v4 &= *v5++;
    }
    while ( v3 < 15 );
    v6 = 0;
    if ( byte_8006E874 )
    {
      v7 = 0;
      do
      {
        if ( (v4 & (1 << v6)) != 0 )
        {
          if ( byte_8006E09D[v7] == 2 )
            SpuSetNoiseVoice(0, 0xFFFFFF);
          byte_8006E09D[v7] = 0;
        }
        ++v6;
        v7 += 54;
      }
      while ( v6 < (unsigned __int8)byte_8006E874 );
    }
    v3 = 0;
  }
  v8 = 0;
  word_8006E078 &= ~word_8006E778;
  word_8006E07A &= ~word_8006E77A;
  do
  {
    if ( word_8006E09E[v8] )
      dword_8006E730(v3);
    if ( word_8006E0AA[v8] )
      dword_8006E5A8(v3);
    ++v3;
    v8 += 27;
  }
  while ( v3 < 24 );
  v9 = 0;
  v10 = &byte_8006E590;
  v11 = &word_8006E5BA;
  v12 = &word_8006E5B8;
  v13 = 0;
  v14 = &word_8006E5B2;
  v15 = &word_8006E5B0;
  do
  {
    v18 = 0;
    v17 = 1 << v9;
    if ( (*v10 & 1) != 0 )
    {
      v18 = 3;
      v19 = *v15;
      v20 = *v14;
    }
    if ( (*v10 & 4) != 0 )
    {
      v18 |= 0x10u;
      v21 = word_8006E5B4[v13];
    }
    if ( (*v10 & 8) != 0 )
    {
      v18 |= 0x80u;
      v22 = 8 * (unsigned __int16)word_8006E5B6[v13];
    }
    if ( (*v10 & 0x10) != 0 )
    {
      v18 |= 0x60000u;
      v23 = *v12;
      v24 = *v11;
    }
    if ( v18 )
      SpuSetVoiceAttr(&v17);
    *v10++ = 0;
    v11 += 8;
    v12 += 8;
    v13 += 8;
    v14 += 8;
    ++v9;
    v15 += 8;
  }
  while ( v9 < 24 );
  SpuSetKey(0, ((unsigned __int8)word_8006E77A << 16) | (unsigned __int16)word_8006E778);
  SpuSetKey(1, ((unsigned __int8)word_8006E07A << 16) | (unsigned __int16)word_8006E078);
  result = SpuSetReverbVoice(8, ((unsigned __int8)word_8006E07E << 16) | (unsigned __int16)word_8006E07C);
  word_8006E778 = 0;
  word_8006E77A = 0;
  word_8006E078 = 0;
  word_8006E07A = 0;
  return result;
}
// 80051274: using guessed type int __fastcall SpuSetReverbVoice(_DWORD, _DWORD);
// 80051714: using guessed type int __fastcall SpuSetKey(_DWORD, _DWORD);
// 80051F54: using guessed type int __fastcall SpuSetVoiceAttr(_DWORD);
// 80057AB0: using guessed type int __fastcall SpuSetNoiseVoice(_DWORD, _DWORD);
// 80057AE0: using guessed type int __fastcall SpuGetVoiceEnvelope(_DWORD, _DWORD);
// 8006E078: using guessed type __int16 word_8006E078;
// 8006E07A: using guessed type __int16 word_8006E07A;
// 8006E07C: using guessed type __int16 word_8006E07C;
// 8006E07E: using guessed type __int16 word_8006E07E;
// 8006E086: using guessed type __int16 word_8006E086[];
// 8006E09E: using guessed type __int16 word_8006E09E[];
// 8006E0AA: using guessed type __int16 word_8006E0AA[];
// 8006E590: using guessed type char byte_8006E590;
// 8006E5A8: using guessed type int (__fastcall *dword_8006E5A8)(_DWORD);
// 8006E5B0: using guessed type __int16 word_8006E5B0;
// 8006E5B2: using guessed type __int16 word_8006E5B2;
// 8006E5B4: using guessed type __int16 word_8006E5B4[];
// 8006E5B6: using guessed type __int16 word_8006E5B6[];
// 8006E5B8: using guessed type __int16 word_8006E5B8;
// 8006E5BA: using guessed type __int16 word_8006E5BA;
// 8006E730: using guessed type int (__fastcall *dword_8006E730)(_DWORD);
// 8006E734: using guessed type int dword_8006E734;
// 8006E738: using guessed type int dword_8006E738[16];
// 8006E778: using guessed type __int16 word_8006E778;
// 8006E77A: using guessed type __int16 word_8006E77A;
// 8006E874: using guessed type char byte_8006E874;
// 8006E8A8: using guessed type char byte_8006E8A8;

//----- (80057B00) --------------------------------------------------------
int __fastcall sub_80057B00(unsigned __int8 a1)
{
  int v2; // $s0
  int v3; // $v0
  int v4; // $s0
  int v5; // $v0
  int v6; // $s0
  int v7; // $v0
  unsigned __int16 v8; // $s0
  int v9; // $v0
  _DWORD v11[2]; // [sp+10h] [-40h] BYREF
  __int16 v12; // [sp+18h] [-38h]
  __int16 v13; // [sp+1Ah] [-36h]
  __int16 v14; // [sp+24h] [-2Ch]
  int v15; // [sp+2Ch] [-24h]
  __int16 v16; // [sp+4Ah] [-6h]
  __int16 v17; // [sp+4Ch] [-4h]

  spu_setInTransfer(0);
  word_8006E818 = 0;
  SpuInitMalloc(32, &unk_8006E940);
  v2 = 0;
  v3 = 0;
  do
  {
    word_8006E5B0[v3] = 0;
    v3 = (unsigned __int16)++v2;
  }
  while ( (unsigned __int16)v2 < 0xC0u );
  v4 = 0;
  v5 = 0;
  do
  {
    byte_8006E590[v5] = 0;
    v5 = (unsigned __int16)++v4;
  }
  while ( (unsigned __int16)v4 < 0x18u );
  word_8006E8F0 = 0;
  v6 = 0;
  v7 = 0;
  do
  {
    byte_8006E898[v7] = 0;
    v7 = (unsigned __int16)++v6;
  }
  while ( (unsigned __int16)v6 < 0x10u );
  if ( a1 < 0x18u )
    byte_8006E874 = a1;
  else
    byte_8006E874 = 24;
  v8 = 0;
  v11[1] = 393363;
  v14 = 4096;
  v15 = 4096;
  v16 = -32513;
  v12 = 0;
  v13 = 0;
  v17 = 0x4000;
  if ( byte_8006E874 )
  {
    do
    {
      v9 = 27 * v8;
      word_8006E082[v9] = 24;
      word_8006E090[v9] = -1;
      word_8006E080[v9] = 255;
      byte_8006E09D[v9 * 2] = 0;
      word_8006E084[v9] = 0;
      word_8006E086[v9] = 0;
      word_8006E092[v9] = 0;
      word_8006E094[v9] = 0;
      word_8006E096[v9] = 255;
      word_8006E088[v9] = 0;
      word_8006E08C[v9] = 0;
      byte_8006E08A[v9 * 2] = 64;
      word_8006E09E[v9] = 0;
      word_8006E0A0[v9] = 0;
      word_8006E0A2[v9] = 0;
      word_8006E0A4[v9] = 0;
      word_8006E0AA[v9] = 0;
      word_8006E0AC[v9] = 0;
      word_8006E0AE[v9] = 0;
      word_8006E0B0[v9] = 0;
      word_8006E0B2[v9] = 0;
      word_8006E0A6[v9] = 0;
      v11[0] = 1 << v8;
      SpuSetVoiceAttr(v11);
      word_8006E892 = v8;
      SsVmKeyOffNow(1);
      ++v8;
    }
    while ( v8 < (unsigned int)(unsigned __int8)byte_8006E874 );
  }
  word_8006E788 = 0x3FFF;
  word_8006E78A = 0x3FFF;
  word_8006E078 = 0;
  word_8006E07A = 0;
  word_8006E778 = 0;
  word_8006E07C = 0;
  word_8006E07E = 0;
  dword_8006E780 = 0;
  dword_8006E784 = 0;
  byte_8006E8A8 = 0;
  word_8006E860 = 0;
  word_8006E862 = 128;
  return sub_80057674();
}
// 8004F9B4: using guessed type int __fastcall SpuInitMalloc(_DWORD, _DWORD);
// 80051F54: using guessed type int __fastcall SpuSetVoiceAttr(_DWORD);
// 80057E20: using guessed type int __fastcall spu_setInTransfer(_DWORD);
// 80059238: using guessed type int __fastcall SsVmKeyOffNow(_DWORD);
// 8006E078: using guessed type __int16 word_8006E078;
// 8006E07A: using guessed type __int16 word_8006E07A;
// 8006E07C: using guessed type __int16 word_8006E07C;
// 8006E07E: using guessed type __int16 word_8006E07E;
// 8006E080: using guessed type __int16 word_8006E080[];
// 8006E082: using guessed type __int16 word_8006E082[];
// 8006E084: using guessed type __int16 word_8006E084[];
// 8006E086: using guessed type __int16 word_8006E086[];
// 8006E088: using guessed type __int16 word_8006E088[];
// 8006E08C: using guessed type __int16 word_8006E08C[];
// 8006E090: using guessed type __int16 word_8006E090[];
// 8006E092: using guessed type __int16 word_8006E092[];
// 8006E094: using guessed type __int16 word_8006E094[];
// 8006E096: using guessed type __int16 word_8006E096[];
// 8006E09E: using guessed type __int16 word_8006E09E[];
// 8006E0A0: using guessed type __int16 word_8006E0A0[];
// 8006E0A2: using guessed type __int16 word_8006E0A2[];
// 8006E0A4: using guessed type __int16 word_8006E0A4[];
// 8006E0A6: using guessed type __int16 word_8006E0A6[];
// 8006E0AA: using guessed type __int16 word_8006E0AA[];
// 8006E0AC: using guessed type __int16 word_8006E0AC[];
// 8006E0AE: using guessed type __int16 word_8006E0AE[];
// 8006E0B0: using guessed type __int16 word_8006E0B0[];
// 8006E0B2: using guessed type __int16 word_8006E0B2[];
// 8006E5B0: using guessed type __int16 word_8006E5B0[];
// 8006E778: using guessed type __int16 word_8006E778;
// 8006E780: using guessed type int dword_8006E780;
// 8006E784: using guessed type int dword_8006E784;
// 8006E788: using guessed type __int16 word_8006E788;
// 8006E78A: using guessed type __int16 word_8006E78A;
// 8006E818: using guessed type __int16 word_8006E818;
// 8006E860: using guessed type __int16 word_8006E860;
// 8006E862: using guessed type __int16 word_8006E862;
// 8006E874: using guessed type char byte_8006E874;
// 8006E892: using guessed type __int16 word_8006E892;
// 8006E8A8: using guessed type char byte_8006E8A8;
// 8006E8F0: using guessed type __int16 word_8006E8F0;

//----- (80057E60) --------------------------------------------------------
int __fastcall sub_80057E60(
        int a1,
        unsigned __int16 a2,
        __int16 a3,
        unsigned __int16 a4,
        unsigned __int16 a5,
        __int16 a6)
{
  int v8; // $s3
  __int16 v11; // $s5
  __int16 v12; // $s1
  int v14; // $a2
  int v15; // $s0
  int v16; // $s7
  bool v17; // dc
  int result; // $v0
  char *v19; // $v0
  unsigned __int8 v20; // $s4
  int v21; // $s1
  int v22; // $v1
  int v23; // $v1
  char *v24; // $v1
  int v25; // $v0
  __int16 v26; // $v0
  _BYTE v27[16]; // [sp+0h] [-128h] BYREF
  _BYTE v28[128]; // [sp+10h] [-118h] BYREF
  _BYTE v29[128]; // [sp+90h] [-98h] BYREF
  __int16 v30; // [sp+110h] [-18h]
  __int16 v31; // [sp+118h] [-10h]

  v8 = 0;
  v11 = a1;
  v12 = a2;
  v30 = a3;
  v14 = (unsigned __int8)a1;
  a1 <<= 16;
  v15 = a1 >> 16;
  v16 = dword_8006D7F0[v14] + 176 * HIBYTE(a1);
  v31 = a6;
  v17 = sub_8005A950(a2, a3) != 0;
  result = -1;
  if ( !v17 )
  {
    word_8006E88E = v11;
    byte_8006E87A = a4;
    byte_8006E87B = 0;
    byte_8006E87C = v15 == 33 ? a5 : a5 * *(__int16 *)(2 * *(unsigned __int8 *)(v16 + 23) + v16 + 96) / 127;
    byte_8006E87D = v31;
    v19 = (char *)(16 * v30 + dword_8006E864);
    byte_8006E882 = v19[1];
    byte_8006E883 = v19[4];
    byte_8006E878 = *v19;
    result = -1;
    if ( (unsigned __int8)byte_8006E87F < (unsigned int)*(unsigned __int16 *)(dword_8006E86C + 18) )
    {
      if ( !a5 )
        return sub_800583E4(v11, v12, v30, a4);
      v20 = sub_8005A320((int)v29, (int)v28);
      v21 = 0;
      if ( v20 )
      {
        v22 = 0;
        do
        {
          word_8006E890 = (unsigned __int8)v27[v22 + 16];
          v23 = (unsigned __int8)v29[v22];
          byte_8006E884 = v23;
          v24 = (char *)(32 * (v23 + 16 * (unsigned __int8)byte_8006E87F) + dword_8006E870);
          byte_8006E887 = *v24;
          byte_8006E885 = v24[2];
          byte_8006E886 = v24[3];
          byte_8006E888 = v24[4];
          byte_8006E889 = v24[5];
          byte_8006E88C = v24[1];
          byte_8006E88A = v24[6];
          byte_8006E88B = v24[7];
          v25 = (unsigned __int8)sub_80058658();
          word_8006E892 = v25;
          if ( v25 >= (unsigned __int8)byte_8006E874 )
          {
            v8 = -1;
          }
          else
          {
            byte_8006E09D[54 * v25] = 1;
            word_8006E082[27 * word_8006E892] = 0;
            word_8006E090[27 * word_8006E892] = v11;
            word_8006E098[27 * word_8006E892] = (unsigned __int8)byte_8006E879;
            word_8006E092[27 * word_8006E892] = (unsigned __int8)byte_8006E87F;
            word_8006E094[27 * word_8006E892] = v30;
            if ( v11 != 33 )
            {
              word_8006E088[27 * word_8006E892] = a5;
              word_8006E08C[27 * word_8006E892] = *(unsigned __int8 *)(v16 + 23);
            }
            byte_8006E08A[54 * word_8006E892] = v31;
            word_8006E096[27 * word_8006E892] = (unsigned __int8)byte_8006E884;
            word_8006E08E[27 * word_8006E892] = a4;
            word_8006E09A[27 * word_8006E892] = (unsigned __int8)byte_8006E887;
            word_8006E080[27 * word_8006E892] = word_8006E890;
            sub_800588E4();
            if ( word_8006E890 == 255 )
            {
              sub_80058CB4(word_8006E892);
            }
            else
            {
              v26 = sub_80058AF4();
              sub_80059308(v20, v26);
            }
            v8 |= 1 << word_8006E892;
          }
          v22 = (unsigned __int8)++v21;
        }
        while ( (unsigned __int8)v21 < (unsigned int)v20 );
      }
      return v8;
    }
  }
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E080: using guessed type __int16 word_8006E080[];
// 8006E082: using guessed type __int16 word_8006E082[];
// 8006E088: using guessed type __int16 word_8006E088[];
// 8006E08C: using guessed type __int16 word_8006E08C[];
// 8006E08E: using guessed type __int16 word_8006E08E[];
// 8006E090: using guessed type __int16 word_8006E090[];
// 8006E092: using guessed type __int16 word_8006E092[];
// 8006E094: using guessed type __int16 word_8006E094[];
// 8006E096: using guessed type __int16 word_8006E096[];
// 8006E098: using guessed type __int16 word_8006E098[];
// 8006E09A: using guessed type __int16 word_8006E09A[];
// 8006E864: using guessed type int dword_8006E864;
// 8006E86C: using guessed type int dword_8006E86C;
// 8006E870: using guessed type int dword_8006E870;
// 8006E874: using guessed type char byte_8006E874;
// 8006E878: using guessed type char byte_8006E878;
// 8006E879: using guessed type char byte_8006E879;
// 8006E87A: using guessed type char byte_8006E87A;
// 8006E87B: using guessed type char byte_8006E87B;
// 8006E87C: using guessed type char byte_8006E87C;
// 8006E87D: using guessed type char byte_8006E87D;
// 8006E87F: using guessed type char byte_8006E87F;
// 8006E882: using guessed type char byte_8006E882;
// 8006E883: using guessed type char byte_8006E883;
// 8006E884: using guessed type char byte_8006E884;
// 8006E885: using guessed type char byte_8006E885;
// 8006E886: using guessed type char byte_8006E886;
// 8006E887: using guessed type char byte_8006E887;
// 8006E888: using guessed type char byte_8006E888;
// 8006E889: using guessed type char byte_8006E889;
// 8006E88A: using guessed type char byte_8006E88A;
// 8006E88B: using guessed type char byte_8006E88B;
// 8006E88C: using guessed type char byte_8006E88C;
// 8006E88E: using guessed type __int16 word_8006E88E;
// 8006E890: using guessed type __int16 word_8006E890;
// 8006E892: using guessed type __int16 word_8006E892;

//----- (800583E4) --------------------------------------------------------
int __fastcall sub_800583E4(__int16 a1, __int16 a2, __int16 a3, unsigned __int16 a4)
{
  int v4; // $s0
  int v5; // $s1
  int v7; // $s4
  int v8; // $s3
  int v9; // $s2
  int v10; // $a1

  v4 = 0;
  v5 = 0;
  if ( byte_8006E874 )
  {
    v7 = a3;
    v8 = a1;
    v9 = a2;
    while ( 1 )
    {
      v10 = 27 * (unsigned __int8)v4;
      if ( word_8006E08E[v10] != a4 || word_8006E094[v10] != v7 || word_8006E090[v10] != v8 || word_8006E098[v10] != v9 )
        goto LABEL_10;
      if ( word_8006E080[v10] != 255 )
        break;
      ++v5;
      sub_800591E0(v4++);
LABEL_11:
      if ( (unsigned __int8)v4 >= (unsigned int)(unsigned __int8)byte_8006E874 )
        return v5;
    }
    word_8006E892 = (unsigned __int8)v4;
    SsVmKeyOffNow(0);
    ++v5;
LABEL_10:
    ++v4;
    goto LABEL_11;
  }
  return v5;
}
// 80059238: using guessed type int __fastcall SsVmKeyOffNow(_DWORD);
// 8006E080: using guessed type __int16 word_8006E080[];
// 8006E08E: using guessed type __int16 word_8006E08E[];
// 8006E090: using guessed type __int16 word_8006E090[];
// 8006E094: using guessed type __int16 word_8006E094[];
// 8006E098: using guessed type __int16 word_8006E098[];
// 8006E874: using guessed type char byte_8006E874;
// 8006E892: using guessed type __int16 word_8006E892;

//----- (80058530) --------------------------------------------------------
int __fastcall sub_80058530(
        unsigned __int16 a1,
        __int16 a2,
        unsigned __int16 a3,
        int a4,
        unsigned __int16 a5,
        unsigned __int16 a6)
{
  __int16 v7; // $v1
  unsigned __int16 v8; // $a1
  int v9; // $v0

  if ( a5 == a6 )
  {
    v7 = 64;
    v8 = a5;
  }
  else
  {
    v9 = a6 << 6;
    if ( a6 >= (unsigned int)a5 )
    {
      if ( !a6 )
        _break(7u, 0);
      if ( a6 == -1 && a5 << 6 == 0x80000000 )
        _break(6u, 0);
      v8 = a6;
      v7 = 127 - (a5 << 6) / a6;
    }
    else
    {
      if ( !a5 )
        _break(7u, 0);
      if ( a5 == -1 && v9 == 0x80000000 )
        _break(6u, 0);
      v8 = a5;
      v7 = v9 / a5;
    }
  }
  return sub_80057E60(33, a1, a2, a3, v8, v7);
}

//----- (8005861C) --------------------------------------------------------
int __fastcall sub_8005861C(__int16 a1, __int16 a2, unsigned __int16 a3)
{
  return sub_800583E4(33, a1, a2, a3);
}

//----- (80058650) --------------------------------------------------------
void nullsub_14()
{
  ;
}

//----- (80058658) --------------------------------------------------------
int sub_80058658()
{
  unsigned __int8 v0; // $s0
  unsigned __int16 v1; // $t3
  char v2; // $t2
  int v3; // $t0
  char v4; // $t1
  unsigned __int16 v5; // $t4
  unsigned __int8 v6; // $a3
  int v7; // $v0
  int v8; // $v1
  bool v9; // dc
  int v10; // $v0
  int v11; // $v1
  int v12; // $a2
  unsigned int v13; // $a1
  int v14; // $v1
  int v15; // $a3
  unsigned int v16; // $a0
  int v17; // $v1
  int v18; // $v0
  int v19; // $v1
  int result; // $v0

  v0 = 99;
  v1 = -1;
  v2 = 0;
  v3 = 0;
  v4 = 99;
  v5 = (unsigned __int8)byte_8006E887;
  v6 = 0;
  if ( byte_8006E874 )
  {
    v7 = 0;
    do
    {
      v8 = 27 * v7;
      v9 = byte_8006E09D[54 * v7] != 0;
      v10 = v6;
      if ( !v9 )
      {
        v10 = v6;
        if ( !word_8006E086[v8] )
        {
          v0 = v6;
          break;
        }
      }
      v11 = 27 * v10;
      v12 = word_8006E09A[27 * v10];
      if ( v12 >= v5 )
      {
        if ( v12 == v5 )
        {
          v13 = (unsigned __int16)word_8006E086[v11];
          ++v2;
          if ( v13 >= v1 )
          {
            if ( v13 != v1 )
              goto LABEL_15;
            v14 = word_8006E082[v11];
            if ( v3 >= v14 )
              goto LABEL_15;
            v3 = v14;
          }
          else
          {
            v3 = (unsigned __int16)word_8006E082[v11];
            v1 = word_8006E086[v11];
          }
          v4 = v6;
        }
      }
      else
      {
        v5 = word_8006E09A[27 * v10];
        v4 = v6;
        v1 = word_8006E086[v11];
        v3 = (unsigned __int16)word_8006E082[v11];
        v2 = 1;
      }
LABEL_15:
      v7 = ++v6;
    }
    while ( v6 < (unsigned int)(unsigned __int8)byte_8006E874 );
  }
  if ( v0 == 99 )
  {
    v0 = v4;
    if ( !v2 )
      v0 = byte_8006E874;
  }
  if ( v0 >= (unsigned int)(unsigned __int8)byte_8006E874 )
    goto LABEL_25;
  v15 = 0;
  if ( byte_8006E874 )
  {
    v16 = (unsigned __int8)byte_8006E874;
    v17 = 0;
    do
    {
      ++v15;
      word_8006E080[27 * v17 + 1] = word_8006E082[27 * v17] + 1;
      v17 = (unsigned __int8)v15;
    }
    while ( (unsigned __int8)v15 < v16 );
  }
  v18 = 27 * v0;
  word_8006E082[v18] = 0;
  word_8006E09A[v18] = (unsigned __int8)byte_8006E887;
  v19 = (unsigned __int8)byte_8006E09D[v18 * 2];
  result = v0;
  if ( v19 == 2 )
  {
    SpuSetNoiseVoice(0, 0xFFFFFF);
LABEL_25:
    result = v0;
  }
  word_8006E0AA[27 * result] = 0;
  return result;
}
// 80057AB0: using guessed type int __fastcall SpuSetNoiseVoice(_DWORD, _DWORD);
// 8006E080: using guessed type __int16 word_8006E080[];
// 8006E082: using guessed type __int16 word_8006E082[];
// 8006E086: using guessed type __int16 word_8006E086[];
// 8006E09A: using guessed type __int16 word_8006E09A[];
// 8006E0AA: using guessed type __int16 word_8006E0AA[];
// 8006E874: using guessed type char byte_8006E874;
// 8006E887: using guessed type char byte_8006E887;

//----- (800588E4) --------------------------------------------------------
int sub_800588E4()
{
  int v0; // $a3
  int *v1; // $a2
  __int16 v2; // $v0
  int v3; // $a0
  int result; // $v0

  v0 = 0;
  v1 = dword_8006E738;
  word_8006E894 = 8 * word_8006E892;
  word_8006E896 = (unsigned __int8)byte_8006E884 + 16 * (unsigned __int8)byte_8006E87F;
  word_8006E086[27 * word_8006E892] = 0x7FFF;
  do
  {
    ++v0;
    *v1++ &= ~(1 << word_8006E892);
  }
  while ( v0 < 16 );
  if ( (word_8006E890 & 1) != 0 )
    v2 = *(_WORD *)(16 * ((word_8006E890 - 1) / 2) + dword_8006E864 + 12);
  else
    v2 = *(_WORD *)(16 * ((word_8006E890 - 1) / 2) + dword_8006E864 + 14);
  word_8006E5B6[word_8006E894] = v2;
  byte_8006E590[word_8006E892] |= 8u;
  v3 = dword_8006E870;
  word_8006E5B8[word_8006E894] = *(_WORD *)(32 * (16 * (unsigned __int8)byte_8006E87F + (unsigned __int8)byte_8006E884)
                                          + dword_8006E870
                                          + 16);
  word_8006E5BA[word_8006E894] = *(_WORD *)(32 * (16 * (unsigned __int8)byte_8006E87F + (unsigned __int8)byte_8006E884)
                                          + v3
                                          + 18)
                               + word_8006E818;
  result = (unsigned __int8)byte_8006E590[word_8006E892] | 0x30;
  byte_8006E590[word_8006E892] = result;
  return result;
}
// 8006E086: using guessed type __int16 word_8006E086[];
// 8006E5B6: using guessed type __int16 word_8006E5B6[];
// 8006E5B8: using guessed type __int16 word_8006E5B8[];
// 8006E5BA: using guessed type __int16 word_8006E5BA[187];
// 8006E738: using guessed type int dword_8006E738[16];
// 8006E818: using guessed type __int16 word_8006E818;
// 8006E864: using guessed type int dword_8006E864;
// 8006E870: using guessed type int dword_8006E870;
// 8006E87F: using guessed type char byte_8006E87F;
// 8006E884: using guessed type char byte_8006E884;
// 8006E890: using guessed type __int16 word_8006E890;
// 8006E892: using guessed type __int16 word_8006E892;
// 8006E894: using guessed type __int16 word_8006E894;
// 8006E896: using guessed type __int16 word_8006E896;

//----- (80058AF4) --------------------------------------------------------
int sub_80058AF4()
{
  __int16 v0; // $v0
  unsigned int v1; // $a1
  __int16 v2; // $a2
  int v3; // $v0
  int v4; // $v1
  int v5; // $v0

  v0 = (unsigned __int8)byte_8006E87A + 60 - (unsigned __int8)byte_8006E888;
  v1 = (unsigned __int8)byte_8006E889 >> 3;
  v2 = v0 / 12;
  v3 = (v0 % 12) << 16;
  if ( v1 >= 0x10 )
    LOWORD(v1) = 15;
  v4 = (unsigned __int16)word_800606DC[(v3 >> 12) + (unsigned __int16)v1];
  v5 = (__int16)(v2 - 5);
  if ( v5 <= 0 )
  {
    if ( v5 < 0 )
      return (int)(unsigned __int16)v4 >> (5 - v2);
  }
  else
  {
    v4 <<= v2 - 5;
  }
  return (unsigned __int16)v4;
}
// 800606DC: using guessed type __int16 word_800606DC[];
// 8006E87A: using guessed type char byte_8006E87A;
// 8006E888: using guessed type char byte_8006E888;
// 8006E889: using guessed type char byte_8006E889;

//----- (80058BB8) --------------------------------------------------------
int __fastcall sub_80058BB8(int a1, unsigned __int16 a2)
{
  int v2; // $v1
  int v3; // $a1
  __int16 v4; // $a3
  int v5; // $a2
  int v6; // $v0
  int v7; // $v1
  int v8; // $a0
  int v9; // $v0
  int v10; // $v1

  v2 = 32 * ((unsigned __int8)byte_8006E884 + 16 * (unsigned __int8)byte_8006E87F) + dword_8006E870;
  v3 = (a2 + *(unsigned __int8 *)(v2 + 5)) / 8;
  v4 = v3;
  v5 = 0;
  if ( v3 >= 16 )
  {
    v5 = 1;
    v4 = v3 - 16;
  }
  v6 = (v5 + a1 + 60 - *(unsigned __int8 *)(v2 + 4)) << 16;
  v7 = (__int16)(v5 + a1 + 60 - *(unsigned __int8 *)(v2 + 4));
  v8 = ((int)((unsigned __int64)(715827883LL * v7) >> 32) >> 1) - (v6 >> 31);
  v9 = (__int16)(v8 - 5);
  v10 = (unsigned __int16)word_800606DC[((v7 - 12 * v8) << 16 >> 12) + v4];
  if ( v9 <= 0 )
  {
    if ( v9 < 0 )
      return (int)(unsigned __int16)v10 >> (5 - v8);
  }
  else
  {
    v10 <<= v8 - 5;
  }
  return (unsigned __int16)v10;
}
// 800606DC: using guessed type __int16 word_800606DC[];
// 8006E870: using guessed type int dword_8006E870;
// 8006E87F: using guessed type char byte_8006E87F;
// 8006E884: using guessed type char byte_8006E884;

//----- (80058CB4) --------------------------------------------------------
int __fastcall sub_80058CB4(unsigned __int8 a1)
{
  int v2; // $v1
  unsigned int v3; // kr00_4
  unsigned int v4; // $a3
  unsigned int v5; // $s2
  int v6; // $v1
  unsigned int v7; // $s1
  int v8; // $v1
  char v9; // $v0
  int v10; // $a1
  int v11; // $a3
  int v12; // $a0
  int v13; // $a2
  int v14; // $v1

  v2 = dword_8006D7F0[(unsigned __int8)word_8006E88E] + 176 * HIBYTE(word_8006E88E);
  v3 = 129
     * *(unsigned __int16 *)(v2 + 90)
     * (unsigned int)(unsigned __int8)byte_8006E882
     / 0x7F
     * (unsigned __int8)byte_8006E885;
  v4 = v3 / 0x7F;
  if ( (unsigned __int8)byte_8006E886 >= 0x40u )
  {
    v7 = v3 / 0x7F;
    v5 = 129
       * *(unsigned __int16 *)(v2 + 88)
       * (unsigned int)(unsigned __int8)byte_8006E882
       / 0x7F
       * (unsigned __int8)byte_8006E885
       / 0x7F
       * (127 - (unsigned __int8)byte_8006E886)
       / 0x3F;
  }
  else
  {
    v5 = 129
       * *(unsigned __int16 *)(v2 + 88)
       * (unsigned int)(unsigned __int8)byte_8006E882
       / 0x7F
       * (unsigned __int8)byte_8006E885
       / 0x7F;
    v6 = (68174085 * (unsigned __int64)(v4 * (unsigned __int8)byte_8006E886)) >> 32;
    v7 = (v6 + ((v4 * (unsigned __int8)byte_8006E886 - v6) >> 1)) >> 5;
  }
  if ( (unsigned __int8)byte_8006E883 >= 0x40u )
    v5 = v5 * (127 - (unsigned __int8)byte_8006E883) / 0x3F;
  else
    v7 = v7 * (unsigned __int8)byte_8006E883 / 0x3F;
  if ( (unsigned __int8)byte_8006E87D >= 0x40u )
    v5 = v5 * (127 - (unsigned __int8)byte_8006E87D) / 0x3F;
  else
    v7 = (unsigned __int8)byte_8006E87D * v7 / 0x3F;
  if ( word_8006E860 == 1 )
  {
    if ( v5 >= v7 )
      LOWORD(v7) = v5;
    else
      LOWORD(v5) = v7;
  }
  SpuSetNoiseClock((byte_8006E87A - byte_8006E888) & 0x3F);
  v8 = 8 * a1;
  word_8006E5B2[v8] = v7;
  v9 = byte_8006E590[a1];
  word_8006E5B0[v8] = v5;
  byte_8006E590[a1] = v9 | 3;
  if ( a1 >= 0x10u )
  {
    LOWORD(v10) = 0;
    v11 = 1 << (a1 - 16);
  }
  else
  {
    v10 = 1 << a1;
    LOWORD(v11) = 0;
  }
  v12 = (unsigned __int8)byte_8006E874;
  word_8006E084[27 * a1] = 10;
  v13 = 0;
  if ( v12 )
  {
    v14 = 0;
    do
    {
      ++v13;
      byte_8006E09D[54 * (v14 >> 16)] &= 1u;
      v14 = v13 << 16;
    }
    while ( (__int16)v13 < (int)(unsigned __int8)byte_8006E874 );
  }
  byte_8006E09D[54 * a1] = 2;
  word_8006E078 |= v10;
  word_8006E07A |= v11;
  word_8006E778 &= ~word_8006E078;
  word_8006E77A &= ~word_8006E07A;
  if ( (byte_8006E88C & 4) != 0 )
  {
    word_8006E07C |= v10;
    word_8006E07E |= v11;
  }
  else
  {
    word_8006E07C &= ~(_WORD)v10;
    word_8006E07E &= ~(_WORD)v11;
  }
  return SpuSetNoiseVoice(1, ((unsigned __int8)v11 << 16) | (__int16)v10);
}
// 80057AB0: using guessed type int __fastcall SpuSetNoiseVoice(_DWORD, _DWORD);
// 80059190: using guessed type int __fastcall SpuSetNoiseClock(_DWORD);
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E078: using guessed type __int16 word_8006E078;
// 8006E07A: using guessed type __int16 word_8006E07A;
// 8006E07C: using guessed type __int16 word_8006E07C;
// 8006E07E: using guessed type __int16 word_8006E07E;
// 8006E084: using guessed type __int16 word_8006E084[];
// 8006E5B0: using guessed type __int16 word_8006E5B0[];
// 8006E5B2: using guessed type __int16 word_8006E5B2[];
// 8006E778: using guessed type __int16 word_8006E778;
// 8006E77A: using guessed type __int16 word_8006E77A;
// 8006E860: using guessed type __int16 word_8006E860;
// 8006E874: using guessed type char byte_8006E874;
// 8006E87A: using guessed type char byte_8006E87A;
// 8006E87D: using guessed type char byte_8006E87D;
// 8006E882: using guessed type char byte_8006E882;
// 8006E883: using guessed type char byte_8006E883;
// 8006E885: using guessed type char byte_8006E885;
// 8006E886: using guessed type char byte_8006E886;
// 8006E888: using guessed type char byte_8006E888;
// 8006E88C: using guessed type char byte_8006E88C;
// 8006E88E: using guessed type __int16 word_8006E88E;

//----- (800591E0) --------------------------------------------------------
int __fastcall sub_800591E0(unsigned __int8 a1)
{
  int v1; // $v0

  v1 = 27 * a1;
  word_8006E084[v1] = 0;
  byte_8006E09D[v1 * 2] = 0;
  return SpuSetNoiseVoice(0, 0xFFFFFF);
}
// 80057AB0: using guessed type int __fastcall SpuSetNoiseVoice(_DWORD, _DWORD);
// 8006E084: using guessed type __int16 word_8006E084[];

//----- (80059308) --------------------------------------------------------
int __fastcall sub_80059308(int a1, __int16 a2)
{
  unsigned int v3; // $a2
  int v4; // $v1
  unsigned int v5; // $a3
  unsigned int v6; // $lo
  unsigned int v7; // $a2
  unsigned int v8; // $a1
  int v9; // $v1
  int v10; // $a2
  int v11; // $a1
  int result; // $v0

  v3 = (unsigned __int8)byte_8006E87C
     * 0x3FFF
     * *(unsigned __int8 *)(dword_8006E86C + 24)
     / 16129
     * (unsigned __int8)byte_8006E882
     * (unsigned int)(unsigned __int8)byte_8006E885
     / 0x3F01;
  v4 = dword_8006D7F0[(unsigned __int8)word_8006E88E] + 176 * HIBYTE(word_8006E88E);
  v5 = v3;
  if ( word_8006E88E != 33 )
  {
    v5 = v3 * *(unsigned __int16 *)(v4 + 88) / 0x7F;
    v3 = v3 * *(unsigned __int16 *)(v4 + 90) / 0x7F;
  }
  v6 = v3 * (unsigned __int8)byte_8006E886;
  if ( (unsigned __int8)byte_8006E886 >= 0x40u )
  {
    v8 = v3;
    v7 = v5 * (127 - (unsigned __int8)byte_8006E886) / 0x3F;
  }
  else
  {
    v7 = v5;
    v8 = v6 / 0x3F;
  }
  if ( (unsigned __int8)byte_8006E883 >= 0x40u )
    v7 = v7 * (127 - (unsigned __int8)byte_8006E883) / 0x3F;
  else
    v8 = v8 * (unsigned __int8)byte_8006E883 / 0x3F;
  if ( (unsigned __int8)byte_8006E87D >= 0x40u )
    v7 = v7 * (127 - (unsigned __int8)byte_8006E87D) / 0x3F;
  else
    v8 = v8 * (unsigned __int8)byte_8006E87D / 0x3F;
  if ( word_8006E860 == 1 )
  {
    if ( v7 >= v8 )
      v8 = v7;
    else
      v7 = v8;
  }
  if ( word_8006E88E != 33 )
  {
    v7 = v7 * v7 / 0x3FFF;
    v8 = v8 * v8 / 0x3FFF;
  }
  v9 = (unsigned __int16)(8 * word_8006E892);
  word_8006E5B4[v9] = a2;
  word_8006E5B0[v9] = v7;
  word_8006E5B2[v9] = v8;
  byte_8006E590[word_8006E892] |= 7u;
  word_8006E084[27 * word_8006E892] = a2;
  if ( word_8006E892 >= 16 )
  {
    LOWORD(v10) = 0;
    v11 = 1 << (word_8006E892 - 16);
  }
  else
  {
    v10 = 1 << word_8006E892;
    LOWORD(v11) = 0;
  }
  if ( (byte_8006E88C & 4) != 0 )
  {
    word_8006E07C |= v10;
    word_8006E07E |= v11;
  }
  else
  {
    word_8006E07C &= ~(_WORD)v10;
    word_8006E07E &= ~(_WORD)v11;
  }
  word_8006E078 |= v10;
  word_8006E778 &= ~word_8006E078;
  word_8006E07A |= v11;
  result = (unsigned __int16)(word_8006E77A & ~word_8006E07A);
  word_8006E77A &= ~word_8006E07A;
  return result;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E078: using guessed type __int16 word_8006E078;
// 8006E07A: using guessed type __int16 word_8006E07A;
// 8006E07C: using guessed type __int16 word_8006E07C;
// 8006E07E: using guessed type __int16 word_8006E07E;
// 8006E084: using guessed type __int16 word_8006E084[];
// 8006E5B0: using guessed type __int16 word_8006E5B0[];
// 8006E5B2: using guessed type __int16 word_8006E5B2[];
// 8006E5B4: using guessed type __int16 word_8006E5B4[];
// 8006E778: using guessed type __int16 word_8006E778;
// 8006E77A: using guessed type __int16 word_8006E77A;
// 8006E860: using guessed type __int16 word_8006E860;
// 8006E86C: using guessed type int dword_8006E86C;
// 8006E87C: using guessed type char byte_8006E87C;
// 8006E87D: using guessed type char byte_8006E87D;
// 8006E882: using guessed type char byte_8006E882;
// 8006E883: using guessed type char byte_8006E883;
// 8006E885: using guessed type char byte_8006E885;
// 8006E886: using guessed type char byte_8006E886;
// 8006E88C: using guessed type char byte_8006E88C;
// 8006E88E: using guessed type __int16 word_8006E88E;
// 8006E892: using guessed type __int16 word_8006E892;

//----- (80059B38) --------------------------------------------------------
int __fastcall sub_80059B38(unsigned __int16 a1, __int16 a2)
{
  int v2; // $s0
  bool v3; // dc
  int result; // $v0

  v2 = a2;
  v3 = sub_8005A950(a1, a2) != 0;
  result = -1;
  if ( !v3 )
    return *(unsigned __int8 *)(16 * v2 + dword_8006E864 + 1);
  return result;
}
// 8006E864: using guessed type int dword_8006E864;

//----- (80059B8C) --------------------------------------------------------
int __fastcall sub_80059B8C(unsigned __int16 a1, __int16 a2, char a3)
{
  int v4; // $s0
  bool v5; // dc
  int result; // $v0

  v4 = a2;
  v5 = sub_8005A950(a1, a2) != 0;
  result = -1;
  if ( !v5 )
  {
    *(_BYTE *)(16 * v4 + dword_8006E864 + 4) = a3;
    return *(unsigned __int8 *)(16 * v4 + dword_8006E864 + 4);
  }
  return result;
}
// 8006E864: using guessed type int dword_8006E864;

//----- (80059C00) --------------------------------------------------------
int __fastcall sub_80059C00(unsigned __int16 a1, __int16 a2)
{
  int v2; // $s0
  bool v3; // dc
  int result; // $v0

  v2 = a2;
  v3 = sub_8005A950(a1, a2) != 0;
  result = -1;
  if ( !v3 )
    return *(unsigned __int8 *)(16 * v2 + dword_8006E864 + 4);
  return result;
}
// 8006E864: using guessed type int dword_8006E864;

//----- (80059C54) --------------------------------------------------------
int __fastcall sub_80059C54(__int16 a1, __int16 a2, __int16 a3)
{
  int v3; // $s2
  bool v5; // dc
  int v6; // $s1
  int v7; // $v1
  int v8; // $s0
  int v9; // $v0
  int v10; // $a2
  unsigned int v11; // kr00_4
  unsigned int v12; // $a0
  unsigned int v13; // $v1
  unsigned int v14; // $a3
  unsigned int v15; // $a1
  unsigned int v16; // $a1
  int v17; // $a2

  v3 = dword_8006D7F0[(unsigned __int8)a1] + 176 * ((a1 & 0xFF00) >> 8);
  *(_WORD *)(v3 + 88) = a2;
  v5 = *(unsigned __int16 *)(v3 + 88) < 0x7Fu;
  *(_WORD *)(v3 + 90) = a3;
  if ( !v5 )
    *(_WORD *)(v3 + 88) = 127;
  if ( *(unsigned __int16 *)(v3 + 90) >= 0x7Fu )
    *(_WORD *)(v3 + 90) = 127;
  v6 = 0;
  if ( byte_8006E874 )
  {
    v7 = 0;
    do
    {
      v8 = 27 * (v7 >> 16);
      v9 = v6 + 1;
      if ( word_8006E090[v8] == a1 )
      {
        sub_8005A950(word_8006E098[v8], word_8006E092[v8]);
        v10 = 32 * (16 * word_8006E092[v8] + word_8006E096[v8]) + dword_8006E870;
        v11 = *(unsigned __int8 *)(dword_8006E86C + 24)
            * 0x3FFF
            * (word_8006E088[v8]
             * *(__int16 *)(2 * word_8006E08C[v8] + v3 + 96)
             / 127)
            / 16129
            * *(unsigned __int8 *)(16 * word_8006E094[v8] + dword_8006E864 + 1)
            * *(unsigned __int8 *)(v10 + 2);
        v12 = v11 / 0x3F01 * *(unsigned __int16 *)(v3 + 88) / 0x7F;
        v13 = *(unsigned __int8 *)(v10 + 3);
        if ( v13 >= 0x40 )
        {
          v14 = v11 / 0x3F01 * *(unsigned __int16 *)(v3 + 90) / 0x7F;
          v12 = v12 * (127 - v13) / 0x3F;
        }
        else
        {
          v14 = v11 / 0x3F01 * *(unsigned __int16 *)(v3 + 90) / 0x7F * v13 / 0x3F;
        }
        v15 = *(unsigned __int8 *)(16 * word_8006E094[27 * (__int16)v6] + dword_8006E864 + 4);
        if ( v15 >= 0x40 )
          v12 = (int)((unsigned __int16)v12 * (127 - v15)) / 63;
        else
          v14 = (unsigned int)((unsigned __int64)(2181570691LL * (int)((unsigned __int16)v14 * v15)) >> 32) >> 5;
        v16 = (unsigned __int8)byte_8006E08A[54 * (__int16)v6];
        if ( v16 >= 0x40 )
          v12 = (int)((unsigned __int16)v12 * (127 - v16)) / 63;
        else
          v14 = (unsigned int)((unsigned __int64)(2181570691LL * (int)((unsigned __int16)v14 * v16)) >> 32) >> 5;
        if ( word_8006E860 == 1 )
        {
          if ( (unsigned __int16)v12 >= (unsigned int)(unsigned __int16)v14 )
            LOWORD(v14) = v12;
          else
            LOWORD(v12) = v14;
        }
        v17 = 8 * (__int16)v6;
        word_8006E5B2[v17] = ((int)(((unsigned __int64)((unsigned __int16)v14
                                                      * (unsigned __int16)v14
                                                      * (__int64)(int)&loc_80020008) >> 32)
                                  + (unsigned __int16)v14 * (unsigned __int16)v14) >> 13)
                           - ((__int16)(((unsigned __int16)v14 * (unsigned int)(unsigned __int16)v14) >> 16) >> 15);
        byte_8006E590[(__int16)v6] |= 3u;
        word_8006E5B0[v17] = ((int)(((unsigned __int64)((unsigned __int16)v12
                                                      * (unsigned __int16)v12
                                                      * (__int64)(int)&loc_80020008) >> 32)
                                  + (unsigned __int16)v12 * (unsigned __int16)v12) >> 13)
                           - ((__int16)(((unsigned __int16)v12 * (unsigned int)(unsigned __int16)v12) >> 16) >> 15);
        v9 = v6 + 1;
      }
      v6 = v9;
      v7 = v9 << 16;
    }
    while ( (__int16)v9 < (int)(unsigned __int8)byte_8006E874 );
  }
  return a1;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E088: using guessed type __int16 word_8006E088[];
// 8006E08C: using guessed type __int16 word_8006E08C[];
// 8006E090: using guessed type __int16 word_8006E090[];
// 8006E092: using guessed type __int16 word_8006E092[];
// 8006E094: using guessed type __int16 word_8006E094[];
// 8006E096: using guessed type __int16 word_8006E096[];
// 8006E098: using guessed type __int16 word_8006E098[];
// 8006E5B0: using guessed type __int16 word_8006E5B0[];
// 8006E5B2: using guessed type __int16 word_8006E5B2[];
// 8006E860: using guessed type __int16 word_8006E860;
// 8006E864: using guessed type int dword_8006E864;
// 8006E86C: using guessed type int dword_8006E86C;
// 8006E870: using guessed type int dword_8006E870;
// 8006E874: using guessed type char byte_8006E874;

//----- (8005A190) --------------------------------------------------------
int __fastcall sub_8005A190(__int16 a1, _WORD *a2, _WORD *a3)
{
  int v3; // $v1
  int v4; // $v1

  v3 = dword_8006D7F0[(unsigned __int8)a1];
  word_8006E88E = a1;
  v4 = v3 + 176 * ((a1 & 0xFF00) >> 8);
  *a2 = *(_WORD *)(v4 + 88);
  *a3 = *(_WORD *)(v4 + 90);
  return word_8006E88E;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E88E: using guessed type __int16 word_8006E88E;

//----- (8005A284) --------------------------------------------------------
int __fastcall sub_8005A284(__int16 a1)
{
  int result; // $v0
  unsigned __int8 v2; // $s0
  int v3; // $s1

  result = (unsigned __int8)byte_8006E874;
  v2 = 0;
  if ( byte_8006E874 )
  {
    v3 = a1;
    result = 0;
    do
    {
      if ( word_8006E090[27 * result] == v3 )
      {
        word_8006E892 = v2;
        SsVmKeyOffNow(0);
      }
      result = ++v2;
    }
    while ( v2 < (unsigned int)(unsigned __int8)byte_8006E874 );
  }
  return result;
}
// 80059238: using guessed type int __fastcall SsVmKeyOffNow(_DWORD);
// 8006E090: using guessed type __int16 word_8006E090[];
// 8006E874: using guessed type char byte_8006E874;
// 8006E892: using guessed type __int16 word_8006E892;

//----- (8005A320) --------------------------------------------------------
int __fastcall sub_8005A320(int a1, int a2)
{
  unsigned __int8 v3; // $a3
  unsigned __int8 v4; // $a2
  int v5; // $a0
  int v6; // $v0
  unsigned __int8 v7; // $v1

  v3 = 0;
  v4 = 0;
  if ( byte_8006E878 )
  {
    do
    {
      v5 = 32 * (16 * (unsigned __int8)byte_8006E87F + v4) + dword_8006E870;
      if ( (unsigned __int8)byte_8006E87A >= (unsigned int)*(unsigned __int8 *)(v5 + 6) )
      {
        v6 = v3;
        if ( *(unsigned __int8 *)(v5 + 7) >= (unsigned int)(unsigned __int8)byte_8006E87A )
        {
          v7 = v3++;
          *(_BYTE *)(a2 + v6) = *(_WORD *)(v5 + 22);
          *(_BYTE *)(a1 + v7) = v4;
        }
      }
      ++v4;
    }
    while ( v4 < (unsigned int)(unsigned __int8)byte_8006E878 );
  }
  return v3;
}
// 8006E870: using guessed type int dword_8006E870;
// 8006E878: using guessed type char byte_8006E878;
// 8006E87A: using guessed type char byte_8006E87A;
// 8006E87F: using guessed type char byte_8006E87F;

//----- (8005A3D4) --------------------------------------------------------
int __fastcall sub_8005A3D4(__int16 a1, signed __int16 a2, __int16 a3, unsigned __int16 a4, __int16 a5)
{
  int v6; // $s4
  int v9; // $s0
  unsigned __int8 v10; // $s2
  int v11; // $s1
  int v12; // $t1
  int v13; // $t5
  int v14; // $s0
  int v15; // $v1
  int v16; // $a0
  int v17; // $v0
  int v18; // $a0
  int v19; // $v0
  int v20; // $a3
  int v21; // $a2
  unsigned int v22; // kr00_4
  unsigned int v23; // $v1
  unsigned int v24; // kr04_4
  unsigned int v25; // $a1
  unsigned int v26; // $v1
  unsigned int v27; // $a2
  unsigned int v28; // $a1
  unsigned int v29; // $v1
  int v30; // $v1

  v6 = 0;
  v9 = a3;
  v10 = a5;
  v11 = dword_8006D7F0[(unsigned __int8)a1] + 176 * ((a1 & 0xFF00) >> 8);
  sub_8005A950(a2, a3);
  word_8006E88E = a1;
  if ( !a5 )
    v10 = 1;
  if ( !a4 )
    a4 = 1;
  v12 = 0;
  if ( byte_8006E874 )
  {
    v13 = v9;
    v14 = 16 * v9;
    v15 = 0;
    while ( 1 )
    {
      v16 = 27 * (v15 >> 16);
      v17 = v12 + 1;
      if ( word_8006E090[v16] == a1 )
      {
        v17 = v12 + 1;
        if ( word_8006E094[v16] == v13 )
        {
          v17 = v12 + 1;
          if ( word_8006E098[v16] == a2 )
            break;
        }
      }
LABEL_28:
      v12 = v17;
      v15 = v17 << 16;
      if ( (__int16)v17 >= (int)(unsigned __int8)byte_8006E874 )
        return v6;
    }
    v18 = 2 * *(unsigned __int8 *)(v11 + 23) + v11;
    if ( *(__int16 *)(v18 + 96) != a4 )
    {
      v19 = v12 << 16;
      if ( *(_WORD *)(v18 + 96) )
      {
LABEL_14:
        v20 = 27 * (v19 >> 16);
        v21 = 32 * (16 * word_8006E092[v20] + word_8006E096[v20]) + dword_8006E870;
        v22 = word_8006E088[v20]
            * a4
            / 127
            * 0x3FFF
            * *(unsigned __int8 *)(dword_8006E86C + 24)
            / 16129
            * *(unsigned __int8 *)(v14 + dword_8006E864 + 1)
            * *(unsigned __int8 *)(v21 + 2);
        v23 = v22 / 0x3F01 * *(unsigned __int16 *)(v11 + 90);
        v24 = v23;
        v25 = ((33818641 * (unsigned __int64)v23) >> 32)
            + ((unsigned int)(v23 - ((33818641 * (unsigned __int64)v23) >> 32)) >> 1);
        v26 = *(unsigned __int8 *)(v21 + 3);
        if ( v26 >= 0x40 )
        {
          v28 = v25 >> 6;
          v27 = v22 / 0x3F01 * *(unsigned __int16 *)(v11 + 88) / 0x7F * (127 - v26) / 0x3F;
        }
        else
        {
          v27 = v22 / 0x3F01 * *(unsigned __int16 *)(v11 + 88) / 0x7F;
          v28 = v24 / 0x7F * v26 / 0x3F;
        }
        v29 = *(unsigned __int8 *)(16 * word_8006E094[27 * (__int16)v12] + dword_8006E864 + 4);
        if ( v29 >= 0x40 )
          v27 = v27 * (127 - v29) / 0x3F;
        else
          v28 = v28 * *(unsigned __int8 *)(16 * word_8006E094[27 * (__int16)v12] + dword_8006E864 + 4) / 0x3F;
        if ( v10 >= 0x40u )
          v27 = v27 * (127 - v10) / 0x3F;
        else
          v28 = v28 * v10 / 0x3F;
        if ( word_8006E860 == 1 )
        {
          if ( v27 >= v28 )
            v28 = v27;
          else
            v27 = v28;
        }
        v30 = 8 * (__int16)v12;
        word_8006E5B0[v30] = v27 * v27 / 0x3FFF;
        word_8006E5B2[v30] = v28 * v28 / 0x3FFF;
        ++v6;
        byte_8006E590[(__int16)v12] |= 3u;
        v17 = v12 + 1;
        goto LABEL_28;
      }
      *(_WORD *)(v18 + 96) = 1;
    }
    v19 = v12 << 16;
    goto LABEL_14;
  }
  return v6;
}
// 8006D7F0: using guessed type int dword_8006D7F0[32];
// 8006E088: using guessed type __int16 word_8006E088[];
// 8006E090: using guessed type __int16 word_8006E090[];
// 8006E092: using guessed type __int16 word_8006E092[];
// 8006E094: using guessed type __int16 word_8006E094[];
// 8006E096: using guessed type __int16 word_8006E096[];
// 8006E098: using guessed type __int16 word_8006E098[];
// 8006E5B0: using guessed type __int16 word_8006E5B0[];
// 8006E5B2: using guessed type __int16 word_8006E5B2[];
// 8006E860: using guessed type __int16 word_8006E860;
// 8006E864: using guessed type int dword_8006E864;
// 8006E86C: using guessed type int dword_8006E86C;
// 8006E870: using guessed type int dword_8006E870;
// 8006E874: using guessed type char byte_8006E874;
// 8006E88E: using guessed type __int16 word_8006E88E;

//----- (8005A950) --------------------------------------------------------
int __fastcall sub_8005A950(unsigned __int16 a1, __int16 a2)
{
  char v2; // $a3
  char v3; // $t0
  int result; // $v0
  int v5; // $v1
  int v6; // $v0
  int v7; // $a1
  int v8; // $a0
  int v9; // $a2
  int v10; // $v1

  v2 = a1;
  v3 = a2;
  if ( a1 >= 0x10u )
    return -1;
  result = -1;
  if ( byte_8006E898[(__int16)a1] != 1 )
    return result;
  v5 = a2;
  v6 = (__int16)a1;
  if ( a2 >= word_8006E862 )
    return -1;
  v7 = dword_8006E7D8[v6];
  v8 = dword_8006E798[v6];
  v9 = dword_8006E820[v6];
  byte_8006E879 = v2;
  byte_8006E87E = v3;
  v10 = *(_DWORD *)(16 * v5 + v8 + 8);
  result = 0;
  dword_8006E86C = v7;
  dword_8006E864 = v8;
  dword_8006E870 = v9;
  byte_8006E87F = v10;
  return result;
}
// 8006E798: using guessed type int dword_8006E798[];
// 8006E7D8: using guessed type int dword_8006E7D8[];
// 8006E820: using guessed type int dword_8006E820[];
// 8006E862: using guessed type __int16 word_8006E862;
// 8006E864: using guessed type int dword_8006E864;
// 8006E86C: using guessed type int dword_8006E86C;
// 8006E870: using guessed type int dword_8006E870;
// 8006E879: using guessed type char byte_8006E879;
// 8006E87E: using guessed type char byte_8006E87E;
// 8006E87F: using guessed type char byte_8006E87F;

//----- (8005AA14) --------------------------------------------------------
int sub_8005AA14()
{
  int result; // $v0

  result = 1;
  word_8006E860 = 1;
  return result;
}
// 8006E860: using guessed type __int16 word_8006E860;

//----- (8005AA28) --------------------------------------------------------
void sub_8005AA28()
{
  word_8006E860 = 0;
}
// 8006E860: using guessed type __int16 word_8006E860;

//----- (8005AA38) --------------------------------------------------------
int __fastcall sub_8005AA38(unsigned __int8 a1)
{
  int result; // $v0

  if ( a1 >= 0x19u )
    return 255;
  result = a1;
  if ( !a1 )
    return 255;
  byte_8006E874 = a1;
  return result;
}
// 8006E874: using guessed type char byte_8006E874;

//----- (8005AEDC) --------------------------------------------------------
int __fastcall sub_8005AEDC(int a1, __int16 a2)
{
  return (__int16)sub_8005AF6C(a1, a2, 0, 0);
}

//----- (8005AF0C) --------------------------------------------------------
int __fastcall sub_8005AF0C(int a1, __int16 a2, int a3)
{
  return (__int16)sub_8005AF6C(a1, a2, 1, a3);
}

//----- (8005AF3C) --------------------------------------------------------
int __fastcall sub_8005AF3C(int a1, __int16 a2, int a3)
{
  return (__int16)sub_8005AF6C(a1, a2, 1, a3);
}

//----- (8005AF6C) --------------------------------------------------------
int __fastcall sub_8005AF6C(int a1, int a2, int a3, int a4)
{
  int v6; // $s1
  int result; // $v0
  int v10; // $a1
  int v11; // $v0
  __int16 v12; // $v0
  int v13; // $a3
  int v14; // $a0
  int v15; // $a2
  __int16 v16; // $v0
  int v17; // $s2
  int v18; // $a2
  int v19; // $a1
  int v20; // $s0
  int v21; // $a3
  unsigned __int8 *v22; // $v1
  int v23; // $v0
  int v24; // $s0
  int *v25; // $a1
  int v26; // $s3
  unsigned __int16 *v27; // $a2
  int v28; // $v1
  int v29; // $v0
  int v30; // $a3
  unsigned int v31; // $v1
  int v32; // $s0
  int v33; // $a1
  _DWORD *v34; // $a0
  _DWORD v35[256]; // [sp+10h] [-408h] BYREF
  char v36; // [sp+410h] [-8h] BYREF

  LOWORD(v6) = 16;
  if ( spu_getInTransfer() == 1 )
    return -1;
  spu_setInTransfer(1);
  if ( (__int16)a2 >= 16 )
    goto LABEL_13;
  v10 = 0;
  if ( (__int16)a2 == -1 )
  {
    while ( byte_8006E898[v10] )
    {
      ++v10;
      v11 = 0x100000;
      if ( v10 >= 16 )
        goto LABEL_12;
    }
    byte_8006E898[v10] = 1;
    v12 = word_8006E8F0;
    v6 = v10;
    goto LABEL_11;
  }
  v11 = 0x100000;
  if ( !byte_8006E898[(__int16)a2] )
  {
    byte_8006E898[(__int16)a2] = 1;
    v12 = word_8006E8F0;
    v6 = a2;
LABEL_11:
    word_8006E8F0 = v12 + 1;
    v11 = v6 << 16;
  }
LABEL_12:
  v13 = v11 >> 16;
  if ( v11 >> 16 >= 16 )
  {
LABEL_13:
    spu_setInTransfer(0);
    return -1;
  }
  dword_8006E7D8[v13] = a1;
  v14 = a1;
  v15 = a1 + 32;
  if ( *(_DWORD *)a1 >> 8 != 5652802 )
  {
    byte_8006E898[v13] = 0;
LABEL_36:
    spu_setInTransfer(0);
    --word_8006E8F0;
    return -1;
  }
  v16 = 64;
  if ( (unsigned __int8)*(_DWORD *)a1 == 112 )
  {
    v16 = 64;
    if ( *(int *)(a1 + 4) >= 5 )
      v16 = 128;
  }
  word_8006E862 = v16;
  v17 = a1 + 32;
  if ( v16 < (int)*(unsigned __int16 *)(a1 + 18) )
    goto LABEL_35;
  dword_8006E798[(__int16)v6] = v15;
  v18 = v15 + 16 * v16;
  v19 = 0;
  v20 = 0;
  v21 = v16;
  v22 = (unsigned __int8 *)(a1 + 32);
  do
  {
    v23 = *v22;
    *((_DWORD *)v22 + 2) = v20;
    if ( v23 )
      ++v20;
    ++v19;
    v22 += 16;
  }
  while ( v19 < v21 );
  v24 = 0;
  v25 = v35;
  dword_8006E820[(__int16)v6] = v18;
  v26 = *(unsigned __int8 *)(a1 + 22);
  v27 = (unsigned __int16 *)(v18 + (*(unsigned __int16 *)(v14 + 18) << 9));
  do
  {
    if ( (int)&v35[v26] >= (int)v25 )
    {
      v28 = *v27;
      v29 = 4 * v28;
      if ( *(int *)(v14 + 4) >= 5 )
        v29 = 8 * v28;
      *v25 = v29;
      v24 += *v25;
    }
    ++v25;
    ++v27;
  }
  while ( (int)v25 < (int)&v36 );
  v30 = a4;
  if ( a3 << 16 )
  {
    v31 = a4 + v24;
  }
  else
  {
    v30 = SpuMalloc(v24, v25, v27, a4);
    v31 = v30 + v24;
    if ( v30 == -1 )
      goto LABEL_35;
  }
  v32 = 0;
  if ( v31 > 0x80000 )
  {
LABEL_35:
    byte_8006E898[(__int16)v6] = 0;
    goto LABEL_36;
  }
  dword_8006E8F8[(__int16)v6] = v30;
  v33 = 0;
  v34 = v35;
  do
  {
    v32 += *v34;
    if ( (v33 & 1) != 0 )
      *(_WORD *)(16 * (v33 / 2) + v17 + 14) = (unsigned int)(v30 + v32) >> 3;
    else
      *(_WORD *)(16 * (v33 / 2) + v17 + 12) = (unsigned int)(v30 + v32) >> 3;
    ++v33;
    ++v34;
  }
  while ( (unsigned __int8)v26 >= v33 );
  result = (__int16)v6;
  dword_8006E8B0[(__int16)v6] = v32;
  byte_8006E898[(__int16)v6] = 2;
  return result;
}
// 8005B138: conditional instruction was optimized away because $v1.4 is in (==40|==80)
// 80057E20: using guessed type int __fastcall spu_setInTransfer(_DWORD);
// 80057E48: using guessed type int spu_getInTransfer(void);
// 8005B348: using guessed type int __fastcall SpuMalloc(_DWORD, _DWORD, _DWORD, _DWORD);
// 8006E798: using guessed type int dword_8006E798[16];
// 8006E7D8: using guessed type int dword_8006E7D8[16];
// 8006E820: using guessed type int dword_8006E820[16];
// 8006E862: using guessed type __int16 word_8006E862;
// 8006E8B0: using guessed type int dword_8006E8B0[16];
// 8006E8F0: using guessed type __int16 word_8006E8F0;
// 8006E8F8: using guessed type int dword_8006E8F8[18];

//----- (8005B668) --------------------------------------------------------
int __fastcall sub_8005B668(int a1)
{
  new_card();
  return card_write(a1, 63, 0);
}
// 8005B638: using guessed type int __fastcall card_write(_DWORD, _DWORD, _DWORD);
// 8005B658: using guessed type int new_card(void);

//----- (8005B774) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8005B774(int a1, int a2, int a3, int a4)
{
  int v8; // $a0
  int v9; // $a0
  int result; // $v0

  remove_ChgclrPAD();
  EnterCriticalSection(v8);
  patch_pad();
  ExitCriticalSection();
  ChangeClearPAD(0);
  sub_8005B8FC(v9);
  PAD_init2(a1, a2, a3, a4);
  result = 1;
  dword_80060868 = 1;
  return result;
}
// 8005B7E0: write access to const memory at 80060868 has been detected
// 8005B7A0: variable 'v8' is possibly undefined
// 8005B7C0: variable 'v9' is possibly undefined
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8004B48C: using guessed type int __fastcall ChangeClearPAD(_DWORD);
// 8005BA88: using guessed type int __fastcall PAD_init2(_DWORD, _DWORD, _DWORD, _DWORD);
// 8005BAC0: using guessed type int patch_pad(void);
// 8005BB38: using guessed type int remove_ChgclrPAD(void);
// 80060868: using guessed type int dword_80060868;

//----- (8005B804) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int __fastcall sub_8005B804(int a1, int a2, int a3, int a4)
{
  int v8; // $a0
  int v9; // $a0
  int result; // $v0

  remove_ChgclrPAD();
  EnterCriticalSection(v8);
  patch_pad();
  ExitCriticalSection();
  ChangeClearPAD(0);
  sub_8005B8FC(v9);
  InitPAD2(a1, a2, a3, a4);
  result = 1;
  dword_80060868 = 1;
  return result;
}
// 8005B870: write access to const memory at 80060868 has been detected
// 8005B830: variable 'v8' is possibly undefined
// 8005B850: variable 'v9' is possibly undefined
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8004B48C: using guessed type int __fastcall ChangeClearPAD(_DWORD);
// 8005BA58: using guessed type int __fastcall InitPAD2(_DWORD, _DWORD, _DWORD, _DWORD);
// 8005BAC0: using guessed type int patch_pad(void);
// 8005BB38: using guessed type int remove_ChgclrPAD(void);
// 80060868: using guessed type int dword_80060868;

//----- (8005B894) --------------------------------------------------------
int sub_8005B894()
{
  StartPAD2();
  ChangeClearPAD(0);
  EnablePAD();
  return 1;
}
// 8004B48C: using guessed type int __fastcall ChangeClearPAD(_DWORD);
// 8005BA68: using guessed type int StartPAD2(void);
// 8005BA98: using guessed type int EnablePAD(void);

//----- (8005B8C4) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
int sub_8005B8C4()
{
  int result; // $v0

  DisablePAD();
  StopPAD2();
  result = sub_8005B974();
  dword_80060868 = 0;
  return result;
}
// 8005B8E4: write access to const memory at 80060868 has been detected
// 8005BA78: using guessed type int StopPAD2(void);
// 8005BAAC: using guessed type int DisablePAD(void);
// 80060868: using guessed type int dword_80060868;

//----- (8005B8FC) --------------------------------------------------------
int __fastcall sub_8005B8FC(int a1)
{
  EnterCriticalSection(a1);
  dword_8006EA4C = (int)sub_8005B9AC;
  dword_8006EA50 = (int)sub_8005BA14;
  dword_8006EA48 = 0;
  dword_8006EA54 = 0;
  sub_80049C28(1, &dword_8006EA48);
  sub_80049C18(1, &dword_8006EA48);
  ExitCriticalSection();
  return 1;
}
// 80048C38: using guessed type int __fastcall EnterCriticalSection(_DWORD);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 80049C18: using guessed type int __fastcall sub_80049C18(_DWORD, _DWORD);
// 80049C28: using guessed type int __fastcall sub_80049C28(_DWORD, _DWORD);
// 8006EA48: using guessed type int dword_8006EA48;
// 8006EA4C: using guessed type int dword_8006EA4C;
// 8006EA50: using guessed type int dword_8006EA50;
// 8006EA54: using guessed type int dword_8006EA54;

//----- (8005B974) --------------------------------------------------------
int sub_8005B974()
{
  EnterCriticalSection();
  sub_80049C28(1, &dword_8006EA48);
  ExitCriticalSection();
  return 1;
}
// 80048C38: using guessed type int EnterCriticalSection(void);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 80049C28: using guessed type int __fastcall sub_80049C28(_DWORD, _DWORD);
// 8006EA48: using guessed type int dword_8006EA48;

//----- (8005B9AC) --------------------------------------------------------
int sub_8005B9AC()
{
  int result; // $v0
  int i; // [sp+0h] [-10h]

  MEMORY[0x1F80104A] = 0;
  for ( i = 9; i != -1; --i )
    result = 0;
  return result;
}

//----- (8005BA14) --------------------------------------------------------
BOOL sub_8005BA14()
{
  BOOL result; // $v0

  result = 0;
  if ( (MEMORY[0x1F801074] & 1) != 0 )
    return (MEMORY[0x1F801070] & 1) != 0;
  return result;
}

//----- (8005BBD8) --------------------------------------------------------
// write access to const memory has been detected, the output may be wrong!
void sub_8005BBD8()
{
  int v0; // $ra
  int v1; // $v0
  int *v2; // $t2
  int v3; // $v1

  dword_80060B50 = v0;
  EnterCriticalSection();
  v1 = *(_DWORD *)(MEMORY[0xB0]() + 24);
  v2 = dword_8005BC40;
  do
  {
    v3 = *v2++;
    v1 += 4;
    *(_DWORD *)(v1 + 108) = v3;
  }
  while ( v2 != dword_8005BC4C );
  FlushCache();
  ExitCriticalSection();
  JUMPOUT(0);
}
// 8005BBD8: write access to const memory at 80060B50 has been detected
// 8005BC38: control flows out of bounds to 0
// 8005BBD8: variable 'v0' is possibly undefined
// 80048B78: using guessed type int FlushCache(void);
// 80048C38: using guessed type int EnterCriticalSection(void);
// 80048C48: using guessed type int ExitCriticalSection(void);
// 8005BC40: using guessed type int dword_8005BC40[3];
// 8005BC4C: using guessed type int dword_8005BC4C[3];
// 80060B50: using guessed type int dword_80060B50;

//----- (8005D370) --------------------------------------------------------
void __fastcall sub_8005D370(int a1, int a2, _DWORD *_$A2)
{
  int v3; // $s5
  int v4; // $t8
  int v5; // $t9
  int v6; // $ra
  int v7; // $v1
  int v9; // $gp
  _DWORD *v10; // $t8
  int *v11; // $s7
  int v12; // $t4
  int v13; // $s3
  int v14; // $s4
  _DWORD *v15; // $a3
  int v16; // $a0
  int v17; // $a1
  _BYTE *v18; // $a2
  int v19; // $t9
  int v20; // $a0
  int v21; // $a0
  int v22; // $a1
  int v23; // $t9
  int v24; // $a0
  int v28; // $s5
  int v30; // $v1
  int v31; // $a3
  int v32; // $t4
  int v36; // $s5
  int v38; // $v1
  int v39; // $a3
  int v40; // $t4
  int v44; // $s5
  int v46; // $v1
  int v47; // $a3
  int v48; // $t4
  int v53; // $gp
  int v54; // $s2
  _DWORD *v55; // $a3
  int v56; // $s1
  int v58; // $t8
  int v59; // $t4
  int v60; // $t5
  int v61; // $t6
  int v62; // $t7
  int v64; // $v0
  bool v65; // dc
  int v66; // $v0
  int v67; // $v0
  int v69; // $t0
  int v71; // $t1
  int v72; // $t2
  int v73; // $t3
  int *v74; // $s7
  int v75; // $t8
  int v76; // $t4
  int v77; // $t5
  int v78; // $t6
  int v79; // $t7
  int v81; // $v0
  int v82; // $v0
  int v83; // $v0
  int v85; // $t0
  int v87; // $t1
  int v88; // $t2
  int v89; // $t3
  int v90; // $ra
  _BYTE v91[16]; // [sp-10h] [-88h] BYREF
  int v92; // [sp+18h] [-60h] BYREF
  _BYTE v93[16]; // [sp+40h] [-38h] BYREF
  int v94; // [sp+70h] [-8h]
  int v95; // [sp+74h] [-4h]

  v94 = v4;
  v95 = v5;
  v7 = 528482304;
  MEMORY[0x1F800000] = v93;
  MEMORY[0x1F800060] = v6;
  MEMORY[0x1F800084] = a1;
  MEMORY[0x1F80006C] = _$A2 + 80;
  __asm { lwc2    $8, 0xA0($a2) }
  v9 = _$A2[78];
  MEMORY[0x1F800070] = _$A2[79];
  v10 = (_DWORD *)_$A2[3];
  v11 = *(int **)(a2 + 8);
  v12 = v10[5] << 8;
  v13 = v10[6] << 8;
  v14 = v10[7] << 8;
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $7
  }
  __asm { ctc2    $zero, $6 }
  v15 = (_DWORD *)((char *)_$A2 + v9 + 320);
  while ( 1 )
  {
    v16 = v15[6];
    v17 = v15[7];
    *(_DWORD *)(v7 + 128) = v15;
    if ( v16 < 0 )
      v16 = -v16;
    v18 = &v93[v7];
    if ( v17 < 0 )
      v17 = -v17;
    v19 = v16;
    if ( v16 - v17 < 0 )
    {
      v16 = v17;
      v17 = v19;
    }
    v20 = (v16 + (v17 >> 2)) >> 2;
    if ( v20 - 4096 >= 0 )
      v20 = 4096;
    *((_DWORD *)v18 + 42) = v20;
    v21 = v15[14];
    v22 = v15[15];
    if ( v21 < 0 )
      v21 = -v21;
    if ( v22 < 0 )
      v22 = -v22;
    v23 = v21;
    if ( v21 - v22 < 0 )
    {
      v21 = v22;
      v22 = v23;
    }
    v24 = (v21 + (v22 >> 2)) >> 2;
    if ( v24 - 4096 >= 0 )
      v24 = 4096;
    *((_DWORD *)v18 + 43) = v24;
    _$A0 = (*v15 - v12) >> 10;
    _$A1 = (v15[1] - v14) >> 10;
    __asm { mtc2    $a0, $0 }
    __asm { mtc2    $a1, $1 }
    sub_8005D898();
    __asm { mfc2    $a0, $0 }
    v28 = (v3 - v13) >> 11 << 17;
    _$A0 = (unsigned __int16)_$A0 | v28;
    v31 = *(_DWORD *)(v30 + 128);
    __asm { mtc2    $a0, $0 }
    _$A0 = (*(_DWORD *)(v31 + 16) - v32) >> 10;
    _$A1 = (*(_DWORD *)(v31 + 20) - v14) >> 10;
    __asm { mtc2    $a0, $2 }
    __asm { mtc2    $a1, $3 }
    sub_8005D898();
    __asm { mfc2    $a0, $2 }
    v36 = (v28 - v13) >> 11 << 17;
    _$A0 = (unsigned __int16)_$A0 | v36;
    v39 = *(_DWORD *)(v38 + 128);
    __asm { mtc2    $a0, $2 }
    _$A0 = (*(_DWORD *)(v39 + 32) - v40) >> 10;
    _$A1 = (*(_DWORD *)(v39 + 36) - v14) >> 10;
    __asm { mtc2    $a0, $4 }
    __asm { mtc2    $a1, $5 }
    sub_8005D898();
    __asm { mfc2    $a0, $4 }
    v44 = (v36 - v13) >> 11 << 17;
    _$A0 = (unsigned __int16)_$A0 | v44;
    v47 = *(_DWORD *)(v46 + 128);
    __asm { mtc2    $a0, $4 }
    __asm { cop2    0x280030 }
    _$A0 = (*(_DWORD *)(v47 + 48) - v48) >> 10;
    _$A1 = (*(_DWORD *)(v47 + 52) - v14) >> 10;
    __asm
    {
      swc2    $12, 0x88($a2)
      swc2    $17, 0x8C($a2)
      swc2    $13, 0x90($a2)
      swc2    $18, 0x94($a2)
      swc2    $14, 0x98($a2)
      swc2    $19, 0x9C($a2)
      mtc2    $a0, $0
    }
    __asm { mtc2    $a1, $1 }
    sub_8005D898();
    __asm { mfc2    $a0, $0 }
    v3 = (v44 - v13) >> 11 << 17;
    _$A0 = (unsigned __int16)_$A0 | v3;
    __asm { mtc2    $a0, $0 }
    __asm
    {
      cop2    0x180001
      swc2    $14, 0xA0($a2)
      swc2    $19, 0xA4($a2)
    }
    v15 = (_DWORD *)(*(_DWORD *)(v7 + 108) + ((v53 - 64) & 0x1FF));
    if ( (int)&v92 < 0 )
    {
      v54 = -*(_DWORD *)(v7 + 132);
      v55 = v93 + v7 + 32;
      v56 = 0;
      __asm { mtc2    $zero, $6 }
      _$T8 = 2048;
      __asm
      {
        ctc2    $t8, $21
        ctc2    $t8, $22
        ctc2    $t8, $23
      }
      while ( 1 )
      {
        v58 = *(_DWORD *)(v7 + 112) + 16 * (v54 & 7);
        v59 = *(_DWORD *)(v58 + 4);
        v60 = *(_DWORD *)(v58 + 8);
        v61 = *(unsigned __int16 *)(v58 + 12);
        v62 = *(unsigned __int16 *)(v58 + 14);
        _$A2 = v55[52] - v56;
        if ( _$A2 < 0 )
          _$A2 = 0;
        __asm { mtc2    $a2, $8 }
        __asm { cop2    0x780010 }
        v64 = 1904 - ((v55[47] + v55[35] + v55[47] + v55[37]) >> 5);
        v65 = v64 >= 0;
        v66 = 4 * v64;
        if ( !v65 )
          v66 = 0;
        v65 = v66 - 8188 <= 0;
        v67 = v66 + a2;
        if ( !v65 )
          v67 = a2 + 8188;
        __asm { mfc2    $t9, $22 }
        v69 = v55[44];
        _$A2 = v55[42] - v56 - 512;
        v71 = v55[46];
        if ( _$A2 < 0 )
          _$A2 = 0;
        __asm { mtc2    $a2, $8 }
        v72 = v55[34];
        v73 = v55[36];
        __asm { cop2    0x780010 }
        v11[1] = 1040187392;
        v11[2] = v69;
        v11[3] = v59;
        v11[4] = _$T9;
        v11[5] = v71;
        v11[6] = v60;
        v11[7] = 0;
        v11[8] = v72;
        v11[9] = v61;
        __asm { swc2    $22, 0x28($s7) }
        v11[11] = v73;
        v11[12] = v62;
        *v11 = *(_DWORD *)(v67 + 32) | 0xC000000;
        *(_DWORD *)(v67 + 32) = (unsigned int)v11 & 0xFFFFFF;
        v74 = v11 + 13;
        v75 = *(_DWORD *)(v7 + 112) + 16 * (((_BYTE)v54 + 4) & 7);
        v76 = *(_DWORD *)(v75 + 4);
        v77 = *(_DWORD *)(v75 + 8);
        v78 = *(unsigned __int16 *)(v75 + 12);
        v79 = *(unsigned __int16 *)(v75 + 14);
        _$A2 = v55[53] - v56;
        if ( _$A2 < 0 )
          _$A2 = 0;
        __asm { mtc2    $a2, $8 }
        __asm { cop2    0x780010 }
        v81 = 1904 - ((v55[49] + v55[39] + v55[51] + v55[41]) >> 5);
        v65 = v81 >= 0;
        v82 = 4 * v81;
        if ( !v65 )
          v82 = 0;
        v65 = v82 - 8188 <= 0;
        v83 = v82 + a2;
        if ( !v65 )
          v83 = a2 + 8188;
        __asm { mfc2    $t9, $22 }
        v85 = v55[48];
        _$A2 = v55[43] - v56 - 512;
        v87 = v55[50];
        if ( _$A2 < 0 )
          _$A2 = 0;
        __asm { mtc2    $a2, $8 }
        v88 = v55[38];
        v89 = v55[40];
        __asm { cop2    0x780010 }
        v74[1] = 1040187392;
        v74[2] = v85;
        v74[3] = v76;
        v74[4] = _$T9;
        v74[5] = v87;
        v74[6] = v77;
        v74[7] = 0;
        v74[8] = v88;
        v74[9] = v78;
        __asm { swc2    $22, 0x28($s7) }
        v74[11] = v89;
        v74[12] = v79;
        *v74 = *(_DWORD *)(v83 + 32) | 0xC000000;
        *(_DWORD *)(v83 + 32) = (unsigned int)v74 & 0xFFFFFF;
        v11 = v74 + 13;
        LOBYTE(v54) = v54 + 1;
        v56 += 512;
        v55 = &v91[v7];
        if ( (int)v91 < 0 )
        {
          v90 = *(_DWORD *)(v7 + 96);
          *(_DWORD *)(a2 + 8) = v11;
          __asm { jr      $ra }
        }
      }
    }
  }
}
// 8005D394: variable 'v4' is possibly undefined
// 8005D398: variable 'v5' is possibly undefined
// 8005D3AC: variable 'v6' is possibly undefined
// 8005D420: variable 'v7' is possibly undefined
// 8005D4C4: variable 'v12' is possibly undefined
// 8005D4E4: variable 'v3' is possibly undefined
// 8005D4F8: variable 'v30' is possibly undefined
// 8005D508: variable 'v32' is possibly undefined
// 8005D53C: variable 'v38' is possibly undefined
// 8005D54C: variable 'v40' is possibly undefined
// 8005D580: variable 'v46' is possibly undefined
// 8005D594: variable 'v48' is possibly undefined
// 8005D5FC: variable 'v53' is possibly undefined

//----- (8005D898) --------------------------------------------------------
int sub_8005D898()
{
  int v0; // $v1
  int v1; // $t8
  int v2; // $t9
  int v3; // $ra
  unsigned int v4; // $t8
  unsigned int v5; // $t9
  int v6; // $t0
  unsigned int v7; // $t1
  int v8; // $v1

  *(_DWORD *)(v0 + 100) = v3;
  v4 = v1 >> 8;
  v5 = v2 >> 8;
  v6 = v4 >> 10;
  v7 = v5 >> 10 << 8;
  if ( (int)((v4 & 0x3FF) + (v5 & 0x3FF) - 1024) >= 0 )
    sub_80044F74(v6, v7 + 256, v6 + 1, v7);
  else
    sub_80044F74(v6 + 1, v7, v6, v7 + 256);
  return (*(int (**)(void))(v8 + 100))();
}
// 8005D898: variable 'v3' is possibly undefined
// 8005D898: variable 'v0' is possibly undefined
// 8005D89C: variable 'v1' is possibly undefined
// 8005D8A0: variable 'v2' is possibly undefined
// 8005D8FC: variable 'v8' is possibly undefined

//----- (8005D968) --------------------------------------------------------
void __fastcall sub_8005D968(int a1)
{
  int v1; // $s5
  int v2; // $s7
  int v3; // $t8
  int v4; // $t9
  int v5; // $fp
  int v6; // $ra
  int v7; // $a1
  int v8; // $s0
  __int16 v9; // $v0
  __int16 v10; // $a1
  int v11; // $t3
  _DWORD *v12; // $v1
  int v14; // $t7
  int v15; // $t8
  int v16; // $gp
  int v17; // $gp
  _DWORD *v18; // $t6
  int v19; // $t5
  int v20; // $t9
  int v21; // $t8
  int v22; // $t9
  _DWORD *v23; // $a2
  int v24; // $t2
  int v25; // $t8
  int v26; // $a3
  int v27; // $t8
  int v28; // $a3
  int v29; // $t9
  _DWORD *v30; // $v1
  int v31; // $gp
  _DWORD *v32; // $a3
  int v33; // $a1
  int v34; // $t8
  int v35; // $t9
  int v36; // $lo
  int v37; // $a1
  int v38; // $a0
  int v39; // $a1
  int v40; // $a0
  int v41; // $a1
  int v42; // $a0
  int v43; // $a1
  int *v44; // $a2
  int v45; // $t8
  int v46; // $t9
  int v47; // $a0
  int v48; // $a1
  int v49; // $t8
  int v50; // $t9
  int v51; // $a0
  int v52; // $a1
  int v53; // $t9
  int v54; // $t9
  int v55; // $t9
  int v56; // $t9
  int v57; // $ra
  char v58; // [sp-1h] [-39h] BYREF
  int v59; // [sp+0h] [-38h] BYREF
  int v60; // [sp+30h] [-8h]
  int v61; // [sp+34h] [-4h]

  v60 = v3;
  v61 = v4;
  MEMORY[0x1F800000] = &v59;
  MEMORY[0x1F800060] = v6;
  v7 = *(_DWORD *)(a1 + 840);
  MEMORY[0x1F800068] = a1;
  v8 = *(_DWORD *)(v7 + 104);
  v9 = sub_800422A0(*(_DWORD *)(v7 + 112));
  v11 = (54241 * v10) >> 12;
  _$A0 = v12[26];
  v15 = ((12636 * v9) >> 12) + v11 + v14;
  v16 = *(_DWORD *)(_$A0 + 312);
  v12[27] = _$A0 + 320;
  v17 = (v16 + 64) & 0x1FF;
  *(_DWORD *)(_$A0 + 312) = v17;
  v18 = (_DWORD *)(v17 + _$A0 + 320);
  v18[8] = v15;
  v18[12] = v15;
  v19 = (54241 * v9) >> 12;
  v20 = ((-12636 * v10) >> 12) + v19 + v8;
  v18[9] = v20;
  v18[13] = v20;
  v21 = ((-12636 * v9) >> 12) + v11 + v14;
  *v18 = v21;
  v18[4] = v21;
  v22 = ((12636 * v10) >> 12) + v19 + v8;
  v18[1] = v22;
  v23 = *(_DWORD **)(_$A0 + 840);
  v18[5] = v22;
  v24 = (136 * v23[65]) >> 13;
  v25 = (v24 * v10) >> 12;
  v18[7] = v25;
  v26 = (v24 * v9) >> 12;
  v18[14] = v26;
  v27 = -v25;
  v28 = -v26;
  v18[15] = v27;
  v18[6] = v28;
  v27 >>= 5;
  v28 >>= 5;
  v18[11] = v27;
  v18[2] = v28;
  v18[3] = -v27;
  v18[10] = -v28;
  v29 = v23[29];
  v12[30] = v23[25];
  __asm { lwc2    $8, 0xA0($a0) }
  v12[31] = v29 << 20 >> 18;
  __asm
  {
    ctc2    $zero, $5
    ctc2    $zero, $7
  }
  __asm { ctc2    $zero, $6 }
  sub_8005D898();
  v32 = (_DWORD *)(v30[27] + v31);
  if ( ((v30[30] - v1) >> 8) - 100 > 0 || ((v30[30] - v1) >> 8) + 500 < 0 )
  {
    v44 = (int *)(((v31 - 64) & 0x1FF) + v30[27]);
    v45 = v44[2] >> 1;
    v46 = v44[3] >> 1;
    if ( v45 == -1 )
      v45 = 0;
    v47 = v44[6] >> 1;
    if ( v46 == -1 )
      v46 = 0;
    v48 = v44[7] >> 1;
    if ( v47 == -1 )
      v47 = 0;
    v32[2] = v45;
    if ( v48 == -1 )
      v48 = 0;
    v32[3] = v46;
    v32[6] = v47;
    v32[7] = v48;
    v49 = v44[10] >> 1;
    v50 = v44[11] >> 1;
    if ( v49 == -1 )
      v49 = 0;
    v51 = v44[14] >> 1;
    if ( v50 == -1 )
      v50 = 0;
    v52 = v44[15] >> 1;
    if ( v51 == -1 )
      v51 = 0;
    v32[10] = v49;
    if ( v52 == -1 )
      v52 = 0;
    v32[11] = v50;
    v32[14] = v51;
    v32[15] = v52;
  }
  else
  {
    v33 = v30[31];
    v34 = v33 + 4096;
    v35 = 4096 - v33;
    v36 = v32[2] * (v33 + 4096);
    v37 = v32[3];
    v32[2] = v36 >> 12;
    v38 = v32[6];
    v32[3] = (v37 * v34) >> 12;
    v39 = v32[7];
    v32[6] = (v38 * v34) >> 12;
    v40 = v32[10];
    v32[7] = (v39 * v34) >> 12;
    v41 = v32[11];
    v32[10] = (v40 * v35) >> 12;
    v42 = v32[14];
    v32[11] = (v41 * v35) >> 12;
    v43 = v32[15];
    v32[14] = (v42 * v35) >> 12;
    v32[15] = (v43 * v35) >> 12;
  }
  do
  {
    v53 = v32[1] + v32[3];
    *v32 += v32[2];
    v32[1] = v53;
    v54 = v32[5] + v32[7];
    v32[4] += v32[6];
    v32[5] = v54;
    v55 = v32[9] + v32[11];
    v32[8] += v32[10];
    v32[9] = v55;
    v56 = v32[13] + v32[15];
    v32[12] += v32[14];
    v32[13] = v56;
    v31 = (v31 - 64) & 0x1FF;
    v32 = (_DWORD *)(v30[27] + v31);
  }
  while ( (int)&v58 >= 0 );
  v57 = v30[24];
  *(_DWORD *)(v5 + 8) = v2;
  __asm { jr      $ra }
}
// 8005D98C: variable 'v3' is possibly undefined
// 8005D990: variable 'v4' is possibly undefined
// 8005D9A4: variable 'v6' is possibly undefined
// 8005D9D4: variable 'v10' is possibly undefined
// 8005D9F4: variable 'v12' is possibly undefined
// 8005DA00: variable 'v14' is possibly undefined
// 8005DB5C: variable 'v30' is possibly undefined
// 8005DB64: variable 'v31' is possibly undefined
// 8005DB60: variable 'v1' is possibly undefined
// 8005DD88: variable 'v2' is possibly undefined
// 8005DD88: variable 'v5' is possibly undefined

// nfuncs=979 queued=708 decompiled=708 lumina nreq=0 worse=0 better=0
#error "There were 11 decompilation failure(s) on 708 function(s)"
